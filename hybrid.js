(function (exports) {
    'use strict';

    function getCookie(key) {
        let result = new RegExp('(?:^|; )' + encodeURIComponent(key) + '=([^;]*)').exec(document.cookie);
        return result ? decodeURIComponent(result[1]) : '';
    }

    function getMetatagContent(name) {
        var elem = document.getElementsByName(name)[0];
        if (elem) {
            return elem.getAttribute('content');
        }
        return '';
    }
    self.cdApi = {
        getCustomerSessionID: function (callback) {
            /**
             * providing the customer session id by reading it from a cookie named 'bcCsid'.
             * We are using our own read cookie function. JQuery can be used instead
             */
            callback(getMetatagContent('customerSessionId'));
        },

        configurationKeys: {
            //  serverURL: 'serverURL',
            logServerURL: 'logServerURL',
            enableStartupCustomerSessionId: 'enableStartupCustomerSessionId',
            collectionSettings: 'collectionSettings',
        },

        getConfigurations: function (callback) {
            var configurations = {};

            //  configurations[cdApi.configurationKeys.serverURL] = 'https://wup-4ff4f23f.eu.v2.we-stats.com/api/v4/wup?cid=dummy';
            configurations['wupServerURL'] = 'https://wup-4ff4f23f.eu.v2.we-stats.com/api/v4/wup?cid=dummy';
            configurations[cdApi.configurationKeys.logServerURL] =
                'https://logs-4ff4f23f.eu.v2.we-stats.com/api/v1/sendLogs';
            configurations[cdApi.configurationKeys.enableStartupCustomerSessionId] = true;

            configurations[cdApi.configurationKeys.collectionSettings] = {
                mode: {
                    agentType: 'secondary',
                    collectionMode: 'lean',
                },
            };
            callback(configurations);
        },

        changeContext: function (contextName) {
            window.postMessage(
                {
                    type: 'ContextChange',
                    context: contextName,
                },
                window.location.href
            );
        },
        startNewSession: function (csid) {
            window.postMessage(
                {
                    type: 'ResetSession',
                    resetReason: 'customerApi',
                    csid,
                },
                window.location.href
            );
        },

        setCustomerSessionId: function (csid) {
            window.postMessage(
                {
                    type: 'cdSetCsid',
                    csid: csid,
                },
                window.location.href
            );
        },

        setCustomerBrand: function (brand) {
            window.postMessage(
                {
                    type: 'cdSetCustomerBrand',
                    brand: brand,
                },
                window.location.href
            );
        },
    };
})(self);
var cdwpb;
!(function () {
    var r = {
            627: function (e, t, r) {
                'use strict';
                function apply(e) {
                    function Tf(e, t) {
                        for (var r = 0, n = i.length, o = []; r < n; r++) i[r][e] == t && o.push(i[r]);
                        return o;
                    }
                    function Uf(e, t) {
                        for (var r, n = i.length; n--; )
                            (r = i[n]).entryType != e || (void 0 !== t && r.name != t) || i.splice(n, 1);
                    }
                    var t = Date.now ? Date.now() : +new Date(),
                        n = e.performance || {},
                        i = [],
                        o = {};
                    n.now ||
                        (n.now =
                            n.webkitNow ||
                            n.mozNow ||
                            n.msNow ||
                            function () {
                                return (Date.now ? Date.now() : +new Date()) - t;
                            }),
                        n.mark ||
                            (n.mark =
                                n.webkitMark ||
                                function (e) {
                                    var t = { name: e, entryType: 'mark', startTime: n.now(), duration: 0 };
                                    i.push(t), (o[e] = t);
                                }),
                        n.measure ||
                            (n.measure =
                                n.webkitMeasure ||
                                function (e, t, r) {
                                    if (void 0 !== r && void 0 === o[r])
                                        throw new SyntaxError(
                                            "Failed to execute 'measure' on 'Performance': The mark '" +
                                                r +
                                                "' does not exist."
                                        );
                                    if (void 0 !== t && void 0 === o[t])
                                        throw new SyntaxError(
                                            "Failed to execute 'measure' on 'Performance': The mark '" +
                                                t +
                                                "' does not exist."
                                        );
                                    (t = o[t] ? o[t].startTime : 0),
                                        (r = o[r] ? o[r].startTime : n.now()),
                                        i.push({ name: e, entryType: 'measure', startTime: t, duration: r - t });
                                }),
                        n.getEntriesByType ||
                            (n.getEntriesByType =
                                n.webkitGetEntriesByType ||
                                function (e) {
                                    return Tf('entryType', e);
                                }),
                        n.getEntriesByName ||
                            (n.getEntriesByName =
                                n.webkitGetEntriesByName ||
                                function (e) {
                                    return Tf('name', e);
                                }),
                        n.clearMarks ||
                            (n.clearMarks =
                                n.webkitClearMarks ||
                                function (e) {
                                    Uf('mark', e);
                                }),
                        n.clearMeasures ||
                            (n.clearMeasures =
                                n.webkitClearMeasures ||
                                function (e) {
                                    Uf('measure', e);
                                }),
                        (e.performance = n),
                        'function' == typeof define &&
                            r.amdO &&
                            define('performance', [], function () {
                                return n;
                            });
                }
                function _typeof(e) {
                    return (_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function Polyfills_apply() {
                    var n, t, r;
                    function Wg(e) {
                        return 'function' == typeof e || '[object Function]' === t.call(e);
                    }
                    function Xg(e) {
                        return (
                            (e = Number(e)),
                            isNaN(e) ? 0 : 0 !== e && isFinite(e) ? (0 < e ? 1 : -1) * Math.floor(Math.abs(e)) : e
                        );
                    }
                    function Zg(e) {
                        return (e = Xg(e)), Math.min(Math.max(e, 0), r);
                    }
                    Object.getOwnPropertyNames ||
                        (Object.getOwnPropertyNames = function (e) {
                            var t,
                                r = [];
                            for (t in e) Object.prototype.hasOwnProperty.call(e, t) && r.push(t);
                            return r;
                        }),
                        (Object.defineProperty &&
                            (function () {
                                try {
                                    return Object.defineProperty({}, 'x', {}), 1;
                                } catch (e) {
                                    return;
                                }
                            })()) ||
                            ((n = Object.defineProperty),
                            (Object.defineProperty = function (e, t, r) {
                                if (n)
                                    try {
                                        return n(e, t, r);
                                    } catch (e) {}
                                if (e !== Object(e)) throw TypeError('Object.defineProperty called on non-object');
                                return (
                                    Object.prototype.__defineGetter__ &&
                                        'get' in r &&
                                        Object.prototype.__defineGetter__.call(e, t, r.get),
                                    Object.prototype.__defineSetter__ &&
                                        'set' in r &&
                                        Object.prototype.__defineSetter__.call(e, t, r.set),
                                    'value' in r && (e[t] = r.value),
                                    e
                                );
                            })),
                        'function' != typeof Object.defineProperties &&
                            (Object.defineProperties = function (e, t) {
                                if (e !== Object(e)) throw TypeError('Object.defineProperties called on non-object');
                                for (var r in t)
                                    Object.prototype.hasOwnProperty.call(t, r) && Object.defineProperty(e, r, t[r]);
                                return e;
                            }),
                        'function' != typeof Object.create &&
                            (Object.create = function (e, t) {
                                if ('object' !== _typeof(e)) throw TypeError();
                                function Ctor() {}
                                Ctor.prototype = e;
                                var r = new Ctor();
                                if ((e && (r.constructor = Ctor), void 0 !== t)) {
                                    if (t !== Object(t)) throw TypeError();
                                    Object.defineProperties(r, t);
                                }
                                return r;
                            }),
                        Object.keys ||
                            (Object.keys = function (e) {
                                if (e !== Object(e)) throw TypeError('Object.keys called on non-object');
                                var t,
                                    r = [];
                                for (t in e) Object.prototype.hasOwnProperty.call(e, t) && r.push(t);
                                return r;
                            }),
                        Array.prototype.forEach ||
                            (Array.prototype.forEach = function (e, t) {
                                var r, n;
                                if (null == this) throw new TypeError(' this is null or not defined');
                                var o,
                                    i = Object(this),
                                    s = i.length >>> 0;
                                if ('function' != typeof e) throw new TypeError(e + ' is not a function');
                                for (1 < arguments.length && (r = t), n = 0; n < s; )
                                    n in i && ((o = i[n]), e.call(r, o, n, i)), n++;
                            }),
                        Array.isArray ||
                            (Array.isArray = function (e) {
                                return '[object Array]' === Object.prototype.toString.call(e);
                            }),
                        Function.prototype.bind ||
                            (Function.prototype.bind = function (e) {
                                if ('function' != typeof this) throw TypeError('Bind must be called on a function');
                                function Ug() {
                                    return n.apply(
                                        this.prototype && this instanceof nop ? this : e,
                                        r.concat(t.call(arguments))
                                    );
                                }
                                var t = [].slice,
                                    r = t.call(arguments, 1),
                                    n = this;
                                function nop() {}
                                return (nop.prototype = n.prototype), (Ug.prototype = new nop()), Ug;
                            }),
                        'function' != typeof String.prototype.trim &&
                            (String.prototype.trim = function () {
                                return this.replace(/^\s+|\s+$/g, '');
                            }),
                        Array.from ||
                            (Array.from =
                                ((t = Object.prototype.toString),
                                (r = Math.pow(2, 53) - 1),
                                function from(e) {
                                    var t = Object(e);
                                    if (null == e)
                                        throw new TypeError(
                                            'Array.from requires an array-like object - not null or undefined'
                                        );
                                    var r,
                                        n = 1 < arguments.length ? arguments[1] : void 0;
                                    if (void 0 !== n) {
                                        if (!Wg(n))
                                            throw new TypeError(
                                                'Array.from: when provided, the second argument must be a function'
                                            );
                                        2 < arguments.length && (r = arguments[2]);
                                    }
                                    for (
                                        var o,
                                            i = Zg(t.length),
                                            s = Wg(this) ? Object(new this(i)) : new Array(i),
                                            a = 0;
                                        a < i;

                                    )
                                        (o = t[a]),
                                            (s[a] = n ? (void 0 === r ? n(o, a) : n.call(r, o, a)) : o),
                                            (a += 1);
                                    return (s.length = i), s;
                                })),
                        Array.prototype.find ||
                            Object.defineProperty(Array.prototype, 'find', {
                                value: function value(e) {
                                    if (null == this) throw new TypeError('"this" is null or not defined');
                                    var t = Object(this),
                                        r = t.length >>> 0;
                                    if ('function' != typeof e) throw new TypeError('predicate must be a function');
                                    for (var n = arguments[1], o = 0; o < r; ) {
                                        var i = t[o];
                                        if (e.call(n, i, o, t)) return i;
                                        o++;
                                    }
                                },
                                configurable: !0,
                                writable: !0,
                            }),
                        Array.prototype.includes ||
                            Object.defineProperty(Array.prototype, 'includes', {
                                value: function value(e, t) {
                                    if (null == this) throw new TypeError('"this" is null or not defined');
                                    var r = Object(this),
                                        n = r.length >>> 0;
                                    if (0 == n) return !1;
                                    var t = 0 | t,
                                        o = Math.max(0 <= t ? t : n - Math.abs(t), 0);
                                    for (; o < n; ) {
                                        if (
                                            (function sameValueZero(e, t) {
                                                return (
                                                    e === t ||
                                                    ('number' == typeof e &&
                                                        'number' == typeof t &&
                                                        isNaN(e) &&
                                                        isNaN(t))
                                                );
                                            })(r[o], e)
                                        )
                                            return !0;
                                        o++;
                                    }
                                    return !1;
                                },
                                configurable: !0,
                                writable: !0,
                            }),
                        Element.prototype.matches ||
                            (Element.prototype.matches =
                                Element.prototype.matchesSelector ||
                                Element.prototype.mozMatchesSelector ||
                                Element.prototype.msMatchesSelector ||
                                Element.prototype.oMatchesSelector ||
                                Element.prototype.webkitMatchesSelector ||
                                function (e) {
                                    for (
                                        var t = (this.document || this.ownerDocument).querySelectorAll(e), r = t.length;
                                        0 <= --r && t.item(r) !== this;

                                    );
                                    return -1 < r;
                                }),
                        'function' != typeof Object.assign &&
                            Object.defineProperty(Object, 'assign', {
                                value: function assign(e, t) {
                                    if (null == e) throw new TypeError('Cannot convert undefined or null to object');
                                    for (var r = Object(e), n = 1; n < arguments.length; n++) {
                                        var o = arguments[n];
                                        if (null != o)
                                            for (var i in o)
                                                Object.prototype.hasOwnProperty.call(o, i) && (r[i] = o[i]);
                                    }
                                    return r;
                                },
                                writable: !0,
                                configurable: !0,
                            }),
                        String.prototype.startsWith ||
                            (String.prototype.startsWith = function (e, t) {
                                return this.substr(!t || t < 0 ? 0 : +t, e.length) === e;
                            }),
                        String.prototype.includes ||
                            (String.prototype.includes = function (e, t) {
                                if (e instanceof RegExp) throw TypeError('first argument must not be a RegExp');
                                return void 0 === t && (t = 0), -1 !== this.indexOf(e, t);
                            }),
                        (self.MutationObserver =
                            window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver);
                }
                function WeakMapPolyfill_typeof(e) {
                    return (WeakMapPolyfill_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function WeakMapPolyfill_apply(e) {
                    var r, n;
                    function isObject(e) {
                        return Object(e) === e;
                    }
                    function checkInstance(e, t) {
                        if (!isObject(e) || !r.call(e, '_id'))
                            throw new TypeError(
                                t + ' method called on incompatible receiver ' + WeakMapPolyfill_typeof(e)
                            );
                    }
                    function rand() {
                        return Math.random().toString().substring(2);
                    }
                    function WeakMap() {
                        if (void 0 === this) throw new TypeError("Constructor WeakMap requires 'new'");
                        if (
                            (n(
                                this,
                                '_id',
                                (function genId(e) {
                                    return e + '_' + rand() + '.' + rand();
                                })('_WeakMap')
                            ),
                            0 < arguments.length)
                        )
                            throw new TypeError('WeakMap iterable is not supported');
                    }
                    e.WeakMap ||
                        ((r = Object.prototype.hasOwnProperty),
                        (n = function defineProperty(e, t, r) {
                            Object.defineProperty
                                ? Object.defineProperty(e, t, { configurable: !0, writable: !0, value: r })
                                : (e[t] = r);
                        }),
                        (e.WeakMap =
                            (n(WeakMap.prototype, 'delete', function (e) {
                                if ((checkInstance(this, 'delete'), !isObject(e))) return !1;
                                var t = e[this._id];
                                return !(!t || t[0] !== e) && (delete e[this._id], !0);
                            }),
                            n(WeakMap.prototype, 'get', function (e) {
                                if ((checkInstance(this, 'get'), isObject(e))) {
                                    var t = e[this._id];
                                    return t && t[0] === e ? t[1] : void 0;
                                }
                            }),
                            n(WeakMap.prototype, 'has', function (e) {
                                if ((checkInstance(this, 'has'), !isObject(e))) return !1;
                                var t = e[this._id];
                                return !(!t || t[0] !== e);
                            }),
                            n(WeakMap.prototype, 'set', function (e, t) {
                                if ((checkInstance(this, 'set'), !isObject(e)))
                                    throw new TypeError('Invalid value used as weak map key');
                                var r = e[this._id];
                                return r && r[0] === e ? (r[1] = t) : n(e, this._id, [e, t]), this;
                            }),
                            n(WeakMap, '_polyfill', !0),
                            WeakMap)));
                }
                r.d(t, {
                    default: function () {
                        return Ai;
                    },
                });
                var o = 'getConfigurations',
                    n = 'client',
                    y = {
                        resetSessionApiThreshold: 'resetSessionApiThreshold',
                        dataWupDispatchRateSettings: 'dataWupDispatchRateSettings',
                        logWupDispatchRateSettings: 'logWupDispatchRateSettings',
                        forceDynamicDataWupDispatchSettings: 'forceDynamicDataWupDispatchSettings',
                        wupStatisticsLogIntervalMs: 'wupStatisticsLogIntervalMs',
                        serverCommunicationSettings: 'serverCommunicationSettings',
                        wupResponseTimeout: 'wupResponseTimeout',
                        wupMessageRequestTimeout: 'wupMessageRequestTimeout',
                        logMessageRequestTimeout: 'logMessageRequestTimeout',
                        collectKeyRegionValue: 'collectKeyRegionValue',
                        crossDomainsList: 'crossDomainsList',
                        crossDomainsTimeout: 'crossDomainsTimeout',
                        isMutationObserver: 'isMutationObserver',
                        isEnabled: 'isEnabled',
                        slaveChannelHandshakeTimeout: 'slaveChannelHandshakeTimeout',
                        slaveAliveMessageInterval: 'slaveAliveMessageInterval',
                        collectCustomElementAttribute: 'collectCustomElementAttribute',
                        customElementAttribute: 'customElementAttribute',
                        enableFramesProcessing: 'enableFramesProcessing',
                        enableSameSiteNoneAndSecureCookies: 'enableSameSiteNoneAndSecureCookies',
                        wupServerURL: 'wupServerURL',
                        logAddress: 'logAddress',
                        shouldMaskClickEventValueField: 'shouldMaskClickEventValueField',
                        isCaptureKeyEvents: 'isCaptureKeyEvents',
                        locationEventsTimeoutMsec: 'locationEventsTimeoutMsec',
                        heartBeatMessageInterval: 'heartBeatMessageInterval',
                        isMotionAroundTouchEnabled: 'isMotionAroundTouchEnabled',
                        motionPaddingAroundTouchMSec: 'motionPaddingAroundTouchMSec',
                        isMotionOnSessionStart: 'isMotionOnSessionStart',
                        motionPaddingOnSessionStartMSec: 'motionPaddingOnSessionStartMSec',
                        isVMDetection: 'isVMDetection',
                        isScrollCollect: 'isScrollCollect',
                        isContextPropsFeature: 'isContextPropsFeature',
                        isCrossDomain: 'isCrossdomain',
                        gyroEventsThreshold: 'gyroEventsThreshold',
                        gyroEventsSamplePeriod: 'gyroEventsSamplePeriod',
                        dataQPassWorkerInterval: 'dataQPassWorkerInterval',
                        accelerometerEventsSamplePeriod: 'accelerometerEventsSamplePeriod',
                        orientationEventsThreshold: 'orientationEventsThreshold',
                        orientationEventsSamplePeriod: 'orientationEventsSamplePeriod',
                        isAudioDetection: 'isAudioDetection',
                        stateChangeEnabled: 'stateChangeEnabled',
                        logLevel: 'logLevel',
                        enableCustomElementsProcessing: 'enableCustomElementsProcessing',
                        keyEventsMaskSpecialChars: 'keyEventsMaskSpecialChars',
                        collectSelectElementBlurAndFocusEvents: 'collectSelectElementBlurAndFocusEvents',
                        allowedUnmaskedValuesList: 'allowedUnmaskedValuesList',
                        enableUnmaskedValues: 'enableUnmaskedValues',
                        wupMessageNumToRetry: 'wupMessageNumToRetry',
                        wupMessageRetryInterval: 'wupMessageRetryInterval',
                        wupIncrementalGrowthBetweenFailures: 'wupIncrementalGrowthBetweenFailures',
                        wupMaxIntervalBetweenFailures: 'wupMaxIntervalBetweenFailures',
                        logMessageNumToRetry: 'logMessageNumToRetry',
                        logMessageRetryInterval: 'logMessageRetryInterval',
                        logIncrementalGrowthBetweenFailures: 'logIncrementalGrowthBetweenFailures',
                        logMaxIntervalBetweenFailures: 'logMaxIntervalBetweenFailures',
                        cdsNumExpirationTime: 'cdsNumExpirationTime',
                        enableCoordinatesMasking: 'enableCoordinatesMasking',
                        maskElementsAttributes: 'maskElementsAttributes',
                        enableAcknowledgeMessageEvents: 'enableAcknowledgeMessageEvents',
                        timeTillClearingElementsBufferQueueTimeout: 'timeTillClearingElementsBufferQueueTimeout',
                        acknowledgeDataDispatchingRate: 'acknowledgeDataDispatchingRate',
                        isChannelSupportsAckMessageLogic: 'isChannelSupportsAckMessageLogic',
                        parentElementSelector: 'parentElementSelector',
                        childElementWithCustomAttribute: 'childElementWithCustomAttribute',
                        elementDataAttribute: 'elementDataAttribute',
                        customButtons: 'customButtons',
                        enableAutoElementId: 'enableAutoElementId',
                        autoElementIdLimit: 'autoElementIdLimit',
                        agentType: 'agentType',
                        collectionMode: 'collectionMode',
                        enableWupMessagesHashing: 'enableWupMessagesHashing',
                        enableStartupCustomerSessionId: 'enableStartupCustomerSessionId',
                    };
                function _defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var i = (function () {
                    function ElementSettings(e) {
                        !(function _classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, ElementSettings),
                            (this._customElementAttribute = e ? e[y.customElementAttribute] : null),
                            (this._attributesToMask = e ? e[y.maskElementsAttributes] : null),
                            (this._keyEventsMaskSpecialChars = e ? e[y.keyEventsMaskSpecialChars] : null);
                    }
                    return (
                        (function _createClass(e, t, r) {
                            t && _defineProperties(e.prototype, t),
                                r && _defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(ElementSettings, [
                            {
                                key: 'getCustomElementAttribute',
                                value: function getCustomElementAttribute() {
                                    return this._customElementAttribute;
                                },
                            },
                            {
                                key: 'getAttributesToMask',
                                value: function getAttributesToMask() {
                                    return this._attributesToMask;
                                },
                            },
                            {
                                key: 'getKeyEventsMaskSpecialChars',
                                value: function getKeyEventsMaskSpecialChars() {
                                    return this._keyEventsMaskSpecialChars;
                                },
                            },
                        ]),
                        ElementSettings
                    );
                })();
                function CustomInputElementSettings_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var s = (function () {
                        function CustomInputElementSettings(e) {
                            !(function CustomInputElementSettings_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, CustomInputElementSettings),
                                (this._parentElementSelector = e ? e[y.parentElementSelector] : null),
                                (this._childElementWithCustomAttribute = e
                                    ? e[y.childElementWithCustomAttribute]
                                    : null),
                                (this._elementDataAttribute = e ? e[y.elementDataAttribute] : null),
                                (this._customButtons = e ? e[y.customButtons] : null);
                        }
                        return (
                            (function CustomInputElementSettings_createClass(e, t, r) {
                                t && CustomInputElementSettings_defineProperties(e.prototype, t),
                                    r && CustomInputElementSettings_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(CustomInputElementSettings, [
                                {
                                    key: 'getParentElementSelector',
                                    value: function getParentElementSelector() {
                                        return this._parentElementSelector;
                                    },
                                },
                                {
                                    key: 'getChildElementWithCustomAttribute',
                                    value: function getChildElementWithCustomAttribute() {
                                        return this._childElementWithCustomAttribute;
                                    },
                                },
                                {
                                    key: 'getElementDataAttribute',
                                    value: function getElementDataAttribute() {
                                        return this._elementDataAttribute;
                                    },
                                },
                                {
                                    key: 'getCustomButtons',
                                    value: function getCustomButtons() {
                                        return this._customButtons;
                                    },
                                },
                            ]),
                            CustomInputElementSettings
                        );
                    })(),
                    a = {
                        wupServerURL: 'wupServerURL',
                        logServerURL: 'logServerURL',
                        enableFramesProcessing: 'enableFramesProcessing',
                        enableCustomElementsProcessing: 'enableCustomElementsProcessing',
                        enableSameSiteNoneAndSecureCookies: 'enableSameSiteNoneAndSecureCookies',
                        serverURL: 'serverURL',
                        customerID: 'customerID',
                        useUrlWorker: 'useUrlWorker',
                        workerUrl: 'workerUrl',
                        clientSettings: 'clientSettings',
                        collectionSettings: 'collectionSettings',
                        elementSettings: 'elementSettings',
                        enableCustomElementDetector: 'enableCustomElementDetector',
                        attributeSettings: 'attributeSettings',
                        isWupServerURLProxy: 'isWupServerURLProxy',
                        enableAcknowledgeMessageEvents: 'enableAcknowledgeMessageEvents',
                        inputElementSettings: 'inputElementSettings',
                        customInputElementSettings: 'customInputElementSettings',
                        agentType: 'agentType',
                        mode: 'mode',
                        collectionMode: 'collectionMode',
                        enableStartupCustomerSessionId: 'enableStartupCustomerSessionId',
                    },
                    l = { PRIMARY: 'primary', SECONDARY: 'secondary' };
                Object.freeze(l);
                var u = { FULL: 'full', LEAN: 'lean' };
                Object.freeze(u);
                var c = { DEBUG: 10, INFO: 20, WARN: 30, ERROR: 40, CRITICAL: 50, OFF: 80 };
                function Logger_classCallCheck(e, t) {
                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                }
                function Logger_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function Logger_createClass(e, t, r) {
                    return (
                        t && Logger_defineProperties(e.prototype, t),
                        r && Logger_defineProperties(e, r),
                        Object.defineProperty(e, 'prototype', { writable: !1 }),
                        e
                    );
                }
                var b = (function () {
                        function Log() {
                            Logger_classCallCheck(this, Log);
                        }
                        return (
                            Logger_createClass(Log, null, [
                                {
                                    key: 'setLogger',
                                    value: function setLogger(e) {
                                        this._logger = e;
                                    },
                                },
                                {
                                    key: 'isDebug',
                                    value: function isDebug() {
                                        if (this._logger) return this._logger.isDebug();
                                    },
                                },
                                {
                                    key: 'error',
                                    value: function error(e, t) {
                                        this._logger && this._logger.error(e, t || null);
                                    },
                                },
                                {
                                    key: 'warn',
                                    value: function warn(e, t) {
                                        this._logger && this._logger.warn(e, t || null);
                                    },
                                },
                                {
                                    key: 'trace',
                                    value: function trace(e) {
                                        this._logger && this._logger.trace(e);
                                    },
                                },
                                {
                                    key: 'debug',
                                    value: function debug(e) {
                                        this._logger && this._logger.debug(e);
                                    },
                                },
                                {
                                    key: 'info',
                                    value: function info(e) {
                                        this._logger && this._logger.info(e);
                                    },
                                },
                            ]),
                            Log
                        );
                    })(),
                    f = (function () {
                        function Logger(e, t) {
                            Logger_classCallCheck(this, Logger), (this._logBridge = e), (this._logLevel = t || c.INFO);
                        }
                        return (
                            Logger_createClass(Logger, [
                                {
                                    key: 'trace',
                                    value: function trace(e) {
                                        this._sendToLogBridge(e, c.DEBUG);
                                    },
                                },
                                {
                                    key: 'debug',
                                    value: function debug(e) {
                                        this._sendToLogBridge(e, c.DEBUG);
                                    },
                                },
                                {
                                    key: 'info',
                                    value: function info(e) {
                                        this._sendToLogBridge(e, c.INFO);
                                    },
                                },
                                {
                                    key: 'warn',
                                    value: function warn(e, t) {
                                        this._sendToLogBridge(e, c.WARN, t);
                                    },
                                },
                                {
                                    key: 'error',
                                    value: function error(e, t) {
                                        this._sendToLogBridge(e, c.ERROR, t);
                                    },
                                },
                                {
                                    key: 'isDebug',
                                    value: function isDebug() {
                                        return this._logLevel === c.DEBUG;
                                    },
                                },
                                {
                                    key: 'updateLogConfig',
                                    value: function updateLogConfig(e) {
                                        (this._logLevel = e.get(y.logLevel) || this._logLevel),
                                            this._logBridge.setLogLevel(this._logLevel),
                                            this._logBridge.clearLogEntriesByLogLevel(this._logLevel);
                                    },
                                },
                                {
                                    key: '_sendToLogBridge',
                                    value: function _sendToLogBridge(e, t, r) {
                                        t >= this._logLevel &&
                                            (r && r.stack && (e += ' ;stack: '.concat(r.stack)),
                                            this._logBridge.log(e, t));
                                    },
                                },
                            ]),
                            Logger
                        );
                    })();
                function CollectionSettings_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var p = (function () {
                    function CollectionSettings(e) {
                        var t, r;
                        !(function CollectionSettings_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, CollectionSettings),
                            (this._elementSettings = new i(null == e ? void 0 : e[a.elementSettings])),
                            (this._customInputElementSettings = new s(
                                null == e ? void 0 : e[a.customInputElementSettings]
                            )),
                            (this._agentType = this._validateAgentType(
                                null == e || null === (t = e[a.mode]) || void 0 === t ? void 0 : t.agentType
                            )),
                            (this._collectionMode = this._setAgentCollectionMode(
                                null == e || null === (r = e[a.mode]) || void 0 === r ? void 0 : r.collectionMode
                            ));
                    }
                    return (
                        (function CollectionSettings_createClass(e, t, r) {
                            t && CollectionSettings_defineProperties(e.prototype, t),
                                r && CollectionSettings_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(CollectionSettings, [
                            {
                                key: 'getElementSettings',
                                value: function getElementSettings() {
                                    return this._elementSettings;
                                },
                            },
                            {
                                key: 'getCustomInputElementSettings',
                                value: function getCustomInputElementSettings() {
                                    return this._customInputElementSettings;
                                },
                            },
                            {
                                key: 'getAgentType',
                                value: function getAgentType() {
                                    return this._agentType;
                                },
                            },
                            {
                                key: 'getAgentMode',
                                value: function getAgentMode() {
                                    return this._collectionMode;
                                },
                            },
                            {
                                key: '_setAgentCollectionMode',
                                value: function _setAgentCollectionMode(e) {
                                    return this._agentType === l.PRIMARY ? u.FULL : this._validateAgentMode(e);
                                },
                            },
                            {
                                key: '_validateAgentType',
                                value: function _validateAgentType(e) {
                                    if (Object.values(l).includes(e)) return e;
                                    var t = l.PRIMARY;
                                    return (
                                        void 0 !== e &&
                                            b.warn(
                                                'Invalid agent type: '
                                                    .concat(e, '. Defaulting to ')
                                                    .concat(t, ' agent type.')
                                            ),
                                        t
                                    );
                                },
                            },
                            {
                                key: '_validateAgentMode',
                                value: function _validateAgentMode(e) {
                                    if (Object.values(u).includes(e)) return e;
                                    var t = u.LEAN;
                                    return (
                                        void 0 !== e &&
                                            b.warn(
                                                'Invalid collection mode: '
                                                    .concat(e, '. Defaulting to ')
                                                    .concat(t, ' collection mode.')
                                            ),
                                        t
                                    );
                                },
                            },
                        ]),
                        CollectionSettings
                    );
                })();
                function StartupConfigurations_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var d = (function () {
                    function StartupConfigurations(e, t, r, n, o, i, s, a, u, c, l) {
                        !(function StartupConfigurations_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, StartupConfigurations),
                            (this._wupServerURL = e),
                            (this._logServerURL = t),
                            (this._enableFramesProcessing = r),
                            (this._enableCustomElementsProcessing = n),
                            (this._enableSameSiteNoneAndSecureCookies = o),
                            (this._useUrlWorker = i),
                            (this._workerUrl = s),
                            (this._isWupServerURLProxy = a),
                            (this._clientSettings = u),
                            (this._collectionSettings = c || new p()),
                            (this._enableStartupCustomerSessionId = l);
                    }
                    return (
                        (function StartupConfigurations_createClass(e, t, r) {
                            t && StartupConfigurations_defineProperties(e.prototype, t),
                                r && StartupConfigurations_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(StartupConfigurations, [
                            {
                                key: 'getWupServerURL',
                                value: function getWupServerURL() {
                                    return this._wupServerURL;
                                },
                            },
                            {
                                key: 'getLogServerURL',
                                value: function getLogServerURL() {
                                    return this._logServerURL;
                                },
                            },
                            {
                                key: 'getEnableFramesProcessing',
                                value: function getEnableFramesProcessing() {
                                    return this._enableFramesProcessing;
                                },
                            },
                            {
                                key: 'getEnableCustomElementsProcessing',
                                value: function getEnableCustomElementsProcessing() {
                                    return this._enableCustomElementsProcessing;
                                },
                            },
                            {
                                key: 'getEnableSameSiteNoneAndSecureCookies',
                                value: function getEnableSameSiteNoneAndSecureCookies() {
                                    return this._enableSameSiteNoneAndSecureCookies;
                                },
                            },
                            {
                                key: 'getUseUrlWorker',
                                value: function getUseUrlWorker() {
                                    return this._useUrlWorker;
                                },
                            },
                            {
                                key: 'getWorkerUrl',
                                value: function getWorkerUrl() {
                                    return this._workerUrl;
                                },
                            },
                            {
                                key: 'getIsWupServerURLProxy',
                                value: function getIsWupServerURLProxy() {
                                    return this._isWupServerURLProxy;
                                },
                            },
                            {
                                key: 'getClientSettings',
                                value: function getClientSettings() {
                                    return this._clientSettings;
                                },
                            },
                            {
                                key: 'getCollectionSettings',
                                value: function getCollectionSettings() {
                                    return this._collectionSettings;
                                },
                            },
                            {
                                key: 'getEnableStartupCustomerSessionId',
                                value: function getEnableStartupCustomerSessionId() {
                                    return this._enableStartupCustomerSessionId;
                                },
                            },
                        ]),
                        StartupConfigurations
                    );
                })();
                function URLFieldsExtractor_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var h = (function () {
                    function URLFieldsExtractor() {
                        !(function URLFieldsExtractor_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, URLFieldsExtractor);
                    }
                    return (
                        (function URLFieldsExtractor_createClass(e, t, r) {
                            t && URLFieldsExtractor_defineProperties(e.prototype, t),
                                r && URLFieldsExtractor_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(URLFieldsExtractor, null, [
                            {
                                key: 'extract',
                                value: function extract(e) {
                                    if (!e) throw new Error('Invalid wupServerURL. Parameter is empty');
                                    var t = {};
                                    if (((t.cid = this.getCID(e)), (t.serverURL = this.getServerURL(e)), !t.serverURL))
                                        throw new Error(
                                            'Invalid field. Failed extracting the address parameter: '.concat(e)
                                        );
                                    if (!t.cid)
                                        throw new Error(
                                            'Invalid field. Failed extracting the cid parameter: '.concat(e)
                                        );
                                    return t;
                                },
                            },
                            {
                                key: 'getCID',
                                value: function getCID(e) {
                                    e = URLFieldsExtractor.extractCid(e);
                                    return e || null;
                                },
                            },
                            {
                                key: 'extractCid',
                                value: function extractCid(e) {
                                    var t = e.indexOf('cid=');
                                    if (-1 === t) return null;
                                    t += 4;
                                    var r = -1 === (r = e.indexOf('&', t)) ? void 0 : r;
                                    return e.substring(t, r);
                                },
                            },
                            {
                                key: 'getServerURL',
                                value: function getServerURL(e) {
                                    var t = e.indexOf('/client/v', e);
                                    return (t = -1 === t ? null : t) ? e.substring(0, t) : null;
                                },
                            },
                        ]),
                        URLFieldsExtractor
                    );
                })();
                function HttpRequestFactory_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var v = (function () {
                        function HttpRequestFactory() {
                            !(function HttpRequestFactory_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, HttpRequestFactory);
                        }
                        return (
                            (function HttpRequestFactory_createClass(e, t, r) {
                                t && HttpRequestFactory_defineProperties(e.prototype, t),
                                    r && HttpRequestFactory_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(HttpRequestFactory, null, [
                                {
                                    key: 'create',
                                    value: function create() {
                                        if (
                                            self.XMLHttpRequest &&
                                            Object.prototype.hasOwnProperty.call(
                                                XMLHttpRequest.prototype,
                                                'withCredentials'
                                            )
                                        )
                                            return new XMLHttpRequest();
                                        if (self.XDomainRequest) return new XDomainRequest();
                                        if (!self.XMLHttpRequest)
                                            throw new Error('There is no supported http request object');
                                        return new XMLHttpRequest();
                                    },
                                },
                            ]),
                            HttpRequestFactory
                        );
                    })(),
                    _ = 60,
                    g = 1,
                    m = 44640,
                    C = 1,
                    w = 0,
                    E = -1;
                function CDUtils_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function _defineProperty(e, t, r) {
                    return (
                        t in e
                            ? Object.defineProperty(e, t, { value: r, enumerable: !0, configurable: !0, writable: !0 })
                            : (e[t] = r),
                        e
                    );
                }
                var S,
                    P,
                    k,
                    O =
                        ((S = null),
                        function (o, e, i) {
                            function Ik() {
                                return e;
                            }
                            var s, t;
                            (function testNativeCode() {
                                return -1 < e.toString().indexOf('[native code]');
                            })()
                                ? i(Ik())
                                : ((s = 0),
                                  (t = function timerFunction() {
                                      if (S.contentWindow) {
                                          for (
                                              var e = S.contentWindow, t = o.split('.'), r = e, n = 0;
                                              n < t.length;
                                              n++
                                          )
                                              r = r[t[n]];
                                          i(r);
                                      } else s < 45 ? (setTimeout(timerFunction, s), s++) : i(Ik());
                                  }),
                                  S ||
                                      ((S = document.createElement('IFRAME')).setAttribute(
                                          'sandbox',
                                          'allow-same-origin'
                                      ),
                                      (S.style.display = 'none'),
                                      document.documentElement.appendChild(S)),
                                  t());
                        }),
                    B = (function () {
                        function CDUtils() {
                            !(function CDUtils_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, CDUtils);
                        }
                        return (
                            (function CDUtils_createClass(e, t, r) {
                                t && CDUtils_defineProperties(e.prototype, t),
                                    r && CDUtils_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(CDUtils, null, [
                                {
                                    key: 'isUndefinedNull',
                                    value: function isUndefinedNull(e) {
                                        return null == e || void 0 === e;
                                    },
                                },
                                {
                                    key: 'isBoolean',
                                    value: function isBoolean(e) {
                                        return 'boolean' == typeof e;
                                    },
                                },
                                {
                                    key: 'addEventListener',
                                    value: function addEventListener(e, t, r) {
                                        var n = 3 < arguments.length && void 0 !== arguments[3] && arguments[3],
                                            o = !(4 < arguments.length && void 0 !== arguments[4]) || arguments[4],
                                            i = 5 < arguments.length && void 0 !== arguments[5] && arguments[5];
                                        this.isPassiveSupported
                                            ? e.addEventListener(t, r, { capture: n, passive: o, once: i })
                                            : e.addEventListener
                                            ? e.addEventListener(t, r, n)
                                            : e.attachEvent('on' + t, r);
                                    },
                                },
                                {
                                    key: 'removeEventListener',
                                    value: function removeEventListener(e, t, r) {
                                        var n = 3 < arguments.length && void 0 !== arguments[3] && arguments[3];
                                        e.removeEventListener
                                            ? e.removeEventListener(t, r, n)
                                            : e.detachEvent('on' + t, r);
                                    },
                                },
                                {
                                    key: 'hasProtocol',
                                    value: function hasProtocol(e) {
                                        return (
                                            e.toLowerCase().startsWith('http://') ||
                                            e.toLowerCase().startsWith('https://')
                                        );
                                    },
                                },
                                {
                                    key: 'clearTextFromNumbers',
                                    value: function clearTextFromNumbers(e) {
                                        return e ? e.replace(/(\d)/g, '*') : '';
                                    },
                                },
                                {
                                    key: 'maskText',
                                    value: function maskText(e) {
                                        return this.isUndefinedNull(e)
                                            ? ''
                                            : e
                                                  .replace(/[\d]/g, '1')
                                                  .replace(/[a-zA-Z]/g, 'a')
                                                  .replace(/[^a-zA-Z\d\u0000-\u0080]/g, '*');
                                    },
                                },
                                {
                                    key: 'getDropDownListValues',
                                    value: function getDropDownListValues(e) {
                                        for (var t = [], r = 0; r < e.length; r++) {
                                            var n = e.options[r].text || e.options[r].value || '';
                                            t.push(CDUtils.maskText(n));
                                        }
                                        return t;
                                    },
                                },
                                {
                                    key: 'getDocUrl',
                                    value: function getDocUrl() {
                                        var e = window.location;
                                        return (
                                            e.protocol +
                                            '//' +
                                            e.hostname +
                                            (e.port ? ':' + e.port : '') +
                                            CDUtils.clearTextFromNumbers(e.pathname)
                                        );
                                    },
                                },
                                {
                                    key: 'getHash',
                                    value: function getHash(e) {
                                        for (var t = 0, r = 0, n = e.length; r < n; r++)
                                            (t = (t << 5) - t + e.charCodeAt(r)), (t &= t);
                                        return t;
                                    },
                                },
                                {
                                    key: 'getTruncatedHash',
                                    value: function getTruncatedHash(e, t) {
                                        return e ? this.murmurhash3(e).toString().substring(t) : '';
                                    },
                                },
                                {
                                    key: 'murmurhash3',
                                    value: function murmurhash3(e, t) {
                                        for (
                                            var r,
                                                n,
                                                o = 3 & e.length,
                                                i = e.length - o,
                                                s = t,
                                                a = 3432918353,
                                                u = 461845907,
                                                c = 0;
                                            c < i;

                                        )
                                            (n =
                                                (255 & e.charCodeAt(c)) |
                                                ((255 & e.charCodeAt(++c)) << 8) |
                                                ((255 & e.charCodeAt(++c)) << 16) |
                                                ((255 & e.charCodeAt(++c)) << 24)),
                                                ++c,
                                                (s =
                                                    27492 +
                                                    (65535 &
                                                        (r =
                                                            (5 *
                                                                (65535 &
                                                                    (s =
                                                                        ((s ^= n =
                                                                            ((65535 &
                                                                                (n =
                                                                                    ((n =
                                                                                        ((65535 & n) * a +
                                                                                            ((((n >>> 16) * a) &
                                                                                                65535) <<
                                                                                                16)) &
                                                                                        4294967295) <<
                                                                                        15) |
                                                                                    (n >>> 17))) *
                                                                                u +
                                                                                ((((n >>> 16) * u) & 65535) << 16)) &
                                                                            4294967295) <<
                                                                            13) |
                                                                        (s >>> 19))) +
                                                                (((5 * (s >>> 16)) & 65535) << 16)) &
                                                            4294967295)) +
                                                    (((58964 + (r >>> 16)) & 65535) << 16));
                                        switch (((n = 0), o)) {
                                            case 3:
                                                n ^= (255 & e.charCodeAt(c + 2)) << 16;
                                                break;
                                            case 2:
                                                n ^= (255 & e.charCodeAt(c + 1)) << 8;
                                                break;
                                            case 1:
                                                s ^= n =
                                                    ((65535 &
                                                        (n =
                                                            ((n =
                                                                ((65535 & (n ^= 255 & e.charCodeAt(c))) * a +
                                                                    ((((n >>> 16) * a) & 65535) << 16)) &
                                                                4294967295) <<
                                                                15) |
                                                            (n >>> 17))) *
                                                        u +
                                                        ((((n >>> 16) * u) & 65535) << 16)) &
                                                    4294967295;
                                        }
                                        return (
                                            (s ^= e.length),
                                            (s =
                                                (2246822507 * (65535 & (s ^= s >>> 16)) +
                                                    (((2246822507 * (s >>> 16)) & 65535) << 16)) &
                                                4294967295),
                                            (s =
                                                (3266489909 * (65535 & (s ^= s >>> 13)) +
                                                    (((3266489909 * (s >>> 16)) & 65535) << 16)) &
                                                4294967295),
                                            (s ^= s >>> 16) >>> 0
                                        );
                                    },
                                },
                                {
                                    key: 'generateUUID',
                                    value: function generateUUID() {
                                        var r = CDUtils.dateNow();
                                        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (e) {
                                            var t = (r + 16 * Math.random()) % 16 | 0;
                                            return (r = Math.floor(r / 16)), ('x' === e ? t : (3 & t) | 8).toString(16);
                                        });
                                    },
                                },
                                {
                                    key: 'convertToArrayByMap',
                                    value: function convertToArrayByMap(e, t) {
                                        for (var r = [null], n = 0, o = e.length; n < o; n++) r[n + 1] = t[e[n]];
                                        return r;
                                    },
                                },
                                {
                                    key: 'getPostUrl',
                                    value: function getPostUrl(e, t, r, n, o, i, s) {
                                        var a = v.create();
                                        a instanceof self.XMLHttpRequest
                                            ? (a.open(t, e, !0),
                                              void 0 !== s && (a.timeout = s),
                                              (a.withCredentials = !1 !== i),
                                              'POST' === t &&
                                                  a.setRequestHeader('Content-Type', 'application/json; charset=utf-8'),
                                              (a.onreadystatechange = function () {
                                                  4 === a.readyState &&
                                                      204 !== a.status &&
                                                      (200 === a.status
                                                          ? n && n(a.responseText)
                                                          : o && o(a.responseText));
                                              }),
                                              (a.ontimeout = function () {
                                                  o && o('timeout', r);
                                              }),
                                              a.send(r))
                                            : ((a.onload = function () {
                                                  n && n(a.responseText);
                                              }),
                                              (a.onerror = function () {
                                                  o && o();
                                              }),
                                              (a.onprogress = function () {}),
                                              (a.ontimeout = function () {}),
                                              a.open(t, e, !0),
                                              setTimeout(function () {
                                                  a.send(r);
                                              }, 0));
                                    },
                                },
                                {
                                    key: 'minutesToMilliseconds',
                                    value: function minutesToMilliseconds(e) {
                                        return 60 * e * 1e3;
                                    },
                                },
                                {
                                    key: 'cutDecimalPointDigits',
                                    value: function cutDecimalPointDigits(e, t) {
                                        t = Math.pow(10, t);
                                        return Math.round(e * t) / t;
                                    },
                                },
                                {
                                    key: 'getUniqueElementId',
                                    value: function getUniqueElementId(e, t) {
                                        var r = t && 'number' == typeof t ? t : 30;
                                        if (e) {
                                            for (var n = 0, o = []; e.parentNode && n <= r; ) {
                                                var i = e.parentNode,
                                                    s = Array.from(i.children).indexOf(e);
                                                o.unshift(e.nodeName + '' + s), (e = i), n++;
                                            }
                                            return o.join('_');
                                        }
                                    },
                                },
                            ]),
                            CDUtils
                        );
                    })();
                function URLBuilder_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                _defineProperty(B, 'scriptVersion', 'dev-version.0.3b2a507a'),
                    _defineProperty(
                        B,
                        'isPassiveSupported',
                        (function isPassiveSupported() {
                            var e = !1;
                            try {
                                var t = Object.defineProperty({}, 'passive', {
                                    get: function get() {
                                        e = !0;
                                    },
                                });
                                window.addEventListener('test', null, t);
                            } catch (e) {}
                            return e;
                        })()
                    ),
                    _defineProperty(B, 'dateNow', Date.now),
                    _defineProperty(
                        B,
                        'setZeroTimeout',
                        ((P = []),
                        (k = 'Window_' + B.generateUUID()),
                        B.addEventListener(
                            window,
                            'message',
                            function receiveMessage(e) {
                                e.data === k &&
                                    (e.stopPropagation && e.stopPropagation(),
                                    e.returnValue && (e.returnValue = !1),
                                    e.cancelBubble && (e.cancelBubble = !0),
                                    P.shift()());
                            },
                            !0
                        ),
                        function (e) {
                            P.push(e), window.postMessage(k, self.location.href);
                        })
                    ),
                    _defineProperty(B, 'asyncCall', function (e) {
                        for (var t = arguments.length, r = new Array(1 < t ? t - 1 : 0), n = 1; n < t; n++)
                            r[n - 1] = arguments[n];
                        var o = this;
                        B.setZeroTimeout(function () {
                            o.apply(e || window, r);
                        });
                    }),
                    _defineProperty(B, 'StorageUtils', {
                        counter: 0,
                        getAndUpdateEventSequenceNumber: function getAndUpdateEventSequenceNumber() {
                            return this.counter++;
                        },
                        deserialize: function deserialize(t) {
                            if ('string' != typeof t) return null;
                            try {
                                return JSON.parse(t);
                            } catch (e) {
                                return t || null;
                            }
                        },
                        getFromLocalStorage: function getFromLocalStorage(e) {
                            var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : void 0;
                            try {
                                var r = this.deserialize(window.localStorage.getItem(e));
                                return r
                                    ? r.exp && B.dateNow() - r.time > r.exp
                                        ? (this.removeFromLocalStorage(e), null)
                                        : void 0 === t || t
                                        ? r.val
                                        : r
                                    : null;
                            } catch (e) {
                                return null;
                            }
                        },
                        saveToLocalStorage: function saveToLocalStorage(e, t, r) {
                            var n = { val: t };
                            r && ((n.exp = r), (n.time = B.dateNow()));
                            try {
                                window.localStorage.setItem(e, JSON.stringify(n));
                            } catch (e) {
                                return null;
                            }
                            return n;
                        },
                        removeFromLocalStorage: function removeFromLocalStorage(e) {
                            try {
                                window.localStorage.removeItem(e);
                            } catch (e) {
                                return null;
                            }
                        },
                        setExpirationInLocalStorage: function setExpirationInLocalStorage(e, t) {
                            var r = this.getFromLocalStorage(e);
                            return '' === r || null === r ? C : this.saveToLocalStorage(e, r, t) ? w : E;
                        },
                        getFromSessionStorage: function getFromSessionStorage(e) {
                            try {
                                var t = this.deserialize(window.sessionStorage.getItem(e));
                                return t ? t : null;
                            } catch (e) {
                                return null;
                            }
                        },
                        saveToSessionStorage: function saveToSessionStorage(e, t) {
                            try {
                                return t
                                    ? (window.sessionStorage.setItem(e, JSON.stringify(t)), t)
                                    : window.sessionStorage.removeItem(e);
                            } catch (e) {
                                return null;
                            }
                        },
                        removeFromSessionStorage: function removeFromSessionStorage(e) {
                            try {
                                window.sessionStorage.removeItem(e);
                            } catch (e) {
                                return null;
                            }
                        },
                        getCookie: function getCookie(e) {
                            e = new RegExp('(?:^|; )' + encodeURIComponent(e) + '=([^;]*)').exec(document.cookie);
                            return e ? decodeURIComponent(e[1]) : '';
                        },
                        setCookie: function setCookie(e, t, r, n) {
                            var o,
                                i = '';
                            r && ((o = new Date()).setTime(o.getTime() + r), (i = '; expires=' + o.toUTCString()));
                            for (
                                var s = 0, a = location.hostname, u = a.split('.'), c = '', l = !1;
                                s <= u.length - 1 && !l;

                            )
                                'localhost' === (a = u.slice(-1 - ++s).join('.'))
                                    ? (c = '')
                                    : '' !== a && (c = '; domain=.' + a),
                                    (l = this.setCookieWithAttributes(e, t, i, c, n));
                            return l || ((c = ''), (l = this.setCookieWithAttributes(e, t, i, c, n))), l;
                        },
                        setCookieWithAttributes: function setCookieWithAttributes(e, t, r, n, o) {
                            n = encodeURIComponent(e) + '=' + encodeURIComponent(t) + r + n + '; path=/;';
                            return (
                                (document.cookie = o ? n + ' '.concat('SameSite=None;', ' ').concat('Secure') : n),
                                this.getCookie(e) === t
                            );
                        },
                        setExpirationInCookie: function setExpirationInCookie(e, t) {
                            var r = this.getCookie(e);
                            return '' === r || null === r ? C : this.setCookie(e, r, t) ? w : E;
                        },
                        removeCookie: function removeCookie(e) {
                            try {
                                document.cookie = e + '=; Max-Age=0';
                            } catch (e) {
                                return null;
                            }
                        },
                        validateBcId: function validateBcId(e) {
                            return /^([0-9]{13,}-)?[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(
                                e
                            )
                                ? e
                                : null;
                        },
                    }),
                    _defineProperty(B, 'getNativeWindowFn', O),
                    _defineProperty(B, 'JQueryUtils', {
                        isJQueryAvailable: function isJQueryAvailable() {
                            return void 0 !== window.jQuery;
                        },
                        addEventListener: function addEventListener(e, t, r) {
                            jQuery(e).on(t, r);
                        },
                        removeEventListener: function removeEventListener(e, t, r) {
                            jQuery(e).off(t, r);
                        },
                    }),
                    (function dateNowFixer() {
                        Date.now
                            ? O('Date.now', Date.now, function (e) {
                                  B.dateNow = e;
                              })
                            : (B.dateNow = function now() {
                                  return new Date().getTime();
                              });
                    })();
                var M = (function () {
                    function URLBuilder() {
                        !(function URLBuilder_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, URLBuilder);
                    }
                    return (
                        (function URLBuilder_createClass(e, t, r) {
                            t && URLBuilder_defineProperties(e.prototype, t),
                                r && URLBuilder_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(URLBuilder, null, [
                            {
                                key: 'build',
                                value: function build(e, t) {
                                    var r = '/client/v3.1/web/wup';
                                    if (!e) throw new Error('Invalid server URL. Parameter is empty');
                                    return (B.hasProtocol(e) ? '' : ''.concat('https', '://'))
                                        .concat(e)
                                        .concat(r, '?cid=')
                                        .concat(t);
                                },
                            },
                            {
                                key: 'buildCustomServerUrl',
                                value: function buildCustomServerUrl(e) {
                                    if (!e) throw new Error('Invalid server URL. Parameter is empty');
                                    return B.hasProtocol(e) ? e : ''.concat('https', '://').concat(e);
                                },
                            },
                        ]),
                        URLBuilder
                    );
                })();
                function CDAPIException_typeof(e) {
                    return (CDAPIException_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function CDAPIException_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function _createSuper(r) {
                    var n = _isNativeReflectConstruct();
                    return function _createSuperInternal() {
                        var e,
                            t = _getPrototypeOf(r);
                        return (function _possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === CDAPIException_typeof(t) || 'function' == typeof t)) return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function _assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = _getPrototypeOf(this).constructor), Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function _wrapNativeSuper(e) {
                    var t = 'function' == typeof Map ? new Map() : void 0;
                    return (_wrapNativeSuper = function _wrapNativeSuper(e) {
                        if (
                            null === e ||
                            !(function _isNativeFunction(e) {
                                return -1 !== Function.toString.call(e).indexOf('[native code]');
                            })(e)
                        )
                            return e;
                        if ('function' != typeof e)
                            throw new TypeError('Super expression must either be null or a function');
                        if (void 0 !== t) {
                            if (t.has(e)) return t.get(e);
                            t.set(e, Wrapper);
                        }
                        function Wrapper() {
                            return _construct(e, arguments, _getPrototypeOf(this).constructor);
                        }
                        return (
                            (Wrapper.prototype = Object.create(e.prototype, {
                                constructor: { value: Wrapper, enumerable: !1, writable: !0, configurable: !0 },
                            })),
                            _setPrototypeOf(Wrapper, e)
                        );
                    })(e);
                }
                function _construct(e, t, r) {
                    return (_construct = _isNativeReflectConstruct()
                        ? Reflect.construct.bind()
                        : function _construct(e, t, r) {
                              var n = [null];
                              n.push.apply(n, t);
                              n = new (Function.bind.apply(e, n))();
                              return r && _setPrototypeOf(n, r.prototype), n;
                          }).apply(null, arguments);
                }
                function _isNativeReflectConstruct() {
                    if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                    if (Reflect.construct.sham) return !1;
                    if ('function' == typeof Proxy) return !0;
                    try {
                        return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                    } catch (e) {
                        return !1;
                    }
                }
                function _setPrototypeOf(e, t) {
                    return (_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function _getPrototypeOf(e) {
                    return (_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var R = (function () {
                        !(function _inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && _setPrototypeOf(e, t);
                        })(CDAPIException, _wrapNativeSuper(Error));
                        var e = _createSuper(CDAPIException);
                        function CDAPIException() {
                            return (
                                (function CDAPIException_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, CDAPIException),
                                e.apply(this, arguments)
                            );
                        }
                        return (function CDAPIException_createClass(e, t, r) {
                            return (
                                t && CDAPIException_defineProperties(e.prototype, t),
                                r && CDAPIException_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                e
                            );
                        })(CDAPIException);
                    })(),
                    D = 'enableRestart',
                    F = 'enableFlush',
                    T = 'enableCustomElements',
                    I = 'enableCoordinatesMasking';
                function CdApiFacade_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var x = (function () {
                    function CdApiFacade(e) {
                        !(function CdApiFacade_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, CdApiFacade),
                            (this._utils = e);
                    }
                    return (
                        (function CdApiFacade_createClass(e, t, r) {
                            t && CdApiFacade_defineProperties(e.prototype, t),
                                r && CdApiFacade_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(CdApiFacade, [
                            {
                                key: 'getCustomerSessionID',
                                value: function getCustomerSessionID(t) {
                                    this._getFromApiOrEmpty('getCustomerSessionID', function (e) {
                                        t(e);
                                    });
                                },
                            },
                            {
                                key: 'getLogServerAddress',
                                value: function getLogServerAddress(t) {
                                    this._getFromApiOrEmpty('getLogServerAddress', function (e) {
                                        t(e);
                                    });
                                },
                            },
                            {
                                key: 'getServerAddress',
                                value: function getServerAddress(t) {
                                    this._getFromApiOrEmpty('getCustomerConfigLocation', function (e) {
                                        t(e);
                                    });
                                },
                            },
                            {
                                key: 'getConfigurations',
                                value: function getConfigurations(r) {
                                    var e = this,
                                        n = null;
                                    this.isApiAvailable(o)
                                        ? this._getFromApiOrEmpty(o, function (e) {
                                              var t = null;
                                              if (e) {
                                                  if (e.isWupServerURLProxy) n = e.wupServerURL;
                                                  else if (e[a.wupServerURL])
                                                      n = M.buildCustomServerUrl(e[a.wupServerURL]);
                                                  else {
                                                      if (!e[a.customerID] || !e[a.serverURL])
                                                          throw new Error(
                                                              'Invalid serverURL or cid. Parameter is empty'
                                                          );
                                                      n = M.build(e[a.serverURL], e[a.customerID]);
                                                  }
                                                  t = new d(
                                                      n,
                                                      e[a.logServerURL],
                                                      e[a.enableFramesProcessing],
                                                      e[a.enableCustomElementsProcessing],
                                                      e[a.enableSameSiteNoneAndSecureCookies],
                                                      e[a.useUrlWorker] || !1,
                                                      e[a.workerUrl] || '',
                                                      e[a.isWupServerURLProxy] || !1,
                                                      e[a.clientSettings],
                                                      new p(e[a.collectionSettings]),
                                                      e[a.enableStartupCustomerSessionId]
                                                  );
                                              }
                                              r(t);
                                          })
                                        : this.getLogServerAddress(function (t) {
                                              e.getServerAddress(function (e) {
                                                  e = h.extract(e);
                                                  (n = M.build(e.serverURL, e.cid)), r(new d(n, t, null, !1, '', null));
                                              });
                                          });
                                },
                            },
                            {
                                key: 'createClientInterface',
                                value: function createClientInterface(t, e) {
                                    if (!this.isCDAPIAvailable())
                                        throw (
                                            (b.error('Failed setting client facade. cdApi is unavailable.'),
                                            new R('Failed setting client facade. cdApi is unavailable.'))
                                        );
                                    var r = {};
                                    e[D] &&
                                        (r.restart = function () {
                                            t.restart();
                                        }),
                                        e[F] &&
                                            (r.flush = function () {
                                                t.flush();
                                            }),
                                        e[T] &&
                                            (r.submitCustomElement = function (e) {
                                                t.submitCustomElement(e);
                                            }),
                                        e[I] &&
                                            (r.setCoordinatesMasking = function (e) {
                                                t.setCoordinatesMasking(e);
                                            }),
                                        (window.cdApi[n] = r);
                                },
                            },
                            {
                                key: 'isCDAPIAvailable',
                                value: function isCDAPIAvailable() {
                                    return !!window.cdApi;
                                },
                            },
                            {
                                key: 'isApiAvailable',
                                value: function isApiAvailable(e) {
                                    return !!window.cdApi && !!window.cdApi[e];
                                },
                            },
                            {
                                key: '_getFromApiOrEmpty',
                                value: function _getFromApiOrEmpty(t, e) {
                                    var r = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : 0;
                                    if (!window.cdApi)
                                        return 20 <= r
                                            ? void b.error('Failed getting cdApi after all retries.')
                                            : (0 === r && b.warn('cdApi not found in retry '.concat(r)),
                                              r++,
                                              void setTimeout(this._getFromApiOrEmpty.bind(this, t, e, r), 100));
                                    if (!window.cdApi[t])
                                        return b.warn('User did not implement cdApi method: '.concat(t)), void e('');
                                    try {
                                        window.cdApi[t](e);
                                    } catch (e) {
                                        throw (
                                            (b.error(
                                                'An error has occurred while calling cdApi '.concat(
                                                    t,
                                                    ' function. Exception was thrown from client implementation.'
                                                ),
                                                e
                                            ),
                                            e)
                                        );
                                    }
                                },
                            },
                        ]),
                        CdApiFacade
                    );
                })();
                function SupportedBrowserChecker_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var A = (function () {
                        function SupportedBrowserChecker() {
                            !(function SupportedBrowserChecker_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, SupportedBrowserChecker);
                        }
                        return (
                            (function SupportedBrowserChecker_createClass(e, t, r) {
                                t && SupportedBrowserChecker_defineProperties(e.prototype, t),
                                    r && SupportedBrowserChecker_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(SupportedBrowserChecker, null, [
                                {
                                    key: 'isSupported',
                                    value: function isSupported() {
                                        return !(
                                            'undefined' == typeof WeakMap ||
                                            !window.Worker ||
                                            !window.MutationObserver
                                        );
                                    },
                                },
                            ]),
                            SupportedBrowserChecker
                        );
                    })(),
                    L = 'startNewSessionCommand',
                    j = 'resumeSessionCommand',
                    U = 'changeContextCommand',
                    N = 'updateCsidCommand',
                    W = 'updatePsidCommand',
                    H = 'updateLogUrl',
                    Q = 'sendDataCommand',
                    z = 'sendLogCommand',
                    q = 'updateBrandCommand',
                    K = 'stateUpdateFromStorage',
                    G = 'setAgentTypeCommand',
                    V = 'updateAgentIdCommand',
                    X = 'enableWupMessagesHashingCommand',
                    Z = {
                        stopped: 'stopped',
                        starting: 'starting',
                        started: 'started',
                        paused: 'paused',
                        faulted: 'faulted',
                    },
                    t = r(599),
                    Y = r.n(t);
                function CDPort_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var J = (function () {
                    function CDPort(e) {
                        !(function CDPort_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, CDPort),
                            (this._portNativeWorker = e);
                    }
                    return (
                        (function CDPort_createClass(e, t, r) {
                            t && CDPort_defineProperties(e.prototype, t),
                                r && CDPort_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(CDPort, [
                            {
                                key: 'postMessage',
                                value: function postMessage() {
                                    this._portNativeWorker.postMessage.apply(this._portNativeWorker, arguments);
                                },
                            },
                            {
                                key: 'close',
                                value: function close() {
                                    this._portNativeWorker.terminate();
                                },
                            },
                            {
                                key: 'setonmessage',
                                value: function setonmessage(e) {
                                    this._portNativeWorker.onmessage = e;
                                },
                            },
                        ]),
                        CDPort
                    );
                })();
                function WorkerWrapper_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var $ = (function () {
                    function WorkerWrapper(e) {
                        !(function WorkerWrapper_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, WorkerWrapper),
                            (this._nativeWorker = e),
                            (this.port = new J(this._nativeWorker));
                    }
                    return (
                        (function WorkerWrapper_createClass(e, t, r) {
                            t && WorkerWrapper_defineProperties(e.prototype, t),
                                r && WorkerWrapper_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(WorkerWrapper, [
                            {
                                key: 'close',
                                value: function close() {
                                    this.port.close();
                                },
                            },
                        ]),
                        WorkerWrapper
                    );
                })();
                function WorkerWrapperFactory_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var ee = (function () {
                    function WorkerWrapperFactory(e, t) {
                        !(function WorkerWrapperFactory_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, WorkerWrapperFactory),
                            (this._useUrlWorker = e),
                            (this._workerUrl = t);
                    }
                    return (
                        (function WorkerWrapperFactory_createClass(e, t, r) {
                            t && WorkerWrapperFactory_defineProperties(e.prototype, t),
                                r && WorkerWrapperFactory_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(WorkerWrapperFactory, [
                            {
                                key: 'create',
                                value: function create() {
                                    return this._useUrlWorker
                                        ? this._createWorkerFromUrl()
                                        : this._createInlineWorker();
                                },
                            },
                            {
                                key: '_createInlineWorker',
                                value: function _createInlineWorker() {
                                    var e = new (Y())();
                                    return b.info('Created a dedicated worker.'), new $(e);
                                },
                            },
                            {
                                key: '_createWorkerFromUrl',
                                value: function _createWorkerFromUrl() {
                                    try {
                                        var e = new Worker(this._workerUrl);
                                        return b.info('Created worker from url - '.concat(this._workerUrl)), new $(e);
                                    } catch (e) {
                                        throw (b.error('Failed to construct worker from url.'), e);
                                    }
                                },
                            },
                        ]),
                        WorkerWrapperFactory
                    );
                })();
                function CDMap_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var te = (function () {
                        function CDMap() {
                            !(function CDMap_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, CDMap),
                                (this._pairs = []),
                                (this.size = 0);
                        }
                        return (
                            (function CDMap_createClass(e, t, r) {
                                t && CDMap_defineProperties(e.prototype, t),
                                    r && CDMap_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(CDMap, [
                                {
                                    key: 'has',
                                    value: function has(e) {
                                        return -1 < this._indexOf(e);
                                    },
                                },
                                {
                                    key: 'get',
                                    value: function get(e) {
                                        e = this._indexOf(e);
                                        if (-1 < e) return this._pairs[e][1];
                                    },
                                },
                                {
                                    key: 'set',
                                    value: function set(e, t) {
                                        var r = this._indexOf(e);
                                        -1 < r ? (this._pairs[r][1] = t) : (this._pairs.push([e, t]), this.size++);
                                    },
                                },
                                {
                                    key: 'delete',
                                    value: function _delete(e) {
                                        e = this._indexOf(e);
                                        return -1 < e && (this._pairs.splice(e, 1), this.size--, !0);
                                    },
                                },
                                {
                                    key: 'forEach',
                                    value: function forEach(e) {
                                        for (var t = 0; t < this._pairs.length; t++)
                                            e(this._pairs[t][1], this._pairs[t][0]);
                                    },
                                },
                                {
                                    key: 'clear',
                                    value: function clear() {
                                        this._pairs = [];
                                    },
                                },
                                {
                                    key: '_indexOf',
                                    value: function _indexOf(e) {
                                        for (var t = 0; t < this._pairs.length; t++)
                                            if (this._pairs[t][0] === e) return t;
                                        return -1;
                                    },
                                },
                            ]),
                            CDMap
                        );
                    })(),
                    re = function create() {
                        return new (self.Map || te)();
                    };
                function CDSet_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var ne = (function () {
                        function CDSet() {
                            !(function CDSet_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, CDSet),
                                (this._set = []),
                                (this.size = 0);
                        }
                        return (
                            (function CDSet_createClass(e, t, r) {
                                t && CDSet_defineProperties(e.prototype, t),
                                    r && CDSet_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(CDSet, [
                                {
                                    key: 'add',
                                    value: function add(e) {
                                        return this._set.push(e), this.size++, this;
                                    },
                                },
                                {
                                    key: 'has',
                                    value: function has(e) {
                                        return -1 < this._set.indexOf(e);
                                    },
                                },
                                {
                                    key: 'delete',
                                    value: function _delete(e) {
                                        for (var t = 0; t < this._set.length; t++)
                                            if (this._set[t] === e) return this._set.splice(t, 1), this.size--, !0;
                                        return !1;
                                    },
                                },
                                {
                                    key: 'forEach',
                                    value: function forEach(e) {
                                        for (var t = 0; t < this._set.length; t++) e(this._set[t]);
                                    },
                                },
                                {
                                    key: 'clear',
                                    value: function clear() {
                                        this._set = [];
                                    },
                                },
                            ]),
                            CDSet
                        );
                    })(),
                    oe = function create() {
                        for (
                            var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : [],
                                t = new (self.Set || ne)(),
                                r = 0;
                            r < e.length;
                            r++
                        )
                            t.add(e[r]);
                        return t;
                    };
                function WorkerCommunicator_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var ie = (function () {
                    function WorkerCommunicator() {
                        !(function WorkerCommunicator_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, WorkerCommunicator),
                            (this._msgListeners = re());
                    }
                    return (
                        (function WorkerCommunicator_createClass(e, t, r) {
                            t && WorkerCommunicator_defineProperties(e.prototype, t),
                                r && WorkerCommunicator_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(WorkerCommunicator, [
                            {
                                key: 'setMessagingPort',
                                value: function setMessagingPort(e) {
                                    var o = this;
                                    (this._messagePort = e).setonmessage(function (e) {
                                        var t = e.data,
                                            r = [],
                                            n = o._msgListeners.get(t.msgType);
                                        n &&
                                            n.forEach(function (e) {
                                                e.callback(t.data), e.isOneTime && r.push(e);
                                            }),
                                            r.forEach(function (e) {
                                                n.delete(e);
                                            });
                                    });
                                },
                            },
                            {
                                key: 'sendAsync',
                                value: function sendAsync(e, t, r, n, o) {
                                    n && r && this.addMessageListener(r, n, o),
                                        this._messagePort.postMessage({ msgType: e, data: t });
                                },
                            },
                            {
                                key: 'addMessageListener',
                                value: function addMessageListener(e, t, r) {
                                    var n = null;
                                    this._msgListeners.has(e)
                                        ? (n = this._msgListeners.get(e))
                                        : ((n = oe()), this._msgListeners.set(e, n)),
                                        n.add({ callback: t, isOneTime: r });
                                },
                            },
                        ]),
                        WorkerCommunicator
                    );
                })();
                function DataQ_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var se = (function () {
                    function DataQ(e, t, r, n, o, i) {
                        var s = this;
                        !(function DataQ_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, DataQ),
                            (function DataQ_defineProperty(e, t, r) {
                                t in e
                                    ? Object.defineProperty(e, t, {
                                          value: r,
                                          enumerable: !0,
                                          configurable: !0,
                                          writable: !0,
                                      })
                                    : (e[t] = r);
                            })(this, '_dataOrigin', 'BC'),
                            (this._serverWorkerCommunicator = t),
                            (this._contextManager = r),
                            (this._passToWorkerInterval = i || 0),
                            (this._intervalConfigKey = n),
                            (this._msgToWorker = o),
                            (this._Q = []),
                            this._passToWorkerInterval &&
                                (this._intervalId = setInterval(
                                    this._sendQToServerWorker.bind(this),
                                    this._passToWorkerInterval
                                )),
                            e.addEventListener(
                                window,
                                'beforeunload',
                                function () {
                                    s._onUnload();
                                },
                                !0
                            );
                    }
                    return (
                        (function DataQ_createClass(e, t, r) {
                            t && DataQ_defineProperties(e.prototype, t),
                                r && DataQ_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(DataQ, [
                            {
                                key: 'addToQueue',
                                value: function addToQueue(e, t, r, n) {
                                    (r = !(null != r && !0 !== r)) && t.push && (t[0] = this._contextManager.contextId),
                                        0 !== this._passToWorkerInterval
                                            ? (this._Q.push({
                                                  eventName: e,
                                                  data: t,
                                                  shouldFlush: n,
                                                  origin: this._dataOrigin,
                                              }),
                                              n && this._sendQToServerWorker())
                                            : this._serverWorkerCommunicator.sendAsync(this._msgToWorker, {
                                                  eventName: e,
                                                  data: t,
                                                  shouldFlush: n,
                                                  origin: this._dataOrigin,
                                              });
                                },
                            },
                            {
                                key: 'updateWithConfig',
                                value: function updateWithConfig(e) {
                                    e = e.get(this._intervalConfigKey);
                                    void 0 !== e &&
                                        e !== this._passToWorkerInterval &&
                                        ((this._passToWorkerInterval = e),
                                        clearInterval(this._intervalId),
                                        (this._intervalId = null),
                                        0 !== this._passToWorkerInterval &&
                                            (this._intervalId = setInterval(
                                                this._sendQToServerWorker.bind(this),
                                                this._passToWorkerInterval
                                            )));
                                },
                            },
                            {
                                key: 'flushAllMessages',
                                value: function flushAllMessages() {
                                    this._Q.push({ eventName: 'flushData' }), this._sendQToServerWorker();
                                },
                            },
                            {
                                key: '_sendQToServerWorker',
                                value: function _sendQToServerWorker() {
                                    try {
                                        this._Q.length &&
                                            (this._serverWorkerCommunicator.sendAsync(this._msgToWorker, this._Q),
                                            (this._Q = []));
                                    } catch (e) {
                                        b.error('Failed sending data to worker. '.concat(e)),
                                            this._sendQInSingleMessagesToServerWorker();
                                    }
                                },
                            },
                            {
                                key: '_sendQInSingleMessagesToServerWorker',
                                value: function _sendQInSingleMessagesToServerWorker() {
                                    for (var e = 0; e < this._Q.length; e++)
                                        try {
                                            this._serverWorkerCommunicator.sendAsync(this._msgToWorker, this._Q[e]);
                                        } catch (e) {
                                            b.error('Failed sending single message data to worker. '.concat(e));
                                        }
                                    this._Q = [];
                                },
                            },
                            {
                                key: '_onUnload',
                                value: function _onUnload() {
                                    this.flushAllMessages();
                                },
                            },
                            {
                                key: 'filterOut',
                                value: function filterOut(e) {
                                    this._Q = this._Q.filter(e);
                                },
                            },
                        ]),
                        DataQ
                    );
                })();
                function PerfMonitor_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var ae = (function () {
                    function PerfMonitor(e) {
                        !(function PerfMonitor_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, PerfMonitor),
                            (this._perfDataQ = e),
                            (this._now =
                                window.performance && window.performance.now
                                    ? window.performance.now.bind(window.performance)
                                    : B.dateNow.bind(Date)),
                            (this._monitors = re());
                    }
                    return (
                        (function PerfMonitor_createClass(e, t, r) {
                            t && PerfMonitor_defineProperties(e.prototype, t),
                                r && PerfMonitor_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(PerfMonitor, [
                            {
                                key: 'startMonitor',
                                value: function startMonitor(e) {
                                    b.debug('PerfMonitor:startMonitor on '.concat(e)),
                                        this._monitors.set(e, this._now());
                                },
                            },
                            {
                                key: 'stopMonitor',
                                value: function stopMonitor(e) {
                                    var t,
                                        r = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : 'main';
                                    this._monitors.has(e) &&
                                        ((t = this._now() - this._monitors.get(e)),
                                        this._perfDataQ.addToQueue('perf', { orig: r, name: e, val: t }),
                                        b.debug('PerfMonitor:stopMonitor on '.concat(e, ': time = ').concat(t)),
                                        this._monitors.delete(e));
                                },
                            },
                            {
                                key: 'cancelMonitor',
                                value: function cancelMonitor(e) {
                                    b.debug('PerfMonitor:cancelMonitor on '.concat(e)),
                                        this._monitors.has(e) && this._monitors.delete(e);
                                },
                            },
                            {
                                key: 'reportMonitor',
                                value: function reportMonitor(e, t) {
                                    var r = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : 'main';
                                    b.debug('PerfMonitor:reportMonitor on '.concat(e)),
                                        this._perfDataQ.addToQueue('perf', { orig: r, name: e, val: t });
                                },
                            },
                        ]),
                        PerfMonitor
                    );
                })();
                function SiteMapper_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var ue = (function () {
                    function SiteMapper(e, t, r, n, o) {
                        var i = !(5 < arguments.length && void 0 !== arguments[5]) || arguments[5],
                            s = 6 < arguments.length && void 0 !== arguments[6] ? arguments[6] : 200;
                        !(function SiteMapper_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, SiteMapper),
                            (this._mutationObserver = e),
                            (this._siteMapKey = n),
                            (this._keyUrl = n + '_isUrlNonMasked'),
                            (this._stopOnFirstMappingMatch = i),
                            (this._siteMap = null),
                            (this._observers = []),
                            (this._utils = t),
                            (this._domUtils = r),
                            (this._onMatchCB = o),
                            (this._maxMappings = s),
                            (this._maxTriggers = 10);
                    }
                    return (
                        (function SiteMapper_createClass(e, t, r) {
                            t && SiteMapper_defineProperties(e.prototype, t),
                                r && SiteMapper_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(SiteMapper, [
                            {
                                key: 'updateObserver',
                                value: function updateObserver(e) {
                                    this._onMatchCB = e;
                                },
                            },
                            {
                                key: '_observeChange',
                                value: function _observeChange(e, t) {
                                    if (e)
                                        try {
                                            var r,
                                                n = window.document.querySelector(e);
                                            n
                                                ? ((r = new this._mutationObserver(function (e) {
                                                      0 < e.length && t();
                                                  })).observe(n, {
                                                      childList: !0,
                                                      characterData: !0,
                                                      attributes: !0,
                                                      subtree: !0,
                                                  }),
                                                  this._observers.push(r))
                                                : b.error(
                                                      'Selector:'
                                                          .concat(JSON.stringify(e), ' not found on page. Check ')
                                                          .concat(this._siteMapKey, ' configuration')
                                                  );
                                        } catch (e) {
                                            b.error('SiteMapper._observeChange: '.concat(e.message), e);
                                        }
                                },
                            },
                            {
                                key: 'initTracking',
                                value: function initTracking() {
                                    function Bs() {
                                        try {
                                            for (var e = 0; e < n._siteMap.mappings.length; e++) {
                                                var t = n._siteMap.mappings[e];
                                                if (!t.url || -1 < n._url.indexOf(t.url))
                                                    if (t.selector) {
                                                        var r = window.document.querySelector(t.selector);
                                                        if (r)
                                                            if (t.byText) {
                                                                if (
                                                                    ((void 0 !== r.innerText &&
                                                                        -1 !== r.innerText.indexOf(t.byText)) ||
                                                                        r.value === t.byText ||
                                                                        r.textContent === t.byText) &&
                                                                    (n._onMatchCB(t), n._stopOnFirstMappingMatch)
                                                                )
                                                                    return;
                                                            } else if ((n._onMatchCB(t), n._stopOnFirstMappingMatch))
                                                                return;
                                                    } else if (
                                                        -1 < n._url.indexOf(t.url) &&
                                                        (n._onMatchCB(t), n._stopOnFirstMappingMatch)
                                                    )
                                                        return;
                                            }
                                        } catch (e) {
                                            b.error('SiteMapper:testQuerySelector failed. ex: '.concat(e.message), e);
                                        }
                                    }
                                    var e,
                                        n = this;
                                    this._siteMap ||
                                        ((e = this._utils.StorageUtils.getFromSessionStorage(this._siteMapKey)) &&
                                            e.triggers.length <= this._maxTriggers &&
                                            e.mappings.length <= this._maxMappings &&
                                            (this._siteMap = e),
                                        (this._isNonMaskedUrl = this._utils.StorageUtils.getFromSessionStorage(
                                            this._keyUrl
                                        ))),
                                        this._siteMap &&
                                            ((this._url = this._isNonMaskedUrl
                                                ? window.document.location.href
                                                : this._utils.getDocUrl()),
                                            this._domUtils.onDocumentBody(window, function () {
                                                n._mutationObserver &&
                                                    n._siteMap.triggers.forEach(function (e) {
                                                        (!e.url || -1 < n._url.indexOf(e.url)) &&
                                                            n._observeChange(e.selector, Bs);
                                                    }),
                                                    Bs();
                                            }));
                                },
                            },
                            {
                                key: 'onConfigUpdate',
                                value: function onConfigUpdate(e) {
                                    try {
                                        var t;
                                        !this._siteMap &&
                                            e.get(this._siteMapKey) &&
                                            (this.stopTracking(),
                                            (t = e.get(this._siteMapKey) && JSON.parse(e.get(this._siteMapKey))),
                                            (this._isNonMaskedUrl = e.get('useNonMaskedUrlInMappings')),
                                            t &&
                                            t.triggers.length <= this._maxTriggers &&
                                            t.mappings.length <= this._maxMappings
                                                ? ((this._siteMap = t),
                                                  this._utils.StorageUtils.saveToSessionStorage(
                                                      this._siteMapKey,
                                                      this._siteMap
                                                  ),
                                                  this._utils.StorageUtils.saveToSessionStorage(
                                                      this._keyUrl,
                                                      this._isNonMaskedUrl
                                                  ),
                                                  this.initTracking())
                                                : b.warn(
                                                      'Configuration '
                                                          .concat(
                                                              this._siteMapKey,
                                                              ' contains an illegal amount of triggers or mappings. Max Allowed Triggers: '
                                                          )
                                                          .concat(this._maxTriggers, ', ') +
                                                          'Max Allowed Mappings: '.concat(this._maxMappings)
                                                  ));
                                    } catch (e) {
                                        b.error(
                                            'An error occurred while loading '
                                                .concat(
                                                    this._siteMapKey,
                                                    ' configuration. Make sure the configuration value is valid. '
                                                )
                                                .concat(e.message),
                                            e
                                        );
                                    }
                                },
                            },
                            {
                                key: 'stopTracking',
                                value: function stopTracking() {
                                    for (var e = 0; e < this._observers.length; e++) this._observers[e].disconnect();
                                    (this._observers = []), (this._siteMap = null);
                                },
                            },
                        ]),
                        SiteMapper
                    );
                })();
                function CDEvent_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var ce = (function () {
                    function CDEvent() {
                        !(function CDEvent_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, CDEvent),
                            (this._listeners = []);
                    }
                    return (
                        (function CDEvent_createClass(e, t, r) {
                            t && CDEvent_defineProperties(e.prototype, t),
                                r && CDEvent_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(CDEvent, [
                            {
                                key: 'subscribe',
                                value: function subscribe(e) {
                                    this._listeners.push(e);
                                },
                            },
                            {
                                key: 'publish',
                                value: function publish(e) {
                                    for (var t = 0, r = this._listeners.length; t < r; t++) this._listeners[t](e);
                                },
                            },
                            {
                                key: 'unsubscribe',
                                value: function unsubscribe(e) {
                                    for (var t = 0, r = this._listeners.length; t < r; t++)
                                        if (e === this._listeners[t]) {
                                            this._listeners.splice(t, 1);
                                            break;
                                        }
                                },
                            },
                        ]),
                        CDEvent
                    );
                })();
                function ContextMgr_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var le = (function () {
                    function ContextMgr(e, t, r, n) {
                        !(function ContextMgr_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, ContextMgr),
                            (this._utils = e),
                            (this._storageUtilsWrapper = n),
                            (this._contextSiteMapper = t),
                            (this.contextName = ''),
                            (this.referrer = ''),
                            (this.historyLen = -1),
                            (this.onContextChange = new ce()),
                            this._contextSiteMapper.updateObserver(this.onSiteMapperMatch.bind(this)),
                            (this._workerComm = r),
                            (this._contextIdKey = 'cdContextId');
                    }
                    return (
                        (function ContextMgr_createClass(e, t, r) {
                            t && ContextMgr_defineProperties(e.prototype, t),
                                r && ContextMgr_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(ContextMgr, [
                            {
                                key: 'contextData',
                                value: function contextData() {
                                    return {
                                        contextId: this.contextId,
                                        url: this.url,
                                        name: this.contextName,
                                        referrer: this.referrer,
                                        hLength: this.historyLen,
                                        timestamp: this.timestamp,
                                    };
                                },
                            },
                            {
                                key: 'setContext',
                                value: function setContext(e) {
                                    (this.contextName = e.name),
                                        this._genContext(),
                                        (this.url = e.url),
                                        (this.referrer = e.referrer),
                                        (this.historyLen = e.hLength),
                                        (this.timestamp = e.timestamp),
                                        this._publishContext();
                                },
                            },
                            {
                                key: 'changeContext',
                                value: function changeContext(e) {
                                    e
                                        ? e !== this.contextName
                                            ? ((this.contextName = e),
                                              this._updateContext(),
                                              this._publishContext(),
                                              b.info('Context changed to '.concat(e)))
                                            : b.warn(
                                                  'Received context '.concat(
                                                      e,
                                                      ' but this is already the current context. Aborting operation.'
                                                  )
                                              )
                                        : b.error(
                                              'Received an invalid context name '.concat(
                                                  e,
                                                  '. Aborting context change operation'
                                              )
                                          );
                                },
                            },
                            {
                                key: 'onSiteMapperMatch',
                                value: function onSiteMapperMatch(e) {
                                    e.contextName !== this.contextName && this.changeContext(e.contextName);
                                },
                            },
                            {
                                key: '_updateContext',
                                value: function _updateContext() {
                                    this._genContext(),
                                        (this.url = this._utils.getDocUrl()),
                                        (this.referrer = this._utils.clearTextFromNumbers(document.referrer)),
                                        (this.historyLen = window.history.length),
                                        (this.timestamp = this._utils.dateNow());
                                },
                            },
                            {
                                key: '_genContext',
                                value: function _genContext() {
                                    (this.contextId = this._storageUtilsWrapper.getCookie(this._contextIdKey)),
                                        (this.contextId && !isNaN(this.contextId)) ||
                                            ((this.contextId = this._storageUtilsWrapper.getFromLocalStorage(
                                                this._contextIdKey
                                            )),
                                            (this.contextId && !isNaN(this.contextId)) || (this.contextId = 0)),
                                        (this.contextId = parseInt(this.contextId));
                                    var e = this.contextId + 1;
                                    this._storageUtilsWrapper.saveToLocalStorage(this._contextIdKey, e) ||
                                        b.error(
                                            'Failed saving contextId '.concat(this.contextId, ' to local storage.')
                                        ),
                                        this._storageUtilsWrapper.setCookie(this._contextIdKey, e.toString()) ||
                                            b.error('Failed saving contextId '.concat(this.contextId, ' to cookie.'));
                                },
                            },
                            {
                                key: '_publishContext',
                                value: function _publishContext() {
                                    var e = { contextName: this.contextName };
                                    this._workerComm.sendAsync(U, e), this.onContextChange.publish(this.contextData());
                                },
                            },
                            {
                                key: 'initContextHandling',
                                value: function initContextHandling() {
                                    this._contextSiteMapper.initTracking();
                                },
                            },
                            {
                                key: 'clearContextHandling',
                                value: function clearContextHandling() {
                                    this._contextSiteMapper.stopTracking();
                                },
                            },
                            {
                                key: 'onConfigUpdate',
                                value: function onConfigUpdate(e) {
                                    this._contextSiteMapper.onConfigUpdate(e);
                                },
                            },
                            {
                                key: 'onSessionReset',
                                value: function onSessionReset() {
                                    this._publishContext();
                                },
                            },
                        ]),
                        ContextMgr
                    );
                })();
                function GlobalExceptionHandler_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var fe = (function () {
                    function GlobalExceptionHandler(e, t) {
                        !(function GlobalExceptionHandler_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, GlobalExceptionHandler),
                            (this._cdUtils = e),
                            (this._scriptName = t),
                            this._cdUtils.addEventListener(window, 'error', this._handleException.bind(this));
                    }
                    return (
                        (function GlobalExceptionHandler_createClass(e, t, r) {
                            t && GlobalExceptionHandler_defineProperties(e.prototype, t),
                                r && GlobalExceptionHandler_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(GlobalExceptionHandler, [
                            {
                                key: '_handleException',
                                value: function _handleException(e) {
                                    this._scriptName &&
                                        this._scriptName === e.filename &&
                                        ((e = this._buildErrorMessage(e)),
                                        b.error('caught unhandled exception. '.concat(e)));
                                },
                            },
                            {
                                key: '_buildErrorMessage',
                                value: function _buildErrorMessage(e) {
                                    if (!e.error) return e.message;
                                    var t = e.error.toString(),
                                        r = e.error.stack || '';
                                    return ''
                                        .concat(t, ', Line: ')
                                        .concat(e.lineno, ', Column: ')
                                        .concat(e.colno, '. Stacktrace: ')
                                        .concat(r);
                                },
                            },
                        ]),
                        GlobalExceptionHandler
                    );
                })();
                function MessageBus_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var pe = (function () {
                    function MessageBus() {
                        !(function MessageBus_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, MessageBus),
                            (this.subscribers = re());
                    }
                    return (
                        (function MessageBus_createClass(e, t, r) {
                            t && MessageBus_defineProperties(e.prototype, t),
                                r && MessageBus_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(MessageBus, [
                            {
                                key: 'subscribe',
                                value: function subscribe(e, t) {
                                    var r,
                                        n = 2 < arguments.length && void 0 !== arguments[2] && arguments[2],
                                        o = !1;
                                    this.subscribers.has(e)
                                        ? (r = this.subscribers.get(e)) &&
                                          r.forEach(function (e) {
                                              t === e.handler && (o = !0);
                                          })
                                        : ((r = oe()), this.subscribers.set(e, r)),
                                        o || r.add({ handler: t, isOneTime: n });
                                },
                            },
                            {
                                key: 'unsubscribe',
                                value: function unsubscribe(e, t) {
                                    var r;
                                    e &&
                                        this.subscribers.has(e) &&
                                        ((r = this.subscribers.get(e)) &&
                                            r.forEach(function (e) {
                                                t === e.handler && r.delete(e);
                                            }),
                                        0 === r.size && this.subscribers.delete(e));
                                },
                            },
                            {
                                key: 'publish',
                                value: function publish(e, t) {
                                    if (!e) throw new Error('invalid argument messageType must be defined');
                                    this._notifySubscribers(e, t);
                                },
                            },
                            {
                                key: '_notifySubscribers',
                                value: function _notifySubscribers(e, t) {
                                    var r = this.subscribers.get(e);
                                    r &&
                                        r.forEach(function (e) {
                                            e.handler(t), e.isOneTime && r.delete(e);
                                        });
                                },
                            },
                        ]),
                        MessageBus
                    );
                })();
                function CidCache_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var de = (function () {
                        function CidCache() {
                            !(function CidCache_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, CidCache),
                                (this._cid = null);
                        }
                        return (
                            (function CidCache_createClass(e, t, r) {
                                t && CidCache_defineProperties(e.prototype, t),
                                    r && CidCache_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(CidCache, [
                                {
                                    key: 'get',
                                    value: function get() {
                                        return this._cid;
                                    },
                                },
                                {
                                    key: 'set',
                                    value: function set(e) {
                                        if (!e) throw new Error('Invalid cid value of undefined');
                                        this._cid = e;
                                    },
                                },
                            ]),
                            CidCache
                        );
                    })(),
                    he = {
                        NewSessionStartedEvent: 'NewSessionStartedEvent',
                        ConfigurationLoadedEvent: 'ConfigurationLoadedEvent',
                        ServerStateUpdatedEvent: 'ServerStateUpdatedEvent',
                        HeartBeatStatusEvent: 'HeartBeatStatusEvent',
                        ServerRestoredMuidEvent: 'ServerRestoredMuidEvent',
                        SetAgentTypeEvent: 'SetAgentTypeEvent',
                        ServerNewAgentIdEvent: 'ServerNewAgentIdEvent',
                    };
                function ServerStateMgr_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var ve = (function () {
                    function ServerStateMgr(e, t, r) {
                        !(function ServerStateMgr_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, ServerStateMgr),
                            (this._workerComm = e),
                            (this._utils = t),
                            (this._currState = null),
                            (this._agentIdService = r),
                            e.addMessageListener(he.ServerStateUpdatedEvent, this._onStateUpdateFromWorker.bind(this)),
                            e.addMessageListener(he.ServerNewAgentIdEvent, this._onNewAgentIdFromWorker.bind(this)),
                            t.addEventListener(window, 'storage', this._onStateUpdateFromStorage.bind(this), !0);
                    }
                    return (
                        (function ServerStateMgr_createClass(e, t, r) {
                            t && ServerStateMgr_defineProperties(e.prototype, t),
                                r && ServerStateMgr_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(ServerStateMgr, [
                            {
                                key: 'getServerState',
                                value: function getServerState(e) {
                                    if (this._utils.isUndefinedNull(e))
                                        throw new Error('Invalid sid param of '.concat(e));
                                    return (
                                        (this._currState =
                                            this._currState ||
                                            this._utils.StorageUtils.getFromLocalStorage('cdSrvrState')),
                                        this._currState && this._currState.sid !== e ? null : this._currState
                                    );
                                },
                            },
                            {
                                key: 'onSessionIdChange',
                                value: function onSessionIdChange() {
                                    this._utils.StorageUtils.removeFromLocalStorage('cdSrvrState'),
                                        (this._currState = null);
                                },
                            },
                            {
                                key: '_onStateUpdateFromWorker',
                                value: function _onStateUpdateFromWorker(e) {
                                    this._updateServerState(e);
                                },
                            },
                            {
                                key: '_updateServerState',
                                value: function _updateServerState(e) {
                                    (this._currState = e),
                                        this._utils.StorageUtils.saveToLocalStorage('cdSrvrState', e);
                                },
                            },
                            {
                                key: '_onStateUpdateFromStorage',
                                value: function _onStateUpdateFromStorage(e) {
                                    e &&
                                        e.storageArea &&
                                        e.storageArea.cdSrvrState &&
                                        ((e = JSON.parse(e.storageArea.cdSrvrState)),
                                        this._workerComm.sendAsync(K, {
                                            requestId: e.val.requestId,
                                            sts: e.val.sts,
                                            std: e.val.std,
                                            ott: e.val.ott,
                                        }));
                                },
                            },
                            {
                                key: '_onNewAgentIdFromWorker',
                                value: function _onNewAgentIdFromWorker(e) {
                                    this._agentIdService.set(e);
                                },
                            },
                        ]),
                        ServerStateMgr
                    );
                })();
                function ConfigurationRepository_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var _e = {
                        defaultDynamicWupDispatchRateConfiguration: { type: 'dynamic' },
                        defaultIncrementalWupDispatchRateConfiguration: {
                            type: 'incremental',
                            initialRateValueMs: 500,
                            incrementStepMs: 500,
                            incrementStopMs: 5e3,
                            incrementStartWupSendCount: 20,
                        },
                    },
                    ge = (function () {
                        function ConfigurationRepository() {
                            !(function ConfigurationRepository_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, ConfigurationRepository),
                                (this._requireParseFields = re()),
                                this._requireParseFields.set(
                                    y.dataWupDispatchRateSettings,
                                    y.dataWupDispatchRateSettings
                                ),
                                this._requireParseFields.set(
                                    y.logWupDispatchRateSettings,
                                    y.logWupDispatchRateSettings
                                ),
                                this._requireParseFields.set(y.crossDomainsList, y.crossDomainsList),
                                this._requireParseFields.set(y.allowedUnmaskedValuesList, y.allowedUnmaskedValuesList),
                                this._requireParseFields.set(
                                    y.serverCommunicationSettings,
                                    y.serverCommunicationSettings
                                ),
                                (this._configurationList = {}),
                                (this.configDefault = {
                                    logLevel: c.INFO,
                                    isCrossdomain: !1,
                                    crossDomainsList: [],
                                    crossDomainsTimeout: 5e3,
                                    orientationEventsSamplePeriod: 300,
                                    orientationEventsThreshold: 1,
                                    stateChangeEnabled: !1,
                                    accelerometerEventsSamplePeriod: 0,
                                    dataQPassWorkerInterval: 500,
                                    gyroEventsSamplePeriod: 0,
                                    gyroEventsThreshold: 0.3,
                                    isContextPropsFeature: !0,
                                    isEnabled: !0,
                                    isResetEveryLoad: !1,
                                    isScrollCollect: !0,
                                    isVMDetection: !0,
                                    isAudioDetection: !1,
                                    wupStatisticsLogIntervalMs: 3e4,
                                    heartBeatMessageInterval: 5e3,
                                    resetSessionApiThreshold: 2e4,
                                    wupMessageRequestTimeout: 5e3,
                                    logMessageRequestTimeout: 5e3,
                                    slaveChannelHandshakeTimeout: 6e4,
                                    slaveAliveMessageInterval: 100,
                                    forceDynamicDataWupDispatchSettings: !0,
                                    dataWupDispatchRateSettings: _e.defaultDynamicWupDispatchRateConfiguration,
                                    logWupDispatchRateSettings: { type: 'constant', initialRateValueMs: 2500 },
                                    serverCommunicationSettings: { queueLoadThreshold: 100 },
                                    collectKeyRegionValue: !1,
                                    isMutationObserver: !0,
                                    collectCustomElementAttribute: !0,
                                    shouldMaskClickEventValueField: !0,
                                    isCaptureKeyEvents: !1,
                                    locationEventsTimeoutMsec: 1e4,
                                    isMotionAroundTouchEnabled: !0,
                                    motionPaddingAroundTouchMSec: 3e3,
                                    isMotionOnSessionStart: !0,
                                    motionPaddingOnSessionStartMSec: 2e4,
                                    keyEventsMaskSpecialChars: !1,
                                    collectSelectElementBlurAndFocusEvents: !1,
                                    enableUnmaskedValues: !1,
                                    allowedUnmaskedValuesList: [],
                                    wupMessageNumToRetry: 5,
                                    wupMessageRetryInterval: 1e3,
                                    wupIncrementalGrowthBetweenFailures: 3500,
                                    wupMaxIntervalBetweenFailures: 16e3,
                                    logMessageNumToRetry: 5,
                                    logMessageRetryInterval: 1e3,
                                    logIncrementalGrowthBetweenFailures: 3500,
                                    logMaxIntervalBetweenFailures: 16e3,
                                    cdsNumExpirationTime: 60,
                                    enableCoordinatesMasking: !1,
                                    acknowledgeDataDispatchingRate: 3e3,
                                }),
                                this.loadConfigurations(this.configDefault);
                        }
                        return (
                            (function ConfigurationRepository_createClass(e, t, r) {
                                t && ConfigurationRepository_defineProperties(e.prototype, t),
                                    r && ConfigurationRepository_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(ConfigurationRepository, [
                                {
                                    key: 'isConfigurationUpdatedFromServer',
                                    value: function isConfigurationUpdatedFromServer() {
                                        return !this._isDefaultConfiguration;
                                    },
                                },
                                {
                                    key: 'loadConfigurations',
                                    value: function loadConfigurations(n) {
                                        var o = this;
                                        n &&
                                            ((this._isDefaultConfiguration = n === this.configDefault),
                                            Object.keys(n).forEach(function (e) {
                                                var t,
                                                    r = n[e];
                                                !o._requireParseFields.has(e) ||
                                                    ((t = o._tryParseConfigurationValue(r)) && (r = t)),
                                                    (o._configurationList[e] = r);
                                            }));
                                    },
                                },
                                {
                                    key: 'get',
                                    value: function get(e) {
                                        return this._configurationList[e];
                                    },
                                },
                                {
                                    key: 'set',
                                    value: function set(e, t) {
                                        this._configurationList[e] = t;
                                    },
                                },
                                {
                                    key: 'getAll',
                                    value: function getAll() {
                                        return this._configurationList;
                                    },
                                },
                                {
                                    key: '_tryParseConfigurationValue',
                                    value: function _tryParseConfigurationValue(e) {
                                        if ('string' != typeof e) return null;
                                        try {
                                            return JSON.parse(e);
                                        } catch (e) {}
                                        return null;
                                    },
                                },
                            ]),
                            ConfigurationRepository
                        );
                    })(),
                    me = {
                        TouchEvent: 'touchEvent',
                        KeyEvent: 'keyEvent',
                        ConfigurationLoadedEvent: 'ConfigurationLoadedEvent',
                        NewSessionStartedEvent: 'NewSessionStartedEvent',
                        WupDispatchRateUpdatedEvent: 'WupDispatchRateUpdatedEvent',
                        ApiContextChangeEvent: 'ApiContextChangeEvent',
                        ApiResetSessionEvent: 'ApiResetSessionEvent',
                        ApiCustomerMetadataEvent: 'ApiCustomerMetadataEvent',
                        ApiChangeStateEvent: 'ApiChangeStateEvent',
                        ApiSetCsidEvent: 'ApiSetCsidEvent',
                        ApiSetPsidEvent: 'ApiSetPsidEvent',
                        ApiSetCustomerBrand: 'ApiSetCustomerBrand',
                        ServerStateUpdatedEvent: 'ServerStateUpdatedEvent',
                        ServerRestoredMuidEvent: 'ServerRestoredMuidEvent',
                        ServerNewAgentIdEvent: 'ServerNewAgentIdEvent',
                        StateChangedEvent: 'StateChangedEvent',
                        MutationSingleEvent: 'MutationSingleEvent',
                        MutationAddedNodes: 'MutationAddedNodes',
                        MutationRemovedNodes: 'MutationRemovedNodes',
                        StandardInputEvent: 'StandardInputEvent',
                        StandardInputFocusEvent: 'StandardInputFocusEvent',
                        StandardInputBlurEvent: 'StandardInputBlurEvent',
                        StandardOnClickEvent: 'StandardOnClickEvent',
                        StandardOnSelectEvent: 'StandardOnSelectEvent',
                        ElementFocusEvent: 'ElementFocusEvent',
                        ElementBlurEvent: 'ElementBlurEvent',
                        StandardOnFormSubmitEvent: 'StandardOnFormSubmitEvent',
                        SyntheticInputMaskEvent: 'SyntheticInputMaskEvent',
                        CutEvent: 'CutEvent',
                        CopyEvent: 'CopyEvent',
                        PasteEvent: 'PasteEvent',
                        DeviceOrientationEvent: 'DeviceOrientationEvent',
                        BeforeInstallPromptEvent: 'BeforeInstallPromptEvent',
                        FocusEvent: 'FocusEvent',
                        BlurEvent: 'BlurEvent',
                        ResizeEvent: 'ResizeEvent',
                        DOMContentLoadedEvent: 'DOMContentLoadedEvent',
                        VisibilityChangeEvent: 'VisibilityChangeEvent',
                        ScrollEvent: 'ScrollEvent',
                        WindowMessageEvent: 'WindowMessageEvent',
                        WorkerSystemStatusEvent: 'WorkerSystemStatusEvent',
                        CustomElementDetectedEvent: 'CustomElementDetectedEvent',
                        CustomElementAddedEvent: 'CustomElementAddedEvent',
                        CustomElementRemovedEvent: 'CustomElementRemovedEvent',
                        CustomElementInaccessible: 'CustomElementInaccessible',
                        CustomElementSubmitted: 'CustomElementSubmitted',
                        BrowserContextAdded: 'BrowserContextAdded',
                        RunDefaultFeatures: 'RunDefaultFeatures',
                        StopDefaultFeatures: 'StopDefaultFeatures',
                        CustomInputElement: 'CustomInputElement',
                    };
                function ConfigurationService_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var be = (function () {
                    function ConfigurationService(e, t, r, n, o) {
                        if (
                            (!(function ConfigurationService_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, ConfigurationService),
                            !r)
                        )
                            throw new Error('messageBus param must be defined');
                        (this._configurationLoadedCallback = null),
                            (this._utils = e),
                            (this._configurationRepository = t),
                            (this._messageBus = r),
                            (this._cidCache = n),
                            o &&
                                o.addMessageListener(
                                    he.ConfigurationLoadedEvent,
                                    this._onConfigurationLoadedEvent.bind(this)
                                );
                    }
                    return (
                        (function ConfigurationService_createClass(e, t, r) {
                            t && ConfigurationService_defineProperties(e.prototype, t),
                                r && ConfigurationService_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(ConfigurationService, [
                            {
                                key: 'updateLogUrlToWorker',
                                value: function updateLogUrlToWorker(e, t, r, n) {
                                    n && this._configurationRepository.set('logAddress', n),
                                        this._configurationRepository.get('logAddress') &&
                                            ((t = {
                                                logAddress: ''
                                                    .concat(this._configurationRepository.get('logAddress'), '?cid=')
                                                    .concat(this._cidCache.get(), '&cdsnum=')
                                                    .concat(e, '&csid=')
                                                    .concat(t, '&ds=js&sdkVer=')
                                                    .concat(this._utils.scriptVersion),
                                            }),
                                            r.sendAsync(H, t));
                                },
                            },
                            {
                                key: 'setServerUrl',
                                value: function setServerUrl(e) {
                                    this._configurationRepository.set('serverAddress', e);
                                    var t = e.indexOf('cid=') + 4,
                                        r = -1 === (r = e.indexOf('&', t)) ? void 0 : r;
                                    this._cidCache.set(e.substring(t, r));
                                },
                            },
                            {
                                key: 'setConfigurationLoadedCallback',
                                value: function setConfigurationLoadedCallback(e) {
                                    this._configurationLoadedCallback = e;
                                },
                            },
                            {
                                key: '_onConfigurationLoadedEvent',
                                value: function _onConfigurationLoadedEvent(e) {
                                    this._configurationRepository.loadConfigurations(e),
                                        this._configurationLoadedCallback &&
                                            this._configurationLoadedCallback(
                                                this._configurationRepository.get(y.isEnabled)
                                            ),
                                        this._messageBus.publish(
                                            me.ConfigurationLoadedEvent,
                                            this._configurationRepository
                                        );
                                },
                            },
                        ]),
                        ConfigurationService
                    );
                })();
                function DataCollector_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Ce = (function () {
                        function DataCollector() {
                            !(function DataCollector_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, DataCollector);
                        }
                        return (
                            (function DataCollector_createClass(e, t, r) {
                                t && DataCollector_defineProperties(e.prototype, t),
                                    r && DataCollector_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(DataCollector, [
                                { key: 'startFeature', value: function startFeature() {} },
                                { key: 'stopFeature', value: function stopFeature() {} },
                                { key: 'updateFeatureConfig', value: function updateFeatureConfig() {} },
                                { key: 'sendToQueue', value: function sendToQueue() {} },
                                {
                                    key: 'getEventTimestamp',
                                    value: function getEventTimestamp() {
                                        return B.dateNow();
                                    },
                                },
                                {
                                    key: 'getTimestampFromEvent',
                                    value: function getTimestampFromEvent(e) {
                                        return e.timeStamp ? B.cutDecimalPointDigits(e.timeStamp, 3) : 0;
                                    },
                                },
                            ]),
                            DataCollector
                        );
                    })(),
                    we = { false: 0, true: 1, undefined: 2, null: 2 };
                function TouchEventCollector_typeof(e) {
                    return (TouchEventCollector_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function TouchEventCollector_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function TouchEventCollector_setPrototypeOf(e, t) {
                    return (TouchEventCollector_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function TouchEventCollector_createSuper(r) {
                    var n = (function TouchEventCollector_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = TouchEventCollector_getPrototypeOf(r);
                        return (function TouchEventCollector_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === TouchEventCollector_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return TouchEventCollector_assertThisInitialized(e);
                        })(
                            this,
                            n
                                ? ((e = TouchEventCollector_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function TouchEventCollector_assertThisInitialized(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e;
                }
                function TouchEventCollector_getPrototypeOf(e) {
                    return (TouchEventCollector_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var Ee = {
                        configKey: 'isTouchEvents',
                        isDefault: !0,
                        shouldRunPerContext: !1,
                        shouldRunPerSession: !1,
                        shouldRun: !0,
                        isFrameRelated: !0,
                        runInSlave: !0,
                        runInLean: !0,
                        runInUns: !1,
                        isRunning: !1,
                        instance: null,
                    },
                    Se = {
                        pointerdown: 'touchstart',
                        pointerup: 'touchend',
                        pointermove: 'touchmove',
                        MSPointerDown: 'touchstart',
                        MSPointerUp: 'touchend',
                        MSPointerMove: 'touchmove',
                    },
                    Pe = { touchstart: 0, touchmove: 1, touchend: 2, touchcancel: 3 },
                    ke = [
                        'eventSequence',
                        'timestamp',
                        'eventType',
                        'isTrusted',
                        'elementHash',
                        'clientX',
                        'clientY',
                        'touchIndex',
                        'touchSizeMajor',
                        'touchSizeMinor',
                        'pageX',
                        'pageY',
                        'screenX',
                        'screenY',
                        'relativeTime',
                        'touchPressure',
                    ],
                    Oe = (function () {
                        !(function TouchEventCollector_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && TouchEventCollector_setPrototypeOf(e, t);
                        })(TouchEventCollector, Ce);
                        var i = TouchEventCollector_createSuper(TouchEventCollector);
                        function TouchEventCollector(e, t, r, n) {
                            var o;
                            return (
                                (function TouchEventCollector_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, TouchEventCollector),
                                ((o = i.call(this))._utils = e),
                                (o._dataQ = r),
                                (o._elements = t),
                                (o._msgBus = n),
                                (o._onAllBrowsersTouchEventBinded = o._onAllBrowsersTouchEvent.bind(
                                    TouchEventCollector_assertThisInitialized(o)
                                )),
                                o
                            );
                        }
                        return (
                            (function TouchEventCollector_createClass(e, t, r) {
                                t && TouchEventCollector_defineProperties(e.prototype, t),
                                    r && TouchEventCollector_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(
                                TouchEventCollector,
                                [
                                    {
                                        key: 'startFeature',
                                        value: function startFeature(e) {
                                            this._bind(e);
                                        },
                                    },
                                    {
                                        key: 'stopFeature',
                                        value: function stopFeature(e) {
                                            this._unbind(e);
                                        },
                                    },
                                    {
                                        key: '_addToCommunicationQueue',
                                        value: function _addToCommunicationQueue(e, t, r, n) {
                                            (e !== Pe.touchstart && e !== Pe.touchend) ||
                                                this._msgBus.publish(me.TouchEvent, { action: e });
                                            var o = this.getEventTimestamp(n),
                                                i = we[n.isTrusted],
                                                s = this._elements.getElement(n.target),
                                                a = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
                                            this._utils.isUndefinedNull(e) && (e = -1),
                                                this._utils.isUndefinedNull(t) && (t = -1);
                                            n = this.getTimestampFromEvent(n);
                                            this._dataQ.addToQueue(
                                                'touch_events',
                                                this._utils.convertToArrayByMap(ke, {
                                                    eventSequence: a,
                                                    timestamp: o,
                                                    eventType: e,
                                                    isTrusted: i,
                                                    elementHash: s,
                                                    clientX: r.clientX ? Math.round(r.clientX) : 0,
                                                    clientY: r.clientY ? Math.round(r.clientY) : 0,
                                                    touchIndex: t,
                                                    touchSizeMajor: r.radiusX ? 2 * r.radiusX : 0,
                                                    touchSizeMinor: r.radiusY ? 2 * r.radiusY : 0,
                                                    pageX: r.pageX || 0,
                                                    pageY: r.pageY || 0,
                                                    screenX: r.screenX || 0,
                                                    screenY: r.screenY || 0,
                                                    relativeTime: n,
                                                    touchPressure: r.force || -1,
                                                })
                                            );
                                        },
                                    },
                                    {
                                        key: '_bind',
                                        value: function _bind(e) {
                                            var t,
                                                r = e.getDocument();
                                            if (
                                                (window.TouchEvent
                                                    ? (t = ['touchstart', 'touchmove', 'touchend', 'touchcancel'])
                                                    : window.PointerEvent &&
                                                      (t = ['pointerdown', 'pointermove', 'pointerup']),
                                                (this._listeningToEvents = t),
                                                this._listeningToEvents)
                                            )
                                                for (var n = 0; n < this._listeningToEvents.length; n++)
                                                    this._utils.addEventListener(
                                                        r,
                                                        this._listeningToEvents[n],
                                                        this._onAllBrowsersTouchEventBinded
                                                    );
                                        },
                                    },
                                    {
                                        key: '_unbind',
                                        value: function _unbind(e) {
                                            var t = e.getDocument();
                                            if (this._listeningToEvents)
                                                for (var r = 0; r < this._listeningToEvents.length; r++)
                                                    this._utils.removeEventListener(
                                                        t,
                                                        this._listeningToEvents[r],
                                                        this._onAllBrowsersTouchEventBinded
                                                    );
                                        },
                                    },
                                    {
                                        key: '_onAllBrowsersTouchEvent',
                                        value: function _onAllBrowsersTouchEvent(e) {
                                            return this._onIeTouchEvent(e), this._onTouchEvent(e), !0;
                                        },
                                    },
                                    {
                                        key: '_onTouchEvent',
                                        value: function _onTouchEvent(e) {
                                            if (
                                                (null === e.pointerType || void 0 === e.pointerType) &&
                                                void 0 !== e.changedTouches
                                            )
                                                for (var t = Pe[e.type], r = 0; r < e.changedTouches.length; r++) {
                                                    var n = e.changedTouches[r],
                                                        o = n.identifier % 1e4;
                                                    this._addToCommunicationQueue(t, o, n, e);
                                                }
                                        },
                                    },
                                    {
                                        key: '_onIeTouchEvent',
                                        value: function _onIeTouchEvent(e) {
                                            var t, r;
                                            null != e.pointerType &&
                                                (('touch' !== e.pointerType &&
                                                    'pen' !== e.pointerType &&
                                                    e.pointerType !== e.MSPOINTER_TYPE_TOUCH &&
                                                    e.pointerType !== e.MSPOINTER_TYPE_PEN) ||
                                                    ((r = Se[e.type] || 'touchcancel'),
                                                    (t = e.pointerId ? e.pointerId % 1e4 : 0),
                                                    (r = Pe[r]),
                                                    this._addToCommunicationQueue(r, t, e, e)));
                                        },
                                    },
                                ],
                                [
                                    {
                                        key: 'getDefaultSettings',
                                        value: function getDefaultSettings() {
                                            return Ee;
                                        },
                                    },
                                ]
                            ),
                            TouchEventCollector
                        );
                    })();
                function SameCharService_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Be = { true: 1, false: 0, undefined: -1 },
                    Me = (function () {
                        function SameCharService() {
                            !(function SameCharService_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, SameCharService),
                                (this._elementList = new WeakMap());
                        }
                        return (
                            (function SameCharService_createClass(e, t, r) {
                                t && SameCharService_defineProperties(e.prototype, t),
                                    r && SameCharService_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(SameCharService, [
                                {
                                    key: 'update',
                                    value: function update(e, t) {
                                        this._elementList.set(e, t);
                                    },
                                },
                                {
                                    key: 'compare',
                                    value: function compare(e, t) {
                                        return Be[t === this._elementList.get(e)];
                                    },
                                },
                            ]),
                            SameCharService
                        );
                    })(),
                    Re = {
                        IntlBackslash: '0',
                        Digit1: '0',
                        Digit2: '0',
                        Digit3: '0',
                        Digit4: '1',
                        Digit5: '1',
                        Digit6: '1',
                        Digit7: '1',
                        Digit8: '2',
                        Digit9: '2',
                        Digit0: '2',
                        KeyQ: '3',
                        KeyW: '3',
                        KeyE: '3',
                        KeyA: '3',
                        KeyS: '3',
                        KeyD: '3',
                        KeyZ: '3',
                        KeyX: '3',
                        KeyC: '3',
                        KeyR: '4',
                        KeyT: '4',
                        KeyF: '4',
                        KeyG: '4',
                        KeyV: '4',
                        KeyB: '4',
                        KeyY: '5',
                        KeyU: '5',
                        KeyH: '5',
                        KeyJ: '5',
                        KeyN: '5',
                        KeyM: '5',
                        KeyI: '6',
                        KeyO: '6',
                        KeyP: '6',
                        KeyK: '6',
                        KeyL: '6',
                        Comma: '6',
                        Period: '6',
                        Semicolon: '7',
                        Minus: '7',
                        Equal: '7',
                        Slash: '7',
                        BracketLeft: '7',
                        Backslash: '7',
                        BracketRight: '7',
                        Quote: '7',
                        NumLock: '8',
                        NumpadDivide: '8',
                        NumpadMultiply: '8',
                        NumpadSubtract: '8',
                        NumpadAdd: '8',
                        NumpadEnter: '8',
                        NumpadDecimal: '8',
                        Numpad0: '8',
                        Numpad1: '8',
                        Numpad2: '8',
                        Numpad3: '8',
                        Numpad4: '8',
                        Numpad5: '8',
                        Numpad6: '8',
                        Numpad7: '8',
                        Numpad8: '8',
                        Numpad9: '8',
                    };
                function KeyEventCollector_typeof(e) {
                    return (KeyEventCollector_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function KeyEventCollector_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function KeyEventCollector_setPrototypeOf(e, t) {
                    return (KeyEventCollector_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function KeyEventCollector_createSuper(r) {
                    var n = (function KeyEventCollector_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = KeyEventCollector_getPrototypeOf(r);
                        return (function KeyEventCollector_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === KeyEventCollector_typeof(t) || 'function' == typeof t)) return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return KeyEventCollector_assertThisInitialized(e);
                        })(
                            this,
                            n
                                ? ((e = KeyEventCollector_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function KeyEventCollector_assertThisInitialized(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e;
                }
                function KeyEventCollector_getPrototypeOf(e) {
                    return (KeyEventCollector_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var De = {
                        configKey: 'isKeyEvents',
                        isDefault: !0,
                        shouldRunPerContext: !1,
                        shouldRunPerSession: !1,
                        shouldRun: !0,
                        isFrameRelated: !0,
                        runInSlave: !0,
                        runInLean: !0,
                        runInUns: !1,
                        isRunning: !1,
                        instance: null,
                    },
                    Fe = { keyup: 0, keydown: 1, keypress: 2 },
                    Te = [
                        'eventSequence',
                        'timestamp',
                        'eventType',
                        'isTrusted',
                        'elementHash',
                        'charCode',
                        'character',
                        'keyComboType',
                        'isCtrl',
                        'isShift',
                        'isAlt',
                        'isMetaKey',
                        'keyLocation',
                        'code',
                        'key',
                        'isRepeat',
                        'keyRegion',
                        'relativeTime',
                        'isSameKey',
                    ],
                    Ie = (function () {
                        !(function KeyEventCollector_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && KeyEventCollector_setPrototypeOf(e, t);
                        })(KeyEventCollector, Ce);
                        var u = KeyEventCollector_createSuper(KeyEventCollector);
                        function KeyEventCollector(e, t, r, n, o, i, s) {
                            var a;
                            return (
                                (function KeyEventCollector_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, KeyEventCollector),
                                ((a = u.call(this))._configurationRepository = e),
                                (a._utils = t),
                                (a._elements = r),
                                (a._dataQueue = n),
                                (a._msgBus = o),
                                (a._sameCharService = i),
                                (a._maskingService = s),
                                (a.comboCodes = ['c', 'v', 'a', 'x', 'z', 'p', 's']),
                                (a._onKeyEvent = a._onKeyEvent.bind(KeyEventCollector_assertThisInitialized(a))),
                                (a._useCaptureEvents = a._configurationRepository.get(y.isCaptureKeyEvents)),
                                a
                            );
                        }
                        return (
                            (function KeyEventCollector_createClass(e, t, r) {
                                t && KeyEventCollector_defineProperties(e.prototype, t),
                                    r && KeyEventCollector_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(
                                KeyEventCollector,
                                [
                                    {
                                        key: 'startFeature',
                                        value: function startFeature(e) {
                                            try {
                                                var t = e.getDocument();
                                                this._bind(t, this._onKeyEvent, this._useCaptureEvents);
                                            } catch (e) {
                                                b.error('KeyEvents:startFeature failed, msg: '.concat(e.message), e);
                                            }
                                        },
                                    },
                                    {
                                        key: 'stopFeature',
                                        value: function stopFeature(e) {
                                            try {
                                                var t = e.getDocument();
                                                this._unbind(t, this._onKeyEvent, this._useCaptureEvents);
                                            } catch (e) {
                                                b.error('KeyEvents:stopFeature failed, msg: '.concat(e.message), e);
                                            }
                                        },
                                    },
                                    {
                                        key: 'updateFeatureConfig',
                                        value: function updateFeatureConfig(e) {
                                            try {
                                                var t, r;
                                                this._configurationRepository.get(y.isCaptureKeyEvents) !==
                                                    this._useCaptureEvents &&
                                                    ((t = e.getDocument()),
                                                    (r = this._configurationRepository.get(y.isCaptureKeyEvents)),
                                                    this._unbind(t, this._onKeyEvent, this._useCaptureEvents),
                                                    this._bind(t, this._onKeyEvent, r),
                                                    (this._useCaptureEvents = r));
                                            } catch (e) {
                                                b.error('KeyEvents:startFeature failed, msg: '.concat(e.message), e);
                                            }
                                        },
                                    },
                                    {
                                        key: '_bind',
                                        value: function _bind(e, t, r) {
                                            e.addEventListener('keyup', t, r),
                                                e.addEventListener('keydown', t, r),
                                                e.addEventListener('keypress', t, r);
                                        },
                                    },
                                    {
                                        key: '_unbind',
                                        value: function _unbind(e, t, r) {
                                            e.removeEventListener('keyup', t, r),
                                                e.removeEventListener('keydown', t, r),
                                                e.removeEventListener('keypress', t, r);
                                        },
                                    },
                                    {
                                        key: '_onKeyEvent',
                                        value: function _onKeyEvent(e) {
                                            var t = Fe[e.type];
                                            (t !== Fe.keydown && t !== Fe.keyup) ||
                                                this._msgBus.publish(me.KeyEvent, { action: t }),
                                                this._handleKeyEvent(e, 'key_events');
                                        },
                                    },
                                    {
                                        key: '_handleKeyEvent',
                                        value: function _handleKeyEvent(e, t) {
                                            var r = Fe[e.type];
                                            this._utils.isUndefinedNull(r) && (r = -1);
                                            var n = this._utils.StorageUtils.getAndUpdateEventSequenceNumber(),
                                                o = this.getEventTimestamp(e),
                                                i = e.key || this._maskingService.getKeyFromLegacyProperties(e),
                                                s = e.code || '',
                                                a = this._maskingService.maskKey(i, s),
                                                u = 1 < a.key.length ? '' : a.key,
                                                c = this._elements.getElement(e.target),
                                                l = this._getComboType(e, i),
                                                f = we[e.isTrusted],
                                                p =
                                                    'Meta' === e.key ||
                                                    'OS' === e.key ||
                                                    'Win' === e.key ||
                                                    e.metaKey ||
                                                    91 === e.keyCode ||
                                                    92 === e.keyCode,
                                                d = this._configurationRepository.get(y.collectKeyRegionValue)
                                                    ? this._getKeyRegion(s)
                                                    : '-1',
                                                i = this.getTimestampFromEvent(e),
                                                s = Be.undefined;
                                            'keypress' === e.type &&
                                                ((s = this._sameCharService.compare(e.target, e.key)),
                                                this._sameCharService.update(e.target, e.key)),
                                                b.isDebug() &&
                                                    b.trace(
                                                        'onKeyEvent: got event: '
                                                            .concat(r, ', at time:')
                                                            .concat(o, ', key: ')
                                                            .concat(a.key, ', code:')
                                                            .concat(a.code, ', old charCode:')
                                                            .concat(a.charCode)
                                                    ),
                                                this._dataQueue.addToQueue(
                                                    t,
                                                    this._utils.convertToArrayByMap(Te, {
                                                        eventType: r,
                                                        eventSequence: n,
                                                        timestamp: o,
                                                        charCode: a.charCode,
                                                        character: u,
                                                        elementHash: c,
                                                        keyComboType: l,
                                                        isTrusted: f,
                                                        isCtrl: e.ctrlKey || !1,
                                                        isShift: e.shiftKey || !1,
                                                        isAlt: e.altKey || !1,
                                                        isMetaKey: p || !1,
                                                        keyLocation: e.location || 0,
                                                        code: a.code || '',
                                                        key: a.key || '',
                                                        location: e.location || '',
                                                        isRepeat: e.repeat || !1,
                                                        keyRegion: d,
                                                        relativeTime: i,
                                                        isSameKey: s,
                                                    })
                                                );
                                        },
                                    },
                                    {
                                        key: '_getKeyRegion',
                                        value: function _getKeyRegion(e) {
                                            return Re[e] || '-1';
                                        },
                                    },
                                    {
                                        key: '_getComboType',
                                        value: function _getComboType(e, t) {
                                            return (e.ctrlKey || e.metaKey) && void 0 !== t
                                                ? this.comboCodes.indexOf(t)
                                                : -1;
                                        },
                                    },
                                ],
                                [
                                    {
                                        key: 'getDefaultSettings',
                                        value: function getDefaultSettings() {
                                            return De;
                                        },
                                    },
                                ]
                            ),
                            KeyEventCollector
                        );
                    })();
                function SensorsDataQueue_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var xe = (function () {
                    function SensorsDataQueue(e, t, r, n, o) {
                        !(function SensorsDataQueue_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, SensorsDataQueue),
                            (this._historyBuffer = []),
                            (this._isTouchInProgress = !1),
                            (this._touchStartCount = 0),
                            (this._isPostTouch = !1),
                            (this._touchEndTime = 0),
                            (this._sensorGateKeeper = o),
                            (this._dataQueue = t),
                            (this._configurationRepository = e),
                            (this._msgBus = r),
                            (this._utils = n),
                            this._msgBus.subscribe(me.TouchEvent, this._onTouch.bind(this)),
                            this._msgBus.subscribe(me.KeyEvent, this._onTouch.bind(this)),
                            (this._isMotionAroundTouchEnabled = this._configurationRepository.get(
                                y.isMotionAroundTouchEnabled
                            )),
                            (this._aroundTouchInterval = this._configurationRepository.get(
                                y.motionPaddingAroundTouchMSec
                            ));
                    }
                    return (
                        (function SensorsDataQueue_createClass(e, t, r) {
                            t && SensorsDataQueue_defineProperties(e.prototype, t),
                                r && SensorsDataQueue_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(SensorsDataQueue, [
                            {
                                key: 'addToQueue',
                                value: function addToQueue(e, t, r, n) {
                                    var o = this._utils.dateNow();
                                    if (
                                        (this._isPostTouch &&
                                            o - this._touchEndTime > this._aroundTouchInterval &&
                                            (b.debug(
                                                'SensorsDataQueue: stopped post touch events, time has passed ('.concat(
                                                    this._aroundTouchInterval,
                                                    ' millisec)'
                                                )
                                            ),
                                            (this._isPostTouch = !1)),
                                        !this._isMotionAroundTouchEnabled ||
                                            this._isTouchInProgress ||
                                            this._isPostTouch ||
                                            this._sensorGateKeeper.isOpen())
                                    )
                                        this._dataQueue.addToQueue(e, t, r, n);
                                    else {
                                        this._historyBuffer.push({
                                            name: e,
                                            data: t,
                                            addCtxId: r,
                                            isImmediateWup: n,
                                            timestamp: o,
                                        });
                                        for (var i = 0, s = this._historyBuffer.length; i < s; i++) {
                                            if (!(o - this._historyBuffer[0].timestamp > this._aroundTouchInterval))
                                                break;
                                            this._historyBuffer.shift();
                                        }
                                    }
                                },
                            },
                            {
                                key: 'onConfigUpdate',
                                value: function onConfigUpdate() {
                                    (this._aroundTouchInterval =
                                        void 0 !== this._configurationRepository.get(y.motionPaddingAroundTouchMSec)
                                            ? this._configurationRepository.get(y.motionPaddingAroundTouchMSec)
                                            : this._aroundTouchInterval),
                                        (this._isMotionAroundTouchEnabled =
                                            void 0 !== this._configurationRepository.get(y.isMotionAroundTouchEnabled)
                                                ? this._configurationRepository.get(y.isMotionAroundTouchEnabled)
                                                : this._isMotionAroundTouchEnabled);
                                },
                            },
                            {
                                key: '_sendBuffer',
                                value: function _sendBuffer() {
                                    var e = this._utils.dateNow();
                                    b.debug('sending history sensors buffer ts='.concat(e));
                                    for (var t = 0, r = this._historyBuffer.length; t < r; t++)
                                        e - this._historyBuffer[t].timestamp <= this._aroundTouchInterval &&
                                            this._dataQueue.addToQueue(
                                                this._historyBuffer[t].name,
                                                this._historyBuffer[t].data,
                                                this._historyBuffer[t].addCtxId,
                                                this._historyBuffer[t].isImmediateWup
                                            );
                                    this._historyBuffer = [];
                                },
                            },
                            {
                                key: '_onTouch',
                                value: function _onTouch(e) {
                                    return (
                                        this._isMotionAroundTouchEnabled &&
                                            (this._isTouchInProgress ||
                                            (e.action !== Pe.touchstart && e.action !== Fe.keydown)
                                                ? e.action === Pe.touchend || e.action === Fe.keyup
                                                    ? (this._touchStartCount--,
                                                      this._touchStartCount <= 0 &&
                                                          ((this._isTouchInProgress = !1),
                                                          (this._isPostTouch = !0),
                                                          (this._touchEndTime = this._utils.dateNow()),
                                                          b.debug(
                                                              'stopped touch event in sensors data q ts='.concat(
                                                                  this._utils.dateNow()
                                                              )
                                                          )))
                                                    : (e.action !== Pe.touchstart && e.action !== Fe.keydown) ||
                                                      this._touchStartCount++
                                                : (b.debug(
                                                      'Started touch event in sensors data q ts='.concat(
                                                          this._utils.dateNow()
                                                      )
                                                  ),
                                                  (this._isTouchInProgress = !0),
                                                  (this._touchStartCount = 1),
                                                  this._sendBuffer())),
                                        !1
                                    );
                                },
                            },
                        ]),
                        SensorsDataQueue
                    );
                })();
                function XPathHashProducer_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Ae = (function () {
                    function XPathHashProducer() {
                        !(function XPathHashProducer_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, XPathHashProducer),
                            this._initialize();
                    }
                    return (
                        (function XPathHashProducer_createClass(e, t, r) {
                            t && XPathHashProducer_defineProperties(e.prototype, t),
                                r && XPathHashProducer_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(XPathHashProducer, [
                            {
                                key: '_initialize',
                                value: function _initialize() {
                                    (this._nodeParentHash = new WeakMap()),
                                        (this._nodeNameOccurencesPerParent = []),
                                        this._nodeNameOccurencesPerParent.push({});
                                },
                            },
                            {
                                key: 'getUniqueElementName',
                                value: function getUniqueElementName(e) {
                                    return (
                                        e.nodeName.toLowerCase() +
                                        (e.id || '') +
                                        (e.name || '') +
                                        (e.href || '') +
                                        ((e.getAttribute && e.getAttribute('class')) || '') +
                                        (e.title || '')
                                    );
                                },
                            },
                            {
                                key: 'produce',
                                value: function produce(e) {
                                    var t,
                                        r = [],
                                        n = e,
                                        o =
                                            (e.id || '') +
                                            (e.name || '') +
                                            (e.nodeName || '') +
                                            (e.className || '') +
                                            (e.title || '') +
                                            (e.href || '');
                                    if (e.parentNode && this._nodeParentHash.has(e.parentNode)) {
                                        var i = e.nodeName.toLowerCase(),
                                            s = this._nodeParentHash.get(e.parentNode),
                                            a = s.occurrencesIndex,
                                            u = 0;
                                        return (
                                            this._nodeNameOccurencesPerParent[a] &&
                                                (void 0 !== this._nodeNameOccurencesPerParent[a][i]
                                                    ? ((u = ++this._nodeNameOccurencesPerParent[a][i]),
                                                      (this._nodeNameOccurencesPerParent[a][i] = u))
                                                    : (this._nodeNameOccurencesPerParent[a][i] = 0)),
                                            (o += s.hash + ',' + this.getUniqueElementName(e) + (u || ''))
                                        );
                                    }
                                    t = e.parentNode || !1;
                                    for (var c = 0; e && 1 === e.nodeType; e = e.parentNode) {
                                        for (var l = 0, f = e.previousSibling; f; f = f.previousSibling)
                                            f.nodeType !== Node.DOCUMENT_TYPE_NODE &&
                                                f.nodeName === e.nodeName &&
                                                (c = ++l);
                                        var p = this.getUniqueElementName(e),
                                            d = l || '';
                                        r.splice(0, 0, p + d);
                                    }
                                    o += r.length ? '/' + r.join() : '';
                                    s = [];
                                    return (
                                        0 < r.length && (s = r.slice(0, r.length - 1)),
                                        t &&
                                            (((u = {})[n.nodeName.toLowerCase()] = c),
                                            (u = this._nodeNameOccurencesPerParent.push(u) - 1),
                                            this._nodeParentHash.set(t, { hash: '/' + s.join(), occurrencesIndex: u })),
                                        o
                                    );
                                },
                            },
                        ]),
                        XPathHashProducer
                    );
                })();
                function ElementsCollector_typeof(e) {
                    return (ElementsCollector_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function ElementsCollector_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function ElementsCollector_setPrototypeOf(e, t) {
                    return (ElementsCollector_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function ElementsCollector_createSuper(r) {
                    var n = (function ElementsCollector_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = ElementsCollector_getPrototypeOf(r);
                        return (function ElementsCollector_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === ElementsCollector_typeof(t) || 'function' == typeof t)) return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function ElementsCollector_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = ElementsCollector_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function ElementsCollector_getPrototypeOf(e) {
                    return (ElementsCollector_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var Le = (function () {
                        !(function ElementsCollector_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && ElementsCollector_setPrototypeOf(e, t);
                        })(ElementsCollector, Ce);
                        var s = ElementsCollector_createSuper(ElementsCollector);
                        function ElementsCollector(e, t, r, n, o) {
                            var i;
                            return (
                                (function ElementsCollector_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, ElementsCollector),
                                ((i = s.call(this))._configurationRepository = e),
                                (i._utils = t),
                                (i._dataQueue = r),
                                (i._contextMgr = n),
                                (i._maskingService = o),
                                (i._elementHashWMap = new WeakMap()),
                                (i._collectPosition = !0),
                                (i._collectClassName = !0),
                                (i._collectTitle = !0),
                                (i._collectHref = !0),
                                (i._collectCustomElementAttribute = !0),
                                (i._customElementAttribute = i._configurationRepository.get(y.customElementAttribute)),
                                (i._maxElemValLength = 30),
                                (i._XPathHashProducer = new Ae()),
                                (i._allowedUnmaskedValuesList = i._configurationRepository.get(
                                    y.allowedUnmaskedValuesList
                                )),
                                (i._enableUnmaskedValues = i._configurationRepository.get(y.enableUnmaskedValues)),
                                (i._enableAutoElementId = i._configurationRepository.get(y.enableAutoElementId)),
                                (i._autoElementIdLimit = i._configurationRepository.get(y.autoElementIdLimit)),
                                i
                            );
                        }
                        return (
                            (function ElementsCollector_createClass(e, t, r) {
                                t && ElementsCollector_defineProperties(e.prototype, t),
                                    r && ElementsCollector_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(ElementsCollector, [
                                {
                                    key: 'getElement',
                                    value: function getElement(e) {
                                        if (this._utils.isUndefinedNull(e) || e === document || e === document.body)
                                            return -1;
                                        var t,
                                            r = -1;
                                        return (
                                            this._elementHashWMap.has(e)
                                                ? (r = this._elementHashWMap.get(e).hash)
                                                : ((r = (t = this._XPathHashProducer.produce(e))
                                                      ? this._utils.getHash(t)
                                                      : -1),
                                                  this._elementHashWMap.set(e, {
                                                      hash: r,
                                                      contextList: [this._contextMgr.contextName],
                                                  }),
                                                  this._sendElementToServer(e, r)),
                                            r
                                        );
                                    },
                                },
                                {
                                    key: 'resendElementPerContext',
                                    value: function resendElementPerContext(e) {
                                        var t, r;
                                        this._elementHashWMap.has(e)
                                            ? ((r = (t = this._elementHashWMap.get(e)).hash),
                                              t.contextList.indexOf(this._contextMgr.contextName) < 0 &&
                                                  (t.contextList.push(this._contextMgr.contextName),
                                                  this._elementHashWMap.set(e, {
                                                      hash: t.hash,
                                                      contextList: t.contextList,
                                                  }),
                                                  this._sendElementToServer(e, r)))
                                            : b.error(
                                                  'received for resendElementPerContext bad element, not in hash map. id='.concat(
                                                      e.id
                                                  )
                                              );
                                    },
                                },
                                {
                                    key: 'isListed',
                                    value: function isListed(e) {
                                        return this._elementHashWMap.has(e);
                                    },
                                },
                                {
                                    key: 'getElementData',
                                    value: function getElementData(e) {
                                        return this._elementHashWMap.get(e);
                                    },
                                },
                                {
                                    key: 'getElementContextList',
                                    value: function getElementContextList(e) {
                                        return this._elementHashWMap.get(e).contextList;
                                    },
                                },
                                {
                                    key: '_sendElementToServer',
                                    value: function _sendElementToServer(e, t) {
                                        var r = this._collectPosition
                                                ? e.getBoundingClientRect && e.getBoundingClientRect()
                                                : null,
                                            n = -1,
                                            o = -1,
                                            i = -1,
                                            s = -1;
                                        r &&
                                            ((n = Math.round(r.left)),
                                            (o = Math.round(r.top)),
                                            (i = Math.round(r.right - r.left)),
                                            (s = Math.round(r.bottom - r.top)));
                                        var a = this._maskingService.maskAbsoluteIfRequired(e.id),
                                            u = this._maskingService.maskAbsoluteIfRequired(e.name),
                                            c =
                                                (this._collectClassName &&
                                                    e.getAttribute &&
                                                    this._verifyNoPrivateData(e.getAttribute('class'))) ||
                                                '',
                                            l = (this._collectTitle && this._verifyNoPrivateData(e.title)) || '',
                                            f = this._verifyNoPrivateData(e.nodeName) || '',
                                            p = (this._collectHref && this._verifyNoPrivateData(e.href)) || '';
                                        0 < p.length && (p = this._utils.clearTextFromNumbers(p));
                                        var d =
                                                (this._collectCustomElementAttribute &&
                                                    e.getAttribute &&
                                                    this._verifyNoPrivateData(
                                                        e.getAttribute(this._customElementAttribute)
                                                    )) ||
                                                '',
                                            h = this._maskingService.maskAbsoluteIfRequired(d),
                                            v = '';
                                        'SELECT' === e.nodeName && (v = this._utils.getDropDownListValues(e).join(';'));
                                        var y = e.value || e.textContent || e.innerHTML || '',
                                            _ = '';
                                        this._enableUnmaskedValues &&
                                            Array.isArray(this._allowedUnmaskedValuesList) &&
                                            0 < this._allowedUnmaskedValuesList.length &&
                                            this._allowedUnmaskedValuesList.forEach(function (e) {
                                                'string' != typeof e
                                                    ? b.error(
                                                          'Unsupported allowedUnmaksedValuesList value was provided: '.concat(
                                                              e.toString()
                                                          )
                                                      )
                                                    : e.toLowerCase() === y.trim().toLowerCase() && (_ = e);
                                            }),
                                            (y =
                                                y.length > this._maxElemValLength
                                                    ? ''
                                                    : this._maskingService.maskText(y));
                                        var g = this._utils.isUndefinedNull(e.checked) ? -1 : e.checked ? 1 : 0,
                                            m = this.getEventTimestamp(),
                                            r = this._enableAutoElementId
                                                ? this._utils.getUniqueElementId(e, this._autoElementIdLimit)
                                                : '';
                                        this._dataQueue.addToQueue(
                                            'elements',
                                            [
                                                this._contextMgr.contextId,
                                                t,
                                                f || '',
                                                a || '',
                                                u || '',
                                                e.type || '',
                                                n || 0,
                                                o || 0,
                                                i || 0,
                                                s || 0,
                                                c || '',
                                                p || '',
                                                l || '',
                                                e.alt || '',
                                                v || '',
                                                y || '',
                                                g,
                                                m,
                                                h || d,
                                                _,
                                                r,
                                            ],
                                            !1
                                        ),
                                            b.isDebug() &&
                                                b.debug(
                                                    'adding element id:' +
                                                        a +
                                                        ', name:' +
                                                        u +
                                                        ', type:' +
                                                        e.type +
                                                        ', width:' +
                                                        i +
                                                        ', height:' +
                                                        s +
                                                        ', left:' +
                                                        n +
                                                        ', top:' +
                                                        o +
                                                        ', hash: ' +
                                                        t
                                                );
                                    },
                                },
                                {
                                    key: '_verifyNoPrivateData',
                                    value: function _verifyNoPrivateData(e) {
                                        return /\d\d\d/.test(e) ? this._utils.clearTextFromNumbers(e) : e;
                                    },
                                },
                                {
                                    key: 'updateFeatureConfig',
                                    value: function updateFeatureConfig() {
                                        (this._collectPosition =
                                            'boolean' == typeof this._configurationRepository.get('isElementsPosition')
                                                ? this._configurationRepository.get('isElementsPosition')
                                                : this._collectPosition),
                                            (this._collectClassName =
                                                'boolean' ==
                                                typeof this._configurationRepository.get('isElementsClassName')
                                                    ? this._configurationRepository.get('isElementsClassName')
                                                    : this._collectClassName),
                                            (this._collectTitle =
                                                'boolean' == typeof this._configurationRepository.get('isElementsTitle')
                                                    ? this._configurationRepository.get('isElementsTitle')
                                                    : this._collectTitle),
                                            (this._collectHref =
                                                'boolean' == typeof this._configurationRepository.get('isElementsHref')
                                                    ? this._configurationRepository.get('isElementsHref')
                                                    : this._collectHref),
                                            (this._collectCustomElementAttribute =
                                                'boolean' ==
                                                typeof this._configurationRepository.get(
                                                    y.collectCustomElementAttribute
                                                )
                                                    ? this._configurationRepository.get(y.collectCustomElementAttribute)
                                                    : this._collectCustomElementAttribute),
                                            (this._customElementAttribute =
                                                'string' ==
                                                typeof this._configurationRepository.get(y.customElementAttribute)
                                                    ? this._configurationRepository.get(y.customElementAttribute)
                                                    : this._customElementAttribute),
                                            (this._maxElemValLength = this._configurationRepository.get('maxElValLen')
                                                ? this._configurationRepository.get('maxElValLen')
                                                : this._maxElemValLength),
                                            (this._allowedUnmaskedValuesList = this._configurationRepository.get(
                                                'allowedUnmaskedValuesList'
                                            )
                                                ? this._configurationRepository.get('allowedUnmaskedValuesList')
                                                : this._allowedUnmaskedValuesList),
                                            (this._enableUnmaskedValues = this._configurationRepository.get(
                                                'enableUnmaskedValues'
                                            )
                                                ? this._configurationRepository.get('enableUnmaskedValues')
                                                : this._enableUnmaskedValues),
                                            (this._enableAutoElementId =
                                                'boolean' ==
                                                typeof this._configurationRepository.get(y.enableAutoElementId)
                                                    ? this._configurationRepository.get(y.enableAutoElementId)
                                                    : this._enableAutoElementId),
                                            (this._autoElementIdLimit =
                                                'number' ==
                                                typeof this._configurationRepository.get(y.autoElementIdLimit)
                                                    ? this._configurationRepository.get(y.autoElementIdLimit)
                                                    : this._autoElementIdLimit);
                                    },
                                },
                            ]),
                            ElementsCollector
                        );
                    })(),
                    je = {
                        rtcframe: 'cd__rtcframe',
                        fontDetectionFrame: 'cd__fontDetectionFrame',
                        ignorePrefixFrame: 'cd__frame__',
                    };
                function FramesDetector_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Ue = (function () {
                    function FramesDetector(e, t) {
                        !(function FramesDetector_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, FramesDetector),
                            (this._elementsMutationObserverFactory = e),
                            (this._domUtils = t),
                            (this._windowMutationObservers = re()),
                            (this._loadedFrames = re()),
                            (this._framesToIgnore = oe()),
                            (this._frameSelector = 'frame, iframe'),
                            (this._frameLoadedCallback = this._onFrameLoad.bind(this)),
                            (this.frameAdded = new ce()),
                            (this.frameRemoved = new ce()),
                            (this.frameInaccessible = new ce());
                    }
                    return (
                        (function FramesDetector_createClass(e, t, r) {
                            t && FramesDetector_defineProperties(e.prototype, t),
                                r && FramesDetector_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(FramesDetector, [
                            {
                                key: 'frames',
                                get: function get() {
                                    var r = [];
                                    return (
                                        this._loadedFrames.forEach(function (e, t) {
                                            r.push(t);
                                        }),
                                        r
                                    );
                                },
                            },
                            {
                                key: 'start',
                                value: function start(e) {
                                    var t = this;
                                    this._monitorWindow(e),
                                        this._findFrames(e.document).forEach(function (e) {
                                            t._processNewFrame(e);
                                        });
                                },
                            },
                            {
                                key: 'stop',
                                value: function stop() {
                                    this._windowMutationObservers.forEach(function (e) {
                                        e.disconnect();
                                    }),
                                        this._windowMutationObservers.clear(),
                                        this._loadedFrames.clear(),
                                        this._framesToIgnore.clear();
                                },
                            },
                            {
                                key: 'addToIgnoreList',
                                value: function addToIgnoreList(e) {
                                    this._framesToIgnore.add(e);
                                },
                            },
                            {
                                key: '_monitorWindow',
                                value: function _monitorWindow(e) {
                                    var t;
                                    this._windowMutationObservers.has(e) ||
                                        ((t = new this._elementsMutationObserverFactory.create(
                                            e,
                                            self.MutationObserver
                                        )).observe(e.document),
                                        t.nodeAdded.subscribe(this._processAddedNode.bind(this)),
                                        t.nodeRemoved.subscribe(this._processRemovedNode.bind(this)),
                                        this._windowMutationObservers.set(e, t));
                                },
                            },
                            {
                                key: '_unMonitorWindow',
                                value: function _unMonitorWindow(e) {
                                    var t = this._windowMutationObservers.get(e);
                                    t && t.disconnect(), this._windowMutationObservers.delete(e);
                                },
                            },
                            {
                                key: '_processAddedNode',
                                value: function _processAddedNode(e) {
                                    var t = this;
                                    this._domUtils.matches(e, this._frameSelector)
                                        ? this._processNewFrame(e)
                                        : e.hasChildNodes() &&
                                          this._findFrames(e).forEach(function (e) {
                                              t._processNewFrame(e);
                                          });
                                },
                            },
                            {
                                key: '_processNewFrame',
                                value: function _processNewFrame(e) {
                                    this._framesToIgnore.has(e.id) ||
                                        e.id.startsWith(je.ignorePrefixFrame) ||
                                        this._loadedFrames.has(e) ||
                                        (this._domUtils.addEventListener(e, 'load', this._frameLoadedCallback),
                                        this._domUtils.canAccessIFrame(e)
                                            ? this._domUtils.isWindowDocumentReady(e.contentWindow) && this._addFrame(e)
                                            : this.frameInaccessible.publish(e));
                                },
                            },
                            {
                                key: '_addFrame',
                                value: function _addFrame(e) {
                                    var t = this;
                                    this._monitorWindow(e.contentWindow),
                                        this._findFrames(e.contentWindow.document).forEach(function (e) {
                                            t._processNewFrame(e);
                                        }),
                                        this._loadedFrames.set(e, e.contentDocument),
                                        this.frameAdded.publish(e);
                                },
                            },
                            {
                                key: '_processRemovedNode',
                                value: function _processRemovedNode(e) {
                                    var t = this;
                                    this._domUtils.matches(e, this._frameSelector)
                                        ? this._removeFrame(e)
                                        : e.hasChildNodes() &&
                                          this._findFrames(e).forEach(function (e) {
                                              t._removeFrame(e);
                                          });
                                },
                            },
                            {
                                key: '_removeFrame',
                                value: function _removeFrame(e) {
                                    this._unMonitorWindow(e.contentWindow),
                                        this._domUtils.removeEventListener(e, 'load', this._frameLoadedCallback),
                                        this._loadedFrames.delete(e) && this.frameRemoved.publish(e);
                                },
                            },
                            {
                                key: '_onFrameLoad',
                                value: function _onFrameLoad(e) {
                                    e = e.target;
                                    this._loadedFrames.has(e) && this._removeFrame(e), this._processNewFrame(e);
                                },
                            },
                            {
                                key: '_findFrames',
                                value: function _findFrames(e) {
                                    for (
                                        var t = [], r = [], n = e.querySelectorAll(this._frameSelector), o = 0;
                                        o < n.length;
                                        o++
                                    )
                                        r.push(n[o]);
                                    for (var i = 0; i < r.length; i++) {
                                        var s,
                                            a = r[i];
                                        t.push(a),
                                            this._domUtils.canAccessIFrame(a)
                                                ? 0 < (s = this._findFrames(a.contentWindow.document)).length &&
                                                  (t = t.concat(s))
                                                : this.frameInaccessible.publish(a);
                                    }
                                    return t;
                                },
                            },
                        ]),
                        FramesDetector
                    );
                })();
                function FramesHandlerBase_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Ne = (function () {
                    function FramesHandlerBase() {
                        !(function FramesHandlerBase_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, FramesHandlerBase);
                    }
                    return (
                        (function FramesHandlerBase_createClass(e, t, r) {
                            t && FramesHandlerBase_defineProperties(e.prototype, t),
                                r && FramesHandlerBase_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(FramesHandlerBase, [
                            { key: 'startFeatures', value: function startFeatures() {} },
                            { key: 'startFeature', value: function startFeature() {} },
                            { key: 'stopFeatures', value: function stopFeatures() {} },
                            { key: 'stopFeature', value: function stopFeature() {} },
                            { key: 'updateFeatureConfig', value: function updateFeatureConfig() {} },
                        ]),
                        FramesHandlerBase
                    );
                })();
                function BrowserContext_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var We = (function () {
                    function BrowserContext(e) {
                        !(function BrowserContext_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, BrowserContext),
                            (this.context = e || window.self);
                    }
                    return (
                        (function BrowserContext_createClass(e, t, r) {
                            t && BrowserContext_defineProperties(e.prototype, t),
                                r && BrowserContext_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(BrowserContext, [
                            {
                                key: 'Context',
                                get: function get() {
                                    return this.context;
                                },
                            },
                            {
                                key: 'getDocument',
                                value: function getDocument() {
                                    return this.context.document;
                                },
                            },
                        ]),
                        BrowserContext
                    );
                })();
                function FrameContext_typeof(e) {
                    return (FrameContext_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function FrameContext_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function FrameContext_setPrototypeOf(e, t) {
                    return (FrameContext_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function FrameContext_createSuper(r) {
                    var n = (function FrameContext_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = FrameContext_getPrototypeOf(r);
                        return (function FrameContext_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === FrameContext_typeof(t) || 'function' == typeof t)) return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function FrameContext_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = FrameContext_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function FrameContext_getPrototypeOf(e) {
                    return (FrameContext_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var He = (function () {
                    !(function FrameContext_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && FrameContext_setPrototypeOf(e, t);
                    })(FrameContext, We);
                    var e = FrameContext_createSuper(FrameContext);
                    function FrameContext() {
                        return (
                            (function FrameContext_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, FrameContext),
                            e.apply(this, arguments)
                        );
                    }
                    return (
                        (function FrameContext_createClass(e, t, r) {
                            t && FrameContext_defineProperties(e.prototype, t),
                                r && FrameContext_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(FrameContext, [
                            {
                                key: 'getDocument',
                                value: function getDocument() {
                                    return this.context.document || this.context.contentDocument;
                                },
                            },
                        ]),
                        FrameContext
                    );
                })();
                function FramesHandler_typeof(e) {
                    return (FramesHandler_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function FramesHandler_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function FramesHandler_setPrototypeOf(e, t) {
                    return (FramesHandler_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function FramesHandler_createSuper(r) {
                    var n = (function FramesHandler_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = FramesHandler_getPrototypeOf(r);
                        return (function FramesHandler_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === FramesHandler_typeof(t) || 'function' == typeof t)) return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return FramesHandler_assertThisInitialized(e);
                        })(
                            this,
                            n
                                ? ((e = FramesHandler_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function FramesHandler_assertThisInitialized(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e;
                }
                function FramesHandler_getPrototypeOf(e) {
                    return (FramesHandler_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var Qe = (function () {
                    !(function FramesHandler_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && FramesHandler_setPrototypeOf(e, t);
                    })(FramesHandler, Ne);
                    var i = FramesHandler_createSuper(FramesHandler);
                    function FramesHandler(e, t, r, n) {
                        var o;
                        return (
                            (function FramesHandler_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, FramesHandler),
                            ((o = i.call(this))._framesCache = e),
                            (o._framesDetector = t),
                            o._framesDetector.frameAdded.subscribe(
                                o._onFrameAdded.bind(FramesHandler_assertThisInitialized(o))
                            ),
                            o._framesDetector.frameRemoved.subscribe(
                                o._onFrameRemoved.bind(FramesHandler_assertThisInitialized(o))
                            ),
                            o._framesDetector.frameInaccessible.subscribe(
                                o._onFrameInaccessible.bind(FramesHandler_assertThisInitialized(o))
                            ),
                            (o._featuresList = []),
                            (o._domUtils = r),
                            (o._utils = n),
                            o._framesDetector.addToIgnoreList(je.rtcframe),
                            o._framesDetector.addToIgnoreList(je.fontDetectionFrame),
                            o._framesDetector.start(window.self),
                            o._buildFramesCache(),
                            o
                        );
                    }
                    return (
                        (function FramesHandler_createClass(e, t, r) {
                            t && FramesHandler_defineProperties(e.prototype, t),
                                r && FramesHandler_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(FramesHandler, [
                            {
                                key: 'startFeatures',
                                value: function startFeatures(e) {
                                    try {
                                        if ((this._buildFeaturesMap(e), 0 === this._featuresList.length)) return;
                                        b.debug(
                                            'startFeatures:Running features on '.concat(
                                                this._framesCache.count,
                                                ' frames'
                                            )
                                        ),
                                            this._startFeaturesOnFrames(this._framesCache.contexts, e);
                                    } catch (e) {
                                        b.debug(
                                            'Failed to start features in FrameHandler.startFeatures: '.concat(
                                                e.message
                                            ),
                                            e
                                        );
                                    }
                                },
                            },
                            {
                                key: 'startFeature',
                                value: function startFeature(e) {
                                    try {
                                        this._featuresList.push(e),
                                            (e.isRunning = !0),
                                            this._startFeaturesOnFrames(this._framesCache.contexts, [e]);
                                    } catch (e) {
                                        b.debug(
                                            'Failed to start feature in FrameHandler.startFeature: '.concat(e.message),
                                            e
                                        );
                                    }
                                },
                            },
                            {
                                key: 'stopFeatures',
                                value: function stopFeatures(e) {
                                    try {
                                        this._stopFeaturesOnFrames(e, this._framesCache.contexts);
                                    } catch (e) {
                                        b.debug(
                                            'Failed to stop features in FrameHandler.stopFeatures: '.concat(e.message),
                                            e
                                        );
                                    }
                                },
                            },
                            {
                                key: 'stopFeature',
                                value: function stopFeature(e) {
                                    try {
                                        (e.isRunning = !1), this._stopFeaturesOnFrames([e], this._framesCache.contexts);
                                    } catch (e) {
                                        b.debug(
                                            'Failed to stop feature in FrameHandler.stopFeature: '.concat(e.message),
                                            e
                                        );
                                    }
                                },
                            },
                            {
                                key: 'updateFeatureConfig',
                                value: function updateFeatureConfig(e) {
                                    e.instance.updateFeatureConfig &&
                                        this._updateFeaturesConfigOnFrames([e], this._framesCache.contexts);
                                },
                            },
                            {
                                key: '_onFrameAdded',
                                value: function _onFrameAdded(t) {
                                    try {
                                        b.debug('Frame:'.concat(t.name, ', id:').concat(t.id, '. was loaded.')),
                                            this._framesCache.exists(t)
                                                ? this._framesCache.unRegisterContextFeatures(t, this._featuresList)
                                                : this._framesCache.add(t),
                                            this._startFeaturesOnFrames([t], this._featuresList);
                                    } catch (e) {
                                        b.warn(
                                            'Failed to start features on frame '.concat(t.id, ': ').concat(e.message),
                                            e
                                        );
                                    }
                                },
                            },
                            {
                                key: '_onFrameRemoved',
                                value: function _onFrameRemoved(t) {
                                    try {
                                        b.debug('Frame:'.concat(t.name, ', id:').concat(t.id, '. was removed.')),
                                            this._stopFeaturesOnFrames(this._featuresList, [t]);
                                    } catch (e) {
                                        b.warn(
                                            'Failed to stop features on frame '.concat(t.id, ': ').concat(e.message),
                                            e
                                        );
                                    }
                                },
                            },
                            {
                                key: '_onFrameInaccessible',
                                value: function _onFrameInaccessible(e) {
                                    b.debug(
                                        'Frame:'.concat(e.name, ', id:').concat(e.id, '. was detected as inaccessible.')
                                    );
                                },
                            },
                            {
                                key: '_buildFeaturesMap',
                                value: function _buildFeaturesMap(e) {
                                    var t = this;
                                    (this._featuresList = []),
                                        e.forEach(function (e) {
                                            t._featuresList.push(e);
                                        });
                                },
                            },
                            {
                                key: '_buildFramesCache',
                                value: function _buildFramesCache() {
                                    var t = this;
                                    this._framesDetector.frames.forEach(function (e) {
                                        t._framesCache.exists(e) || t._framesCache.add(e);
                                    });
                                },
                            },
                            {
                                key: '_startFeaturesOnFrames',
                                value: function _startFeaturesOnFrames(e, n) {
                                    var o = this;
                                    e.forEach(function (t) {
                                        try {
                                            if (!o._domUtils.canAccessIFrame(t)) return;
                                            for (var e = 0; e < n.length; e++) {
                                                var r = n[e];
                                                r.shouldRun &&
                                                    !o._framesCache.hasFeature(t, r) &&
                                                    (o._framesCache.registerContextFeature(t, r),
                                                    o._domUtils.isWindowDocumentReady(t.contentWindow) &&
                                                        (b.debug(
                                                            '_startFeaturesOnFrames: run feature on frame:'
                                                                .concat(t.name, ', id:')
                                                                .concat(t.id, '. feature:')
                                                                .concat(r.configKey)
                                                        ),
                                                        o._utils.asyncCall.call(o._runFeatureOnFrame, o, t, r),
                                                        (r.isRunning = !0)));
                                            }
                                        } catch (e) {
                                            b.error(
                                                'An error has occurred while starting features on frame '
                                                    .concat(t.name, ' with id: ')
                                                    .concat(t.id, '. Error: ')
                                                    .concat(e.message),
                                                e
                                            );
                                        }
                                    });
                                },
                            },
                            {
                                key: '_runFeatureOnFrame',
                                value: function _runFeatureOnFrame(t, r) {
                                    try {
                                        this._domUtils.canAccessIFrame(t)
                                            ? r.instance.startFeature(new He(t.contentWindow))
                                            : b.debug(
                                                  'Not starting features on frame '
                                                      .concat(t.name, ' with id: ')
                                                      .concat(t.id, ' as it is not accessible')
                                              );
                                    } catch (e) {
                                        b.error(
                                            'An error has occurred while starting feature '
                                                .concat(r.configKey, ' on frame ')
                                                .concat(t.name, ' with id: ')
                                                .concat(t.id, '. Error: ')
                                                .concat(e.message),
                                            e
                                        );
                                    }
                                },
                            },
                            {
                                key: '_stopFeaturesOnFrames',
                                value: function _stopFeaturesOnFrames(n, e) {
                                    var o = this;
                                    try {
                                        e.forEach(function (t) {
                                            try {
                                                if (!o._domUtils.canAccessIFrame(t)) return;
                                                if (t.contentWindow && t.contentWindow.document)
                                                    for (var e = 0, r = n.length; e < r; e++)
                                                        o._framesCache.hasFeature(t, n[e]) &&
                                                            o._utils.asyncCall.call(o._stopFeatureOnFrame, o, t, n[e]),
                                                            (n[e].isRunning = !1);
                                            } catch (e) {
                                                b.error(
                                                    'An error has occurred while stopping features on frame '
                                                        .concat(t.name, ' with id: ')
                                                        .concat(t.id, '. Error: ')
                                                        .concat(e.message),
                                                    e
                                                );
                                            }
                                            o._framesCache.exists(t) && o._framesCache.unRegisterContextFeatures(t, n),
                                                o._framesCache.remove(t);
                                        });
                                    } catch (e) {
                                        b.warn('Failed stopping features on frames '.concat(e.message), e);
                                    }
                                },
                            },
                            {
                                key: '_stopFeatureOnFrame',
                                value: function _stopFeatureOnFrame(t, r) {
                                    try {
                                        this._domUtils.canAccessIFrame(t)
                                            ? r.instance.stopFeature(new He(t.contentWindow))
                                            : b.debug(
                                                  'Not stopping feature '
                                                      .concat(r.configKey, ' on frame ')
                                                      .concat(t.name, ' with id: ')
                                                      .concat(t.id, ' as it is not accessible')
                                              );
                                    } catch (e) {
                                        b.error(
                                            'An error has occurred while stopping feature '
                                                .concat(r.configKey, ' ')
                                                .concat(func, ' on frame ')
                                                .concat(t.name, ' with id: ')
                                                .concat(t.id, '. Error: ')
                                                .concat(e.message),
                                            e
                                        );
                                    }
                                },
                            },
                            {
                                key: '_updateFeaturesConfigOnFrames',
                                value: function _updateFeaturesConfigOnFrames(n, e) {
                                    var o = this;
                                    e.forEach(function (t) {
                                        try {
                                            if (!o._domUtils.canAccessIFrame(t)) return;
                                            for (var e = 0, r = n.length; e < r; e++)
                                                o._framesCache.hasFeature(t, n[e]) &&
                                                    o._utils.asyncCall.call(o._updateFeatureConfigOnFrame, o, t, n[e]);
                                        } catch (e) {
                                            b.error(
                                                'An error has occurred while updating features configuration on frame '
                                                    .concat(t.name, ' with id: ')
                                                    .concat(t.id, '. Error: ')
                                                    .concat(e.message),
                                                e
                                            );
                                        }
                                    });
                                },
                            },
                            {
                                key: '_updateFeatureConfigOnFrame',
                                value: function _updateFeatureConfigOnFrame(t, r) {
                                    try {
                                        this._domUtils.canAccessIFrame(t)
                                            ? r.instance.updateFeatureConfig(new He(t.contentWindow))
                                            : b.debug(
                                                  'Not updating feature '
                                                      .concat(r.configKey, ' config on frame ')
                                                      .concat(t.name, ' with id: ')
                                                      .concat(t.id, ' as it is not accessible')
                                              );
                                    } catch (e) {
                                        b.error(
                                            'An error has occurred while updating feature '
                                                .concat(r.configKey, ' config on frame ')
                                                .concat(t.name, ' with id: ')
                                                .concat(t.id, '. Error: ')
                                                .concat(e.message),
                                            e
                                        );
                                    }
                                },
                            },
                        ]),
                        FramesHandler
                    );
                })();
                function NullFramesHandler_typeof(e) {
                    return (NullFramesHandler_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function NullFramesHandler_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function NullFramesHandler_setPrototypeOf(e, t) {
                    return (NullFramesHandler_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function NullFramesHandler_createSuper(r) {
                    var n = (function NullFramesHandler_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = NullFramesHandler_getPrototypeOf(r);
                        return (function NullFramesHandler_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === NullFramesHandler_typeof(t) || 'function' == typeof t)) return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function NullFramesHandler_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = NullFramesHandler_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function NullFramesHandler_getPrototypeOf(e) {
                    return (NullFramesHandler_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var ze = (function () {
                    !(function NullFramesHandler_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && NullFramesHandler_setPrototypeOf(e, t);
                    })(NullFramesHandler, Ne);
                    var e = NullFramesHandler_createSuper(NullFramesHandler);
                    function NullFramesHandler() {
                        return (
                            (function NullFramesHandler_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, NullFramesHandler),
                            e.apply(this, arguments)
                        );
                    }
                    return (function NullFramesHandler_createClass(e, t, r) {
                        return (
                            t && NullFramesHandler_defineProperties(e.prototype, t),
                            r && NullFramesHandler_defineProperties(e, r),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            e
                        );
                    })(NullFramesHandler);
                })();
                function BrowserContextsCache_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var qe = (function () {
                    function BrowserContextsCache() {
                        !(function BrowserContextsCache_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, BrowserContextsCache),
                            (this._contexts = re());
                    }
                    return (
                        (function BrowserContextsCache_createClass(e, t, r) {
                            t && BrowserContextsCache_defineProperties(e.prototype, t),
                                r && BrowserContextsCache_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(BrowserContextsCache, [
                            {
                                key: 'contexts',
                                get: function get() {
                                    var r = [];
                                    return (
                                        this._contexts.forEach(function (e, t) {
                                            r.push(t);
                                        }),
                                        r
                                    );
                                },
                            },
                            {
                                key: 'browserContexts',
                                get: function get() {
                                    var t = [];
                                    return (
                                        this._contexts.forEach(function (e) {
                                            t.push(e.browserContext);
                                        }),
                                        t
                                    );
                                },
                            },
                            {
                                key: 'count',
                                get: function get() {
                                    return this._contexts.size;
                                },
                            },
                            {
                                key: 'add',
                                value: function add(e) {
                                    this._contexts.set(e, { registered: !0, features: re() });
                                },
                            },
                            {
                                key: 'addBrowserContext',
                                value: function addBrowserContext(e) {
                                    this._contexts.set(e.Context, {
                                        registered: !0,
                                        features: re(),
                                        browserContext: e,
                                    });
                                },
                            },
                            {
                                key: 'remove',
                                value: function remove(e) {
                                    this.exists(e) &&
                                        0 === this._contexts.get(e).features.size &&
                                        this._contexts.delete(e);
                                },
                            },
                            {
                                key: 'get',
                                value: function get(e) {
                                    return this._contexts.get(e);
                                },
                            },
                            {
                                key: 'exists',
                                value: function exists(e) {
                                    return this._contexts.has(e) && this._contexts.get(e).registered;
                                },
                            },
                            {
                                key: 'registerContextFeature',
                                value: function registerContextFeature(e, t) {
                                    this.exists(e) && this._contexts.get(e).features.set(t.configKey, !0);
                                },
                            },
                            {
                                key: 'unRegisterContextFeature',
                                value: function unRegisterContextFeature(e, t) {
                                    this.exists(e, t) && this._contexts.get(e).features.delete(t.configKey);
                                },
                            },
                            {
                                key: 'unRegisterContextFeatures',
                                value: function unRegisterContextFeatures(e, t) {
                                    for (var r = 0; r < t.length; r++) {
                                        var n = t[r];
                                        this.unRegisterContextFeature(e, n);
                                    }
                                },
                            },
                            {
                                key: 'hasFeature',
                                value: function hasFeature(e, t) {
                                    return this.exists(e) && this._contexts.get(e).features.has(t.configKey);
                                },
                            },
                        ]),
                        BrowserContextsCache
                    );
                })();
                function NodesRemovedMutationEvent_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function NodesRemovedMutationEvent_createClass(e, t, r) {
                    return (
                        t && NodesRemovedMutationEvent_defineProperties(e.prototype, t),
                        r && NodesRemovedMutationEvent_defineProperties(e, r),
                        Object.defineProperty(e, 'prototype', { writable: !1 }),
                        e
                    );
                }
                var Ke = NodesRemovedMutationEvent_createClass(function NodesRemovedMutationEvent(e, t) {
                    !(function NodesRemovedMutationEvent_classCallCheck(e, t) {
                        if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                    })(this, NodesRemovedMutationEvent),
                        (this.browserContext = e),
                        (this.removedNodes = t);
                });
                function NodesAddedMutationEvent_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function NodesAddedMutationEvent_createClass(e, t, r) {
                    return (
                        t && NodesAddedMutationEvent_defineProperties(e.prototype, t),
                        r && NodesAddedMutationEvent_defineProperties(e, r),
                        Object.defineProperty(e, 'prototype', { writable: !1 }),
                        e
                    );
                }
                var Ge = NodesAddedMutationEvent_createClass(function NodesAddedMutationEvent(e, t) {
                    !(function NodesAddedMutationEvent_classCallCheck(e, t) {
                        if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                    })(this, NodesAddedMutationEvent),
                        (this.browserContext = e),
                        (this.addedNodes = t);
                });
                function ElementsMutationObserver_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Ve = (function () {
                    function ElementsMutationObserver(e, t) {
                        !(function ElementsMutationObserver_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, ElementsMutationObserver),
                            (function ElementsMutationObserver_defineProperty(e, t, r) {
                                t in e
                                    ? Object.defineProperty(e, t, {
                                          value: r,
                                          enumerable: !0,
                                          configurable: !0,
                                          writable: !0,
                                      })
                                    : (e[t] = r);
                            })(
                                this,
                                'ignoreNodeTypes',
                                oe([Node.COMMENT_NODE, Node.TEXT_NODE, Node.ATTRIBUTE_NODE, Node.CDATA_SECTION_NODE])
                            ),
                            (this._mutationObserver = new t(this._mutationObserved.bind(this, e))),
                            (this.nodesAdded = new ce()),
                            (this.nodesRemoved = new ce()),
                            (this.nodeAdded = new ce()),
                            (this.nodeRemoved = new ce());
                    }
                    return (
                        (function ElementsMutationObserver_createClass(e, t, r) {
                            t && ElementsMutationObserver_defineProperties(e.prototype, t),
                                r && ElementsMutationObserver_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(ElementsMutationObserver, [
                            {
                                key: 'observe',
                                value: function observe(e) {
                                    this._mutationObserver.observe(e, { childList: !0, subtree: !0 });
                                },
                            },
                            {
                                key: 'disconnect',
                                value: function disconnect() {
                                    this._mutationObserver.disconnect();
                                },
                            },
                            {
                                key: '_mutationObserved',
                                value: function _mutationObserved(t, e) {
                                    var r = this;
                                    e.forEach(function (e) {
                                        r._processMutation(t, e);
                                    });
                                },
                            },
                            {
                                key: '_processMutation',
                                value: function _processMutation(e, t) {
                                    var r = this._processNodes(t.addedNodes, this.nodeAdded),
                                        t = this._processNodes(t.removedNodes, this.nodeRemoved);
                                    this._publishNodesMutationEvents(e, r, t);
                                },
                            },
                            {
                                key: '_publishNodesMutationEvents',
                                value: function _publishNodesMutationEvents(e, t, r) {
                                    0 < t.length && this.nodesAdded.publish(new Ge(e, t)),
                                        0 < r.length && this.nodesRemoved.publish(new Ke(e, r));
                                },
                            },
                            {
                                key: '_processNodes',
                                value: function _processNodes(e, t) {
                                    for (var r = [], n = 0; n < e.length; n++) {
                                        var o = e[n];
                                        this._isValidNodeType(o) && (r.push(o), t.publish(o));
                                    }
                                    return r;
                                },
                            },
                            {
                                key: '_isValidNodeType',
                                value: function _isValidNodeType(e) {
                                    return !1 === this.ignoreNodeTypes.has(e.nodeType);
                                },
                            },
                        ]),
                        ElementsMutationObserver
                    );
                })();
                function ElementsMutationObserverFactory_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Xe = (function () {
                    function ElementsMutationObserverFactory() {
                        !(function ElementsMutationObserverFactory_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, ElementsMutationObserverFactory);
                    }
                    return (
                        (function ElementsMutationObserverFactory_createClass(e, t, r) {
                            t && ElementsMutationObserverFactory_defineProperties(e.prototype, t),
                                r && ElementsMutationObserverFactory_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(ElementsMutationObserverFactory, [
                            {
                                key: 'create',
                                value: function create(e, t) {
                                    return new Ve(e, t);
                                },
                            },
                        ]),
                        ElementsMutationObserverFactory
                    );
                })();
                function FramesHandlerFactory_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Ze = (function () {
                    function FramesHandlerFactory(e, t, r) {
                        !(function FramesHandlerFactory_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, FramesHandlerFactory),
                            (this._configurationRepository = e),
                            (this._domUtils = t),
                            (this._utils = r);
                    }
                    return (
                        (function FramesHandlerFactory_createClass(e, t, r) {
                            t && FramesHandlerFactory_defineProperties(e.prototype, t),
                                r && FramesHandlerFactory_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(FramesHandlerFactory, [
                            {
                                key: 'create',
                                value: function create() {
                                    if (this._configurationRepository.get(y.enableFramesProcessing)) {
                                        var e = new qe(),
                                            t = new Ue(new Xe(), this._domUtils);
                                        return new Qe(e, t, this._domUtils, this._utils);
                                    }
                                    return new ze();
                                },
                            },
                        ]),
                        FramesHandlerFactory
                    );
                })();
                function FeatureService_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Ye = (function () {
                    function FeatureService(e, t, r, n, o, i) {
                        !(function FeatureService_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, FeatureService),
                            (this._features = e),
                            (this._frameHandler = t),
                            (this._configurationRepository = r),
                            (this._domUtils = n),
                            (this._cdUtils = o),
                            (this._browserContextsCache = i),
                            this.buildFrameRelatedLists();
                    }
                    return (
                        (function FeatureService_createClass(e, t, r) {
                            t && FeatureService_defineProperties(e.prototype, t),
                                r && FeatureService_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(FeatureService, [
                            {
                                key: 'buildFrameRelatedLists',
                                value: function buildFrameRelatedLists() {
                                    (this._frameRelatedDefaultFeatures = this._collectFrameRelated(
                                        this._features.getDefaultFeatures()
                                    )),
                                        (this._frameRelatedNonDefaultFeatures = this._collectFrameRelated(
                                            this._features.getNonDefaultFeatures()
                                        ));
                                },
                            },
                            {
                                key: 'runDefault',
                                value: function runDefault() {
                                    b.info('Running default features'),
                                        this._runFeatures(
                                            this._features.getDefaultFeatures(),
                                            this._frameRelatedDefaultFeatures
                                        );
                                },
                            },
                            {
                                key: 'stopDefault',
                                value: function stopDefault() {
                                    b.info('Stopping default features'),
                                        this._stopFeatures(
                                            this._features.getDefaultFeatures(),
                                            this._frameRelatedDefaultFeatures
                                        );
                                },
                            },
                            {
                                key: 'runPerSessionFeatures',
                                value: function runPerSessionFeatures() {
                                    b.info('Running per session features'),
                                        this._configurationRepository.isConfigurationUpdatedFromServer()
                                            ? this._startFeatures(this._features.getPerSessionFeatures())
                                            : b.info(
                                                  "We didn't receive configurations from the server yet. Skipping per session features start until configuration arrives."
                                              );
                                },
                            },
                            {
                                key: 'stopPerSessionFeatures',
                                value: function stopPerSessionFeatures() {
                                    b.info('Stopping per session features'),
                                        this._stopFeatures(this._features.getPerSessionFeatures());
                                },
                            },
                            {
                                key: 'runNonDefault',
                                value: function runNonDefault() {
                                    b.info('Running non default features'),
                                        this._configurationRepository.isConfigurationUpdatedFromServer()
                                            ? this._runFeatures(
                                                  this._features.getNonDefaultFeatures(),
                                                  this._frameRelatedNonDefaultFeatures
                                              )
                                            : b.info(
                                                  "We didn't receive configurations from the server yet. Skipping non default features start until configuration arrives."
                                              );
                                },
                            },
                            {
                                key: 'stopNonDefault',
                                value: function stopNonDefault() {
                                    b.info('Stopping non default features'),
                                        this._stopFeatures(
                                            this._features.getNonDefaultFeatures(),
                                            this._frameRelatedNonDefaultFeatures
                                        );
                                },
                            },
                            {
                                key: 'runPerContextFeatures',
                                value: function runPerContextFeatures(e) {
                                    b.info('Running per context features'),
                                        this._configurationRepository.isConfigurationUpdatedFromServer()
                                            ? (this._runFeatures(this._features.getPerContextFeatures()),
                                              'cd_auto' !== e.name &&
                                                  this._frameRelatedDefaultFeatures &&
                                                  this._frameHandler.startFeatures(this._frameRelatedDefaultFeatures))
                                            : b.info(
                                                  "We didn't receive configurations from the server yet. Skipping per context features start until configuration arrives."
                                              );
                                },
                            },
                            {
                                key: 'stopPerContextFeatures',
                                value: function stopPerContextFeatures() {
                                    b.info('Stopping per context features'),
                                        this._stopFeatures(this._features.getPerContextFeatures());
                                },
                            },
                            {
                                key: 'stopAllFeatures',
                                value: function stopAllFeatures() {
                                    b.info('Stopping all features'),
                                        this.stopDefault(),
                                        this.stopNonDefault(),
                                        this.stopPerSessionFeatures(),
                                        this.stopPerContextFeatures();
                                },
                            },
                            {
                                key: 'updateRunByConfig',
                                value: function updateRunByConfig(e) {
                                    b.info('Updating features configuration'),
                                        this._updateFeatures(this._features.getDefaultFeatures(), e),
                                        this._updateFeatures(this._features.getNonDefaultFeatures(), e),
                                        this._updateFeatures(this._features.getPerContextFeatures(), e);
                                },
                            },
                            {
                                key: 'runFeaturesOnBrowserContext',
                                value: function runFeaturesOnBrowserContext(t) {
                                    var r = this,
                                        n = this._features.getDefaultFeatures();
                                    n &&
                                        (this._browserContextsCache.unRegisterContextFeatures(t.Context, n),
                                        Object.keys(n).forEach(function (e) {
                                            e = n[e];
                                            e.shouldRun &&
                                                e.isFrameRelated &&
                                                ((e.isRunning = !0),
                                                e.instance &&
                                                    r._cdUtils.asyncCall.call(e.instance.startFeature, e.instance, t));
                                        }));
                                },
                            },
                            {
                                key: 'stopFeaturesOnBrowserContextRemove',
                                value: function stopFeaturesOnBrowserContextRemove(t) {
                                    var r = this,
                                        n = this._features.getDefaultFeatures();
                                    n &&
                                        (this._browserContextsCache.unRegisterContextFeatures(t.Context, n),
                                        Object.keys(n).forEach(function (e) {
                                            e = n[e];
                                            e.shouldRun &&
                                                e.isFrameRelated &&
                                                e.isRunning &&
                                                e.instance &&
                                                r._cdUtils.asyncCall.call(e.instance.stopFeature, e.instance, t);
                                        }));
                                },
                            },
                            {
                                key: '_runFeatures',
                                value: function _runFeatures(t, e) {
                                    var r = this;
                                    t &&
                                        Object.keys(t).forEach(function (e) {
                                            e = t[e];
                                            e.shouldRun &&
                                                (r._cdUtils.asyncCall.call(
                                                    e.instance.startFeature,
                                                    e.instance,
                                                    new We(window.self)
                                                ),
                                                (e.isRunning = !0));
                                        }),
                                        e &&
                                            (this._frameHandler.startFeatures(e),
                                            this._domUtils.onPageLoad(window, function () {
                                                r._frameHandler.startFeatures(e);
                                            }));
                                },
                            },
                            {
                                key: '_stopFeatures',
                                value: function _stopFeatures(t, e) {
                                    var r = this;
                                    t &&
                                        Object.keys(t).forEach(function (e) {
                                            e = t[e];
                                            e.instance.stopFeature &&
                                                r._cdUtils.asyncCall.call(
                                                    e.instance.stopFeature,
                                                    e.instance,
                                                    new We(window.self)
                                                ),
                                                (e.isRunning = !1);
                                        }),
                                        e && this._frameHandler.stopFeatures(e);
                                },
                            },
                            {
                                key: '_actOnFeature',
                                value: function _actOnFeature(e, t) {
                                    e.isFrameRelated && this._frameHandler[t](e),
                                        e.instance[t] &&
                                            this._cdUtils.asyncCall.call(
                                                e.instance[t],
                                                e.instance,
                                                new We(window.self)
                                            );
                                },
                            },
                            {
                                key: '_startFeatures',
                                value: function _startFeatures(r) {
                                    var n = this;
                                    r &&
                                        Object.keys(r).forEach(function (e) {
                                            var t = r[e],
                                                e = n._configurationRepository.get(t.configKey);
                                            'boolean' == typeof e && (t.shouldRun = e),
                                                t.shouldRun && (n._actOnFeature(t, 'startFeature'), (t.isRunning = !0));
                                        });
                                },
                            },
                            {
                                key: '_startFeatureOnBrowserContexts',
                                value: function _startFeatureOnBrowserContexts(t) {
                                    var r = this;
                                    t.isFrameRelated &&
                                        this._browserContextsCache.browserContexts.forEach(function (e) {
                                            t.shouldRun &&
                                                !r._browserContextsCache.hasFeature(e.Context, t) &&
                                                (r._browserContextsCache.registerContextFeature(e.Context, t),
                                                r._cdUtils.asyncCall.call(t.instance.startFeature, t.instance, e),
                                                (t.isRunning = !0));
                                        });
                                },
                            },
                            {
                                key: '_stopFeatureOnBrowserContexts',
                                value: function _stopFeatureOnBrowserContexts(t) {
                                    var r = this;
                                    t.isFrameRelated &&
                                        this._browserContextsCache.browserContexts.forEach(function (e) {
                                            r._browserContextsCache.hasFeature(e.Context, t) &&
                                                r._cdUtils.asyncCall.call(t.instance.stopFeature, t.instance, e),
                                                (t.isRunning = !1),
                                                r._browserContextsCache.exists(e.Context) &&
                                                    r._browserContextsCache.unRegisterContextFeature(e.Context, t),
                                                r._browserContextsCache.remove(e.Context);
                                        });
                                },
                            },
                            {
                                key: '_updateFeatureConfigOnBrowserContexts',
                                value: function _updateFeatureConfigOnBrowserContexts(t) {
                                    var r = this;
                                    t.isFrameRelated &&
                                        this._browserContextsCache.browserContexts.forEach(function (e) {
                                            r._browserContextsCache.hasFeature(e.Context, t) &&
                                                r._cdUtils.asyncCall.call(
                                                    t.instance.updateFeatureConfig,
                                                    t.instance,
                                                    e
                                                );
                                        });
                                },
                            },
                            {
                                key: '_updateFeatures',
                                value: function _updateFeatures(r, n) {
                                    var o = this;
                                    r &&
                                        Object.keys(r).forEach(function (e) {
                                            var t = r[e],
                                                e = n.get(t.configKey);
                                            'boolean' == typeof e && (t.shouldRun = e),
                                                t.isRunning && !t.shouldRun
                                                    ? (o._actOnFeature(t, 'stopFeature'),
                                                      o._stopFeatureOnBrowserContexts(t),
                                                      (t.isRunning = !1))
                                                    : !t.isRunning &&
                                                      t.shouldRun &&
                                                      (o._actOnFeature(t, 'startFeature'),
                                                      o._startFeatureOnBrowserContexts(t),
                                                      (t.isRunning = !0)),
                                                t.isRunning &&
                                                    (o._actOnFeature(t, 'updateFeatureConfig'),
                                                    o._updateFeatureConfigOnBrowserContexts(t));
                                        });
                                },
                            },
                            {
                                key: '_collectFrameRelated',
                                value: function _collectFrameRelated(t) {
                                    var r = [];
                                    return (
                                        t &&
                                            Object.keys(t).forEach(function (e) {
                                                e = t[e];
                                                e.isFrameRelated && r.push(e);
                                            }),
                                        r
                                    );
                                },
                            },
                        ]),
                        FeatureService
                    );
                })();
                function PauseResumeManager_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Je = { RUNNING: 0, PAUSED: 1 },
                    $e = (function () {
                        function PauseResumeManager(e, t, r) {
                            !(function PauseResumeManager_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, PauseResumeManager),
                                (this._featureMgr = e),
                                (this._dataQ = r),
                                (this._configurationRepository = t),
                                (this._pauseResumeEnabled = t.get(y.stateChangeEnabled) || !1),
                                (this._sdkState = Je.RUNNING);
                        }
                        return (
                            (function PauseResumeManager_createClass(e, t, r) {
                                t && PauseResumeManager_defineProperties(e.prototype, t),
                                    r && PauseResumeManager_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(PauseResumeManager, [
                                {
                                    key: 'onResume',
                                    value: function onResume() {
                                        this._sdkState === Je.PAUSED
                                            ? (b.info('Resuming JS SDK'),
                                              this._featureMgr.updateRunByConfig(this._configurationRepository),
                                              (this._sdkState = Je.RUNNING))
                                            : b.warn(
                                                  'PauseResumeManager:onResume - resume api called when SDK already running'
                                              );
                                    },
                                },
                                {
                                    key: 'onPause',
                                    value: function onPause() {
                                        this._sdkState === Je.RUNNING
                                            ? (b.info('Pausing JS SDK'),
                                              this._featureMgr.stopAllFeatures(),
                                              (this._sdkState = Je.PAUSED))
                                            : b.warn('Pause api called when SDK already paused');
                                    },
                                },
                                {
                                    key: 'onStateChange',
                                    value: function onStateChange(e) {
                                        e.toState &&
                                            this._verifyApiAllowed(e.toState) &&
                                            ('pause' === e.toState
                                                ? this.onPause()
                                                : 'run' === e.toState
                                                ? this.onResume()
                                                : b.warn(
                                                      'stateChange api called with non valid toState: ' + e.toState
                                                  ));
                                    },
                                },
                                {
                                    key: 'isCustomerApiEnabled',
                                    value: function isCustomerApiEnabled() {
                                        return this._sdkState === Je.RUNNING;
                                    },
                                },
                                {
                                    key: '_verifyApiAllowed',
                                    value: function _verifyApiAllowed(e) {
                                        return (
                                            !!this._pauseResumeEnabled ||
                                            (this._dataQ.addToQueue('forbidden_api_call', [null, e]), !1)
                                        );
                                    },
                                },
                                {
                                    key: 'onConfigUpdate',
                                    value: function onConfigUpdate() {
                                        (this._pauseResumeEnabled =
                                            this._configurationRepository.get(y.stateChangeEnabled) || !1),
                                            !1 === this._configurationRepository.get('isEnabled') && this.onPause();
                                    },
                                },
                            ]),
                            PauseResumeManager
                        );
                    })(),
                    et = 'ContextChange',
                    tt = 'ResetSession',
                    rt = 'cdCustomerMetadata',
                    nt = 'cdChangeState',
                    ot = 'cdSetCsid',
                    it = 'cdSetPsid',
                    st = 'cdSetCustomerBrand';
                function CustomerApiBridge_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var at = (function () {
                    function CustomerApiBridge(e, t, r, n) {
                        !(function CustomerApiBridge_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, CustomerApiBridge),
                            (this._pauseResumeMgr = e),
                            (this._messageBus = t),
                            (this._cdApiFacade = r),
                            (this._utils = n),
                            this._createCommandToBusMessageMapping();
                    }
                    return (
                        (function CustomerApiBridge_createClass(e, t, r) {
                            t && CustomerApiBridge_defineProperties(e.prototype, t),
                                r && CustomerApiBridge_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(CustomerApiBridge, [
                            {
                                key: 'enableApi',
                                value: function enableApi() {
                                    b.info('Enabling api calls'),
                                        (this._onApiMessageBinded = this._onApiMessage.bind(this)),
                                        this._utils.addEventListener(window, 'message', this._onApiMessageBinded, !0);
                                },
                            },
                            {
                                key: 'disableApi',
                                value: function disableApi() {
                                    b.info('Disabling api calls'),
                                        this._utils.removeEventListener(
                                            window,
                                            'message',
                                            this._onApiMessageBinded,
                                            !0
                                        );
                                },
                            },
                            {
                                key: 'getCustomerSessionID',
                                value: function getCustomerSessionID(t) {
                                    this._cdApiFacade.getCustomerSessionID(function (e) {
                                        t(e);
                                    });
                                },
                            },
                            {
                                key: 'getLogServerAddress',
                                value: function getLogServerAddress(t) {
                                    this._cdApiFacade.getLogServerAddress(function (e) {
                                        t(e);
                                    });
                                },
                            },
                            {
                                key: 'getServerAddress',
                                value: function getServerAddress(t) {
                                    this._cdApiFacade.getServerAddress(function (e) {
                                        t(e);
                                    });
                                },
                            },
                            {
                                key: 'getConfigurations',
                                value: function getConfigurations(t) {
                                    this._cdApiFacade.getConfigurations(function (e) {
                                        t(e);
                                    });
                                },
                            },
                            {
                                key: 'notifySessionReset',
                                value: function notifySessionReset(e) {
                                    this._pauseResumeMgr.isCustomerApiEnabled() &&
                                        window.postMessage(
                                            { type: 'SNumNotification', cdSNum: e },
                                            window.location.href
                                        );
                                },
                            },
                            {
                                key: 'isApiAvailable',
                                value: function isApiAvailable(e) {
                                    return this._cdApiFacade.isApiAvailable(e);
                                },
                            },
                            {
                                key: '_onApiMessage',
                                value: function _onApiMessage(e) {
                                    var t = e.data,
                                        r = t.type;
                                    if (void 0 === r)
                                        try {
                                            r = (t = JSON.parse(t)).type;
                                        } catch (e) {}
                                    (r === nt ||
                                        (this._pauseResumeMgr.isCustomerApiEnabled() &&
                                            this._apiCommandToBusMessageMapping[r])) &&
                                        (e.preventDefault && e.preventDefault(),
                                        e.stopPropagation && e.stopPropagation(),
                                        this._messageBus.publish(this._apiCommandToBusMessageMapping[r], t));
                                },
                            },
                            {
                                key: '_createCommandToBusMessageMapping',
                                value: function _createCommandToBusMessageMapping() {
                                    (this._apiCommandToBusMessageMapping = {}),
                                        (this._apiCommandToBusMessageMapping[et] = me.ApiContextChangeEvent),
                                        (this._apiCommandToBusMessageMapping[tt] = me.ApiResetSessionEvent),
                                        (this._apiCommandToBusMessageMapping[rt] = me.ApiCustomerMetadataEvent),
                                        (this._apiCommandToBusMessageMapping[nt] = me.ApiChangeStateEvent),
                                        (this._apiCommandToBusMessageMapping[ot] = me.ApiSetCsidEvent),
                                        (this._apiCommandToBusMessageMapping[it] = me.ApiSetPsidEvent),
                                        (this._apiCommandToBusMessageMapping[st] = me.ApiSetCustomerBrand);
                                },
                            },
                        ]),
                        CustomerApiBridge
                    );
                })();
                function MuidService_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var ut = (function () {
                    function MuidService(e, t, r, n) {
                        !(function MuidService_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, MuidService),
                            (this.muid = null),
                            (this._utils = e),
                            (this._storageUtilsWrapper = r),
                            (this._dataQ = t),
                            (this._configurationRepository = n),
                            (this.EXPIRATION = e.minutesToMilliseconds(525600));
                    }
                    return (
                        (function MuidService_createClass(e, t, r) {
                            t && MuidService_defineProperties(e.prototype, t),
                                r && MuidService_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(MuidService, [
                            {
                                key: 'initMuid',
                                value: function initMuid() {
                                    var e = this._storageUtilsWrapper.getCookie('bmuid'),
                                        t = this._storageUtilsWrapper.getFromLocalStorage('bmuid');
                                    (this.muid = e || t),
                                        (this.muid = this._utils.StorageUtils.validateBcId(this.muid)),
                                        this.muid ||
                                            ((this.muid =
                                                this._utils.dateNow() + '-' + this._utils.generateUUID().toUpperCase()),
                                            b.info('Generated a new muid: '.concat(this.muid))),
                                        this._saveAndSendMuid(),
                                        b.info('Muid is: '.concat(this.muid));
                                },
                            },
                            {
                                key: 'updateMuid',
                                value: function updateMuid(e) {
                                    e
                                        ? ((this.muid = e),
                                          (this.muid = this._utils.StorageUtils.validateBcId(this.muid)),
                                          this.muid
                                              ? (this._saveAndSendMuid(),
                                                b.info('Restored MUID is: '.concat(this.muid)))
                                              : b.warn('Invalid format of restored MUID'))
                                        : b.warn('MUID is not defined');
                                },
                            },
                            {
                                key: '_saveAndSendMuid',
                                value: function _saveAndSendMuid() {
                                    this._setStorageAndCookieKey(), this._addMuidToQueue();
                                },
                            },
                            {
                                key: '_setStorageAndCookieKey',
                                value: function _setStorageAndCookieKey() {
                                    this._storageUtilsWrapper.setCookie('bmuid', this.muid, this.EXPIRATION),
                                        this._storageUtilsWrapper.saveToLocalStorage('bmuid', this.muid);
                                },
                            },
                            {
                                key: '_addMuidToQueue',
                                value: function _addMuidToQueue() {
                                    this._dataQ.addToQueue('static_fields', ['muid', this.muid], !1);
                                },
                            },
                        ]),
                        MuidService
                    );
                })();
                function PsidCache_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var ct = (function () {
                    function PsidCache() {
                        !(function PsidCache_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, PsidCache),
                            (this._psid = null);
                    }
                    return (
                        (function PsidCache_createClass(e, t, r) {
                            t && PsidCache_defineProperties(e.prototype, t),
                                r && PsidCache_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(PsidCache, [
                            {
                                key: 'get',
                                value: function get() {
                                    return this._psid;
                                },
                            },
                            {
                                key: 'set',
                                value: function set(e) {
                                    if (void 0 === e) throw new Error('Invalid psid value of undefined');
                                    this._psid = e;
                                },
                            },
                        ]),
                        PsidCache
                    );
                })();
                function PsidService_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var lt = (function () {
                    function PsidService(e, t) {
                        !(function PsidService_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, PsidService),
                            (this._psidCache = e),
                            (this._workerCommunicator = t);
                    }
                    return (
                        (function PsidService_createClass(e, t, r) {
                            t && PsidService_defineProperties(e.prototype, t),
                                r && PsidService_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(PsidService, [
                            {
                                key: 'set',
                                value: function set(e) {
                                    if (void 0 === e) throw new Error('Invalid psid value of undefined');
                                    this._psidCache.set(e), this._workerCommunicator.sendAsync(W, { psid: e });
                                },
                            },
                        ]),
                        PsidService
                    );
                })();
                function SidRepository_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var ft = (function () {
                    function SidRepository(e, t, r) {
                        !(function SidRepository_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, SidRepository),
                            (this.sidKey = 'cdSNum'),
                            (this._utils = e),
                            (this._storageUtilsWrapper = t),
                            (this.COOKIE_EXPIRATION_IN_MILLISECONDS = this.getExpirationTime(r));
                    }
                    return (
                        (function SidRepository_createClass(e, t, r) {
                            t && SidRepository_defineProperties(e.prototype, t),
                                r && SidRepository_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(SidRepository, [
                            {
                                key: 'onConfigUpdate',
                                value: function onConfigUpdate(e) {
                                    e = this.getExpirationTime(e);
                                    this._setExpirationTime(e) && (this.COOKIE_EXPIRATION_IN_MILLISECONDS = e);
                                },
                            },
                            {
                                key: 'getExpirationTime',
                                value: function getExpirationTime(e) {
                                    e = e.get(y.cdsNumExpirationTime);
                                    return this._utils.minutesToMilliseconds(this._validateCDSNumExpirationTime(e));
                                },
                            },
                            {
                                key: '_validateCDSNumExpirationTime',
                                value: function _validateCDSNumExpirationTime(e) {
                                    return e < g || m < e ? _ : e;
                                },
                            },
                            {
                                key: '_setExpirationTime',
                                value: function _setExpirationTime(e) {
                                    return this._storageUtilsWrapper.setExpirationInCookie(this.sidKey, e) === E
                                        ? (b.warn('Failed set expiration time '.concat(e, ' in cookie.')), !1)
                                        : this._storageUtilsWrapper.setExpirationInLocalStorage(this.sidKey, e) !== E ||
                                              (b.warn('Failed set expiration time '.concat(e, ' in local storage.')),
                                              this._storageUtilsWrapper.setExpirationInCookie(
                                                  this.sidKey,
                                                  this._utils.minutesToMilliseconds(_)
                                              ),
                                              !1);
                                },
                            },
                            {
                                key: 'get',
                                value: function get() {
                                    var e = this._storageUtilsWrapper.getCookie(this.sidKey);
                                    if (!(t = this._validateSid(e))) {
                                        b.info('Sid was not found in cookie. Trying to get it from the local storage.');
                                        var t,
                                            e = this._storageUtilsWrapper.getFromLocalStorage(this.sidKey);
                                        if (!(t = this._validateSid(e)))
                                            return b.info('Sid was not found in local storage.'), null;
                                    }
                                    return t;
                                },
                            },
                            {
                                key: 'set',
                                value: function set(e) {
                                    var t = e;
                                    (t = this._validateSid(t))
                                        ? (this._storageUtilsWrapper.saveToLocalStorage(
                                              this.sidKey,
                                              t,
                                              this.COOKIE_EXPIRATION_IN_MILLISECONDS
                                          ) || b.error('Failed saving sid '.concat(e, ' to local storage.')),
                                          this._storageUtilsWrapper.setCookie(
                                              this.sidKey,
                                              t,
                                              this.COOKIE_EXPIRATION_IN_MILLISECONDS
                                          ) || b.error('Failed saving sid '.concat(e, ' to cookie.')))
                                        : b.error('Sid '.concat(e, ' is invalid. Will not save it.'));
                                },
                            },
                            {
                                key: '_validateSid',
                                value: function _validateSid(e) {
                                    return e || null;
                                },
                            },
                        ]),
                        SidRepository
                    );
                })();
                function CsidCache_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var pt = (function () {
                    function CsidCache() {
                        !(function CsidCache_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, CsidCache),
                            (this._csid = null);
                    }
                    return (
                        (function CsidCache_createClass(e, t, r) {
                            t && CsidCache_defineProperties(e.prototype, t),
                                r && CsidCache_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(CsidCache, [
                            {
                                key: 'get',
                                value: function get() {
                                    return this._csid;
                                },
                            },
                            {
                                key: 'set',
                                value: function set(e) {
                                    if (void 0 === e) throw new Error('Invalid csid value of undefined');
                                    this._csid = e;
                                },
                            },
                        ]),
                        CsidCache
                    );
                })();
                function CsidService_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var dt = (function () {
                        function CsidService(e, t, r) {
                            !(function CsidService_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, CsidService),
                                (this._customerApi = e),
                                (this._csidCache = t),
                                (this._workerCommunicator = r);
                        }
                        return (
                            (function CsidService_createClass(e, t, r) {
                                t && CsidService_defineProperties(e.prototype, t),
                                    r && CsidService_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(CsidService, [
                                {
                                    key: 'set',
                                    value: function set(e) {
                                        if (void 0 === e) throw new Error('Invalid csid value of undefined');
                                        this._csidCache.set(e), this._workerCommunicator.sendAsync(N, { csid: e });
                                    },
                                },
                                {
                                    key: 'get',
                                    value: function get(e) {
                                        this._customerApi.isApiAvailable('getCustomerSessionID')
                                            ? this._getCsidWithRetries(0, e)
                                            : b.debug(
                                                  'getCustomerSessionID API is unavailable. Hopefully this is because the setCustomerSessionId API is being used'
                                              );
                                    },
                                },
                                {
                                    key: '_getCsidWithRetries',
                                    value: function _getCsidWithRetries(t, r) {
                                        var n = this;
                                        try {
                                            this._customerApi.getCustomerSessionID(function (e) {
                                                return e
                                                    ? (b.debug(
                                                          'Got csid after '.concat(t, ' retries. csid: ').concat(e)
                                                      ),
                                                      n._csidCache.set(e),
                                                      void r())
                                                    : 20 <= t
                                                    ? void b.info('Did not get a csid after all retries.')
                                                    : (t++, void setTimeout(n._getCsidWithRetries.bind(n, t, r), 200));
                                            });
                                        } catch (e) {
                                            b.error(
                                                'Failed to get csid: '
                                                    .concat(e.message, '. retryCount: ')
                                                    .concat(t, '.'),
                                                e
                                            ),
                                                ++t <= 20 && setTimeout(this._getCsidWithRetries.bind(this, t, r), 200);
                                        }
                                    },
                                },
                            ]),
                            CsidService
                        );
                    })(),
                    ht = {
                        none: 'none',
                        init: 'init',
                        configuration: 'config',
                        configurationFromSlave: 'configFromSlave',
                        customerApi: 'customerApi',
                        pageTimeout: 'timeout',
                        unknown: 'unknown',
                    };
                function SessionService_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var vt = (function () {
                    function SessionService(e, t, r, n, o, i, s, a, u, c, l, f, p, d, h, v) {
                        !(function SessionService_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, SessionService),
                            (this._messageBus = e),
                            (this._configurationService = t),
                            (this._configurationRepository = r),
                            (this._utils = n),
                            (this._domUtils = o),
                            (this._workerComm = i),
                            (this._contextMgr = s),
                            (this._muidService = a),
                            (this._serverStateMgr = u),
                            (this._resetSessionSiteMapper = c),
                            (this._sidRepository = l),
                            (this._csidService = f),
                            (this._csidCache = p),
                            (this._psidCache = d),
                            (this._brandService = h),
                            (this._agentIdService = v),
                            (this._agentType = r.get(y.agentType)),
                            (this.lastExternalResetCallTime = null),
                            (this.sessionId = null),
                            this._resetSessionSiteMapper.updateObserver(this._onSiteMapperMatch.bind(this)),
                            i.addMessageListener(he.NewSessionStartedEvent, this._onNewSessionStartedEvent.bind(this)),
                            this._setSessionStartupData();
                    }
                    return (
                        (function SessionService_createClass(e, t, r) {
                            t && SessionService_defineProperties(e.prototype, t),
                                r && SessionService_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(SessionService, [
                            {
                                key: 'resumeOrStartSession',
                                value: function resumeOrStartSession() {
                                    var e = this._getSessionId();
                                    e ? this._resumeSession(e) : this._startNewSession();
                                },
                            },
                            {
                                key: 'onConfigUpdate',
                                value: function onConfigUpdate(e) {
                                    this._resetSessionSiteMapper.onConfigUpdate(e),
                                        this._configurationRepository.get('logAddress') &&
                                            this._configurationService.updateLogUrlToWorker(
                                                this.sessionId,
                                                this._csidCache.get(),
                                                this._workerComm
                                            );
                                },
                            },
                            {
                                key: 'resetSession',
                                value: function resetSession(e) {
                                    this.onResetSession(e);
                                },
                            },
                            {
                                key: 'onResetSession',
                                value: function onResetSession(e) {
                                    e = e.resetReason || ht.unknown;
                                    ht.hasOwnProperty(e) || (e = ht.customerApi),
                                        b.info('Received a Reset Session event, reason: '.concat(e)),
                                        this._utils.dateNow() - this.lastExternalResetCallTime >
                                        this._configurationRepository.get(y.resetSessionApiThreshold)
                                            ? (this._startNewSession(),
                                              this._configurationService.updateLogUrlToWorker(
                                                  this.sessionId,
                                                  this._csidCache.get(),
                                                  this._workerComm
                                              ),
                                              (this.lastExternalResetCallTime = this._utils.dateNow()))
                                            : b.info(
                                                  "Ignoring external reset session call since resetSessionApiThreshold hasn't passed"
                                              );
                                },
                            },
                            {
                                key: '_startNewSession',
                                value: function _startNewSession() {
                                    b.info('Starting a new session. Previous session was '.concat(this.sessionId)),
                                        (this.sessionId = null),
                                        this._agentType === l.SECONDARY
                                            ? this._csidService.get()
                                            : this._csidCache.set(null),
                                        this._psidCache.set(null),
                                        this._serverStateMgr.onSessionIdChange(),
                                        this._onStartedNewSession();
                                },
                            },
                            {
                                key: '_resumeSession',
                                value: function _resumeSession(e) {
                                    b.info('Resuming an existing session with sid '.concat(e)),
                                        (this.sessionId = e),
                                        this._saveSidToStorage(this.sessionId),
                                        this._handleBrandResume(),
                                        this._onResumedSession(),
                                        this._handleCsid();
                                },
                            },
                            {
                                key: '_getSessionId',
                                value: function _getSessionId() {
                                    b.info('Attempting to get sid from storage');
                                    var e = this._sidRepository.get();
                                    return e && b.info('Read sid '.concat(e, ' from storage')), e;
                                },
                            },
                            {
                                key: '_saveSidToStorage',
                                value: function _saveSidToStorage(e) {
                                    b.info('Saving sid '.concat(e, ' to storage')), this._sidRepository.set(e);
                                },
                            },
                            {
                                key: '_onStartedNewSession',
                                value: function _onStartedNewSession() {
                                    var e;
                                    this._configurationRepository.get('serverAddress') &&
                                        ((e = {
                                            serverAddress: this._configurationRepository.get('serverAddress'),
                                            csid: this._csidCache.get(),
                                            psid: this._psidCache.get(),
                                            muid: null === (e = this._muidService) || void 0 === e ? void 0 : e.muid,
                                            context_name: this._contextMgr.contextName,
                                        }),
                                        this._workerComm.sendAsync(L, e),
                                        this._configurationService.updateLogUrlToWorker(
                                            this.sessionId,
                                            this._csidCache.get(),
                                            this._workerComm
                                        ));
                                },
                            },
                            {
                                key: '_onResumedSession',
                                value: function _onResumedSession() {
                                    var e, t;
                                    this._configurationRepository.get('serverAddress') &&
                                        ((t = this._serverStateMgr.getServerState(this.sessionId)),
                                        (t = {
                                            serverAddress: this._configurationRepository.get('serverAddress'),
                                            csid: this._csidCache.get(),
                                            psid: this._psidCache.get(),
                                            cdsnum: this.sessionId,
                                            muid: null === (e = this._muidService) || void 0 === e ? void 0 : e.muid,
                                            context_name: this._contextMgr.contextName,
                                            serverState: t,
                                        }),
                                        this._workerComm.sendAsync(j, t),
                                        this._configurationService.updateLogUrlToWorker(
                                            this.sessionId,
                                            this._csidCache.get(),
                                            this._workerComm
                                        ));
                                },
                            },
                            {
                                key: '_handleCsid',
                                value: function _handleCsid() {
                                    var e = this,
                                        t = this;
                                    function sendSessionIdentifierToServer() {
                                        b.info(
                                            'Received csid from client. csid: '
                                                .concat(this._csidCache.get(), ', sid:')
                                                .concat(null == this ? void 0 : this.sessionId)
                                        ),
                                            t._sendCsidToServer();
                                    }
                                    this._agentType !== l.SECONDARY
                                        ? this._domUtils.onDocumentBody(t, function () {
                                              b.debug(
                                                  'SessionService:_sessionIdRegeneration, onDocumentBody callback: cdSNum: '.concat(
                                                      e.sessionId
                                                  )
                                              ),
                                                  e._csidService.get(function () {
                                                      sendSessionIdentifierToServer.call(e);
                                                  });
                                          })
                                        : this._csidService.get(function () {
                                              sendSessionIdentifierToServer.call(e);
                                          });
                                },
                            },
                            {
                                key: '_sendCsidToServer',
                                value: function _sendCsidToServer() {
                                    this._configurationRepository.get('serverAddress') &&
                                        (b.info(
                                            'Sending csid to worker. csid: '
                                                .concat(this._csidCache.get(), ', sid:')
                                                .concat(this.sessionId)
                                        ),
                                        this._workerComm.sendAsync(N, { csid: this._csidCache.get() }),
                                        this._configurationService.updateLogUrlToWorker(
                                            this.sessionId,
                                            this._csidCache.get(),
                                            this._workerComm
                                        ));
                                },
                            },
                            {
                                key: '_handleBrandResume',
                                value: function _handleBrandResume() {
                                    this._brandService.update();
                                },
                            },
                            {
                                key: '_onSiteMapperMatch',
                                value: function _onSiteMapperMatch() {
                                    this.onResetSession({ resetReason: ht.configuration });
                                },
                            },
                            {
                                key: '_onNewSessionStartedEvent',
                                value: function _onNewSessionStartedEvent(e) {
                                    (this.sessionId = e),
                                        this._saveSidToStorage(this.sessionId),
                                        this._configurationService.updateLogUrlToWorker(
                                            this.sessionId,
                                            this._csidCache.get(),
                                            this._workerComm
                                        ),
                                        this._notifyNewSessionStarted(),
                                        this._handleCsid(),
                                        b.info('A new session '.concat(e, ' has started'));
                                },
                            },
                            {
                                key: '_notifyNewSessionStarted',
                                value: function _notifyNewSessionStarted() {
                                    this._messageBus.publish(me.NewSessionStartedEvent, this.sessionId);
                                },
                            },
                            {
                                key: '_setSessionStartupData',
                                value: function _setSessionStartupData() {
                                    this._workerComm.sendAsync(G, {
                                        agentType: this._configurationRepository.get(y.agentType),
                                    }),
                                        this._agentIdService.updateAgentIdWithServer(),
                                        this._configurationRepository.get(y.enableStartupCustomerSessionId) &&
                                            this._csidService.get();
                                },
                            },
                        ]),
                        SessionService
                    );
                })();
                function MetadataService_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var yt = (function () {
                        function MetadataService(e, t) {
                            !(function MetadataService_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, MetadataService),
                                (function MetadataService_defineProperty(e, t, r) {
                                    t in e
                                        ? Object.defineProperty(e, t, {
                                              value: r,
                                              enumerable: !0,
                                              configurable: !0,
                                              writable: !0,
                                          })
                                        : (e[t] = r);
                                })(this, '_dataQ', void 0),
                                (this._configurationRepository = e),
                                (this._dataQ = t),
                                (this._isEnabled = this._configurationRepository.get('isCustMetadata'));
                        }
                        return (
                            (function MetadataService_createClass(e, t, r) {
                                t && MetadataService_defineProperties(e.prototype, t),
                                    r && MetadataService_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(MetadataService, [
                                {
                                    key: 'onCustomerMetadata',
                                    value: function onCustomerMetadata(e) {
                                        (void 0 !== this._isEnabled &&
                                            null != this._isEnabled &&
                                            !0 !== this._isEnabled) ||
                                            (b.debug(
                                                'HandleMetadata:onCustomerMetadata. data=' + JSON.stringify(e.data)
                                            ),
                                            e.data && this._dataQ.addToQueue('customer_metadata', [null, e.data]));
                                    },
                                },
                                {
                                    key: 'onConfigUpdate',
                                    value: function onConfigUpdate() {
                                        this._isEnabled = this._configurationRepository.get('isCustMetadata');
                                    },
                                },
                            ]),
                            MetadataService
                        );
                    })(),
                    _t = 'updateSlaveConf',
                    gt = 'updateSlaveState';
                function SlaveListener_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var mt = (function () {
                    function SlaveListener(e, t, r, n, o, i) {
                        !(function SlaveListener_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, SlaveListener),
                            (this._slaves = []),
                            (this._dataQ = e),
                            (this._configurationRepository = t),
                            (this._utils = r),
                            (this._logPerfDataQ = n),
                            (this._contextMgr = o),
                            (this._sessionService = i),
                            (this.onResetSessionTrigger = new ce()),
                            (this.onMouseChallengeTrigger = new ce()),
                            (this._msgRouter = {
                                dataFromSlave: this._onDataFromSlave,
                                registerSlave: this._onRegisterSlave,
                                logPerfSlave: this._onLogPerfSlave,
                                updateMasterContext: this._onUpdateMasterContext,
                                resetSessionTriggerFromSlave: this._onResetSessionTriggerFromSlave,
                                mouseChallengeTriggerFromSlave: this._onMouseChallengeTriggerFromSlave,
                            });
                    }
                    return (
                        (function SlaveListener_createClass(e, t, r) {
                            t && SlaveListener_defineProperties(e.prototype, t),
                                r && SlaveListener_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(SlaveListener, [
                            {
                                key: 'listen',
                                value: function listen() {
                                    var r = this;
                                    b.debug('SlaveListener:listen'),
                                        this._utils.addEventListener(window, 'message', function (e) {
                                            var t = e.data.msgType;
                                            t && r._msgRouter[t] && r._msgRouter[t].call(r, e);
                                        });
                                },
                            },
                            {
                                key: 'sendToSlaves',
                                value: function sendToSlaves(t, r) {
                                    b.debug('SlaveListener:sendToSlaves'),
                                        this._slaves.forEach(function (e) {
                                            e.source.postMessage({ msgType: t, data: r }, e.origin);
                                        });
                                },
                            },
                            {
                                key: 'onConfigUpdate',
                                value: function onConfigUpdate() {
                                    b.debug(
                                        'SlaveListener:onConfigUpdate, updating '.concat(this._slaves.length, ' slaves')
                                    ),
                                        this.sendToSlaves(_t, this._configurationRepository.getAll());
                                },
                            },
                            {
                                key: 'notifyStateChange',
                                value: function notifyStateChange(e) {
                                    b.info(
                                        'SlaveListener:notifyStateChange, updating '
                                            .concat(this._slaves.length, ' slaves that the new state is ')
                                            .concat(e.toState)
                                    ),
                                        this.sendToSlaves(gt, e);
                                },
                            },
                            {
                                key: '_onDataFromSlave',
                                value: function _onDataFromSlave(e) {
                                    e = e.data;
                                    'flushData' !== e.data.eventName &&
                                        (this._isScriptVersionMessage(e)
                                            ? e.data.eventName &&
                                              this._dataQ.addToQueue(e.data.eventName, e.data.data, !1)
                                            : e.data.eventName &&
                                              this._dataQ.addToQueue(e.data.eventName, e.data.data));
                                },
                            },
                            {
                                key: '_isScriptVersionMessage',
                                value: function _isScriptVersionMessage(e) {
                                    return (
                                        'static_fields' === e.data.eventName &&
                                        'dataFromSlave' === e.msgType &&
                                        e.data &&
                                        e.data.data &&
                                        ('slave_version_client' === e.data.data[0] ||
                                            'device_source' === e.data.data[0])
                                    );
                                },
                            },
                            {
                                key: '_onRegisterSlave',
                                value: function _onRegisterSlave(e) {
                                    b.info(
                                        'SlaveListener:_onRegisterSlave - slave registered, origin '.concat(e.origin)
                                    ),
                                        this._slaves.push({ source: e.source, origin: e.origin }),
                                        e.source.postMessage(
                                            {
                                                msgType: 'updateSlaveConf',
                                                data: this._configurationRepository.getAll(),
                                            },
                                            e.origin
                                        );
                                },
                            },
                            {
                                key: '_onLogPerfSlave',
                                value: function _onLogPerfSlave(e) {
                                    e = e.data;
                                    'flushData' !== e.data.eventName &&
                                        e.data.eventName &&
                                        this._logPerfDataQ.addToQueue(e.data.eventName, e.data.data);
                                },
                            },
                            {
                                key: '_onUpdateMasterContext',
                                value: function _onUpdateMasterContext(e) {
                                    b.debug('SlaveListener:_onUpdateMasterContext');
                                    e = e.data;
                                    this._contextMgr.setContext(e.data);
                                },
                            },
                            {
                                key: '_onResetSessionTriggerFromSlave',
                                value: function _onResetSessionTriggerFromSlave(e) {
                                    b.debug('SlaveListener:_onResetSessionTriggerFromSlave');
                                    e = e.data;
                                    this.onResetSessionTrigger.publish(e.data);
                                },
                            },
                            {
                                key: '_onMouseChallengeTriggerFromSlave',
                                value: function _onMouseChallengeTriggerFromSlave(e) {
                                    b.debug('SlaveListener:_onMouseChallengeTriggerFromSlave');
                                    e = e.data;
                                    this.onMouseChallengeTrigger.publish(e.data);
                                },
                            },
                        ]),
                        SlaveListener
                    );
                })();
                function FeaturesBuilder_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var bt = (function () {
                    function FeaturesBuilder(e, t, r, n, o, i, s, a, u, c, l, f, p, d) {
                        !(function FeaturesBuilder_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, FeaturesBuilder),
                            (this._features = e),
                            (this._configurationRepository = t),
                            (this._utils = r),
                            (this._elements = n),
                            (this._mutationObserver = o),
                            (this._dataQ = i),
                            (this._sessionService = s),
                            (this._muidService = a),
                            (this._perfMonitor = u),
                            (this._sensorDataQ = c),
                            (this._msgBus = l),
                            (this._cidCache = f),
                            (this._sameCharService = p),
                            (this._maskingService = d);
                    }
                    return (
                        (function FeaturesBuilder_createClass(e, t, r) {
                            t && FeaturesBuilder_defineProperties(e.prototype, t),
                                r && FeaturesBuilder_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(FeaturesBuilder, [
                            {
                                key: 'buildFeatures',
                                value: function buildFeatures() {
                                    var r = this;
                                    !(function buildFeaturesInList(t) {
                                        t &&
                                            Object.keys(t).forEach(function (e) {
                                                t[e].init.apply(r);
                                            });
                                    })(this._features.list);
                                },
                            },
                        ]),
                        FeaturesBuilder
                    );
                })();
                function ContextApiHandler_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Ct = (function () {
                    function ContextApiHandler(e, t) {
                        !(function ContextApiHandler_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, ContextApiHandler),
                            (this._contextMgr = e),
                            (this._dataQ = t),
                            this._contextMgr.onContextChange.subscribe(this.sendContextToServer.bind(this)),
                            this.handleContextChange({ context: 'cd_auto' });
                    }
                    return (
                        (function ContextApiHandler_createClass(e, t, r) {
                            t && ContextApiHandler_defineProperties(e.prototype, t),
                                r && ContextApiHandler_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(ContextApiHandler, [
                            {
                                key: 'handleContextChange',
                                value: function handleContextChange(e) {
                                    this._contextMgr.changeContext(e.context || e.activityType);
                                },
                            },
                            {
                                key: 'sendContextToServer',
                                value: function sendContextToServer(e) {
                                    e &&
                                        this._dataQ.addToQueue('contextChange', [
                                            null,
                                            e.url,
                                            e.name,
                                            e.timestamp,
                                            e.referrer,
                                            e.hLength,
                                        ]);
                                },
                            },
                        ]),
                        ContextApiHandler
                    );
                })();
                function StateService_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                Ct.apiName = 'ContextChange';
                var wt = (function () {
                        function StateService(e) {
                            !(function StateService_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, StateService),
                                (this._messageBus = e),
                                (this._state = Z.stopped);
                        }
                        return (
                            (function StateService_createClass(e, t, r) {
                                t && StateService_defineProperties(e.prototype, t),
                                    r && StateService_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(StateService, [
                                {
                                    key: 'getState',
                                    value: function getState() {
                                        return this._state;
                                    },
                                },
                                {
                                    key: 'updateState',
                                    value: function updateState(e) {
                                        var t = Z[e];
                                        if (!t) throw new Error('Unknown state '.concat(e));
                                        (this._state = t), this._messageBus.publish(me.StateChangedEvent, { state: t });
                                    },
                                },
                            ]),
                            StateService
                        );
                    })(),
                    Et = 'cdNewSessionStartedEvent',
                    St = 'cdStateChangedEvent',
                    Pt = 'cdHeartbeat',
                    kt = 'RestoredMuidEvent';
                function ClientEventService_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Ot = (function () {
                    function ClientEventService() {
                        !(function ClientEventService_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, ClientEventService);
                    }
                    return (
                        (function ClientEventService_createClass(e, t, r) {
                            t && ClientEventService_defineProperties(e.prototype, t),
                                r && ClientEventService_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(ClientEventService, [
                            {
                                key: 'publishNewSessionStartedEvent',
                                value: function publishNewSessionStartedEvent(e) {
                                    window.postMessage({ type: Et, event: { sessionID: e } }, window.location.href);
                                },
                            },
                            {
                                key: 'publishStateChangedEvent',
                                value: function publishStateChangedEvent(e) {
                                    window.postMessage({ type: St, event: { state: e } }, window.location.href);
                                },
                            },
                            {
                                key: 'publishRestoredMuidEvent',
                                value: function publishRestoredMuidEvent(e) {
                                    window.postMessage({ type: kt, event: { muid: e } }, window.location.href);
                                },
                            },
                        ]),
                        ClientEventService
                    );
                })();
                function ApiContextChangeEventHandler_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Bt = (function () {
                    function ApiContextChangeEventHandler(e, t) {
                        !(function ApiContextChangeEventHandler_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, ApiContextChangeEventHandler),
                            (this._messageBus = e),
                            (this._contextMgr = t),
                            this._messageBus.subscribe(me.ApiContextChangeEvent, this._handle.bind(this));
                    }
                    return (
                        (function ApiContextChangeEventHandler_createClass(e, t, r) {
                            t && ApiContextChangeEventHandler_defineProperties(e.prototype, t),
                                r && ApiContextChangeEventHandler_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(ApiContextChangeEventHandler, [
                            {
                                key: '_handle',
                                value: function _handle(e) {
                                    this._contextMgr.changeContext(e.context || e.activityType);
                                },
                            },
                        ]),
                        ApiContextChangeEventHandler
                    );
                })();
                function ApiResetSessionEventHandler_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Mt = (function () {
                    function ApiResetSessionEventHandler(e, t) {
                        !(function ApiResetSessionEventHandler_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, ApiResetSessionEventHandler),
                            (this._messageBus = e),
                            (this._sessionService = t),
                            this._messageBus.subscribe(me.ApiResetSessionEvent, this._handle.bind(this));
                    }
                    return (
                        (function ApiResetSessionEventHandler_createClass(e, t, r) {
                            t && ApiResetSessionEventHandler_defineProperties(e.prototype, t),
                                r && ApiResetSessionEventHandler_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(ApiResetSessionEventHandler, [
                            {
                                key: '_handle',
                                value: function _handle(e) {
                                    this._sessionService.onResetSession(e);
                                },
                            },
                        ]),
                        ApiResetSessionEventHandler
                    );
                })();
                function ApiCustomerMetadataEventHandler_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Rt = (function () {
                    function ApiCustomerMetadataEventHandler(e, t) {
                        !(function ApiCustomerMetadataEventHandler_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, ApiCustomerMetadataEventHandler),
                            (this._messageBus = e),
                            (this._handleMetadata = t),
                            this._messageBus.subscribe(me.ApiCustomerMetadataEvent, this._handle.bind(this));
                    }
                    return (
                        (function ApiCustomerMetadataEventHandler_createClass(e, t, r) {
                            t && ApiCustomerMetadataEventHandler_defineProperties(e.prototype, t),
                                r && ApiCustomerMetadataEventHandler_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(ApiCustomerMetadataEventHandler, [
                            {
                                key: '_handle',
                                value: function _handle(e) {
                                    this._handleMetadata.onCustomerMetadata(e);
                                },
                            },
                        ]),
                        ApiCustomerMetadataEventHandler
                    );
                })();
                function ApiChangeStateEventHandler_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Dt = (function () {
                    function ApiChangeStateEventHandler(e, t, r) {
                        !(function ApiChangeStateEventHandler_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, ApiChangeStateEventHandler),
                            (this._messageBus = e),
                            (this._pauseResumeManager = t),
                            (this._slaveListener = r),
                            this._messageBus.subscribe(me.ApiChangeStateEvent, this._handle.bind(this));
                    }
                    return (
                        (function ApiChangeStateEventHandler_createClass(e, t, r) {
                            t && ApiChangeStateEventHandler_defineProperties(e.prototype, t),
                                r && ApiChangeStateEventHandler_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(ApiChangeStateEventHandler, [
                            {
                                key: '_handle',
                                value: function _handle(e) {
                                    this._pauseResumeManager.onStateChange(e), this._slaveListener.notifyStateChange(e);
                                },
                            },
                        ]),
                        ApiChangeStateEventHandler
                    );
                })();
                function ApiSetCsidEventHandler_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Ft = (function () {
                    function ApiSetCsidEventHandler(e, t) {
                        !(function ApiSetCsidEventHandler_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, ApiSetCsidEventHandler),
                            (this._messageBus = e),
                            (this._csidService = t),
                            this._messageBus.subscribe(me.ApiSetCsidEvent, this._handle.bind(this));
                    }
                    return (
                        (function ApiSetCsidEventHandler_createClass(e, t, r) {
                            t && ApiSetCsidEventHandler_defineProperties(e.prototype, t),
                                r && ApiSetCsidEventHandler_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(ApiSetCsidEventHandler, [
                            {
                                key: '_handle',
                                value: function _handle(e) {
                                    e.csid
                                        ? this._csidService.set(e.csid)
                                        : b.warn('Received an invalid csid of '.concat(e.csid, '. Ignoring api call'));
                                },
                            },
                        ]),
                        ApiSetCsidEventHandler
                    );
                })();
                function ApiSetPsidEventHandler_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Tt = (function () {
                    function ApiSetPsidEventHandler(e, t) {
                        !(function ApiSetPsidEventHandler_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, ApiSetPsidEventHandler),
                            (this._messageBus = e),
                            (this._psidService = t),
                            this._messageBus.subscribe(me.ApiSetPsidEvent, this._handle.bind(this));
                    }
                    return (
                        (function ApiSetPsidEventHandler_createClass(e, t, r) {
                            t && ApiSetPsidEventHandler_defineProperties(e.prototype, t),
                                r && ApiSetPsidEventHandler_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(ApiSetPsidEventHandler, [
                            {
                                key: '_handle',
                                value: function _handle(e) {
                                    e.psid
                                        ? this._psidService.set(e.psid)
                                        : b.warn('Received an invalid psid of '.concat(e.psid, '. Ignoring api call'));
                                },
                            },
                        ]),
                        ApiSetPsidEventHandler
                    );
                })();
                function NewSessionStartedEventHandler_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var It = (function () {
                    function NewSessionStartedEventHandler(e, t, r, n, o, i) {
                        !(function NewSessionStartedEventHandler_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, NewSessionStartedEventHandler),
                            (this._messageBus = e),
                            (this._featureService = t),
                            (this._customerApiBridge = r),
                            (this._contextMgr = n),
                            (this._clientEventService = o),
                            (this._sessionInfoService = i),
                            this._messageBus.subscribe(me.NewSessionStartedEvent, this._handle.bind(this));
                    }
                    return (
                        (function NewSessionStartedEventHandler_createClass(e, t, r) {
                            t && NewSessionStartedEventHandler_defineProperties(e.prototype, t),
                                r && NewSessionStartedEventHandler_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(NewSessionStartedEventHandler, [
                            {
                                key: '_handle',
                                value: function _handle(e) {
                                    this._sessionInfoService.markStartTime(),
                                        this._featureService.runPerSessionFeatures(),
                                        this._customerApiBridge.notifySessionReset(e),
                                        this._contextMgr.onSessionReset(),
                                        this._clientEventService.publishNewSessionStartedEvent(e);
                                },
                            },
                        ]),
                        NewSessionStartedEventHandler
                    );
                })();
                function ConfigurationLoadedEventHandler_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var xt = (function () {
                    function ConfigurationLoadedEventHandler(e, t, r, n, o, i, s, a, u, c, l, f, p, d, h, v) {
                        !(function ConfigurationLoadedEventHandler_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, ConfigurationLoadedEventHandler),
                            (this._messageBus = e),
                            (this._featureService = t),
                            (this._dataQ = r),
                            (this._pauseResumeMgr = n),
                            (this._handleMetadata = o),
                            (this._logger = i),
                            (this._contextMgr = s),
                            (this._sessionService = a),
                            (this._sensorDataQ = u),
                            (this._slaveListener = c),
                            (this._stateService = l),
                            (this._performanceMonitor = f),
                            (this._heartBeatMessageService = p),
                            (this._sensorGateKeeper = d),
                            (this._sidRepository = h),
                            (this._coordinatesMaskingConfigurationUpdater = v),
                            this._messageBus.subscribe(me.ConfigurationLoadedEvent, this._handle.bind(this));
                    }
                    return (
                        (function ConfigurationLoadedEventHandler_createClass(e, t, r) {
                            t && ConfigurationLoadedEventHandler_defineProperties(e.prototype, t),
                                r && ConfigurationLoadedEventHandler_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(ConfigurationLoadedEventHandler, [
                            {
                                key: '_handle',
                                value: function _handle(e) {
                                    b.info('Configurations were loaded from the server.'),
                                        this._performanceMonitor.stopMonitor('t.timeTillServerConfig'),
                                        this._featureService.updateRunByConfig(e),
                                        this._dataQ.updateWithConfig(e),
                                        this._pauseResumeMgr.onConfigUpdate(e),
                                        this._handleMetadata.onConfigUpdate(e),
                                        this._logger.updateLogConfig(e),
                                        this._contextMgr.onConfigUpdate(e),
                                        this._sessionService.onConfigUpdate(e),
                                        this._sensorDataQ.onConfigUpdate(e),
                                        this._slaveListener.onConfigUpdate(e),
                                        this._heartBeatMessageService.updateConfig(e),
                                        this._sensorGateKeeper.configure(),
                                        this._sidRepository.onConfigUpdate(e),
                                        this._coordinatesMaskingConfigurationUpdater.onConfigUpdate(e),
                                        this._stateService.updateState(Z.started),
                                        b.info('Successfully configured system');
                                },
                            },
                        ]),
                        ConfigurationLoadedEventHandler
                    );
                })();
                function StateChangedEventHandler_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var At = (function () {
                    function StateChangedEventHandler(e, t) {
                        !(function StateChangedEventHandler_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, StateChangedEventHandler),
                            (this._messageBus = e),
                            (this._clientEventService = t),
                            this._messageBus.subscribe(me.StateChangedEvent, this._handle.bind(this));
                    }
                    return (
                        (function StateChangedEventHandler_createClass(e, t, r) {
                            t && StateChangedEventHandler_defineProperties(e.prototype, t),
                                r && StateChangedEventHandler_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(StateChangedEventHandler, [
                            {
                                key: '_handle',
                                value: function _handle(e) {
                                    b.info('SDK state changed to '.concat(e.state)),
                                        this._clientEventService.publishStateChangedEvent(e.state);
                                },
                            },
                        ]),
                        StateChangedEventHandler
                    );
                })();
                function ApiSetCustomerBrandEventHandler_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Lt = (function () {
                    function ApiSetCustomerBrandEventHandler(e, t) {
                        !(function ApiSetCustomerBrandEventHandler_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, ApiSetCustomerBrandEventHandler),
                            (this._messageBus = e),
                            (this._brandService = t),
                            this._messageBus.subscribe(me.ApiSetCustomerBrand, this._handle.bind(this));
                    }
                    return (
                        (function ApiSetCustomerBrandEventHandler_createClass(e, t, r) {
                            t && ApiSetCustomerBrandEventHandler_defineProperties(e.prototype, t),
                                r && ApiSetCustomerBrandEventHandler_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(ApiSetCustomerBrandEventHandler, [
                            {
                                key: '_handle',
                                value: function _handle(e) {
                                    e.brand
                                        ? this._brandService.set(e.brand)
                                        : b.warn('Received an empty brand name. Ignoring the API call');
                                },
                            },
                        ]),
                        ApiSetCustomerBrandEventHandler
                    );
                })();
                function DOMUtils_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var jt = (function () {
                    function DOMUtils() {
                        !(function DOMUtils_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, DOMUtils);
                    }
                    return (
                        (function DOMUtils_createClass(e, t, r) {
                            t && DOMUtils_defineProperties(e.prototype, t),
                                r && DOMUtils_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(DOMUtils, null, [
                            {
                                key: 'addEventListener',
                                value: function addEventListener(e, t, r) {
                                    var n = 3 < arguments.length && void 0 !== arguments[3] && arguments[3],
                                        o = !(4 < arguments.length && void 0 !== arguments[4]) || arguments[4],
                                        i = 5 < arguments.length && void 0 !== arguments[5] && arguments[5];
                                    this.isPassiveSupported
                                        ? e.addEventListener(t, r, { capture: n, passive: o, once: i })
                                        : e.addEventListener
                                        ? e.addEventListener(t, r, n)
                                        : e.attachEvent('on' + t, r);
                                },
                            },
                            {
                                key: 'removeEventListener',
                                value: function removeEventListener(e, t, r) {
                                    var n = 3 < arguments.length && void 0 !== arguments[3] && arguments[3];
                                    e.removeEventListener ? e.removeEventListener(t, r, n) : e.detachEvent('on' + t, r);
                                },
                            },
                            {
                                key: 'outerHTML',
                                value: function outerHTML(e) {
                                    return e.outerHTML || new XMLSerializer().serializeToString(e);
                                },
                            },
                            {
                                key: 'onDocumentBody',
                                value: function onDocumentBody(e, t) {
                                    e.document.body
                                        ? t()
                                        : window.addEventListener
                                        ? window.addEventListener('DOMContentLoaded', t, !0)
                                        : window.attachEvent('onload', t);
                                },
                            },
                            {
                                key: 'onPageLoad',
                                value: function onPageLoad(e, t) {
                                    DOMUtils.addEventListener(e, 'load', t, !0),
                                        ((e.contentWindow && 'complete' === e.contentWindow.document.readyState) ||
                                            (e.document && 'complete' === e.document.readyState)) &&
                                            t();
                                },
                            },
                            {
                                key: 'waitUntilDocumentIsReady',
                                value: function waitUntilDocumentIsReady(r) {
                                    var n = this;
                                    return new Promise(function (e, t) {
                                        try {
                                            n.onWindowDocumentReady(r, function () {
                                                e();
                                            });
                                        } catch (e) {
                                            t(e);
                                        }
                                    });
                                },
                            },
                            {
                                key: 'onWindowDocumentReady',
                                value: function onWindowDocumentReady(e, t) {
                                    var r,
                                        n = window.addEventListener ? 'DOMContentLoaded' : 'load';
                                    'complete' === e.document.readyState || 'interactive' === e.document.readyState
                                        ? t()
                                        : ((r = function onLoadedWindowEvent() {
                                              DOMUtils.removeEventListener(e, n, r, !0), t();
                                          }),
                                          DOMUtils.addEventListener(e, n, r, !0));
                                },
                            },
                            {
                                key: 'isWindowDocumentReady',
                                value: function isWindowDocumentReady(e) {
                                    return e && 'complete' === e.document.readyState;
                                },
                            },
                            {
                                key: 'canAccessIFrame',
                                value: function canAccessIFrame(e) {
                                    var t = null;
                                    try {
                                        t = (e.contentDocument || e.contentWindow.document).body.innerHTML;
                                    } catch (e) {}
                                    return null !== t;
                                },
                            },
                            {
                                key: 'matches',
                                value: function matches(e, t) {
                                    return (
                                        e.matches ||
                                        e.matchesSelector ||
                                        e.mozMatchesSelector ||
                                        e.msMatchesSelector ||
                                        e.oMatchesSelector ||
                                        e.webkitMatchesSelector ||
                                        function (e) {
                                            var t = this.document || this.ownerDocument;
                                            if (!t) return !1;
                                            for (var r = t.querySelectorAll(e), n = r.length; 0 <= --n; )
                                                if ((r.item ? r.item(n) : r[n]) === this) break;
                                            return -1 < n;
                                        }
                                    ).call(e, t);
                                },
                            },
                            {
                                key: 'isWebWorkerFetchSupported',
                                value: function isWebWorkerFetchSupported() {
                                    var e = 'Request' in self,
                                        t = 'fetch' in self;
                                    if (!e) return !1;
                                    e = 'keepalive' in Request.prototype;
                                    return t && e;
                                },
                            },
                            {
                                key: 'isSubtleCryptoSupported',
                                value: function isSubtleCryptoSupported() {
                                    return 'SubtleCrypto' in self;
                                },
                            },
                        ]),
                        DOMUtils
                    );
                })();
                function HeartBeatService_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                !(function DOMUtils_defineProperty(e, t, r) {
                    t in e
                        ? Object.defineProperty(e, t, { value: r, enumerable: !0, configurable: !0, writable: !0 })
                        : (e[t] = r);
                })(
                    jt,
                    'isPassiveSupported',
                    (function DOMUtils_isPassiveSupported() {
                        var e = !1;
                        try {
                            var t = Object.defineProperty({}, 'passive', {
                                get: function get() {
                                    e = !0;
                                },
                            });
                            window.addEventListener('test', null, t);
                        } catch (e) {}
                        return e;
                    })()
                );
                var Ut = (function () {
                    function HeartBeatService(e, t, r) {
                        !(function HeartBeatService_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, HeartBeatService),
                            (function HeartBeatService_defineProperty(e, t, r) {
                                t in e
                                    ? Object.defineProperty(e, t, {
                                          value: r,
                                          enumerable: !0,
                                          configurable: !0,
                                          writable: !0,
                                      })
                                    : (e[t] = r);
                            })(this, '_dataOrigin', 'BC'),
                            (this._heartBeatErrorsState = t),
                            (this._heartBeatPostMessageInterval = r),
                            e.addMessageListener(he.HeartBeatStatusEvent, this._handle.bind(this));
                    }
                    return (
                        (function HeartBeatService_createClass(e, t, r) {
                            t && HeartBeatService_defineProperties(e.prototype, t),
                                r && HeartBeatService_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(HeartBeatService, [
                            {
                                key: 'start',
                                value: function start() {
                                    this._clear(),
                                        (this._periodicPostMessageIntervalId = setInterval(
                                            this._postHeartBeatMessage.bind(this),
                                            this._heartBeatPostMessageInterval
                                        ));
                                },
                            },
                            {
                                key: 'stop',
                                value: function stop() {
                                    this._clear();
                                },
                            },
                            {
                                key: 'updateConfig',
                                value: function updateConfig(e) {
                                    (this._heartBeatPostMessageInterval = e.get(y.heartBeatMessageInterval)),
                                        this.start();
                                },
                            },
                            {
                                key: '_clear',
                                value: function _clear() {
                                    this._periodicPostMessageIntervalId &&
                                        clearInterval(this._periodicPostMessageIntervalId);
                                },
                            },
                            {
                                key: '_handle',
                                value: function _handle(e) {
                                    this._heartBeatErrorsState.updateState(e);
                                },
                            },
                            {
                                key: '_postHeartBeatMessage',
                                value: function _postHeartBeatMessage() {
                                    this._heartBeatErrorsState.hasErrors()
                                        ? window.postMessage(
                                              {
                                                  type: Pt,
                                                  data: this._heartBeatErrorsState.getErrors(),
                                                  origin: this._dataOrigin,
                                              },
                                              window.location.href
                                          )
                                        : window.postMessage(
                                              { type: Pt, data: 'Ok', origin: this._dataOrigin },
                                              window.location.href
                                          );
                                },
                            },
                        ]),
                        HeartBeatService
                    );
                })();
                var Nt = 'oK',
                    Wt = 'Error';
                function HeartBeatErrorsState_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Ht = (function () {
                    function HeartBeatErrorsState() {
                        !(function HeartBeatErrorsState_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, HeartBeatErrorsState),
                            (this.errors = {});
                    }
                    return (
                        (function HeartBeatErrorsState_createClass(e, t, r) {
                            t && HeartBeatErrorsState_defineProperties(e.prototype, t),
                                r && HeartBeatErrorsState_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(HeartBeatErrorsState, [
                            {
                                key: 'updateState',
                                value: function updateState(e) {
                                    var t = e.category,
                                        r = e.status;
                                    this._isErrorRecovery(t, r)
                                        ? (b.info('Received heart beat recovery event', e), delete this.errors[t])
                                        : this._isNewError(t, r) &&
                                          (b.info('Received heart beat error event', e), (this.errors[t] = t));
                                },
                            },
                            {
                                key: '_isErrorRecovery',
                                value: function _isErrorRecovery(e, t) {
                                    return void 0 !== this.errors[e] && t === Nt;
                                },
                            },
                            {
                                key: '_isNewError',
                                value: function _isNewError(e, t) {
                                    return void 0 === this.errors[e] && t === Wt;
                                },
                            },
                            {
                                key: 'getErrors',
                                value: function getErrors() {
                                    var t = this;
                                    return Object.keys(this.errors).map(function (e) {
                                        return 'ERROR('.concat(t.errors[e], ')');
                                    });
                                },
                            },
                            {
                                key: 'hasErrors',
                                value: function hasErrors() {
                                    return 0 < Object.keys(this.errors).length;
                                },
                            },
                        ]),
                        HeartBeatErrorsState
                    );
                })();
                function SessionInfoService_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Qt = (function () {
                    function SessionInfoService() {
                        !(function SessionInfoService_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, SessionInfoService),
                            this.markStartTime();
                    }
                    return (
                        (function SessionInfoService_createClass(e, t, r) {
                            t && SessionInfoService_defineProperties(e.prototype, t),
                                r && SessionInfoService_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(SessionInfoService, [
                            {
                                key: 'markStartTime',
                                value: function markStartTime() {
                                    this.startTime = B.dateNow();
                                },
                            },
                            {
                                key: 'getStartTime',
                                value: function getStartTime() {
                                    return this.startTime;
                                },
                            },
                        ]),
                        SessionInfoService
                    );
                })();
                function SensorGateKeeper_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var zt = (function () {
                    function SensorGateKeeper(e, t) {
                        !(function SensorGateKeeper_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, SensorGateKeeper),
                            (this.configurationRepository = t),
                            (this.sessionInfoService = e),
                            (this.isMotionOnSessionStart = this.configurationRepository.get(y.isMotionOnSessionStart)),
                            (this.motionPaddingOnSessionStartMSec = this.configurationRepository.get(
                                y.motionPaddingOnSessionStartMSec
                            ));
                    }
                    return (
                        (function SensorGateKeeper_createClass(e, t, r) {
                            t && SensorGateKeeper_defineProperties(e.prototype, t),
                                r && SensorGateKeeper_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(SensorGateKeeper, [
                            {
                                key: 'configure',
                                value: function configure() {
                                    (this.isMotionOnSessionStart = this.configurationRepository.get(
                                        y.isMotionOnSessionStart
                                    )),
                                        (this.motionPaddingOnSessionStartMSec = this.configurationRepository.get(
                                            y.motionPaddingOnSessionStartMSec
                                        )),
                                        this.isMotionOnSessionStart &&
                                            b.info(
                                                'Motion on session start is enabled, collecting motion events for '.concat(
                                                    this.motionPaddingOnSessionStartMSec / 1e3,
                                                    ' seconds.'
                                                )
                                            );
                                },
                            },
                            {
                                key: 'isOpen',
                                value: function isOpen() {
                                    return (
                                        this.isMotionOnSessionStart &&
                                        B.dateNow() - this.motionPaddingOnSessionStartMSec <
                                            this.sessionInfoService.getStartTime()
                                    );
                                },
                            },
                        ]),
                        SensorGateKeeper
                    );
                })();
                function CustomElementsOpenContext_typeof(e) {
                    return (CustomElementsOpenContext_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function CustomElementsOpenContext_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function CustomElementsOpenContext_setPrototypeOf(e, t) {
                    return (CustomElementsOpenContext_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function CustomElementsOpenContext_createSuper(r) {
                    var n = (function CustomElementsOpenContext_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = CustomElementsOpenContext_getPrototypeOf(r);
                        return (function CustomElementsOpenContext_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === CustomElementsOpenContext_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function CustomElementsOpenContext_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = CustomElementsOpenContext_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function CustomElementsOpenContext_getPrototypeOf(e) {
                    return (CustomElementsOpenContext_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var qt = (function () {
                    !(function CustomElementsOpenContext_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && CustomElementsOpenContext_setPrototypeOf(e, t);
                    })(CustomElementsOpenContext, We);
                    var e = CustomElementsOpenContext_createSuper(CustomElementsOpenContext);
                    function CustomElementsOpenContext() {
                        return (
                            (function CustomElementsOpenContext_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, CustomElementsOpenContext),
                            e.apply(this, arguments)
                        );
                    }
                    return (
                        (function CustomElementsOpenContext_createClass(e, t, r) {
                            t && CustomElementsOpenContext_defineProperties(e.prototype, t),
                                r && CustomElementsOpenContext_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(CustomElementsOpenContext, [
                            {
                                key: 'getDocument',
                                value: function getDocument() {
                                    return this.context.shadowRoot;
                                },
                            },
                        ]),
                        CustomElementsOpenContext
                    );
                })();
                function CustomElementsClosedContext_typeof(e) {
                    return (CustomElementsClosedContext_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function CustomElementsClosedContext_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function CustomElementsClosedContext_setPrototypeOf(e, t) {
                    return (CustomElementsClosedContext_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function CustomElementsClosedContext_createSuper(r) {
                    var n = (function CustomElementsClosedContext_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = CustomElementsClosedContext_getPrototypeOf(r);
                        return (function CustomElementsClosedContext_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === CustomElementsClosedContext_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function CustomElementsClosedContext_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = CustomElementsClosedContext_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function CustomElementsClosedContext_getPrototypeOf(e) {
                    return (CustomElementsClosedContext_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var Kt = (function () {
                    !(function CustomElementsClosedContext_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && CustomElementsClosedContext_setPrototypeOf(e, t);
                    })(CustomElementsClosedContext, We);
                    var e = CustomElementsClosedContext_createSuper(CustomElementsClosedContext);
                    function CustomElementsClosedContext() {
                        return (
                            (function CustomElementsClosedContext_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, CustomElementsClosedContext),
                            e.apply(this, arguments)
                        );
                    }
                    return (
                        (function CustomElementsClosedContext_createClass(e, t, r) {
                            t && CustomElementsClosedContext_defineProperties(e.prototype, t),
                                r && CustomElementsClosedContext_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(CustomElementsClosedContext, [
                            {
                                key: 'getDocument',
                                value: function getDocument() {
                                    return this.context;
                                },
                            },
                        ]),
                        CustomElementsClosedContext
                    );
                })();
                function BrowserContextMutationObserver_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Gt = (function () {
                    function BrowserContextMutationObserver(e, t, r) {
                        !(function BrowserContextMutationObserver_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, BrowserContextMutationObserver),
                            (this._elementsMutationObserverFactory = e),
                            (this._windowMutationObservers = t),
                            (this._messageBus = r),
                            this._messageBus.subscribe(me.BrowserContextAdded, this._processNewContext.bind(this));
                    }
                    return (
                        (function BrowserContextMutationObserver_createClass(e, t, r) {
                            t && BrowserContextMutationObserver_defineProperties(e.prototype, t),
                                r && BrowserContextMutationObserver_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(BrowserContextMutationObserver, [
                            {
                                key: '_processNewContext',
                                value: function _processNewContext(e) {
                                    this.monitorWindow(e);
                                },
                            },
                            {
                                key: 'monitorWindow',
                                value: function monitorWindow(e) {
                                    var t;
                                    this._windowMutationObservers.has(e) ||
                                        ((t = new this._elementsMutationObserverFactory(
                                            e,
                                            self.MutationObserver
                                        )).observe(e.getDocument()),
                                        t.nodesAdded.subscribe(this._nodesAddedMutationObserved.bind(this)),
                                        t.nodesRemoved.subscribe(this._nodesRemovedMutationObserved.bind(this)),
                                        this._windowMutationObservers.set(e, t));
                                },
                            },
                            {
                                key: 'unMonitorWindow',
                                value: function unMonitorWindow(e) {
                                    var t = this._windowMutationObservers.get(e);
                                    t &&
                                        (t.nodesAdded.unsubscribe(this._nodesAddedMutationObserved.bind(this)),
                                        t.nodesRemoved.unsubscribe(this._nodesRemovedMutationObserved.bind(this)),
                                        t.disconnect()),
                                        this._windowMutationObservers.delete(e);
                                },
                            },
                            {
                                key: '_nodesAddedMutationObserved',
                                value: function _nodesAddedMutationObserved(e) {
                                    this._messageBus.publish(me.MutationAddedNodes, e);
                                },
                            },
                            {
                                key: '_nodesRemovedMutationObserved',
                                value: function _nodesRemovedMutationObserved(e) {
                                    this._messageBus.publish(me.MutationRemovedNodes, e);
                                },
                            },
                        ]),
                        BrowserContextMutationObserver
                    );
                })();
                function CustomElementEventMessage_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function CustomElementEventMessage_createClass(e, t, r) {
                    return (
                        t && CustomElementEventMessage_defineProperties(e.prototype, t),
                        r && CustomElementEventMessage_defineProperties(e, r),
                        Object.defineProperty(e, 'prototype', { writable: !1 }),
                        e
                    );
                }
                var Vt = 'added',
                    Xt = 'removed',
                    Zt = CustomElementEventMessage_createClass(function CustomElementEventMessage(e, t) {
                        !(function CustomElementEventMessage_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, CustomElementEventMessage),
                            (this.browserContext = e),
                            (this.message = t);
                    });
                function CustomElementsDetector_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Yt = (function () {
                    function CustomElementsDetector(e, t, r) {
                        !(function CustomElementsDetector_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, CustomElementsDetector),
                            (this._domUtils = t),
                            (this._messageBus = r),
                            (this._loadedCustomElements = re()),
                            (this._windowMutationObservers = re()),
                            this._messageBus.subscribe(me.MutationAddedNodes, this._processAddedNodes.bind(this)),
                            this._messageBus.subscribe(me.MutationRemovedNodes, this._processRemovedNodes.bind(this)),
                            this._messageBus.subscribe(
                                me.CustomElementSubmitted,
                                this._processSubmittedCustomElement.bind(this)
                            ),
                            (this._browserContextMutationObserver = new Gt(
                                e,
                                this._windowMutationObservers,
                                this._messageBus
                            ));
                    }
                    return (
                        (function CustomElementsDetector_createClass(e, t, r) {
                            t && CustomElementsDetector_defineProperties(e.prototype, t),
                                r && CustomElementsDetector_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(CustomElementsDetector, [
                            {
                                key: 'customElements',
                                get: function get() {
                                    var r = [];
                                    return (
                                        this._loadedCustomElements.forEach(function (e, t) {
                                            r.push(t);
                                        }),
                                        r
                                    );
                                },
                            },
                            {
                                key: 'hasCustomElement',
                                value: function hasCustomElement(e) {
                                    return !!this._loadedCustomElements.has(e);
                                },
                            },
                            {
                                key: 'addCustomElementToLoadedList',
                                value: function addCustomElementToLoadedList(e, t) {
                                    this._loadedCustomElements.set(e, t);
                                },
                            },
                            {
                                key: 'start',
                                value: function start(e) {
                                    var t = this;
                                    this._browserContextMutationObserver.monitorWindow(e),
                                        this._findCustomElementsInBrowserContext(e.getDocument()).forEach(function (e) {
                                            t._processNewElement(e);
                                        });
                                },
                            },
                            {
                                key: 'stop',
                                value: function stop() {
                                    this._windowMutationObservers.forEach(function (e) {
                                        e.disconnect();
                                    });
                                },
                            },
                            {
                                key: '_processSubmittedCustomElement',
                                value: function _processSubmittedCustomElement(e) {
                                    this._loadedCustomElements.has(e) || this._addCustomElement(e, new Kt(e), 'closed');
                                },
                            },
                            {
                                key: '_processNewElement',
                                value: function _processNewElement(e) {
                                    this._loadedCustomElements.has(e) ||
                                        (null != e.shadowRoot
                                            ? this._addCustomElement(e, new qt(e))
                                            : this._messageBus.publish(me.CustomElementInaccessible, e));
                                },
                            },
                            {
                                key: '_addCustomElement',
                                value: function _addCustomElement(e, t) {
                                    'open' ===
                                        (2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : 'open') &&
                                        this._browserContextMutationObserver.monitorWindow(t),
                                        this._loadedCustomElements.set(e, t),
                                        this._messageBus.publish(me.CustomElementDetectedEvent, new Zt(t, Vt));
                                },
                            },
                            {
                                key: '_removeCustomElement',
                                value: function _removeCustomElement(e) {
                                    var t = this._loadedCustomElements.get(e);
                                    this._browserContextMutationObserver.unMonitorWindow(e.shadowRoot),
                                        this._loadedCustomElements.delete(e) &&
                                            this._messageBus.publish(me.CustomElementDetectedEvent, new Zt(t, Xt));
                                },
                            },
                            {
                                key: '_processAddedNodes',
                                value: function _processAddedNodes(e) {
                                    var t = this;
                                    this._findCustomElementsInBrowserContext(e.browserContext.getDocument()).forEach(
                                        function (e) {
                                            t._processNewElement(e);
                                        }
                                    );
                                },
                            },
                            {
                                key: '_processRemovedNodes',
                                value: function _processRemovedNodes(e) {
                                    for (var t = this, r = e.removedNodes, n = [], o = 0; o < r.length; o++) {
                                        var i,
                                            s = r[o];
                                        s.hasChildNodes()
                                            ? 0 < (i = this._findCustomElementsInBrowserContext(s)).length &&
                                              (n = n.concat(i))
                                            : this._isCustomElement(s) && s.shadowRoot && n.push(s);
                                    }
                                    0 !== n.length &&
                                        n.forEach(function (e) {
                                            t._removeCustomElement(e);
                                        });
                                },
                            },
                            {
                                key: '_isCustomElement',
                                value: function _isCustomElement(e) {
                                    return 'string' == typeof e.localName && 0 < e.localName.indexOf('-');
                                },
                            },
                            {
                                key: '_findCustomElementsInBrowserContext',
                                value: function _findCustomElementsInBrowserContext(e) {
                                    var t = [],
                                        r = e.querySelectorAll('*');
                                    if (0 === r.length) return t;
                                    for (var n = 0; n < r.length; n++) {
                                        var o,
                                            i = r[n];
                                        this._isCustomElement(i) &&
                                            (t.push(i),
                                            i.shadowRoot
                                                ? ((o = this._findCustomElementsInBrowserContext(i.shadowRoot)),
                                                  (t = t.concat(o)))
                                                : this._messageBus.publish(me.CustomElementInaccessible, i));
                                    }
                                    return t;
                                },
                            },
                        ]),
                        CustomElementsDetector
                    );
                })();
                function CustomElementDetectedEventHandler_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Jt = (function () {
                    function CustomElementDetectedEventHandler(e, t, r) {
                        !(function CustomElementDetectedEventHandler_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, CustomElementDetectedEventHandler),
                            (this._browserContextsCache = e),
                            (this._messageBus = r),
                            (this._featureService = t),
                            this._messageBus.subscribe(me.CustomElementDetectedEvent, this._handle.bind(this));
                    }
                    return (
                        (function CustomElementDetectedEventHandler_createClass(e, t, r) {
                            t && CustomElementDetectedEventHandler_defineProperties(e.prototype, t),
                                r && CustomElementDetectedEventHandler_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(CustomElementDetectedEventHandler, [
                            {
                                key: '_handle',
                                value: function _handle(e) {
                                    var t = e.browserContext,
                                        e = e.message;
                                    e === Vt
                                        ? this._handleCustomElementAdded(t)
                                        : e === Xt && this._handleCustomElementRemoved(t);
                                },
                            },
                            {
                                key: '_handleCustomElementAdded',
                                value: function _handleCustomElementAdded(e) {
                                    this._browserContextsCache.exists(e.Context) ||
                                        this._browserContextsCache.addBrowserContext(e),
                                        this._featureService.runFeaturesOnBrowserContext(e);
                                },
                            },
                            {
                                key: '_handleCustomElementRemoved',
                                value: function _handleCustomElementRemoved(e) {
                                    this._featureService.stopFeaturesOnBrowserContextRemove(e),
                                        this._browserContextsCache.remove(e.Context);
                                },
                            },
                        ]),
                        CustomElementDetectedEventHandler
                    );
                })();
                function StartupConfigurationLoader_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var $t = (function () {
                        function StartupConfigurationLoader(e, t) {
                            !(function StartupConfigurationLoader_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, StartupConfigurationLoader),
                                (this._configurationRepository = e),
                                (this._startUpConfigurations = t);
                        }
                        return (
                            (function StartupConfigurationLoader_createClass(e, t, r) {
                                t && StartupConfigurationLoader_defineProperties(e.prototype, t),
                                    r && StartupConfigurationLoader_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(StartupConfigurationLoader, [
                                {
                                    key: 'loadStartUpConfigurations',
                                    value: function loadStartUpConfigurations() {
                                        var e;
                                        this._setConfigurationOrDefault(
                                            y.enableFramesProcessing,
                                            this._startUpConfigurations.getEnableFramesProcessing(),
                                            !0
                                        ),
                                            this._setConfigurationOrDefault(
                                                y.enableCustomElementsProcessing,
                                                this._startUpConfigurations.getEnableCustomElementsProcessing(),
                                                !1
                                            ),
                                            this._setConfigurationOrDefault(
                                                y.customElementAttribute,
                                                this._startUpConfigurations
                                                    .getCollectionSettings()
                                                    .getElementSettings()
                                                    .getCustomElementAttribute(),
                                                'data-automation-id'
                                            ),
                                            this._setConfigurationOrDefault(
                                                y.enableSameSiteNoneAndSecureCookies,
                                                this._startUpConfigurations.getEnableSameSiteNoneAndSecureCookies(),
                                                !0
                                            ),
                                            this._setConfigurationOrDefault(
                                                y.maskElementsAttributes,
                                                this._startUpConfigurations
                                                    .getCollectionSettings()
                                                    .getElementSettings()
                                                    .getAttributesToMask(),
                                                []
                                            ),
                                            this._setConfigurationOrDefault(
                                                y.parentElementSelector,
                                                this._startUpConfigurations
                                                    .getCollectionSettings()
                                                    .getCustomInputElementSettings()
                                                    .getParentElementSelector(),
                                                ''
                                            ),
                                            this._setConfigurationOrDefault(
                                                y.childElementWithCustomAttribute,
                                                this._startUpConfigurations
                                                    .getCollectionSettings()
                                                    .getCustomInputElementSettings()
                                                    .getChildElementWithCustomAttribute(),
                                                ''
                                            ),
                                            this._setConfigurationOrDefault(
                                                y.elementDataAttribute,
                                                this._startUpConfigurations
                                                    .getCollectionSettings()
                                                    .getCustomInputElementSettings()
                                                    .getElementDataAttribute(),
                                                ''
                                            ),
                                            this._setConfigurationOrDefault(
                                                y.customButtons,
                                                this._startUpConfigurations
                                                    .getCollectionSettings()
                                                    .getCustomInputElementSettings()
                                                    .getCustomButtons(),
                                                []
                                            ),
                                            this._setConfigurationOrDefault(
                                                y.agentType,
                                                this._startUpConfigurations.getCollectionSettings().getAgentType(),
                                                l.PRIMARY
                                            ),
                                            this._setConfigurationOrDefault(
                                                y.collectionMode,
                                                this._startUpConfigurations.getCollectionSettings().getAgentMode(),
                                                u.FULL
                                            ),
                                            this._setConfigurationOrDefault(
                                                y.keyEventsMaskSpecialChars,
                                                this._startUpConfigurations
                                                    .getCollectionSettings()
                                                    .getElementSettings()
                                                    .getKeyEventsMaskSpecialChars(),
                                                !1
                                            ),
                                            this._setConfigurationOrDefault(
                                                y.enableWupMessagesHashing,
                                                null === (e = this._startUpConfigurations.getClientSettings()) ||
                                                    void 0 === e
                                                    ? void 0
                                                    : e.enableWupMessagesHashing,
                                                !1
                                            ),
                                            this._setConfigurationOrDefault(
                                                y.enableStartupCustomerSessionId,
                                                this._startUpConfigurations.getEnableStartupCustomerSessionId(),
                                                !1
                                            );
                                    },
                                },
                                {
                                    key: '_setConfigurationOrDefault',
                                    value: function _setConfigurationOrDefault(e, t, r) {
                                        B.isUndefinedNull(t)
                                            ? this._configurationRepository.set(e, r)
                                            : this._configurationRepository.set(e, t);
                                    },
                                },
                            ]),
                            StartupConfigurationLoader
                        );
                    })(),
                    er = {
                        Enter: 13,
                        ArrowUp: 38,
                        ArrowDown: 40,
                        ArrowLeft: 37,
                        ArrowRight: 39,
                        Escape: 27,
                        ' ': 32,
                        Control: 17,
                        Alt: 18,
                        Tab: 9,
                        Shift: 16,
                        CapsLock: 20,
                        Meta: 91,
                        Backspace: 8,
                        Home: 36,
                        End: 35,
                        Insert: 45,
                        Delete: 46,
                        PageUp: 33,
                        PageDown: 34,
                        PrintScreen: 44,
                        NumLock: 144,
                        Clear: 144,
                        F1: 112,
                        F2: 113,
                        F3: 114,
                        F4: 115,
                        F5: 116,
                        F6: 117,
                        F7: 118,
                        F8: 119,
                        F9: 120,
                        10: 121,
                        F11: 122,
                        F12: 123,
                    };
                function MaskingService_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var tr = (function () {
                    function MaskingService(e) {
                        !(function MaskingService_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, MaskingService),
                            (this._configurationRepository = e),
                            (this._attributesToMask = this._configurationRepository.get(y.maskElementsAttributes)),
                            (this.specailConfigurationChars = oe([',', '.', ' ', '@', ';', ':', '-', '+', '$'])),
                            (this.specailChars = oe([
                                '_',
                                '!',
                                '%',
                                '^',
                                '&',
                                '*',
                                '#',
                                '(',
                                ')',
                                '=',
                                '{',
                                '}',
                                '[',
                                ']',
                                'â€™',
                                '\\',
                                '|',
                                '/',
                                '?',
                                '>',
                                '<',
                                '~',
                                '"',
                                'Â±',
                                'Â§',
                            ])),
                            (this.kanjiNumbers = oe([
                                'ã€‡',
                                'é›¶',
                                'ä¸€',
                                'äºŒ',
                                'ä¸‰',
                                'å››',
                                'äº”',
                                'å…­',
                                'ä¸ƒ',
                                'å…«',
                                'ä¹',
                                'å',
                                'ç™¾',
                                'åƒ',
                                'ä¸‡',
                            ])),
                            (this.chineseCapitalNumbers = oe([
                                'é›¶',
                                'å£¹',
                                'è²³',
                                'è´°',
                                'åƒ',
                                'å',
                                'è‚†',
                                'ä¼',
                                'é™¸',
                                'é™†',
                                'æŸ’',
                                'æŒ',
                                'çŽ–',
                                'æ‹¾',
                                'ä½°',
                                'ä»Ÿ',
                                'è¬',
                            ])),
                            (this.suzhouNumbers = oe([
                                'ã€‡',
                                'ã€¡',
                                'ã€¢',
                                'ã€£',
                                'ã€¤',
                                'ã€¥',
                                'ã€¦',
                                'ã€§',
                                'ã€¨',
                                'ã€©',
                                'ã€¸',
                                'ã€¹',
                                'ã€º',
                            ])),
                            (this.maskedCodeMapping = {
                                original: function original(e, t, r) {
                                    return { code: e, charCode: t, key: r };
                                },
                                numpadKey: function numpadKey(e) {
                                    return { code: 'Numpad', charCode: 96, key: e };
                                },
                                letter: function letter() {
                                    return { code: 'Key', charCode: 65, key: 'A' };
                                },
                                digit: function digit() {
                                    return { code: 'Digit', charCode: 49, key: '1' };
                                },
                                specialChar: function specialChar() {
                                    return { code: 'SpecialChar', charCode: 42, key: '*' };
                                },
                                other: function other() {
                                    return { code: 'Other', charCode: 66, key: 'B' };
                                },
                            });
                    }
                    return (
                        (function MaskingService_createClass(e, t, r) {
                            t && MaskingService_defineProperties(e.prototype, t),
                                r && MaskingService_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(MaskingService, [
                            {
                                key: 'maskKey',
                                value: function maskKey(e, t) {
                                    if (er[e]) {
                                        var r = er[e];
                                        return this.maskedCodeMapping.original(t, r, e);
                                    }
                                    return this._isANumberOrDigit(e)
                                        ? t.includes('Numpad')
                                            ? this.maskedCodeMapping.numpadKey('1')
                                            : this.maskedCodeMapping.digit()
                                        : this._isALetter(e)
                                        ? this.maskedCodeMapping.letter()
                                        : !this._configurationRepository.get(y.keyEventsMaskSpecialChars) &&
                                          this.specailConfigurationChars.has(e)
                                        ? this.maskedCodeMapping.original(t, e.charCodeAt(0), e)
                                        : this.specailChars.has(e) || this.specailConfigurationChars.has(e)
                                        ? t.includes('Numpad')
                                            ? this.maskedCodeMapping.numpadKey('*')
                                            : this.maskedCodeMapping.specialChar()
                                        : this.maskedCodeMapping.other();
                                },
                            },
                            {
                                key: 'getKeyFromLegacyProperties',
                                value: function getKeyFromLegacyProperties(e) {
                                    e = e.keyCode || e.which;
                                    return 0 === e || void 0 === e ? '' : String.fromCharCode(e);
                                },
                            },
                            {
                                key: '_isALetter',
                                value: function _isALetter(e) {
                                    return (
                                        /^[a-zA-Z]$/.test(e) ||
                                        this._isJapaneseOrChineseLetter(e) ||
                                        this._isHebrewLetter(e)
                                    );
                                },
                            },
                            {
                                key: '_isANumberOrDigit',
                                value: function _isANumberOrDigit(e) {
                                    return (
                                        /[0-9]/.test(e) ||
                                        this.kanjiNumbers.has(e) ||
                                        this.chineseCapitalNumbers.has(e) ||
                                        this.suzhouNumbers.has(e)
                                    );
                                },
                            },
                            {
                                key: '_isJapaneseOrChineseLetter',
                                value: function _isJapaneseOrChineseLetter(e) {
                                    return (
                                        this._isCJKUnifiedIdeographs(e) ||
                                        this._isCJKUnifiedIdeographsExtenA(e) ||
                                        this._isCJKUnifiedIdeographsExtenB(e) ||
                                        this._isSmallKatakanaLetter(e)
                                    );
                                },
                            },
                            {
                                key: '_isCJKUnifiedIdeographsExtenB',
                                value: function _isCJKUnifiedIdeographsExtenB(e) {
                                    return /[\u3041-\u309F]/.test(e);
                                },
                            },
                            {
                                key: '_isSmallKatakanaLetter',
                                value: function _isSmallKatakanaLetter(e) {
                                    return /[\u30A1-\u30FF]/.test(e);
                                },
                            },
                            {
                                key: '_isCJKUnifiedIdeographsExtenA',
                                value: function _isCJKUnifiedIdeographsExtenA(e) {
                                    return /[\u3400-\u4DB5]/.test(e);
                                },
                            },
                            {
                                key: '_isCJKUnifiedIdeographs',
                                value: function _isCJKUnifiedIdeographs(e) {
                                    return /[\u4E00-\u9FCC]/.test(e);
                                },
                            },
                            {
                                key: '_isHebrewLetter',
                                value: function _isHebrewLetter(e) {
                                    return /[\u05D0-\u05EA]/.test(e);
                                },
                            },
                            {
                                key: 'maskText',
                                value: function maskText(e) {
                                    if (B.isUndefinedNull(e)) return '';
                                    e = e
                                        .replace(/[\d]/g, '1')
                                        .replace(
                                            /[\u3007\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D\u5341\u767E\u5343\u4E07]/g,
                                            '1'
                                        )
                                        .replace(
                                            /[\u96F6\u58F9\u8CB3\u8D30\u53C3\u53C1\u8086\u4F0D\u9678\u9646\u67D2\u634C\u7396\u62FE\u4F70\u4EDF\u842C\u3021-\u3029\u3038\u3039\u303A]/g,
                                            '1'
                                        )
                                        .replace(/[a-zA-Z]/g, 'a')
                                        .replace(/[\u05D0-\u05EA]/g, 'a')
                                        .replace(/[\u4E00-\u9FCC\u3400-\u4DB5\u3041-\u309F\u30A1-\u30FF]/g, 'a')
                                        .replace(/[\\_!%^&*#()={}\[\]â€™|/?><~"Â±Â§`'×³]/g, '*');
                                    return this._configurationRepository.get(y.keyEventsMaskSpecialChars)
                                        ? e.replace(/[,.@;:+$ -]/g, '*').replace(/[^a1*]/g, 'B')
                                        : e.replace(/[^a1*,.@;:+$ -]/g, 'B');
                                },
                            },
                            {
                                key: 'maskAbsoluteIfRequired',
                                value: function maskAbsoluteIfRequired(e) {
                                    return '' !== e && this._shouldMask(e) ? this.maskText(e) : e;
                                },
                            },
                            {
                                key: '_shouldMask',
                                value: function _shouldMask(t) {
                                    var r = this;
                                    return (
                                        void 0 !== this._attributesToMask &&
                                        this._attributesToMask.some(function (e) {
                                            return (
                                                r._isConformsRegex(e.regexPattern, t) ||
                                                e.name.toLowerCase() === (null == t ? void 0 : t.toLowerCase())
                                            );
                                        })
                                    );
                                },
                            },
                            {
                                key: '_isConformsRegex',
                                value: function _isConformsRegex(e, t) {
                                    try {
                                        if (new RegExp(e).test(t))
                                            return (
                                                b.info('The string '.concat(t, ' matches the pattern ').concat(e, '.')),
                                                !0
                                            );
                                    } catch (e) {
                                        b.error('Invalid regex pattern: '.concat(e));
                                    }
                                    return (
                                        b.debug(
                                            'The string '.concat(t, ' does not match the pattern. ').concat(e, '.')
                                        ),
                                        !1
                                    );
                                },
                            },
                        ]),
                        MaskingService
                    );
                })();
                function LogAggregator_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var rr = (function () {
                    function LogAggregator() {
                        !(function LogAggregator_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, LogAggregator),
                            this.reset();
                    }
                    return (
                        (function LogAggregator_createClass(e, t, r) {
                            t && LogAggregator_defineProperties(e.prototype, t),
                                r && LogAggregator_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(LogAggregator, [
                            {
                                key: 'setLogLevel',
                                value: function setLogLevel(e) {
                                    this._logLevel = e;
                                },
                            },
                            {
                                key: 'add',
                                value: function add(e) {
                                    e = e.data;
                                    if (!e) throw new Error('Unable to add log message. Missing data field');
                                    (!e.level || e.level >= this._logLevel) && this._Q.push(e);
                                },
                            },
                            {
                                key: 'take',
                                value: function take() {
                                    var e = this._Q;
                                    return this.reset(), e;
                                },
                            },
                            {
                                key: 'reset',
                                value: function reset() {
                                    (this._Q = []),
                                        this.setLogLevel(void 0 === this._logLevel ? c.INFO : this._logLevel);
                                },
                            },
                            {
                                key: 'isEmpty',
                                value: function isEmpty() {
                                    return 0 === this._Q.length;
                                },
                            },
                            {
                                key: 'filterOutByLogLevel',
                                value: function filterOutByLogLevel(n) {
                                    this._Q = this._Q.filter(function (e, t, r) {
                                        return e.level >= n;
                                    });
                                },
                            },
                        ]),
                        LogAggregator
                    );
                })();
                function LogBridge_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var nr = (function () {
                    function LogBridge(e, t) {
                        var r = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : '';
                        !(function LogBridge_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, LogBridge),
                            (this.sn = 0),
                            (this.url = t),
                            (this.logAggregator = e),
                            (this.msgPrefix = r);
                    }
                    return (
                        (function LogBridge_createClass(e, t, r) {
                            t && LogBridge_defineProperties(e.prototype, t),
                                r && LogBridge_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(LogBridge, [
                            {
                                key: 'log',
                                value: function log(e, t) {
                                    this.logAggregator.add({
                                        eventName: 'log',
                                        data: { msg: this.msgPrefix + e, url: this.url, level: t, sn: this.sn++ },
                                    });
                                },
                            },
                            {
                                key: 'setLogLevel',
                                value: function setLogLevel(e) {
                                    this.logAggregator instanceof rr && this.logAggregator.setLogLevel(e);
                                },
                            },
                            {
                                key: 'clearLogEntriesByLogLevel',
                                value: function clearLogEntriesByLogLevel(e) {
                                    this.logAggregator.filterOutByLogLevel(e);
                                },
                            },
                        ]),
                        LogBridge
                    );
                })();
                function LogDataQ_typeof(e) {
                    return (LogDataQ_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function LogDataQ_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function LogDataQ_setPrototypeOf(e, t) {
                    return (LogDataQ_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function LogDataQ_createSuper(r) {
                    var n = (function LogDataQ_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = LogDataQ_getPrototypeOf(r);
                        return (function LogDataQ_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === LogDataQ_typeof(t) || 'function' == typeof t)) return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function LogDataQ_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = LogDataQ_getPrototypeOf(this).constructor), Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function LogDataQ_getPrototypeOf(e) {
                    return (LogDataQ_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var or = (function () {
                    !(function LogDataQ_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && LogDataQ_setPrototypeOf(e, t);
                    })(LogDataQ, se);
                    var e = LogDataQ_createSuper(LogDataQ);
                    function LogDataQ() {
                        return (
                            (function LogDataQ_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, LogDataQ),
                            e.apply(this, arguments)
                        );
                    }
                    return (
                        (function LogDataQ_createClass(e, t, r) {
                            t && LogDataQ_defineProperties(e.prototype, t),
                                r && LogDataQ_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(LogDataQ, [
                            {
                                key: 'add',
                                value: function add(e) {
                                    this.addToQueue(e.eventName, e.data);
                                },
                            },
                            {
                                key: 'filterOutByLogLevel',
                                value: function filterOutByLogLevel(t) {
                                    this.filterOut(function (e) {
                                        return e.data.level >= t;
                                    });
                                },
                            },
                        ]),
                        LogDataQ
                    );
                })();
                function StorageUtilsWrapper_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var ir = (function () {
                    function StorageUtilsWrapper(e, t) {
                        !(function StorageUtilsWrapper_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, StorageUtilsWrapper),
                            (this.isSecureSameSite = t.get(y.enableSameSiteNoneAndSecureCookies)),
                            (this._utils = e);
                    }
                    return (
                        (function StorageUtilsWrapper_createClass(e, t, r) {
                            t && StorageUtilsWrapper_defineProperties(e.prototype, t),
                                r && StorageUtilsWrapper_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(StorageUtilsWrapper, [
                            {
                                key: 'getCookie',
                                value: function getCookie(e) {
                                    return this._utils.StorageUtils.getCookie(e);
                                },
                            },
                            {
                                key: 'setCookie',
                                value: function setCookie(e, t, r) {
                                    return this._utils.StorageUtils.setCookie(e, t, r, this.isSecureSameSite);
                                },
                            },
                            {
                                key: 'setExpirationInCookie',
                                value: function setExpirationInCookie(e, t) {
                                    return this._utils.StorageUtils.setExpirationInCookie(e, t);
                                },
                            },
                            {
                                key: 'getFromLocalStorage',
                                value: function getFromLocalStorage(e) {
                                    return this._utils.StorageUtils.getFromLocalStorage(e);
                                },
                            },
                            {
                                key: 'saveToLocalStorage',
                                value: function saveToLocalStorage(e, t, r) {
                                    return this._utils.StorageUtils.saveToLocalStorage(e, t, r);
                                },
                            },
                            {
                                key: 'setExpirationInLocalStorage',
                                value: function setExpirationInLocalStorage(e, t) {
                                    return this._utils.StorageUtils.setExpirationInLocalStorage(e, t);
                                },
                            },
                            {
                                key: 'removeFromLocalStorage',
                                value: function removeFromLocalStorage(e) {
                                    return this._utils.StorageUtils.removeFromLocalStorage(e);
                                },
                            },
                            {
                                key: 'removeCookie',
                                value: function removeCookie(e) {
                                    return this._utils.StorageUtils.removeCookie(e);
                                },
                            },
                        ]),
                        StorageUtilsWrapper
                    );
                })();
                function BrandService_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var sr = (function () {
                    function BrandService(e, t) {
                        !(function BrandService_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, BrandService),
                            (this._workerCommunicator = e),
                            (this._brandRepository = t);
                    }
                    return (
                        (function BrandService_createClass(e, t, r) {
                            t && BrandService_defineProperties(e.prototype, t),
                                r && BrandService_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(BrandService, [
                            {
                                key: 'set',
                                value: function set(e) {
                                    this._validateBrand(e) &&
                                        (this._brandRepository.set(e),
                                        this._workerCommunicator.sendAsync(q, { brand: e }));
                                },
                            },
                            {
                                key: 'update',
                                value: function update() {
                                    var e = this._brandRepository.get();
                                    e && this.set(e);
                                },
                            },
                            {
                                key: '_validateBrand',
                                value: function _validateBrand(e) {
                                    return 200 < e.length
                                        ? (b.warn(
                                              'The received brand name length is greater than 200. It is illegal. Ignoring the API call'
                                          ),
                                          !1)
                                        : !!/^[a-zA-Z0-9.\-,_ ]+$/.test(e) ||
                                              (b.warn(
                                                  'The received brand contains illegal characters. The legal characters are: A-Za-z0-9.-,_ and space. Ignoring the API call'
                                              ),
                                              !1);
                                },
                            },
                        ]),
                        BrandService
                    );
                })();
                function BrandRepository_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var ar = (function () {
                    function BrandRepository(e, t) {
                        !(function BrandRepository_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, BrandRepository),
                            (this.brandKey = 'brand'),
                            (this._utils = e),
                            (this._storageUtilsWrapper = t),
                            (this.COOKIE_EXPIRATION_IN_MILLISECONDS = this._utils.minutesToMilliseconds(525600));
                    }
                    return (
                        (function BrandRepository_createClass(e, t, r) {
                            t && BrandRepository_defineProperties(e.prototype, t),
                                r && BrandRepository_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(BrandRepository, [
                            {
                                key: 'get',
                                value: function get() {
                                    var e = this._storageUtilsWrapper.getCookie(this.brandKey);
                                    if (!(t = this._validateBrand(e))) {
                                        b.debug(
                                            'Brand was not found in cookie. Trying to get it from the local storage.'
                                        );
                                        var t,
                                            e = this._storageUtilsWrapper.getFromLocalStorage(this.brandKey);
                                        if (!(t = this._validateBrand(e)))
                                            return b.debug('Brand was not found in local storage.'), null;
                                    }
                                    return t;
                                },
                            },
                            {
                                key: 'set',
                                value: function set(e) {
                                    var t = this._validateBrand(e);
                                    t
                                        ? (this._storageUtilsWrapper.saveToLocalStorage(this.brandKey, t) ||
                                              b.error('Failed saving brand '.concat(e, ' to local storage.')),
                                          this._storageUtilsWrapper.setCookie(
                                              this.brandKey,
                                              t,
                                              this.COOKIE_EXPIRATION_IN_MILLISECONDS
                                          ) || b.error('Failed saving brand '.concat(e, ' to cookie.')))
                                        : b.error('Brand '.concat(e, ' is invalid. Will not save it.'));
                                },
                            },
                            {
                                key: '_validateBrand',
                                value: function _validateBrand(e) {
                                    return e || null;
                                },
                            },
                        ]),
                        BrandRepository
                    );
                })();
                function RestoredMuidEventHandler_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var ur = (function () {
                    function RestoredMuidEventHandler(e, t, r, n) {
                        !(function RestoredMuidEventHandler_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, RestoredMuidEventHandler),
                            (this._messageBus = e),
                            (this._muidService = t),
                            (this._clientEventService = r),
                            (this._workerCommunicator = n),
                            this._messageBus.subscribe(me.ServerRestoredMuidEvent, this._handler.bind(this), !0),
                            this._workerCommunicator.addMessageListener(
                                he.ServerRestoredMuidEvent,
                                this._publish.bind(this),
                                !0
                            );
                    }
                    return (
                        (function RestoredMuidEventHandler_createClass(e, t, r) {
                            t && RestoredMuidEventHandler_defineProperties(e.prototype, t),
                                r && RestoredMuidEventHandler_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(RestoredMuidEventHandler, [
                            {
                                key: '_handler',
                                value: function _handler(e) {
                                    var t;
                                    null !== (t = this._muidService) && void 0 !== t && t.updateMuid(e),
                                        this._clientEventService.publishRestoredMuidEvent(e);
                                },
                            },
                            {
                                key: '_publish',
                                value: function _publish(e) {
                                    this._messageBus.publish(me.ServerRestoredMuidEvent, e);
                                },
                            },
                        ]),
                        RestoredMuidEventHandler
                    );
                })();
                function CoordinatesMaskingConfigurationUpdater_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var cr = (function () {
                    function CoordinatesMaskingConfigurationUpdater(e) {
                        !(function CoordinatesMaskingConfigurationUpdater_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, CoordinatesMaskingConfigurationUpdater),
                            (this._configurationRepository = e);
                    }
                    return (
                        (function CoordinatesMaskingConfigurationUpdater_createClass(e, t, r) {
                            t && CoordinatesMaskingConfigurationUpdater_defineProperties(e.prototype, t),
                                r && CoordinatesMaskingConfigurationUpdater_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(CoordinatesMaskingConfigurationUpdater, [
                            {
                                key: 'onConfigUpdate',
                                value: function onConfigUpdate(e) {
                                    e = e.get(y.enableCoordinatesMasking);
                                    this._setConfigurationKey(e);
                                },
                            },
                            {
                                key: 'updateConfig',
                                value: function updateConfig(e) {
                                    this._handleConfigurationUpdate(e);
                                },
                            },
                            {
                                key: '_handleConfigurationUpdate',
                                value: function _handleConfigurationUpdate(e) {
                                    B.isBoolean(e)
                                        ? (b.info('Set coordinates masking API was called, is enabled: '.concat(e)),
                                          this._setConfigurationKey(e))
                                        : b.warn('Invalid argument type: '.concat(e));
                                },
                            },
                            {
                                key: '_setConfigurationKey',
                                value: function _setConfigurationKey(e) {
                                    this._configurationRepository.set(y.enableCoordinatesMasking, e);
                                },
                            },
                        ]),
                        CoordinatesMaskingConfigurationUpdater
                    );
                })();
                function AgentIdCache_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var lr = 'cdAgentId',
                    fr = (function () {
                        function AgentIdCache(e) {
                            !(function AgentIdCache_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, AgentIdCache),
                                (this._storageUtilsWrapper = e),
                                (this._agentId = null),
                                this._loadAgentIdFromStorage();
                        }
                        return (
                            (function AgentIdCache_createClass(e, t, r) {
                                t && AgentIdCache_defineProperties(e.prototype, t),
                                    r && AgentIdCache_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(AgentIdCache, [
                                {
                                    key: 'get',
                                    value: function get() {
                                        return this._agentId;
                                    },
                                },
                                {
                                    key: 'set',
                                    value: function set(e) {
                                        if (!e || 'string' != typeof e) throw new Error('Invalid agentId value');
                                        (this._agentId = e), this._saveAgentIdToStorage();
                                    },
                                },
                                {
                                    key: '_saveAgentIdToStorage',
                                    value: function _saveAgentIdToStorage() {
                                        this._storageUtilsWrapper.saveToLocalStorage(lr, this._agentId);
                                    },
                                },
                                {
                                    key: '_loadAgentIdFromStorage',
                                    value: function _loadAgentIdFromStorage() {
                                        this._agentId = this._storageUtilsWrapper.getFromLocalStorage(lr) || null;
                                    },
                                },
                            ]),
                            AgentIdCache
                        );
                    })();
                function AgentIdService_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var pr = (function () {
                    function AgentIdService(e, t) {
                        !(function AgentIdService_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, AgentIdService),
                            (this._agentIdCache = e),
                            (this._serverWorkerCommunicator = t);
                    }
                    return (
                        (function AgentIdService_createClass(e, t, r) {
                            t && AgentIdService_defineProperties(e.prototype, t),
                                r && AgentIdService_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(AgentIdService, [
                            {
                                key: 'updateAgentIdWithServer',
                                value: function updateAgentIdWithServer() {
                                    var e = this._agentIdCache.get();
                                    this._serverWorkerCommunicator.sendAsync(V, { agentId: e });
                                },
                            },
                            {
                                key: 'set',
                                value: function set(e) {
                                    if (!e) throw new Error('Invalid agentId value of undefined');
                                    this._agentIdCache.set(e);
                                },
                            },
                        ]),
                        AgentIdService
                    );
                })();
                function ElementEventCollector_typeof(e) {
                    return (ElementEventCollector_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function ownKeys(t, e) {
                    var r,
                        n = Object.keys(t);
                    return (
                        Object.getOwnPropertySymbols &&
                            ((r = Object.getOwnPropertySymbols(t)),
                            e &&
                                (r = r.filter(function (e) {
                                    return Object.getOwnPropertyDescriptor(t, e).enumerable;
                                })),
                            n.push.apply(n, r)),
                        n
                    );
                }
                function _objectSpread(t) {
                    for (var e = 1; e < arguments.length; e++) {
                        var r = null != arguments[e] ? arguments[e] : {};
                        e % 2
                            ? ownKeys(Object(r), !0).forEach(function (e) {
                                  ElementEventCollector_defineProperty(t, e, r[e]);
                              })
                            : Object.getOwnPropertyDescriptors
                            ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r))
                            : ownKeys(Object(r)).forEach(function (e) {
                                  Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e));
                              });
                    }
                    return t;
                }
                function ElementEventCollector_classCallCheck(e, t) {
                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                }
                function ElementEventCollector_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function ElementEventCollector_createClass(e, t, r) {
                    return (
                        t && ElementEventCollector_defineProperties(e.prototype, t),
                        r && ElementEventCollector_defineProperties(e, r),
                        Object.defineProperty(e, 'prototype', { writable: !1 }),
                        e
                    );
                }
                function ElementEventCollector_setPrototypeOf(e, t) {
                    return (ElementEventCollector_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function ElementEventCollector_createSuper(r) {
                    var n = (function ElementEventCollector_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = ElementEventCollector_getPrototypeOf(r);
                        return (function ElementEventCollector_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === ElementEventCollector_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return ElementEventCollector_assertThisInitialized(e);
                        })(
                            this,
                            n
                                ? ((e = ElementEventCollector_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function ElementEventCollector_assertThisInitialized(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e;
                }
                function ElementEventCollector_getPrototypeOf(e) {
                    return (ElementEventCollector_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                function ElementEventCollector_defineProperty(e, t, r) {
                    return (
                        t in e
                            ? Object.defineProperty(e, t, { value: r, enumerable: !0, configurable: !0, writable: !0 })
                            : (e[t] = r),
                        e
                    );
                }
                var dr = {
                        configKey: 'isElementsEvent',
                        isDefault: !0,
                        shouldRunPerContext: !0,
                        shouldRunPerSession: !1,
                        shouldRun: !0,
                        isFrameRelated: !0,
                        runInUns: !1,
                        runInSlave: !0,
                        runInLean: !0,
                        isRunning: !1,
                        instance: null,
                    },
                    hr = { input: 0, initial: 1, focus: 2, blur: 3, change: 4, click: 5, submit: 6 },
                    vr = [
                        'eventSequence',
                        'timestamp',
                        'eventType',
                        'isTrusted',
                        'elementHash',
                        'length',
                        'elementValues',
                        'selected',
                        'hashedValue',
                        'relativeTime',
                    ],
                    yr = (function () {
                        !(function ElementEventCollector_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && ElementEventCollector_setPrototypeOf(e, t);
                        })(ElementEventCollector, Ce);
                        var t = ElementEventCollector_createSuper(ElementEventCollector);
                        function ElementEventCollector(e) {
                            var n;
                            return (
                                ElementEventCollector_classCallCheck(this, ElementEventCollector),
                                ElementEventCollector_defineProperty(
                                    ElementEventCollector_assertThisInitialized((n = t.call(this))),
                                    'mutationMessageHandler',
                                    function (e) {
                                        var t;
                                        e.browserContext &&
                                            (n._inputEvents.addOnLoadInputData(e.browserContext, !0),
                                            n._inputEvents.bind(e.browserContext),
                                            n._clickEvents.bind(e.browserContext),
                                            n._selectElementEvents.bind(e.browserContext),
                                            n._formEvents.bind(e.browserContext),
                                            null !== (t = n._customInputEvents) &&
                                                void 0 !== t &&
                                                t.addOnLoadInputData(e.browserContext, !0),
                                            null !== (t = n._customInputEvents) &&
                                                void 0 !== t &&
                                                t.bind(e.browserContext));
                                    }
                                ),
                                ElementEventCollector_defineProperty(
                                    ElementEventCollector_assertThisInitialized(n),
                                    'startFeature',
                                    function (e) {
                                        var t;
                                        n._inputEvents.addOnLoadInputData(e, !1),
                                            n._inputEvents.bind(e),
                                            n._clickEvents.bind(e),
                                            n._selectElementEvents.bind(e),
                                            null !== (t = n._customInputEvents) &&
                                                void 0 !== t &&
                                                t.addOnLoadInputData(e, !1),
                                            null !== (t = n._customInputEvents) && void 0 !== t && t.bind(e),
                                            n._formEvents.bind(e),
                                            n._configurationRepository.get(y.isMutationObserver) &&
                                                n._mutationEmitter &&
                                                (n._mutationEmitter.startObserver(e),
                                                n._jQueryElementListenerSiteMapper.initTracking());
                                    }
                                ),
                                ElementEventCollector_defineProperty(
                                    ElementEventCollector_assertThisInitialized(n),
                                    '_onSiteMapperMatch',
                                    function (e) {
                                        var t = e.selector;
                                        if (t)
                                            try {
                                                var r = window.document.querySelector(t);
                                                if (!r)
                                                    return void b.error(
                                                        'ElementEvents._onSiteMapperMatch - selector:'.concat(
                                                            JSON.stringify(t),
                                                            ' not found on page'
                                                        )
                                                    );
                                                n._domUtils.matches(r, n._inputSelectors)
                                                    ? n._jqueryEventHandler.bindInputEvents(r)
                                                    : n._domUtils.matches(r, n._onClickSelectors)
                                                    ? n._jqueryEventHandler.bindOnClickEvents(r)
                                                    : n._domUtils.matches(r, n._onSelectSelectors)
                                                    ? n._jqueryEventHandler.bindOnChangeEvents(r)
                                                    : n._domUtils.matches(r, n._onFormSelectors)
                                                    ? n._jqueryEventHandler.bindOnFormsEvents(r)
                                                    : b.error(
                                                          'ElementEvents._onSiteMapperMatch - Unable to match the element with selector:\n                '.concat(
                                                              JSON.stringify(t),
                                                              ' to any selectors group. Aborting jQuery element listening process.'
                                                          )
                                                      );
                                            } catch (e) {
                                                b.error('ElementEvents._onSiteMapperMatch - '.concat(e.message), e);
                                            }
                                        else
                                            b.warn(
                                                'ElementEvents._onSiteMapperMatch - No selector defined for match. Aborting jQuery element listening process.'
                                            );
                                    }
                                ),
                                (n._configurationRepository = e.configurationRepository),
                                (n._utils = e.utils),
                                (n._domUtils = e.domUtils),
                                (n._dataQ = e.dataQ),
                                (n._elements = e.elements),
                                (n._jQueryElementListenerSiteMapper = e.jQueryElementListenerSiteMapper),
                                n._jQueryElementListenerSiteMapper.updateObserver(n._onSiteMapperMatch),
                                (n._messageBus = e.messageBus),
                                (n._mutationEmitter = e.mutationEmitter),
                                n._messageBus.subscribe(me.MutationSingleEvent, n.mutationMessageHandler),
                                (n._StandardInputEventsEmitter = e.StandardInputEventsEmitter),
                                (n._SyntheticMaskInputEventsHandler = e.SyntheticMaskInputEventsHandler),
                                (n._SyntheticAutotabInputEventsHandler = e.SyntheticAutotabInputEventsHandler),
                                (n._maskingService = e.maskingService),
                                (n._inputEvents = new e.InputEvents(
                                    n._elements,
                                    n.sendToQueue.bind(ElementEventCollector_assertThisInitialized(n)),
                                    n._utils,
                                    n._messageBus,
                                    n._StandardInputEventsEmitter,
                                    n._SyntheticMaskInputEventsHandler,
                                    n._SyntheticAutotabInputEventsHandler,
                                    n._maskingService
                                )),
                                (n._inputSelectors = e.inputSelectors),
                                (n._StandardOnClickEventsEmitter = e.StandardOnClickEventsEmitter),
                                n._configurationRepository.get(y.parentElementSelector) &&
                                    n._configurationRepository.get(y.childElementWithCustomAttribute) &&
                                    n._configurationRepository.get(y.elementDataAttribute) &&
                                    ((n._StandardCustomInputEmitter = e.StandardCustomInputEmitter),
                                    (n._inputElementSettings = {
                                        parentElementSelector: n._configurationRepository.get(y.parentElementSelector),
                                        childElementWithCustomAttribute: n._configurationRepository.get(
                                            y.childElementWithCustomAttribute
                                        ),
                                        elementDataAttribute: n._configurationRepository.get(y.elementDataAttribute),
                                        customButtons: n._configurationRepository.get(y.customButtons),
                                    }),
                                    (n._customInputEvents = new e.CustomInputEvents(
                                        n._elements,
                                        n.sendToQueue.bind(ElementEventCollector_assertThisInitialized(n)),
                                        n._utils,
                                        n._messageBus,
                                        n._StandardCustomInputEmitter,
                                        n._maskingService,
                                        (n.inputElementSettings = n._inputElementSettings)
                                    ))),
                                (n._clickEvents = new e.ClickEvents(
                                    n.sendToQueue.bind(ElementEventCollector_assertThisInitialized(n)),
                                    n._utils,
                                    n._messageBus,
                                    n._configurationRepository,
                                    n._StandardOnClickEventsEmitter
                                )),
                                (n._onClickSelectors = e.onClickSelectors),
                                (n._StandardOnChangeEventsEmitter = e.StandardOnChangeEventsEmitter),
                                (n._elementFocusEventEmitter = e.ElementFocusEventsEmitter),
                                (n._elementBlurEventEmitter = e.ElementBlurEventsEmitter),
                                (n._selectElementEvents = new e.SelectElementEvents(
                                    n.sendToQueue.bind(ElementEventCollector_assertThisInitialized(n)),
                                    n._utils,
                                    n._messageBus,
                                    n._StandardOnChangeEventsEmitter,
                                    n._elementFocusEventEmitter,
                                    n._elementBlurEventEmitter,
                                    n._configurationRepository
                                )),
                                (n._onSelectSelectors = e.onSelectSelectors),
                                (n._StandardOnFormEventsEmitter = e.StandardOnFormEventsEmitter),
                                (n._formEvents = new e.FormEvents(
                                    n.sendToQueue.bind(ElementEventCollector_assertThisInitialized(n)),
                                    n._messageBus,
                                    n._StandardOnFormEventsEmitter
                                )),
                                (n._onFormSelectors = e.onFormSelectors),
                                (n._jqueryEventHandler = e.JqueryElementsHandler),
                                (n._maxElemValLength = 200),
                                (n._hashTruncationLength =
                                    n._configurationRepository.get('elementHashTruncationLength') || 2),
                                n
                            );
                        }
                        return (
                            ElementEventCollector_createClass(
                                ElementEventCollector,
                                [
                                    {
                                        key: 'stopFeature',
                                        value: function stopFeature(e) {
                                            var t;
                                            this._inputEvents.unbind(e),
                                                this._clickEvents.unbind(e),
                                                this._selectElementEvents.unbind(e),
                                                null !== (t = this._customInputEvents) && void 0 !== t && t.unbind(e),
                                                this._formEvents.unbind(e),
                                                this._jQueryElementListenerSiteMapper.stopTracking(),
                                                this._mutationEmitter.stopObserver(e);
                                        },
                                    },
                                    {
                                        key: 'updateFeatureConfig',
                                        value: function updateFeatureConfig(e) {
                                            this._configurationRepository.get('isMutationObserver') &&
                                                this._mutationEmitter &&
                                                (this._mutationEmitter.startObserver(e),
                                                this._jQueryElementListenerSiteMapper.onConfigUpdate(
                                                    this._configurationRepository
                                                )),
                                                (this._hashTruncationLength =
                                                    void 0 !==
                                                    this._configurationRepository.get('elementHashTruncationLength')
                                                        ? this._configurationRepository.get(
                                                              'elementHashTruncationLength'
                                                          )
                                                        : this._hashTruncationLength),
                                                this._elements.updateFeatureConfig(),
                                                this._clickEvents.updateSettings(),
                                                this._selectElementEvents.updateSettings(e);
                                        },
                                    },
                                    {
                                        key: 'sendToQueue',
                                        value: function sendToQueue(e, t) {
                                            var r = we[e.isTrusted],
                                                n = this.getEventTimestamp(e),
                                                o = this.getTimestampFromEvent(e),
                                                i = hr[e.type];
                                            this._utils.isUndefinedNull(i) && (i = -1);
                                            var s = this._elements.getElement(e.target),
                                                e = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
                                            (t = t || {}).elementValues &&
                                                t.elementValues.length > this._maxElemValLength &&
                                                (t.elementValues = '');
                                            o = _objectSpread(_objectSpread({}, t), {
                                                eventType: i,
                                                eventSequence: e,
                                                timestamp: n,
                                                elementHash: s,
                                                isTrusted: r,
                                                hashedValue: '',
                                                relativeTime: o,
                                            });
                                            this._dataQ.addToQueue(
                                                'element_events',
                                                this._utils.convertToArrayByMap(vr, o),
                                                !0
                                            );
                                        },
                                    },
                                ],
                                [
                                    {
                                        key: 'getDefaultSettings',
                                        value: function getDefaultSettings() {
                                            return dr;
                                        },
                                    },
                                    {
                                        key: 'Builder',
                                        get: function get() {
                                            return (function () {
                                                function Builder(e, t, r, n, o) {
                                                    ElementEventCollector_classCallCheck(this, Builder),
                                                        (this.configurationRepository = e),
                                                        (this.utils = t),
                                                        (this.domUtils = r),
                                                        (this.elements = n),
                                                        (this.dataQ = o);
                                                }
                                                return (
                                                    ElementEventCollector_createClass(Builder, [
                                                        {
                                                            key: 'withMessageBus',
                                                            value: function withMessageBus(e) {
                                                                return (this.messageBus = e), this;
                                                            },
                                                        },
                                                        {
                                                            key: 'withMutationEmitter',
                                                            value: function withMutationEmitter(e) {
                                                                return (this.mutationEmitter = e), this;
                                                            },
                                                        },
                                                        {
                                                            key: 'withjQueryElementListenerSiteMapper',
                                                            value: function withjQueryElementListenerSiteMapper(e) {
                                                                return (this.jQueryElementListenerSiteMapper = e), this;
                                                            },
                                                        },
                                                        {
                                                            key: 'withjQueryElementsHandler',
                                                            value: function withjQueryElementsHandler(e) {
                                                                return (this.JqueryElementsHandler = e), this;
                                                            },
                                                        },
                                                        {
                                                            key: 'withInputEvents',
                                                            value: function withInputEvents(e, t, r) {
                                                                return (
                                                                    (this.InputEvents = e),
                                                                    (this.inputSelectors = t),
                                                                    (this.maskingService = r),
                                                                    this
                                                                );
                                                            },
                                                        },
                                                        {
                                                            key: 'withStandardInputEventsEmitter',
                                                            value: function withStandardInputEventsEmitter(e) {
                                                                return (this.StandardInputEventsEmitter = e), this;
                                                            },
                                                        },
                                                        {
                                                            key: 'withSyntheticMaskInputEventsHandler',
                                                            value: function withSyntheticMaskInputEventsHandler(e) {
                                                                return (this.SyntheticMaskInputEventsHandler = e), this;
                                                            },
                                                        },
                                                        {
                                                            key: 'withSyntheticAutotabInputEventsHandler',
                                                            value: function withSyntheticAutotabInputEventsHandler(e) {
                                                                return (
                                                                    (this.SyntheticAutotabInputEventsHandler = e), this
                                                                );
                                                            },
                                                        },
                                                        {
                                                            key: 'withClickEvents',
                                                            value: function withClickEvents(e, t) {
                                                                return (
                                                                    (this.ClickEvents = e),
                                                                    (this.onClickSelectors = t),
                                                                    this
                                                                );
                                                            },
                                                        },
                                                        {
                                                            key: 'withStandardOnClickEventsEmitter',
                                                            value: function withStandardOnClickEventsEmitter(e) {
                                                                return (this.StandardOnClickEventsEmitter = e), this;
                                                            },
                                                        },
                                                        {
                                                            key: 'withSelectElementEvents',
                                                            value: function withSelectElementEvents(e, t) {
                                                                return (
                                                                    (this.SelectElementEvents = e),
                                                                    (this.onSelectSelectors = t),
                                                                    this
                                                                );
                                                            },
                                                        },
                                                        {
                                                            key: 'withStandardOnChangeEventsEmitter',
                                                            value: function withStandardOnChangeEventsEmitter(e) {
                                                                return (this.StandardOnChangeEventsEmitter = e), this;
                                                            },
                                                        },
                                                        {
                                                            key: 'withElementFocusEventsEmitter',
                                                            value: function withElementFocusEventsEmitter(e) {
                                                                return (this.ElementFocusEventsEmitter = e), this;
                                                            },
                                                        },
                                                        {
                                                            key: 'withElementBlurEventsEmitter',
                                                            value: function withElementBlurEventsEmitter(e) {
                                                                return (this.ElementBlurEventsEmitter = e), this;
                                                            },
                                                        },
                                                        {
                                                            key: 'withFormEvents',
                                                            value: function withFormEvents(e, t) {
                                                                return (
                                                                    (this.FormEvents = e),
                                                                    (this.onFormSelectors = t),
                                                                    this
                                                                );
                                                            },
                                                        },
                                                        {
                                                            key: 'withStandardOnFormEventsEmitter',
                                                            value: function withStandardOnFormEventsEmitter(e) {
                                                                return (this.StandardOnFormEventsEmitter = e), this;
                                                            },
                                                        },
                                                        {
                                                            key: 'withCustomInputEventEmitter',
                                                            value: function withCustomInputEventEmitter(e, t) {
                                                                return (
                                                                    (this.CustomInputEvents = e),
                                                                    (this.StandardCustomInputEmitter = t),
                                                                    this
                                                                );
                                                            },
                                                        },
                                                        {
                                                            key: 'build',
                                                            value: function build() {
                                                                return new ElementEventCollector(this);
                                                            },
                                                        },
                                                    ]),
                                                    Builder
                                                );
                                            })();
                                        },
                                    },
                                ]
                            ),
                            ElementEventCollector
                        );
                    })();
                function ClipboardEventCollector_typeof(e) {
                    return (ClipboardEventCollector_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function ClipboardEventCollector_classCallCheck(e, t) {
                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                }
                function ClipboardEventCollector_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function ClipboardEventCollector_createClass(e, t, r) {
                    return (
                        t && ClipboardEventCollector_defineProperties(e.prototype, t),
                        r && ClipboardEventCollector_defineProperties(e, r),
                        Object.defineProperty(e, 'prototype', { writable: !1 }),
                        e
                    );
                }
                function ClipboardEventCollector_setPrototypeOf(e, t) {
                    return (ClipboardEventCollector_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function ClipboardEventCollector_createSuper(r) {
                    var n = (function ClipboardEventCollector_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = ClipboardEventCollector_getPrototypeOf(r);
                        return (function ClipboardEventCollector_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === ClipboardEventCollector_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return ClipboardEventCollector_assertThisInitialized(e);
                        })(
                            this,
                            n
                                ? ((e = ClipboardEventCollector_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function ClipboardEventCollector_assertThisInitialized(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e;
                }
                function ClipboardEventCollector_getPrototypeOf(e) {
                    return (ClipboardEventCollector_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                function ClipboardEventCollector_defineProperty(e, t, r) {
                    return (
                        t in e
                            ? Object.defineProperty(e, t, { value: r, enumerable: !0, configurable: !0, writable: !0 })
                            : (e[t] = r),
                        e
                    );
                }
                var _r = {
                        configKey: 'isClipboardEvent',
                        isDefault: !0,
                        shouldRunPerContext: !1,
                        shouldRunPerSession: !1,
                        shouldRun: !0,
                        isFrameRelated: !0,
                        runInUns: !1,
                        runInSlave: !0,
                        runInLean: !0,
                        isRunning: !1,
                        instance: null,
                    },
                    gr = { copy: 0, paste: 1, cut: 2 },
                    mr = ['eventSequence', 'timestamp', 'clipboardEventType', 'elementHash', 'copiedText'],
                    br = (function () {
                        !(function ClipboardEventCollector_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && ClipboardEventCollector_setPrototypeOf(e, t);
                        })(ClipboardEventCollector, Ce);
                        var t = ClipboardEventCollector_createSuper(ClipboardEventCollector);
                        function ClipboardEventCollector(e) {
                            var s;
                            return (
                                ClipboardEventCollector_classCallCheck(this, ClipboardEventCollector),
                                ClipboardEventCollector_defineProperty(
                                    ClipboardEventCollector_assertThisInitialized((s = t.call(this))),
                                    'startFeature',
                                    function (e) {
                                        try {
                                            var t = e.getDocument();
                                            s._cutEventEmitter.start(t),
                                                s._messageBus.subscribe(me.CutEvent, s._handleClipboardEvent),
                                                s._copyEventEmitter.start(t),
                                                s._messageBus.subscribe(me.CopyEvent, s._handleClipboardEvent),
                                                s._pasteEventEmitter.start(t),
                                                s._messageBus.subscribe(me.PasteEvent, s._handleClipboardEvent);
                                        } catch (e) {
                                            b.error(
                                                'Failed starting the ClipboardEvents feature. msg: '.concat(e.message),
                                                e
                                            );
                                        }
                                    }
                                ),
                                ClipboardEventCollector_defineProperty(
                                    ClipboardEventCollector_assertThisInitialized(s),
                                    '_handleClipboardEvent',
                                    function (e) {
                                        s._sendToQueue(e);
                                    }
                                ),
                                ClipboardEventCollector_defineProperty(
                                    ClipboardEventCollector_assertThisInitialized(s),
                                    '_sendToQueue',
                                    function (e) {
                                        try {
                                            var t = s.getEventTimestamp(e),
                                                r = s._elements.getElement(e.target),
                                                n = s._utils.StorageUtils.getAndUpdateEventSequenceNumber(),
                                                o = e.clipboardData
                                                    ? e.clipboardData.getData('text')
                                                    : window.clipboardData
                                                    ? window.clipboardData.getData('text')
                                                    : '';
                                            '' !== (o = o || '') &&
                                                (o = o
                                                    .replace(/[\d]/g, '1')
                                                    .replace(/[a-zA-Z]/g, 'a')
                                                    .replace(/[^a-zA-Z\d]/g, '*'));
                                            var i = gr[e.type];
                                            s._utils.isUndefinedNull(i) && (i = -1),
                                                s._dataQueue.addToQueue(
                                                    'clipboard_events',
                                                    s._utils.convertToArrayByMap(mr, {
                                                        eventSequence: n,
                                                        timestamp: t,
                                                        elementHash: r,
                                                        copiedText: o,
                                                        clipboardEventType: i,
                                                    })
                                                );
                                        } catch (e) {
                                            b.error('Failed handling ClipboardEvent. msg: '.concat(e.message), e);
                                        }
                                    }
                                ),
                                (s._utils = e.utils),
                                (s._dataQueue = e.dataQueue),
                                (s._elements = e.elements),
                                (s._messageBus = e.messageBus),
                                (s._cutEventEmitter = e.cutEventEmitter),
                                (s._copyEventEmitter = e.copyEventEmitter),
                                (s._pasteEventEmitter = e.pasteEventEmitter),
                                s
                            );
                        }
                        return (
                            ClipboardEventCollector_createClass(
                                ClipboardEventCollector,
                                [
                                    {
                                        key: 'stopFeature',
                                        value: function stopFeature(e) {
                                            try {
                                                var t = e.getDocument();
                                                this._cutEventEmitter.stop(t),
                                                    this._messageBus.unsubscribe(
                                                        me.CutEvent,
                                                        this._handleClipboardEvent
                                                    ),
                                                    this._copyEventEmitter.stop(t),
                                                    this._messageBus.unsubscribe(
                                                        me.CopyEvent,
                                                        this._handleClipboardEvent
                                                    ),
                                                    this._pasteEventEmitter.stop(t),
                                                    this._messageBus.unsubscribe(
                                                        me.PasteEvent,
                                                        this._handleClipboardEvent
                                                    );
                                            } catch (e) {
                                                b.error(
                                                    'Failed stopping the ClipboardEvents feature. msg: '.concat(
                                                        e.message
                                                    ),
                                                    e
                                                );
                                            }
                                        },
                                    },
                                ],
                                [
                                    {
                                        key: 'getDefaultSettings',
                                        value: function getDefaultSettings() {
                                            return _r;
                                        },
                                    },
                                    {
                                        key: 'Builder',
                                        get: function get() {
                                            return (function () {
                                                function Builder(e, t, r) {
                                                    ClipboardEventCollector_classCallCheck(this, Builder),
                                                        (this.utils = e),
                                                        (this.dataQueue = r),
                                                        (this.elements = t);
                                                }
                                                return (
                                                    ClipboardEventCollector_createClass(Builder, [
                                                        {
                                                            key: 'withMessageBus',
                                                            value: function withMessageBus(e) {
                                                                return (this.messageBus = e), this;
                                                            },
                                                        },
                                                        {
                                                            key: 'withCutEventEmitter',
                                                            value: function withCutEventEmitter(e) {
                                                                return (this.cutEventEmitter = e), this;
                                                            },
                                                        },
                                                        {
                                                            key: 'withCopyEventEmitter',
                                                            value: function withCopyEventEmitter(e) {
                                                                return (this.copyEventEmitter = e), this;
                                                            },
                                                        },
                                                        {
                                                            key: 'withPasteEventEmitter',
                                                            value: function withPasteEventEmitter(e) {
                                                                return (this.pasteEventEmitter = e), this;
                                                            },
                                                        },
                                                        {
                                                            key: 'build',
                                                            value: function build() {
                                                                return new ClipboardEventCollector(this);
                                                            },
                                                        },
                                                    ]),
                                                    Builder
                                                );
                                            })();
                                        },
                                    },
                                ]
                            ),
                            ClipboardEventCollector
                        );
                    })();
                function OrientationEventCollector_typeof(e) {
                    return (OrientationEventCollector_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function OrientationEventCollector_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function OrientationEventCollector_setPrototypeOf(e, t) {
                    return (OrientationEventCollector_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function OrientationEventCollector_createSuper(r) {
                    var n = (function OrientationEventCollector_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = OrientationEventCollector_getPrototypeOf(r);
                        return (function OrientationEventCollector_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === OrientationEventCollector_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return OrientationEventCollector_assertThisInitialized(e);
                        })(
                            this,
                            n
                                ? ((e = OrientationEventCollector_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function OrientationEventCollector_assertThisInitialized(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e;
                }
                function OrientationEventCollector_getPrototypeOf(e) {
                    return (OrientationEventCollector_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var Cr = {
                        configKey: 'isOrientationEvents',
                        isDefault: !1,
                        shouldRunPerContext: !1,
                        shouldRunPerSession: !1,
                        shouldRun: !0,
                        isFrameRelated: !1,
                        runInSlave: !1,
                        runInLean: !1,
                        runInUns: !1,
                        isRunning: !1,
                        instance: null,
                    },
                    wr = (function () {
                        !(function OrientationEventCollector_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && OrientationEventCollector_setPrototypeOf(e, t);
                        })(OrientationEventCollector, Ce);
                        var i = OrientationEventCollector_createSuper(OrientationEventCollector);
                        function OrientationEventCollector(e, t, r, n, o) {
                            var s;
                            return (
                                (function OrientationEventCollector_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, OrientationEventCollector),
                                (function OrientationEventCollector_defineProperty(e, t, r) {
                                    t in e
                                        ? Object.defineProperty(e, t, {
                                              value: r,
                                              enumerable: !0,
                                              configurable: !0,
                                              writable: !0,
                                          })
                                        : (e[t] = r);
                                })(
                                    OrientationEventCollector_assertThisInitialized((s = i.call(this))),
                                    '_handleDeviceOrientationEvent',
                                    function (e) {
                                        var t,
                                            r,
                                            n,
                                            o,
                                            i = s._utils.dateNow();
                                        e &&
                                            i - s._lastTime > s._samplePeriod &&
                                            ((t = e.absolute || !1),
                                            (r = s._utils.isUndefinedNull(e.alpha)
                                                ? 0
                                                : s._utils.cutDecimalPointDigits(e.alpha, 4)),
                                            (n = s._utils.isUndefinedNull(e.beta)
                                                ? 0
                                                : s._utils.cutDecimalPointDigits(e.beta, 4)),
                                            (o = s._utils.isUndefinedNull(e.gamma)
                                                ? 0
                                                : s._utils.cutDecimalPointDigits(e.gamma, 4)),
                                            (r === s._lastAlpha && n === s._lastBeta && o === s._lastGamma) ||
                                                (b.isDebug() &&
                                                    b.debug(
                                                        'OrientationEvents:_onOrientationEvent, sending data: timestamp: '
                                                            .concat(i, '\n                alpha,betta,gamma: ')
                                                            .concat(r, ',')
                                                            .concat(n, ',')
                                                            .concat(o, ',prevTime:')
                                                            .concat(s._lastTime)
                                                    ),
                                                (s._lastTime = i),
                                                (s._lastAlpha = r),
                                                (s._lastBeta = n),
                                                (s._lastGamma = o),
                                                (e = s._utils.StorageUtils.getAndUpdateEventSequenceNumber()),
                                                s._dataQ.addToQueue('orientation_events', [null, e, i, t, r, n, o])));
                                    }
                                ),
                                (s._dataQ = r),
                                (s._configurationRepository = e),
                                (s._utils = t),
                                (s._samplePeriod =
                                    s._configurationRepository.get(y.orientationEventsSamplePeriod) || 0),
                                (s._lastAlpha = 0),
                                (s._lastBeta = 0),
                                (s._lastGamma = 0),
                                (s._lastTime = 0),
                                (s._messageBus = n),
                                (s._deviceOrientationEventEmitter = o),
                                s
                            );
                        }
                        return (
                            (function OrientationEventCollector_createClass(e, t, r) {
                                t && OrientationEventCollector_defineProperties(e.prototype, t),
                                    r && OrientationEventCollector_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(
                                OrientationEventCollector,
                                [
                                    {
                                        key: 'startFeature',
                                        value: function startFeature() {
                                            window.DeviceOrientationEvent &&
                                                (this._deviceOrientationEventEmitter.start(),
                                                this._messageBus.subscribe(
                                                    me.DeviceOrientationEvent,
                                                    this._handleDeviceOrientationEvent
                                                ));
                                        },
                                    },
                                    {
                                        key: 'stopFeature',
                                        value: function stopFeature() {
                                            window.DeviceOrientationEvent &&
                                                (this._deviceOrientationEventEmitter.stop(),
                                                this._messageBus.unsubscribe(
                                                    me.DeviceOrientationEvent,
                                                    this._handleDeviceOrientationEvent
                                                ));
                                        },
                                    },
                                    {
                                        key: 'updateFeatureConfig',
                                        value: function updateFeatureConfig() {
                                            var e = this._configurationRepository.get(y.orientationEventsSamplePeriod);
                                            this._samplePeriod = void 0 !== e ? e : this._samplePeriod;
                                        },
                                    },
                                ],
                                [
                                    {
                                        key: 'getDefaultSettings',
                                        value: function getDefaultSettings() {
                                            return Cr;
                                        },
                                    },
                                ]
                            ),
                            OrientationEventCollector
                        );
                    })();
                function BeforeInstallPromptEventCollector_typeof(e) {
                    return (BeforeInstallPromptEventCollector_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function BeforeInstallPromptEventCollector_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function BeforeInstallPromptEventCollector_setPrototypeOf(e, t) {
                    return (BeforeInstallPromptEventCollector_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function BeforeInstallPromptEventCollector_createSuper(r) {
                    var n = (function BeforeInstallPromptEventCollector_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = BeforeInstallPromptEventCollector_getPrototypeOf(r);
                        return (function BeforeInstallPromptEventCollector_possibleConstructorReturn(e, t) {
                            {
                                if (
                                    t &&
                                    ('object' === BeforeInstallPromptEventCollector_typeof(t) || 'function' == typeof t)
                                )
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return BeforeInstallPromptEventCollector_assertThisInitialized(e);
                        })(
                            this,
                            n
                                ? ((e = BeforeInstallPromptEventCollector_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function BeforeInstallPromptEventCollector_assertThisInitialized(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e;
                }
                function BeforeInstallPromptEventCollector_getPrototypeOf(e) {
                    return (BeforeInstallPromptEventCollector_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var Er = {
                        configKey: 'isBeforeInstallPrompt',
                        isDefault: !1,
                        shouldRunPerContext: !1,
                        shouldRunPerSession: !1,
                        shouldRun: !1,
                        isFrameRelated: !1,
                        runInLean: !1,
                        runInUns: !1,
                        isRunning: !1,
                        instance: null,
                    },
                    Sr = ['eventSequence', 'timestamp', 'platforms', 'relativeTime'],
                    Pr = (function () {
                        !(function BeforeInstallPromptEventCollector_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && BeforeInstallPromptEventCollector_setPrototypeOf(e, t);
                        })(BeforeInstallPromptEventCollector, Ce);
                        var i = BeforeInstallPromptEventCollector_createSuper(BeforeInstallPromptEventCollector);
                        function BeforeInstallPromptEventCollector(e, t, r, n) {
                            var o;
                            return (
                                (function BeforeInstallPromptEventCollector_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, BeforeInstallPromptEventCollector),
                                (function BeforeInstallPromptEventCollector_defineProperty(e, t, r) {
                                    t in e
                                        ? Object.defineProperty(e, t, {
                                              value: r,
                                              enumerable: !0,
                                              configurable: !0,
                                              writable: !0,
                                          })
                                        : (e[t] = r);
                                })(
                                    BeforeInstallPromptEventCollector_assertThisInitialized((o = i.call(this))),
                                    '_onBeforeInstallPrompt',
                                    function (e) {
                                        var t = o._utils.StorageUtils.getAndUpdateEventSequenceNumber(),
                                            r = o.getEventTimestamp(),
                                            n = o.getTimestampFromEvent(e),
                                            e = e.platforms ? e.platforms.join(',') : '';
                                        o._dataQueue.addToQueue(
                                            'before_install_prompt',
                                            o._utils.convertToArrayByMap(Sr, {
                                                eventSequence: t,
                                                timestamp: r,
                                                platforms: e,
                                                relativeTime: n,
                                            })
                                        );
                                    }
                                ),
                                (o._messageBus = r),
                                (o._eventEmitter = n),
                                (o._dataQueue = e),
                                (o._utils = t),
                                o
                            );
                        }
                        return (
                            (function BeforeInstallPromptEventCollector_createClass(e, t, r) {
                                t && BeforeInstallPromptEventCollector_defineProperties(e.prototype, t),
                                    r && BeforeInstallPromptEventCollector_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(
                                BeforeInstallPromptEventCollector,
                                [
                                    {
                                        key: 'startFeature',
                                        value: function startFeature() {
                                            this._eventEmitter.start(window),
                                                this._messageBus.subscribe(
                                                    me.BeforeInstallPromptEvent,
                                                    this._onBeforeInstallPrompt
                                                );
                                        },
                                    },
                                    {
                                        key: 'stopFeature',
                                        value: function stopFeature() {
                                            this._eventEmitter.stop(window),
                                                this._messageBus.unsubscribe(
                                                    me.BeforeInstallPromptEvent,
                                                    this._onBeforeInstallPrompt
                                                );
                                        },
                                    },
                                ],
                                [
                                    {
                                        key: 'getDefaultSettings',
                                        value: function getDefaultSettings() {
                                            return Er;
                                        },
                                    },
                                ]
                            ),
                            BeforeInstallPromptEventCollector
                        );
                    })();
                function WindowEventCollector_typeof(e) {
                    return (WindowEventCollector_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function WindowEventCollector_classCallCheck(e, t) {
                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                }
                function WindowEventCollector_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function WindowEventCollector_createClass(e, t, r) {
                    return (
                        t && WindowEventCollector_defineProperties(e.prototype, t),
                        r && WindowEventCollector_defineProperties(e, r),
                        Object.defineProperty(e, 'prototype', { writable: !1 }),
                        e
                    );
                }
                function WindowEventCollector_setPrototypeOf(e, t) {
                    return (WindowEventCollector_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function WindowEventCollector_createSuper(r) {
                    var n = (function WindowEventCollector_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = WindowEventCollector_getPrototypeOf(r);
                        return (function WindowEventCollector_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === WindowEventCollector_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return WindowEventCollector_assertThisInitialized(e);
                        })(
                            this,
                            n
                                ? ((e = WindowEventCollector_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function WindowEventCollector_assertThisInitialized(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e;
                }
                function WindowEventCollector_getPrototypeOf(e) {
                    return (WindowEventCollector_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                function WindowEventCollector_defineProperty(e, t, r) {
                    return (
                        t in e
                            ? Object.defineProperty(e, t, { value: r, enumerable: !0, configurable: !0, writable: !0 })
                            : (e[t] = r),
                        e
                    );
                }
                var kr = {
                        configKey: 'isWindowEvents',
                        isDefault: !0,
                        shouldRunPerContext: !1,
                        shouldRunPerSession: !1,
                        shouldRun: !0,
                        isFrameRelated: !1,
                        runInUns: !1,
                        runInSlave: !1,
                        runInLean: !1,
                        isRunning: !1,
                        instance: null,
                    },
                    Or = { DOMContentLoaded: 0, scroll: 1, resize: 2, focus: 3, blur: 4, tabFocus: 5, tabBlur: 6 },
                    Br = [
                        'eventSequence',
                        'timestamp',
                        'eventType',
                        'isTrusted',
                        'screenWidth',
                        'screenHeight',
                        'clientWidth',
                        'clientHeight',
                        'documentWidth',
                        'documentHeight',
                        'scrollTop',
                        'scrollLeft',
                        'windowInnerWidth',
                        'windowInnerHeight',
                        'windowOuterWidth',
                        'windowOuterHeight',
                    ],
                    Mr = (function () {
                        !(function WindowEventCollector_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && WindowEventCollector_setPrototypeOf(e, t);
                        })(WindowEventCollector, Ce);
                        var t = WindowEventCollector_createSuper(WindowEventCollector);
                        function WindowEventCollector(e) {
                            var o;
                            return (
                                WindowEventCollector_classCallCheck(this, WindowEventCollector),
                                WindowEventCollector_defineProperty(
                                    WindowEventCollector_assertThisInitialized((o = t.call(this))),
                                    'startFeature',
                                    function (e) {
                                        try {
                                            o._resizeEventEmitter.start(e.Context),
                                                o._messageBus.subscribe(me.ResizeEvent, o._onWindowEvent),
                                                o._focusEventEmitter.start(e.Context),
                                                o._messageBus.subscribe(me.FocusEvent, o._onWindowEvent),
                                                o._blurEventEmitter.start(e.Context),
                                                o._messageBus.subscribe(me.BlurEvent, o._onWindowEvent),
                                                o._domContentLoadedEventEmitter.start(e.getDocument()),
                                                o._messageBus.subscribe(me.DOMContentLoadedEvent, o._onWindowEvent),
                                                o._visibilityChangeEventEmitter.start(e.getDocument()),
                                                o._messageBus.subscribe(me.VisibilityChangeEvent, o._onWindowEvent),
                                                o._configurationRepository.get(y.isScrollCollect) &&
                                                    (o._scrollEventEmitter.start(e.Context),
                                                    o._messageBus.subscribe(me.ScrollEvent, o._onWindowEvent));
                                        } catch (e) {
                                            b.error(
                                                'Failed starting the WindowEventCollector. msg: '.concat(e.message),
                                                e
                                            );
                                        }
                                    }
                                ),
                                WindowEventCollector_defineProperty(
                                    WindowEventCollector_assertThisInitialized(o),
                                    'stopFeature',
                                    function (e) {
                                        try {
                                            o._resizeEventEmitter.stop(e.Context),
                                                o._messageBus.unsubscribe(me.ResizeEvent, o._onWindowEvent),
                                                o._focusEventEmitter.stop(e.Context),
                                                o._messageBus.unsubscribe(me.FocusEvent, o._onWindowEvent),
                                                o._blurEventEmitter.stop(e.Context),
                                                o._messageBus.unsubscribe(me.BlurEvent, o._onWindowEvent),
                                                o._domContentLoadedEventEmitter.stop(e.getDocument()),
                                                o._messageBus.unsubscribe(me.DOMContentLoadedEvent, o._onWindowEvent),
                                                o._visibilityChangeEventEmitter.stop(e.getDocument()),
                                                o._messageBus.unsubscribe(me.VisibilityChangeEvent, o._onWindowEvent),
                                                o._configurationRepository.get(y.isScrollCollect) &&
                                                    (o._scrollEventEmitter.stop(e.Context),
                                                    o._messageBus.unsubscribe(me.ScrollEvent, o._onWindowEvent));
                                        } catch (e) {
                                            b.error(
                                                'Failed stopping the ClipboardEvents feature. msg: '.concat(e.message),
                                                e
                                            );
                                        }
                                    }
                                ),
                                WindowEventCollector_defineProperty(
                                    WindowEventCollector_assertThisInitialized(o),
                                    'updateFeatureConfig',
                                    function (e) {
                                        o._configurationRepository.get(y.isScrollCollect)
                                            ? o._configurationRepository.get(y.isScrollCollect) &&
                                              (o._scrollEventEmitter.start(e.Context),
                                              o._messageBus.subscribe(me.ScrollEvent, o._onWindowEvent))
                                            : (o._scrollEventEmitter.stop(e.Context),
                                              o._messageBus.unsubscribe(me.ScrollEvent, o._onWindowEvent));
                                    }
                                ),
                                WindowEventCollector_defineProperty(
                                    WindowEventCollector_assertThisInitialized(o),
                                    '_onWindowEvent',
                                    function (e) {
                                        try {
                                            o._sendToQueue(e);
                                        } catch (e) {
                                            b.error(
                                                'An error has occurred while sending window event. '.concat(e.message),
                                                e
                                            );
                                        }
                                    }
                                ),
                                WindowEventCollector_defineProperty(
                                    WindowEventCollector_assertThisInitialized(o),
                                    '_sendToQueue',
                                    function (e) {
                                        if (!e) throw new Error('Invalid window event received.');
                                        var t,
                                            r = we[void 0];
                                        'DOMContentLoaded' === e.type
                                            ? (t = new Date().getTime())
                                            : ((t = o.getEventTimestamp(e)), (r = we[e.isTrusted])),
                                            b.isDebug() &&
                                                (b.trace('got event ' + e.type + ' at time ' + t),
                                                b.trace(
                                                    'adding to queue - screen(width,height): ' +
                                                        screen.width +
                                                        ',' +
                                                        screen.height +
                                                        ' window(width,height): ' +
                                                        window.innerWidth +
                                                        ',' +
                                                        window.innerHeight
                                                ));
                                        var n = o._utils.StorageUtils.getAndUpdateEventSequenceNumber(),
                                            e =
                                                'visibilitychange' !== e.type
                                                    ? e.type
                                                    : 'hidden' === document.visibilityState
                                                    ? 'tabBlur'
                                                    : 'tabFocus',
                                            e = Or[e];
                                        (null != e && void 0 !== e) || (e = -1),
                                            o._dataQueue.addToQueue(
                                                'window_events',
                                                o._utils.convertToArrayByMap(Br, {
                                                    eventType: e,
                                                    eventSequence: n,
                                                    timestamp: t,
                                                    screenWidth: screen.width ? Math.round(screen.width) : -1,
                                                    screenHeight: screen.height ? Math.round(screen.height) : -1,
                                                    clientWidth: window.innerWidth ? Math.round(window.innerWidth) : -1,
                                                    clientHeight: window.innerHeight
                                                        ? Math.round(window.innerHeight)
                                                        : -1,
                                                    documentWidth:
                                                        document.body && document.body.clientWidth
                                                            ? Math.round(document.body.clientWidth)
                                                            : -1,
                                                    documentHeight:
                                                        document.body && document.body.clientHeight
                                                            ? Math.round(document.body.clientHeight)
                                                            : -1,
                                                    scrollTop:
                                                        document.body && document.body.scrollTop
                                                            ? Math.round(document.body.scrollTop)
                                                            : 0,
                                                    scrollLeft:
                                                        document.body && document.body.scrollLeft
                                                            ? Math.round(document.body.scrollLeft)
                                                            : 0,
                                                    windowInnerWidth: window.innerWidth
                                                        ? Math.round(window.innerWidth)
                                                        : -1,
                                                    windowInnerHeight: window.innerHeight
                                                        ? Math.round(window.innerHeight)
                                                        : -1,
                                                    windowOuterWidth: window.outerWidth
                                                        ? Math.round(window.outerWidth)
                                                        : -1,
                                                    windowOuterHeight: window.outerHeight
                                                        ? Math.round(window.outerHeight)
                                                        : -1,
                                                    isTrusted: r,
                                                })
                                            );
                                    }
                                ),
                                (o._configurationRepository = e.configurationRepository),
                                (o._utils = e.utils),
                                (o._dataQueue = e.dataQueue),
                                (o._messageBus = e.messageBus),
                                (o._focusEventEmitter = e.focusEventEmitter),
                                (o._blurEventEmitter = e.blurEventEmitter),
                                (o._resizeEventEmitter = e.resizeEventEmitter),
                                (o._domContentLoadedEventEmitter = e.domContentLoadedEventEmitter),
                                (o._visibilityChangeEventEmitter = e.visibilityChangeEventEmitter),
                                (o._scrollEventEmitter = e.scrollEventEmitter),
                                o
                            );
                        }
                        return (
                            WindowEventCollector_createClass(WindowEventCollector, null, [
                                {
                                    key: 'getDefaultSettings',
                                    value: function getDefaultSettings() {
                                        return kr;
                                    },
                                },
                                {
                                    key: 'Builder',
                                    get: function get() {
                                        return (function () {
                                            function Builder(e, t, r) {
                                                WindowEventCollector_classCallCheck(this, Builder),
                                                    (this.configurationRepository = e),
                                                    (this.utils = t),
                                                    (this.dataQueue = r);
                                            }
                                            return (
                                                WindowEventCollector_createClass(Builder, [
                                                    {
                                                        key: 'withMessageBus',
                                                        value: function withMessageBus(e) {
                                                            return (this.messageBus = e), this;
                                                        },
                                                    },
                                                    {
                                                        key: 'withFocusEventEmitter',
                                                        value: function withFocusEventEmitter(e) {
                                                            return (this.focusEventEmitter = e), this;
                                                        },
                                                    },
                                                    {
                                                        key: 'withBlurEventEmitter',
                                                        value: function withBlurEventEmitter(e) {
                                                            return (this.blurEventEmitter = e), this;
                                                        },
                                                    },
                                                    {
                                                        key: 'withResizeEventEmitter',
                                                        value: function withResizeEventEmitter(e) {
                                                            return (this.resizeEventEmitter = e), this;
                                                        },
                                                    },
                                                    {
                                                        key: 'withDOMContentLoadedEventEmitter',
                                                        value: function withDOMContentLoadedEventEmitter(e) {
                                                            return (this.domContentLoadedEventEmitter = e), this;
                                                        },
                                                    },
                                                    {
                                                        key: 'withVisibilityChangeEventEmitter',
                                                        value: function withVisibilityChangeEventEmitter(e) {
                                                            return (this.visibilityChangeEventEmitter = e), this;
                                                        },
                                                    },
                                                    {
                                                        key: 'withScrollEventEmitter',
                                                        value: function withScrollEventEmitter(e) {
                                                            return (this.scrollEventEmitter = e), this;
                                                        },
                                                    },
                                                    {
                                                        key: 'build',
                                                        value: function build() {
                                                            return new WindowEventCollector(this);
                                                        },
                                                    },
                                                ]),
                                                Builder
                                            );
                                        })();
                                    },
                                },
                            ]),
                            WindowEventCollector
                        );
                    })();
                function AccelerometerEventCollector_typeof(e) {
                    return (AccelerometerEventCollector_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function AccelerometerEventCollector_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function AccelerometerEventCollector_setPrototypeOf(e, t) {
                    return (AccelerometerEventCollector_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function AccelerometerEventCollector_createSuper(r) {
                    var n = (function AccelerometerEventCollector_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = AccelerometerEventCollector_getPrototypeOf(r);
                        return (function AccelerometerEventCollector_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === AccelerometerEventCollector_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return AccelerometerEventCollector_assertThisInitialized(e);
                        })(
                            this,
                            n
                                ? ((e = AccelerometerEventCollector_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function AccelerometerEventCollector_assertThisInitialized(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e;
                }
                function AccelerometerEventCollector_getPrototypeOf(e) {
                    return (AccelerometerEventCollector_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var Rr = {
                        configKey: 'isAccelerometerEvents',
                        isDefault: !1,
                        shouldRunPerContext: !1,
                        shouldRunPerSession: !1,
                        shouldRun: !0,
                        isFrameRelated: !1,
                        runInSlave: !1,
                        runInLean: !1,
                        runInUns: !1,
                        isRunning: !1,
                        instance: null,
                    },
                    Dr = (function () {
                        !(function AccelerometerEventCollector_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && AccelerometerEventCollector_setPrototypeOf(e, t);
                        })(AccelerometerEventCollector, Ce);
                        var o = AccelerometerEventCollector_createSuper(AccelerometerEventCollector);
                        function AccelerometerEventCollector(e, t, r) {
                            var n;
                            return (
                                (function AccelerometerEventCollector_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, AccelerometerEventCollector),
                                ((n = o.call(this))._configurationRepository = e),
                                (n._utils = t),
                                (n._dataQueue = r),
                                (n._storageUtils = n._utils.StorageUtils),
                                (n._samplePeriod =
                                    n._configurationRepository.get(y.accelerometerEventsSamplePeriod) || 0),
                                (n._samplePeriodGyro = n._configurationRepository.get(y.gyroEventsSamplePeriod) || 0),
                                (n._lastX = 0),
                                (n._lastY = 0),
                                (n._lastZ = 0),
                                (n._lastTime = 0),
                                (n._lastAlpha = 0),
                                (n._lastBeta = 0),
                                (n._lastGamma = 0),
                                (n._lastTimeGyro = 0),
                                (n._onAccelerometerventFunc = n._onAccelerometerEvent.bind(
                                    AccelerometerEventCollector_assertThisInitialized(n)
                                )),
                                n
                            );
                        }
                        return (
                            (function AccelerometerEventCollector_createClass(e, t, r) {
                                t && AccelerometerEventCollector_defineProperties(e.prototype, t),
                                    r && AccelerometerEventCollector_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(
                                AccelerometerEventCollector,
                                [
                                    {
                                        key: '_onAccelerometerEvent',
                                        value: function _onAccelerometerEvent(e) {
                                            var t,
                                                r,
                                                n,
                                                o,
                                                i = this._utils.dateNow();
                                            return (
                                                e &&
                                                    e.accelerationIncludingGravity &&
                                                    i - this._lastTime > this._samplePeriod &&
                                                    ((n = e.accelerationIncludingGravity.x),
                                                    (o = e.accelerationIncludingGravity.y),
                                                    (t = e.accelerationIncludingGravity.z),
                                                    (this._utils.isUndefinedNull(n) &&
                                                        this._utils.isUndefinedNull(o) &&
                                                        this._utils.isUndefinedNull(t)) ||
                                                        ((n = this._utils.isUndefinedNull(n)
                                                            ? -1
                                                            : this._utils.cutDecimalPointDigits(n, 4)),
                                                        (o = this._utils.isUndefinedNull(o)
                                                            ? -1
                                                            : this._utils.cutDecimalPointDigits(o, 4)),
                                                        (t = this._utils.isUndefinedNull(t)
                                                            ? -1
                                                            : this._utils.cutDecimalPointDigits(t, 4)),
                                                        (n === this._lastX && o === this._lastY && t === this._lastZ) ||
                                                            ((r = this._storageUtils.getAndUpdateEventSequenceNumber()),
                                                            (this._lastTime = i),
                                                            (this._lastX = n),
                                                            (this._lastY = o),
                                                            (this._lastZ = t),
                                                            this._dataQueue.addToQueue('accelerometer_events', [
                                                                null,
                                                                r,
                                                                i,
                                                                n,
                                                                o,
                                                                t,
                                                            ]),
                                                            b.isDebug() &&
                                                                b.debug(
                                                                    'AccelerometerEvents:_onAccelerometerEvent, sending data: timestamp:'
                                                                        .concat(i, ' x,y,z:')
                                                                        .concat(n, ',')
                                                                        .concat(o, ',')
                                                                        .concat(t, ', prevTime:')
                                                                        .concat(this._lastTime)
                                                                )))),
                                                e &&
                                                    e.rotationRate &&
                                                    i - this._lastTimeGyro > this._samplePeriodGyro &&
                                                    ((r = e.rotationRate.alpha),
                                                    (n = e.rotationRate.beta),
                                                    (o = e.rotationRate.gamma),
                                                    (this._utils.isUndefinedNull(r) &&
                                                        this._utils.isUndefinedNull(n) &&
                                                        this._utils.isUndefinedNull(o)) ||
                                                        ((t = e.absolute || !1),
                                                        (r = this._utils.isUndefinedNull(r)
                                                            ? 0
                                                            : this._utils.cutDecimalPointDigits(r, 4)),
                                                        (n = this._utils.isUndefinedNull(n)
                                                            ? 0
                                                            : this._utils.cutDecimalPointDigits(n, 4)),
                                                        (o = this._utils.isUndefinedNull(o)
                                                            ? 0
                                                            : this._utils.cutDecimalPointDigits(o, 4)),
                                                        (r === this._lastAlpha &&
                                                            n === this._lastBeta &&
                                                            o === this._lastGamma) ||
                                                            ((this._lastTimeGyro = i),
                                                            (this._lastAlpha = r),
                                                            (this._lastBeta = n),
                                                            (this._lastGamma = o),
                                                            (e =
                                                                this._utils.StorageUtils.getAndUpdateEventSequenceNumber()),
                                                            this._dataQueue.addToQueue('gyro_events', [
                                                                null,
                                                                e,
                                                                i,
                                                                t,
                                                                r,
                                                                n,
                                                                o,
                                                            ]),
                                                            b.isDebug() &&
                                                                b.debug(
                                                                    'GyroEvents:_onGyroEvent, sending data: timestamp:'
                                                                        .concat(i, ' alpha,betta,gamma:')
                                                                        .concat(r, ',')
                                                                        .concat(n, ',')
                                                                        .concat(o, ', prevTime: ')
                                                                        .concat(this._lastTimeGyro)
                                                                )))),
                                                !0
                                            );
                                        },
                                    },
                                    {
                                        key: 'startFeature',
                                        value: function startFeature() {
                                            window.DeviceMotionEvent &&
                                                this._utils.addEventListener(
                                                    window,
                                                    'devicemotion',
                                                    this._onAccelerometerventFunc
                                                );
                                        },
                                    },
                                    {
                                        key: 'stopFeature',
                                        value: function stopFeature() {
                                            window.DeviceMotionEvent &&
                                                this._utils.removeEventListener(
                                                    window,
                                                    'devicemotion',
                                                    this._onAccelerometerventFunc
                                                );
                                        },
                                    },
                                    {
                                        key: 'updateFeatureConfig',
                                        value: function updateFeatureConfig() {
                                            (this._samplePeriod =
                                                void 0 !==
                                                this._configurationRepository.get(y.accelerometerEventsSamplePeriod)
                                                    ? this._configurationRepository.get(
                                                          y.accelerometerEventsSamplePeriod
                                                      )
                                                    : this._samplePeriod),
                                                (this._samplePeriodGyro =
                                                    void 0 !==
                                                    this._configurationRepository.get(y.gyroEventsSamplePeriod)
                                                        ? this._configurationRepository.get(y.gyroEventsSamplePeriod)
                                                        : this._samplePeriodGyro);
                                        },
                                    },
                                ],
                                [
                                    {
                                        key: 'getDefaultSettings',
                                        value: function getDefaultSettings() {
                                            return Rr;
                                        },
                                    },
                                ]
                            ),
                            AccelerometerEventCollector
                        );
                    })();
                function PinchZoomEventCollector_typeof(e) {
                    return (PinchZoomEventCollector_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function PinchZoomEventCollector_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function PinchZoomEventCollector_setPrototypeOf(e, t) {
                    return (PinchZoomEventCollector_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function PinchZoomEventCollector_createSuper(r) {
                    var n = (function PinchZoomEventCollector_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = PinchZoomEventCollector_getPrototypeOf(r);
                        return (function PinchZoomEventCollector_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === PinchZoomEventCollector_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return PinchZoomEventCollector_assertThisInitialized(e);
                        })(
                            this,
                            n
                                ? ((e = PinchZoomEventCollector_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function PinchZoomEventCollector_assertThisInitialized(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e;
                }
                function PinchZoomEventCollector_getPrototypeOf(e) {
                    return (PinchZoomEventCollector_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                function tc(e, t, n) {
                    function getDistance(e, t) {
                        var r = t[n[0]] - e[n[0]],
                            e = t[n[1]] - e[n[1]];
                        return Math.sqrt(r * r + e * e);
                    }
                    return {
                        getScale: function _getScale() {
                            return getDistance(e[0], e[1]) / getDistance(t[0], t[1]);
                        },
                        getFocusPoint: function getFocusPoint() {
                            return (function _getFocusPoint(e, t) {
                                return { x: (e[n[0]] + t[n[0]]) / 2, y: (e[n[1]] + t[n[1]]) / 2 };
                            })(e[1], e[0]);
                        },
                    };
                }
                var Fr = ['clientX', 'clientY'],
                    Tr = ['screenX', 'screenY'],
                    Ir = { pointerdown: 0, pointermove: 1, pointerup: 2 },
                    xr = {
                        configKey: 'isPinchZoomEvents',
                        isDefault: !1,
                        shouldRunPerContext: !1,
                        shouldRunPerSession: !1,
                        shouldRun: !0,
                        isFrameRelated: !0,
                        runInSlave: !0,
                        runInLean: !0,
                        runInUns: !1,
                        isRunning: !1,
                        instance: null,
                    },
                    Ar = ['eventSequence', 'timestamp', 'focusX', 'focusY', 'scaleFactor'],
                    Lr = (function () {
                        !(function PinchZoomEventCollector_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && PinchZoomEventCollector_setPrototypeOf(e, t);
                        })(PinchZoomEventCollector, Ce);
                        var i = PinchZoomEventCollector_createSuper(PinchZoomEventCollector);
                        function PinchZoomEventCollector(e, t, r, n) {
                            var o;
                            return (
                                (function PinchZoomEventCollector_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, PinchZoomEventCollector),
                                ((o = i.call(this))._utils = e),
                                (o._dataQ = r),
                                (o._elements = t),
                                (o._msgBus = n),
                                (o._evGesturesCache = []),
                                (o._prevEventDiff = -1),
                                (o._prevEvGestureSet = []),
                                (o._prevTouchEvents = []),
                                (o._onAllBrowsersPinchZoomEventBinded = o._onAllBrowsersPinchZoomEvent.bind(
                                    PinchZoomEventCollector_assertThisInitialized(o)
                                )),
                                o
                            );
                        }
                        return (
                            (function PinchZoomEventCollector_createClass(e, t, r) {
                                t && PinchZoomEventCollector_defineProperties(e.prototype, t),
                                    r && PinchZoomEventCollector_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(
                                PinchZoomEventCollector,
                                [
                                    {
                                        key: 'startFeature',
                                        value: function startFeature(e) {
                                            this._bind(e);
                                        },
                                    },
                                    {
                                        key: 'stopFeature',
                                        value: function stopFeature(e) {
                                            this._unbind(e);
                                        },
                                    },
                                    {
                                        key: '_addToCommunicationQueue',
                                        value: function _addToCommunicationQueue(e, t, r, n) {
                                            (e !== Ir.pointerdown && e !== Ir.pointerup) ||
                                                this._msgBus.publish('pinchEvent', { action: e });
                                            (e = this.getEventTimestamp(n)),
                                                (n = this._utils.StorageUtils.getAndUpdateEventSequenceNumber());
                                            this._dataQ.addToQueue(
                                                'pinch_events',
                                                this._utils.convertToArrayByMap(Ar, {
                                                    eventSequence: n,
                                                    timestamp: e,
                                                    focusX: r.x,
                                                    focusY: r.y,
                                                    scaleFactor: t,
                                                })
                                            );
                                        },
                                    },
                                    {
                                        key: '_bind',
                                        value: function _bind(e) {
                                            var t,
                                                r = e.getDocument();
                                            if (
                                                (window.PointerEvent
                                                    ? (t = ['pointerdown', 'pointermove', 'pointerup'])
                                                    : window.TouchEvent &&
                                                      (t = ['touchstart', 'touchend', 'touchcancel', 'touchmove']),
                                                (this._listeningToEvents = t),
                                                this._listeningToEvents)
                                            )
                                                for (var n = 0; n < this._listeningToEvents.length; n++)
                                                    this._utils.addEventListener(
                                                        r,
                                                        this._listeningToEvents[n],
                                                        this._onAllBrowsersPinchZoomEventBinded,
                                                        !1,
                                                        !1
                                                    );
                                        },
                                    },
                                    {
                                        key: '_unbind',
                                        value: function _unbind(e) {
                                            var t = e.getDocument();
                                            if (this._listeningToEvents)
                                                for (var r = 0; r < this._listeningToEvents.length; r++)
                                                    this._utils.removeEventListener(
                                                        t,
                                                        this._listeningToEvents[r],
                                                        this._onAllBrowsersPinchZoomEventBinded
                                                    );
                                            (this._evGesturesCache = []), (this._prevEventDiff = -1);
                                        },
                                    },
                                    {
                                        key: '_onAllBrowsersPinchZoomEvent',
                                        value: function _onAllBrowsersPinchZoomEvent(e) {
                                            switch (e.type) {
                                                case 'pointerdown':
                                                    this._onPointerDownEvent(e);
                                                    break;
                                                case 'pointermove':
                                                    this._onPointerMoveEvent(e);
                                                    break;
                                                case 'pointerup':
                                                    this._onPointerUpEvent(e);
                                                    break;
                                                case 'touchstart':
                                                    this._onTouchStartEvent(e);
                                                    break;
                                                case 'touchend':
                                                    this._onTouchEndEvent();
                                                    break;
                                                case 'touchmove':
                                                    this._onTouchMoveEvent(e);
                                            }
                                            return !0;
                                        },
                                    },
                                    {
                                        key: '_onPointerDownEvent',
                                        value: function _onPointerDownEvent(e) {
                                            this._evGesturesCache.push(e);
                                        },
                                    },
                                    {
                                        key: '_onPointerMoveEvent',
                                        value: function _onPointerMoveEvent(e) {
                                            for (var t, r, n, o = 0; o < this._evGesturesCache.length; o++)
                                                if (e.pointerId === this._evGesturesCache[o].pointerId) {
                                                    this._evGesturesCache[o] = e;
                                                    break;
                                                }
                                            2 === this._evGesturesCache.length &&
                                            this._evGesturesCache[0].pointerId !== this._evGesturesCache[1].pointerId
                                                ? ((t = Math.abs(
                                                      this._evGesturesCache[0].clientX -
                                                          this._evGesturesCache[1].clientX
                                                  )),
                                                  0 < this._prevEventDiff &&
                                                      (this._prevEventDiff,
                                                      this._prevEventDiff,
                                                      2 === this._prevEvGestureSet.length &&
                                                          ((n = (r = tc(
                                                              this._evGesturesCache,
                                                              this._prevEvGestureSet,
                                                              Fr
                                                          )).getScale()),
                                                          this._addToCommunicationQueue(
                                                              Ir[e.type],
                                                              n,
                                                              r.getFocusPoint(),
                                                              e
                                                          ))),
                                                  (this._prevEventDiff = t),
                                                  (this._prevEvGestureSet = this._evGesturesCache.slice(0)))
                                                : 2 < this._evGesturesCache.length &&
                                                  ((this._evGesturesCache = []), (this._prevEvGestureSet = []));
                                        },
                                    },
                                    {
                                        key: '_onPointerUpEvent',
                                        value: function _onPointerUpEvent(e) {
                                            for (var t = 0; t < this._evGesturesCache.length; t++)
                                                if (this._evGesturesCache[t].pointerId === e.pointerId) {
                                                    this._evGesturesCache.splice(t, 1);
                                                    break;
                                                }
                                            this._evGesturesCache.length < 2 &&
                                                ((this._prevEventDiff = -1), (this._prevEvGestureSet = []));
                                        },
                                    },
                                    {
                                        key: '_onTouchStartEvent',
                                        value: function _onTouchStartEvent(e) {
                                            (this._prevTouchEvents[0] = e.touches.item(0)),
                                                (this._prevTouchEvents[1] = e.touches.item(1));
                                        },
                                    },
                                    {
                                        key: '_onTouchEndEvent',
                                        value: function _onTouchEndEvent() {
                                            this._prevTouchEvents = [];
                                        },
                                    },
                                    {
                                        key: '_onTouchMoveEvent',
                                        value: function _onTouchMoveEvent(e) {
                                            var t, r;
                                            2 === e.touches.length &&
                                                (2 === this._prevTouchEvents.length &&
                                                    ((r = [e.touches.item(0), e.touches.item(1)]),
                                                    (r = (t = tc(r, this._prevTouchEvents.splice(0), Tr)).getScale()),
                                                    this._addToCommunicationQueue(Ir[e.type], r, t.getFocusPoint(), e)),
                                                (this._prevTouchEvents[0] = e.touches.item(0)),
                                                (this._prevTouchEvents[1] = e.touches.item(1)));
                                        },
                                    },
                                ],
                                [
                                    {
                                        key: 'getDefaultSettings',
                                        value: function getDefaultSettings() {
                                            return xr;
                                        },
                                    },
                                ]
                            ),
                            PinchZoomEventCollector
                        );
                    })();
                function ScriptEventCollector_typeof(e) {
                    return (ScriptEventCollector_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function ScriptEventCollector_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function ScriptEventCollector_setPrototypeOf(e, t) {
                    return (ScriptEventCollector_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function ScriptEventCollector_createSuper(r) {
                    var n = (function ScriptEventCollector_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = ScriptEventCollector_getPrototypeOf(r);
                        return (function ScriptEventCollector_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === ScriptEventCollector_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return ScriptEventCollector_assertThisInitialized(e);
                        })(
                            this,
                            n
                                ? ((e = ScriptEventCollector_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function ScriptEventCollector_assertThisInitialized(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e;
                }
                function ScriptEventCollector_getPrototypeOf(e) {
                    return (ScriptEventCollector_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var jr = { load: 0 },
                    Ur = {
                        configKey: 'isScriptExecuteEve',
                        isDefault: !1,
                        shouldRunPerContext: !1,
                        shouldRunPerSession: !1,
                        shouldRun: !0,
                        isFrameRelated: !1,
                        runInSlave: !1,
                        runInLean: !1,
                        runInUns: !1,
                        isRunning: !1,
                        instance: null,
                    },
                    Nr = [
                        'eventSequence',
                        'timestamp',
                        'eventType',
                        'scriptId',
                        'namespaceURI',
                        'outerHTML',
                        'scriptSource',
                        'scriptType',
                    ],
                    Wr = (function () {
                        !(function ScriptEventCollector_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && ScriptEventCollector_setPrototypeOf(e, t);
                        })(ScriptEventCollector, Ce);
                        var n = ScriptEventCollector_createSuper(ScriptEventCollector);
                        function ScriptEventCollector(e, t) {
                            var r;
                            return (
                                (function ScriptEventCollector_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, ScriptEventCollector),
                                ((r = n.call(this))._onScriptExecuteEventFunc = r._onScriptExecuteEvent.bind(
                                    ScriptEventCollector_assertThisInitialized(r)
                                )),
                                (r._dataQueue = t),
                                (r._utils = e),
                                r
                            );
                        }
                        return (
                            (function ScriptEventCollector_createClass(e, t, r) {
                                t && ScriptEventCollector_defineProperties(e.prototype, t),
                                    r && ScriptEventCollector_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(
                                ScriptEventCollector,
                                [
                                    {
                                        key: '_onScriptExecuteEvent',
                                        value: function _onScriptExecuteEvent(e) {
                                            if (
                                                e &&
                                                e.target &&
                                                ('load' !== e.type || 'script' === e.target.nodeName.toLowerCase())
                                            )
                                                try {
                                                    var t = this.getEventTimestamp(e),
                                                        r = this._utils.StorageUtils.getAndUpdateEventSequenceNumber(),
                                                        n = jr[e.type];
                                                    this._utils.isUndefinedNull(n) && (n = -1),
                                                        b.isDebug() &&
                                                            b.trace(
                                                                'got event ' +
                                                                    e.type +
                                                                    ', ' +
                                                                    n +
                                                                    ', scriptSrc: ' +
                                                                    e.target.src +
                                                                    ' at time ' +
                                                                    t
                                                            ),
                                                        this._dataQueue.addToQueue(
                                                            'script_events',
                                                            this._utils.convertToArrayByMap(Nr, {
                                                                eventSequence: r,
                                                                timestamp: t,
                                                                eventType: n,
                                                                scriptId: e.target.id || '',
                                                                namespaceURI: e.target.namespaceURI || '',
                                                                outerHTML: e.target.outerHTML || '',
                                                                scriptSource: e.target.src || '',
                                                                scriptType: e.target.type || '',
                                                            })
                                                        );
                                                } catch (e) {
                                                    b.error('error on getScriptExecuteEvent '.concat(e.toString()));
                                                }
                                        },
                                    },
                                    {
                                        key: 'startFeature',
                                        value: function startFeature() {
                                            this._utils.addEventListener(
                                                document,
                                                'load',
                                                this._onScriptExecuteEventFunc,
                                                !0
                                            );
                                        },
                                    },
                                    {
                                        key: 'stopFeature',
                                        value: function stopFeature() {
                                            this._utils.removeEventListener(
                                                document,
                                                'load',
                                                this._onScriptExecuteEventFunc,
                                                !0
                                            );
                                        },
                                    },
                                ],
                                [
                                    {
                                        key: 'getDefaultSettings',
                                        value: function getDefaultSettings() {
                                            return Ur;
                                        },
                                    },
                                ]
                            ),
                            ScriptEventCollector
                        );
                    })();
                function NetInfoEventCollector_typeof(e) {
                    return (NetInfoEventCollector_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function NetInfoEventCollector_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function NetInfoEventCollector_setPrototypeOf(e, t) {
                    return (NetInfoEventCollector_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function NetInfoEventCollector_createSuper(r) {
                    var n = (function NetInfoEventCollector_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = NetInfoEventCollector_getPrototypeOf(r);
                        return (function NetInfoEventCollector_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === NetInfoEventCollector_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function NetInfoEventCollector_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = NetInfoEventCollector_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function NetInfoEventCollector_getPrototypeOf(e) {
                    return (NetInfoEventCollector_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var Hr = {
                        configKey: 'isNetInfoEvents',
                        isDefault: !1,
                        shouldRunPerContext: !1,
                        shouldRunPerSession: !1,
                        shouldRun: !0,
                        isFrameRelated: !1,
                        runInSlave: !1,
                        runInLean: !1,
                        runInUns: !1,
                        isRunning: !1,
                        instance: null,
                    },
                    Qr = [
                        'eventSequence',
                        'timestamp',
                        'connectionType',
                        'effectiveType',
                        'downlinkMax',
                        'downlink',
                        'rtt',
                        'isSaveData',
                    ],
                    zr = (function () {
                        !(function NetInfoEventCollector_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && NetInfoEventCollector_setPrototypeOf(e, t);
                        })(NetInfoEventCollector, Ce);
                        var n = NetInfoEventCollector_createSuper(NetInfoEventCollector);
                        function NetInfoEventCollector(e, t) {
                            var r;
                            return (
                                (function NetInfoEventCollector_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, NetInfoEventCollector),
                                ((r = n.call(this))._dataQueue = t),
                                (r._utils = e),
                                (r._connection =
                                    navigator.connection || navigator.mozConnection || navigator.webkitConnection),
                                r
                            );
                        }
                        return (
                            (function NetInfoEventCollector_createClass(e, t, r) {
                                t && NetInfoEventCollector_defineProperties(e.prototype, t),
                                    r && NetInfoEventCollector_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(
                                NetInfoEventCollector,
                                [
                                    {
                                        key: 'onChangeNetworkInfo',
                                        value: function onChangeNetworkInfo() {
                                            b.debug('NetInfoEvents:onChangeNetworkInfo');
                                            var e = this._utils.isUndefinedNull(this._connection.saveData)
                                                    ? ''
                                                    : this._connection.saveData.toString(),
                                                t = this.getEventTimestamp(),
                                                r = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
                                            this._dataQueue.addToQueue(
                                                'net_info_events',
                                                this._utils.convertToArrayByMap(Qr, {
                                                    eventSequence: r,
                                                    timestamp: t,
                                                    connectionType: this._connection.type || '',
                                                    effectiveType: this._connection.effectiveType || '',
                                                    downlinkMax: this._connection.downlinkMax
                                                        ? this._connection.downlinkMax.toString()
                                                        : '',
                                                    downlink: this._connection.downlink
                                                        ? this._connection.downlink.toString()
                                                        : '',
                                                    rtt: this._connection.rtt ? this._connection.rtt.toString() : '',
                                                    isSaveData: e,
                                                })
                                            );
                                        },
                                    },
                                    {
                                        key: 'startFeature',
                                        value: function startFeature() {
                                            this._connection &&
                                                (this._connection.addEventListener(
                                                    'change',
                                                    this.onChangeNetworkInfo.bind(this),
                                                    !0
                                                ),
                                                this.onChangeNetworkInfo());
                                        },
                                    },
                                    {
                                        key: 'stopFeature',
                                        value: function stopFeature() {
                                            this._connection &&
                                                this._connection.removeEventListener(
                                                    'change',
                                                    this.onChangeNetworkInfo.bind(this)
                                                );
                                        },
                                    },
                                ],
                                [
                                    {
                                        key: 'getDefaultSettings',
                                        value: function getDefaultSettings() {
                                            return Hr;
                                        },
                                    },
                                ]
                            ),
                            NetInfoEventCollector
                        );
                    })();
                function DeviceOrientationCollector_typeof(e) {
                    return (DeviceOrientationCollector_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function DeviceOrientationCollector_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function DeviceOrientationCollector_setPrototypeOf(e, t) {
                    return (DeviceOrientationCollector_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function DeviceOrientationCollector_createSuper(r) {
                    var n = (function DeviceOrientationCollector_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = DeviceOrientationCollector_getPrototypeOf(r);
                        return (function DeviceOrientationCollector_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === DeviceOrientationCollector_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return DeviceOrientationCollector_assertThisInitialized(e);
                        })(
                            this,
                            n
                                ? ((e = DeviceOrientationCollector_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function DeviceOrientationCollector_assertThisInitialized(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e;
                }
                function DeviceOrientationCollector_getPrototypeOf(e) {
                    return (DeviceOrientationCollector_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var qr = {
                        configKey: 'isDeviceOrientationEvents',
                        isDefault: !1,
                        shouldRunPerContext: !1,
                        shouldRunPerSession: !1,
                        shouldRun: !0,
                        isFrameRelated: !1,
                        runInSlave: !1,
                        runInLean: !1,
                        runInUns: !1,
                        isRunning: !1,
                        instance: null,
                    },
                    Kr = {
                        undefined: 0,
                        'portrait-primary': 1,
                        'landscape-primary': 2,
                        'portrait-secondary': 3,
                        'landscape-secondary': 4,
                    },
                    Gr = ['eventSequence', 'timestamp', 'orientation'],
                    Vr = (function () {
                        !(function DeviceOrientationCollector_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && DeviceOrientationCollector_setPrototypeOf(e, t);
                        })(DeviceOrientationCollector, Ce);
                        var n = DeviceOrientationCollector_createSuper(DeviceOrientationCollector);
                        function DeviceOrientationCollector(e, t) {
                            var r;
                            return (
                                (function DeviceOrientationCollector_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, DeviceOrientationCollector),
                                ((r = n.call(this))._dataQ = t),
                                (r._utils = e),
                                (r._onDeviceOrientationEventFunc = r._onDeviceOrientationEvent.bind(
                                    DeviceOrientationCollector_assertThisInitialized(r)
                                )),
                                screen.mozOrientation && screen.addEventListener
                                    ? ((r._eventTarget = screen), (r._eventName = 'mozorientationchange'))
                                    : screen.msOrientation && screen.addEventListener
                                    ? ((r._eventTarget = screen), (r._eventName = 'msorientationchange'))
                                    : ((r._eventTarget = window), (r._eventName = 'orientationchange')),
                                r
                            );
                        }
                        return (
                            (function DeviceOrientationCollector_createClass(e, t, r) {
                                t && DeviceOrientationCollector_defineProperties(e.prototype, t),
                                    r && DeviceOrientationCollector_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(
                                DeviceOrientationCollector,
                                [
                                    {
                                        key: 'startFeature',
                                        value: function startFeature() {
                                            this._utils.addEventListener(
                                                this._eventTarget,
                                                this._eventName,
                                                this._onDeviceOrientationEventFunc
                                            ),
                                                this._handleDeviceOrientationEvent(screen);
                                        },
                                    },
                                    {
                                        key: 'stopFeature',
                                        value: function stopFeature() {
                                            this._utils.removeEventListener(
                                                this._eventTarget,
                                                this._eventName,
                                                this._onDeviceOrientationEventFunc
                                            );
                                        },
                                    },
                                    {
                                        key: '_onDeviceOrientationEvent',
                                        value: function _onDeviceOrientationEvent(e) {
                                            e = e && e.target ? e.target.screen || e.target : screen;
                                            this._handleDeviceOrientationEvent(e);
                                        },
                                    },
                                    {
                                        key: '_handleDeviceOrientationEvent',
                                        value: function _handleDeviceOrientationEvent(e) {
                                            var t,
                                                r,
                                                n = e.mozOrientation || e.msOrientation || e.orientation;
                                            void 0 !== n
                                                ? ((t = n.type || n),
                                                  void 0 !== (r = Kr[t])
                                                      ? this._lastDeviceOrientationType !== r &&
                                                        ((e = this.getEventTimestamp()),
                                                        (n =
                                                            this._utils.StorageUtils.getAndUpdateEventSequenceNumber()),
                                                        (this._lastDeviceOrientationType = r),
                                                        b.trace(
                                                            'onDeviceOrientationEvent: Orientation changed to '
                                                                .concat(r, ' at time ')
                                                                .concat(e)
                                                        ),
                                                        this._dataQ.addToQueue(
                                                            'screen_orientation',
                                                            this._utils.convertToArrayByMap(Gr, {
                                                                eventSequence: n,
                                                                timestamp: e,
                                                                orientation: r,
                                                            })
                                                        ))
                                                      : b.error(
                                                            'onDeviceOrientationEvent: Unknown orientation '.concat(
                                                                t,
                                                                ' value.'
                                                            )
                                                        ))
                                                : b.debug('onDeviceOrientationEvent: Unable to find orientation data.');
                                        },
                                    },
                                ],
                                [
                                    {
                                        key: 'getDefaultSettings',
                                        value: function getDefaultSettings() {
                                            return qr;
                                        },
                                    },
                                ]
                            ),
                            DeviceOrientationCollector
                        );
                    })();
                function TapEventCollector_typeof(e) {
                    return (TapEventCollector_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function TapEventCollector_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function TapEventCollector_setPrototypeOf(e, t) {
                    return (TapEventCollector_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function TapEventCollector_createSuper(r) {
                    var n = (function TapEventCollector_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = TapEventCollector_getPrototypeOf(r);
                        return (function TapEventCollector_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === TapEventCollector_typeof(t) || 'function' == typeof t)) return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return TapEventCollector_assertThisInitialized(e);
                        })(
                            this,
                            n
                                ? ((e = TapEventCollector_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function TapEventCollector_assertThisInitialized(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e;
                }
                function TapEventCollector_getPrototypeOf(e) {
                    return (TapEventCollector_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var Xr = {
                        configKey: 'isTapEvents',
                        isDefault: !1,
                        shouldRunPerContext: !1,
                        shouldRunPerSession: !1,
                        shouldRun: !0,
                        isFrameRelated: !0,
                        runInSlave: !0,
                        runInLean: !0,
                        runInUns: !1,
                        isRunning: !1,
                        instance: null,
                    },
                    Zr = 20,
                    Yr = 500,
                    Jr = [
                        'eventSequence',
                        'timestamp',
                        'screenX',
                        'screenY',
                        'pageX',
                        'pageY',
                        'clientX',
                        'clientY',
                        'isTrusted',
                        'elementHash',
                        'touchIndex',
                        'touchSizeMajor',
                        'touchSizeMinor',
                    ],
                    $r = [
                        'eventSequence',
                        'timestamp',
                        'screenX',
                        'screenY',
                        'pageX',
                        'pageY',
                        'clientX',
                        'clientY',
                        'isTrusted',
                        'elementHash',
                        'touchIndex',
                        'touchSizeMajor',
                        'touchSizeMinor',
                    ],
                    en = (function () {
                        !(function TapEventCollector_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && TapEventCollector_setPrototypeOf(e, t);
                        })(TapEventCollector, Ce);
                        var i = TapEventCollector_createSuper(TapEventCollector);
                        function TapEventCollector(e, t, r, n) {
                            var o;
                            return (
                                (function TapEventCollector_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, TapEventCollector),
                                ((o = i.call(this))._configurationRepository = e),
                                (o._utils = t),
                                (o._dataQ = n),
                                (o._elements = r),
                                (o._activeTouchActions = {}),
                                (o._tapMaxSlop = o._configurationRepository.get('tapEventsTapMaxSlop') || Zr),
                                (o._longPressTimeout =
                                    o._configurationRepository.get('tapEventsLongPressTimeout') || Yr),
                                (o._handleStartEventBind = o._handleStartEvent.bind(
                                    TapEventCollector_assertThisInitialized(o)
                                )),
                                (o._handleMoveEventBind = o._handleMoveEvent.bind(
                                    TapEventCollector_assertThisInitialized(o)
                                )),
                                (o._handleEndEventBind = o._handleEndEvent.bind(
                                    TapEventCollector_assertThisInitialized(o)
                                )),
                                (o._handleCancelEventBind = o._handleCancelEvent.bind(
                                    TapEventCollector_assertThisInitialized(o)
                                )),
                                (o._eventDefinitions = TapEventCollector.getSupportedTouchEvents()),
                                o
                            );
                        }
                        return (
                            (function TapEventCollector_createClass(e, t, r) {
                                t && TapEventCollector_defineProperties(e.prototype, t),
                                    r && TapEventCollector_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(
                                TapEventCollector,
                                [
                                    {
                                        key: 'startFeature',
                                        value: function startFeature(e) {
                                            this._bind(e);
                                        },
                                    },
                                    {
                                        key: 'stopFeature',
                                        value: function stopFeature(e) {
                                            this._unbind(e);
                                        },
                                    },
                                    {
                                        key: 'updateFeatureConfig',
                                        value: function updateFeatureConfig() {
                                            (this._tapMaxSlop =
                                                void 0 !== this._configurationRepository.get('tapEventsTapMaxSlop')
                                                    ? this._configurationRepository.get('tapEventsTapMaxSlop')
                                                    : this._tapMaxSlop),
                                                (this._longPressTimeout =
                                                    void 0 !==
                                                    this._configurationRepository.get('tapEventsLongPressTimeout')
                                                        ? this._configurationRepository.get('tapEventsLongPressTimeout')
                                                        : this._longPressTimeout);
                                        },
                                    },
                                    {
                                        key: '_bind',
                                        value: function _bind(e) {
                                            this._eventDefinitions
                                                ? ((e = e.getDocument()),
                                                  this._utils.addEventListener(
                                                      e,
                                                      this._eventDefinitions.startEvent,
                                                      this._handleStartEventBind
                                                  ),
                                                  this._utils.addEventListener(
                                                      e,
                                                      this._eventDefinitions.moveEvent,
                                                      this._handleMoveEventBind
                                                  ),
                                                  this._utils.addEventListener(
                                                      e,
                                                      this._eventDefinitions.endEvent,
                                                      this._handleEndEventBind
                                                  ),
                                                  this._utils.addEventListener(
                                                      e,
                                                      this._eventDefinitions.cancelEvent,
                                                      this._handleCancelEventBind
                                                  ))
                                                : b.debug(
                                                      'TapEvents:_bind - No event definitions. Might be a legacy browser. Aborting bind operation.'
                                                  );
                                        },
                                    },
                                    {
                                        key: '_unbind',
                                        value: function _unbind(e) {
                                            this._eventDefinitions &&
                                                ((e = e.getDocument()),
                                                this._utils.removeEventListener(
                                                    e,
                                                    this._eventDefinitions.startEvent,
                                                    this._handleStartEventBind
                                                ),
                                                this._utils.removeEventListener(
                                                    e,
                                                    this._eventDefinitions.moveEvent,
                                                    this._handleMoveEventBind
                                                ),
                                                this._utils.removeEventListener(
                                                    e,
                                                    this._eventDefinitions.endEvent,
                                                    this._handleEndEventBind
                                                ),
                                                this._utils.removeEventListener(
                                                    e,
                                                    this._eventDefinitions.cancelEvent,
                                                    this._handleCancelEventBind
                                                ));
                                        },
                                    },
                                    {
                                        key: '_handleStartEvent',
                                        value: function _handleStartEvent(e) {
                                            for (var t = this._getEventData(e), r = 0; r < t.length; r++)
                                                this._activeTouchActions[t[r].identifier] = {
                                                    startTime: this.getEventTimestamp(),
                                                    startX: t[r].touchData.pageX,
                                                    startY: t[r].touchData.pageY,
                                                    offsetX: 0,
                                                    offsetY: 0,
                                                };
                                        },
                                    },
                                    {
                                        key: '_handleMoveEvent',
                                        value: function _handleMoveEvent(e) {
                                            for (var t = this._getEventData(e), r = 0; r < t.length; r++) {
                                                var n = this._activeTouchActions[t[r].identifier];
                                                n &&
                                                    ((n.offsetX = Math.abs(t[r].touchData.pageX - n.startX)),
                                                    (n.offsetY = Math.abs(t[r].touchData.pageY - n.startY)));
                                            }
                                        },
                                    },
                                    {
                                        key: '_handleEndEvent',
                                        value: function _handleEndEvent(e) {
                                            for (var t = this._getEventData(e), r = 0; r < t.length; r++) {
                                                var n = this._activeTouchActions[t[r].identifier];
                                                n &&
                                                    (n.offsetX < this._tapMaxSlop &&
                                                        n.offsetY < this._tapMaxSlop &&
                                                        (this.getEventTimestamp() - n.startTime < this._longPressTimeout
                                                            ? this._sendEvent(
                                                                  'tap_events',
                                                                  Jr,
                                                                  t[r].identifier,
                                                                  t[r].touchData,
                                                                  t[r].eventArgs
                                                              )
                                                            : this._sendEvent(
                                                                  'longpress_events',
                                                                  $r,
                                                                  t[r].identifier,
                                                                  t[r].touchData,
                                                                  t[r].eventArgs
                                                              )),
                                                    delete this._activeTouchActions[t[r].identifier]);
                                            }
                                        },
                                    },
                                    {
                                        key: '_handleCancelEvent',
                                        value: function _handleCancelEvent(e) {
                                            for (var t = this._getEventData(e), r = 0; r < t.length; r++)
                                                delete this._activeTouchActions[t[r].identifier];
                                        },
                                    },
                                    {
                                        key: '_getEventData',
                                        value: function _getEventData(e) {
                                            if (void 0 !== e.changedTouches) {
                                                for (var t = [], r = 0; r < e.changedTouches.length; r++) {
                                                    var n = e.changedTouches[r],
                                                        o = n.identifier;
                                                    t.push({ identifier: o, touchData: n, eventArgs: e });
                                                }
                                                return t;
                                            }
                                            if (
                                                null != e.pointerType &&
                                                ('touch' === e.pointerType ||
                                                    'pen' === e.pointerType ||
                                                    e.pointerType === e.MSPOINTER_TYPE_TOUCH ||
                                                    e.pointerType === e.MSPOINTER_TYPE_PEN)
                                            )
                                                return [{ identifier: e.pointerId || 0, touchData: e, eventArgs: e }];
                                            return [];
                                        },
                                    },
                                    {
                                        key: '_sendEvent',
                                        value: function _sendEvent(e, t, r, n, o) {
                                            var i = this.getEventTimestamp(),
                                                s = we[o.isTrusted],
                                                a = this._elements.getElement(o.target),
                                                o = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
                                            this._utils.isUndefinedNull(r) && (r = 0),
                                                this._dataQ.addToQueue(
                                                    e,
                                                    this._utils.convertToArrayByMap(t, {
                                                        eventSequence: o,
                                                        timestamp: i,
                                                        screenX: n.screenX ? Math.round(n.screenX) : 0,
                                                        screenY: n.screenY ? Math.round(n.screenY) : 0,
                                                        pageX: n.pageX || 0,
                                                        pageY: n.pageY || 0,
                                                        clientX: n.clientX || 0,
                                                        clientY: n.clientY || 0,
                                                        isTrusted: s,
                                                        elementHash: a,
                                                        touchIndex: r % 1e4,
                                                        touchSizeMajor: n.radiusX ? 2 * n.radiusX : 0,
                                                        touchSizeMinor: n.radiusY ? 2 * n.radiusY : 0,
                                                    })
                                                );
                                        },
                                    },
                                ],
                                [
                                    {
                                        key: 'getDefaultSettings',
                                        value: function getDefaultSettings() {
                                            return Xr;
                                        },
                                    },
                                    {
                                        key: 'getSupportedTouchEvents',
                                        value: function getSupportedTouchEvents() {
                                            return window.TouchEvent
                                                ? {
                                                      startEvent: 'touchstart',
                                                      moveEvent: 'touchmove',
                                                      endEvent: 'touchend',
                                                      cancelEvent: 'touchcancel',
                                                  }
                                                : window.PointerEvent
                                                ? {
                                                      startEvent: 'pointerdown',
                                                      moveEvent: 'pointermove',
                                                      endEvent: 'pointerup',
                                                      cancelEvent: 'pointercancel',
                                                  }
                                                : void b.debug(
                                                      'TapEvents:_createEventsToListenList - No touch support for browser.'
                                                  );
                                        },
                                    },
                                ]
                            ),
                            TapEventCollector
                        );
                    })();
                function StorageEventCollector_typeof(e) {
                    return (StorageEventCollector_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function StorageEventCollector_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function StorageEventCollector_setPrototypeOf(e, t) {
                    return (StorageEventCollector_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function StorageEventCollector_createSuper(r) {
                    var n = (function StorageEventCollector_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = StorageEventCollector_getPrototypeOf(r);
                        return (function StorageEventCollector_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === StorageEventCollector_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return StorageEventCollector_assertThisInitialized(e);
                        })(
                            this,
                            n
                                ? ((e = StorageEventCollector_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function StorageEventCollector_assertThisInitialized(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e;
                }
                function StorageEventCollector_getPrototypeOf(e) {
                    return (StorageEventCollector_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var tn = {
                        configKey: 'isStorageEvents',
                        isDefault: !1,
                        shouldRunPerContext: !1,
                        shouldRunPerSession: !1,
                        shouldRun: !1,
                        isFrameRelated: !1,
                        runInSlave: !1,
                        runInLean: !1,
                        runInUns: !1,
                        isRunning: !1,
                        instance: null,
                    },
                    rn = 0,
                    nn = ['eventSequence', 'timestamp', 'keys', 'action', 'tabsOpened'],
                    on = (function () {
                        !(function StorageEventCollector_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && StorageEventCollector_setPrototypeOf(e, t);
                        })(StorageEventCollector, Ce);
                        var i = StorageEventCollector_createSuper(StorageEventCollector);
                        function StorageEventCollector(e, t, r, n) {
                            var o;
                            return (
                                (function StorageEventCollector_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, StorageEventCollector),
                                ((o = i.call(this))._utils = e),
                                (o._dataQ = r),
                                (o._elements = t),
                                (o._msgBus = n),
                                (o._onAllStorageEventBinded = o._onAllStorageEvent.bind(
                                    StorageEventCollector_assertThisInitialized(o)
                                )),
                                o
                            );
                        }
                        return (
                            (function StorageEventCollector_createClass(e, t, r) {
                                t && StorageEventCollector_defineProperties(e.prototype, t),
                                    r && StorageEventCollector_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(
                                StorageEventCollector,
                                [
                                    {
                                        key: 'startFeature',
                                        value: function startFeature(e) {
                                            this._bind(e);
                                        },
                                    },
                                    {
                                        key: 'stopFeature',
                                        value: function stopFeature(e) {
                                            this._unbind(e);
                                        },
                                    },
                                    {
                                        key: '_addToCommunicationQueue',
                                        value: function _addToCommunicationQueue(e, t, r, n, o) {
                                            e === rn && this._msgBus.publish('storageEvent', { action: e });
                                            (e = this.getEventTimestamp(o)),
                                                (o = this._utils.StorageUtils.getAndUpdateEventSequenceNumber());
                                            this._dataQ.addToQueue(
                                                'storage_events',
                                                this._utils.convertToArrayByMap(nn, {
                                                    eventSequence: o,
                                                    timestamp: e,
                                                    keys: t,
                                                    action: r,
                                                    tabsOpened: n,
                                                })
                                            );
                                        },
                                    },
                                    {
                                        key: '_bind',
                                        value: function _bind(e) {
                                            var t,
                                                r = e.Context;
                                            if (
                                                ((r.localStorage || r.sessionStorage) && (t = ['storage']),
                                                (this._listeningToEvents = t),
                                                0 < this._listeningToEvents.length)
                                            )
                                                for (var n = 0; n < this._listeningToEvents.length; n++)
                                                    this._utils.addEventListener(
                                                        r,
                                                        this._listeningToEvents[n],
                                                        this._onAllStorageEventBinded,
                                                        !0
                                                    );
                                        },
                                    },
                                    {
                                        key: '_unbind',
                                        value: function _unbind(e) {
                                            if (this._listeningToEvents)
                                                for (var t = 0; t < this._listeningToEvents.length; t++)
                                                    this._utils.removeEventListener(
                                                        e.Context,
                                                        this._listeningToEvents[t],
                                                        this._onAllStorageEventBinded,
                                                        !0
                                                    );
                                        },
                                    },
                                    {
                                        key: '_onAllStorageEvent',
                                        value: function _onAllStorageEvent(e) {
                                            return 'storage' === e.type && this._onStorageEvent(e), !0;
                                        },
                                    },
                                    {
                                        key: '_onStorageEvent',
                                        value: function _onStorageEvent(e) {
                                            var t = !1,
                                                r = null,
                                                n = null;
                                            null === e.key && (r = null),
                                                (n =
                                                    'string' == typeof e.key && null === e.newValue
                                                        ? ((r = e.key), 'delete')
                                                        : ((r = e.key), 'update'));
                                            var o = this._utils.StorageUtils.getFromLocalStorage('cdTabList');
                                            o && 'object' === StorageEventCollector_typeof(o[0]) && (t = !0),
                                                (t = t ? 1 : 0),
                                                this._addToCommunicationQueue(e.type, r, n, t, e);
                                        },
                                    },
                                ],
                                [
                                    {
                                        key: 'getDefaultSettings',
                                        value: function getDefaultSettings() {
                                            return tn;
                                        },
                                    },
                                ]
                            ),
                            StorageEventCollector
                        );
                    })();
                function PrintEventCollector_typeof(e) {
                    return (PrintEventCollector_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function PrintEventCollector_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function PrintEventCollector_setPrototypeOf(e, t) {
                    return (PrintEventCollector_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function PrintEventCollector_createSuper(r) {
                    var n = (function PrintEventCollector_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = PrintEventCollector_getPrototypeOf(r);
                        return (function PrintEventCollector_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === PrintEventCollector_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return PrintEventCollector_assertThisInitialized(e);
                        })(
                            this,
                            n
                                ? ((e = PrintEventCollector_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function PrintEventCollector_assertThisInitialized(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e;
                }
                function PrintEventCollector_getPrototypeOf(e) {
                    return (PrintEventCollector_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var sn = {
                        configKey: 'isPrintEvents',
                        isDefault: !1,
                        shouldRunPerContext: !1,
                        shouldRunPerSession: !1,
                        shouldRun: !1,
                        isFrameRelated: !1,
                        runInSlave: !1,
                        runInLean: !1,
                        runInUns: !1,
                        isRunning: !1,
                        instance: null,
                    },
                    an = 1,
                    un = 0,
                    cn = ['eventSequence', 'timestamp', 'printDialogState'],
                    ln = (function () {
                        !(function PrintEventCollector_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && PrintEventCollector_setPrototypeOf(e, t);
                        })(PrintEventCollector, Ce);
                        var n = PrintEventCollector_createSuper(PrintEventCollector);
                        function PrintEventCollector(e, t) {
                            var r;
                            return (
                                (function PrintEventCollector_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, PrintEventCollector),
                                ((r = n.call(this))._utils = e),
                                (r._dataQueue = t),
                                (r._addToEventQueueFunc = r._addToEventQueue.bind(
                                    PrintEventCollector_assertThisInitialized(r)
                                )),
                                (r._myAfterPrintFunc = r._myAfterPrint.bind(
                                    PrintEventCollector_assertThisInitialized(r)
                                )),
                                r
                            );
                        }
                        return (
                            (function PrintEventCollector_createClass(e, t, r) {
                                t && PrintEventCollector_defineProperties(e.prototype, t),
                                    r && PrintEventCollector_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(
                                PrintEventCollector,
                                [
                                    {
                                        key: '_myAfterPrint',
                                        value: function _myAfterPrint() {
                                            this._addToEventQueueFunc(un),
                                                window.removeEventListener('focus', this._myAfterPrintFunc);
                                        },
                                    },
                                    {
                                        key: '_onBeforePrintEvent',
                                        value: function _onBeforePrintEvent() {
                                            this._addToEventQueueFunc(an),
                                                this._utils.addEventListener(
                                                    window,
                                                    'focus',
                                                    this._myAfterPrintFunc.bind(this)
                                                );
                                        },
                                    },
                                    {
                                        key: '_addToEventQueue',
                                        value: function _addToEventQueue(e) {
                                            var t = this.getEventTimestamp(),
                                                r = this._utils.StorageUtils.getAndUpdateEventSequenceNumber();
                                            this._dataQueue.addToQueue(
                                                'print_events',
                                                this._utils.convertToArrayByMap(cn, {
                                                    eventSequence: r,
                                                    timestamp: t,
                                                    printDialogState: e,
                                                })
                                            );
                                        },
                                    },
                                    {
                                        key: 'startFeature',
                                        value: function startFeature() {
                                            this._utils.addEventListener(
                                                window,
                                                'beforeprint',
                                                this._onBeforePrintEvent.bind(this)
                                            );
                                        },
                                    },
                                    {
                                        key: 'stopFeature',
                                        value: function stopFeature() {
                                            this._utils.removeEventListener(
                                                window,
                                                'beforeprint',
                                                this._onBeforePrintEvent.bind(this),
                                                !0
                                            );
                                        },
                                    },
                                ],
                                [
                                    {
                                        key: 'getDefaultSettings',
                                        value: function getDefaultSettings() {
                                            return sn;
                                        },
                                    },
                                ]
                            ),
                            PrintEventCollector
                        );
                    })();
                function LightSensorEventCollector_typeof(e) {
                    return (LightSensorEventCollector_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function LightSensorEventCollector_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function LightSensorEventCollector_setPrototypeOf(e, t) {
                    return (LightSensorEventCollector_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function LightSensorEventCollector_createSuper(r) {
                    var n = (function LightSensorEventCollector_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = LightSensorEventCollector_getPrototypeOf(r);
                        return (function LightSensorEventCollector_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === LightSensorEventCollector_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function LightSensorEventCollector_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = LightSensorEventCollector_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function LightSensorEventCollector_getPrototypeOf(e) {
                    return (LightSensorEventCollector_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var fn = {
                        configKey: 'isLightSensor',
                        isDefault: !1,
                        shouldRunPerContext: !1,
                        shouldRunPerSession: !1,
                        shouldRun: !1,
                        isFrameRelated: !1,
                        runInSlave: !1,
                        runInLean: !1,
                        runInUns: !1,
                        isRunning: !1,
                        instance: null,
                    },
                    pn = 5e3,
                    dn = ['eventSequence', 'timestamp', 'illuminance'],
                    hn = (function () {
                        !(function LightSensorEventCollector_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && LightSensorEventCollector_setPrototypeOf(e, t);
                        })(LightSensorEvents, Ce);
                        var o = LightSensorEventCollector_createSuper(LightSensorEvents);
                        function LightSensorEvents(e, t, r) {
                            var n;
                            return (
                                (function LightSensorEventCollector_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, LightSensorEvents),
                                ((n = o.call(this))._dataQueue = e),
                                (n._utils = t),
                                (n._configurationRepository = r),
                                (n._eventThreshold = n._configurationRepository.get('lightSensorEventThreshold') || pn),
                                (n._lastTime = 0),
                                n
                            );
                        }
                        return (
                            (function LightSensorEventCollector_createClass(e, t, r) {
                                t && LightSensorEventCollector_defineProperties(e.prototype, t),
                                    r && LightSensorEventCollector_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(
                                LightSensorEvents,
                                [
                                    {
                                        key: '_onReadingSensor',
                                        value: function _onReadingSensor() {
                                            var e,
                                                t = this.getEventTimestamp();
                                            t - this._lastTime > this._eventThreshold &&
                                                ((e = this._utils.StorageUtils.getAndUpdateEventSequenceNumber()),
                                                (this._lastTime = t),
                                                this._dataQueue.addToQueue(
                                                    'ambient_light_level',
                                                    this._utils.convertToArrayByMap(dn, {
                                                        eventSequence: e,
                                                        timestamp: t,
                                                        illuminance: this._sensor.illuminance,
                                                    })
                                                ));
                                        },
                                    },
                                    {
                                        key: 'startFeature',
                                        value: function startFeature() {
                                            window.AmbientLightSensor
                                                ? (b.info('AmbientLightSensor exists and collected'),
                                                  (this._sensor = new AmbientLightSensor()),
                                                  this._utils.addEventListener(
                                                      this._sensor,
                                                      'reading',
                                                      this._onReadingSensor.bind(this)
                                                  ),
                                                  this._utils.addEventListener(
                                                      this._sensor,
                                                      'error',
                                                      LightSensorEvents._onSensorError
                                                  ),
                                                  this._sensor.start())
                                                : b.debug('LightSensor does not exist, not collecting');
                                        },
                                    },
                                    {
                                        key: 'stopFeature',
                                        value: function stopFeature() {
                                            this._sensor &&
                                                (this._utils.removeEventListener(
                                                    this._sensor,
                                                    'reading',
                                                    this._onReadingSensor.bind(this)
                                                ),
                                                this._utils.removeEventListener(
                                                    this._sensor,
                                                    'error',
                                                    LightSensorEvents._onSensorError
                                                ),
                                                (this._sensor = null));
                                        },
                                    },
                                    {
                                        key: 'updateFeatureConfig',
                                        value: function updateFeatureConfig() {
                                            this._eventThreshold = this._configurationRepository.get(
                                                'lightSensorEventThreshold'
                                            )
                                                ? this._configurationRepository.get('lightSensorEventThreshold')
                                                : this._eventThreshold;
                                        },
                                    },
                                ],
                                [
                                    {
                                        key: 'getDefaultSettings',
                                        value: function getDefaultSettings() {
                                            return fn;
                                        },
                                    },
                                    {
                                        key: '_onSensorError',
                                        value: function _onSensorError(e) {
                                            b.debug('Error connecting LightSensor '.concat(e.error));
                                        },
                                    },
                                ]
                            ),
                            LightSensorEvents
                        );
                    })();
                function MouseEventCollector_typeof(e) {
                    return (MouseEventCollector_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function MouseEventCollector_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function MouseEventCollector_setPrototypeOf(e, t) {
                    return (MouseEventCollector_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function MouseEventCollector_createSuper(r) {
                    var n = (function MouseEventCollector_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = MouseEventCollector_getPrototypeOf(r);
                        return (function MouseEventCollector_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === MouseEventCollector_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return MouseEventCollector_assertThisInitialized(e);
                        })(
                            this,
                            n
                                ? ((e = MouseEventCollector_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function MouseEventCollector_assertThisInitialized(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e;
                }
                function MouseEventCollector_getPrototypeOf(e) {
                    return (MouseEventCollector_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                function MouseEventCollector_defineProperty(e, t, r) {
                    return (
                        t in e
                            ? Object.defineProperty(e, t, { value: r, enumerable: !0, configurable: !0, writable: !0 })
                            : (e[t] = r),
                        e
                    );
                }
                var vn = {
                        configKey: 'isMouseEvents',
                        isDefault: !0,
                        shouldRunPerContext: !1,
                        shouldRunPerSession: !1,
                        shouldRun: !0,
                        isFrameRelated: !0,
                        runInSlave: !0,
                        runInLean: !0,
                        runInUns: !1,
                        isRunning: !1,
                        instance: null,
                    },
                    yn = {
                        mousemove: 0,
                        mousedown: 1,
                        mouseup: 2,
                        click: 3,
                        dblclick: 4,
                        mouseleave: 5,
                        mouseenter: 6,
                        wheel: 7,
                        mouseout: 8,
                        mouseover: 9,
                    },
                    _n = (function () {
                        !(function MouseEventCollector_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && MouseEventCollector_setPrototypeOf(e, t);
                        })(MouseEventCollector, Ce);
                        var s = MouseEventCollector_createSuper(MouseEventCollector);
                        function MouseEventCollector(e, t, r, n, o) {
                            var i;
                            return (
                                (function MouseEventCollector_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, MouseEventCollector),
                                MouseEventCollector_defineProperty(
                                    MouseEventCollector_assertThisInitialized((i = s.call(this))),
                                    '_lastButton',
                                    void 0
                                ),
                                MouseEventCollector_defineProperty(
                                    MouseEventCollector_assertThisInitialized(i),
                                    '_getMouseEvent',
                                    function (e) {
                                        var t = e.which;
                                        'mouseup' === e.type
                                            ? (i._lastButton = t)
                                            : 'click' === e.type && 0 === t && (t = i._lastButton);
                                        var r = yn[e.type];
                                        i._utils.isUndefinedNull(r) && (r = -1);
                                        var n = e.deltaY || e.deltaX || e.deltaZ || e.wheelDelta || 0,
                                            o = i.getTimestampFromEvent(e);
                                        i._dataQueue.addToQueue('mouse_events', [
                                            null,
                                            i._utils.StorageUtils.getAndUpdateEventSequenceNumber(),
                                            i.getEventTimestamp(e),
                                            r,
                                            we[e.isTrusted],
                                            'mousemove' === e.type ? 0 : i._elements.getElement(e.target),
                                            i._getMouseCoordinates(e.pageX),
                                            i._getMouseCoordinates(e.pageY),
                                            i._getMouseCoordinates(e.screenX),
                                            i._getMouseCoordinates(e.screenY),
                                            null == t ? -1 : t,
                                            Math.round(n),
                                            e.clientX ? Math.round(e.clientX) : -1,
                                            e.clientY ? Math.round(e.clientY) : -1,
                                            e.detail || 0,
                                            null === e.button || void 0 === e.button ? -1 : e.button,
                                            o,
                                        ]);
                                    }
                                ),
                                (i._utils = e),
                                (i._domUtils = t),
                                (i._elements = r),
                                (i._dataQueue = n),
                                (i._configurationRepository = o),
                                i
                            );
                        }
                        return (
                            (function MouseEventCollector_createClass(e, t, r) {
                                t && MouseEventCollector_defineProperties(e.prototype, t),
                                    r && MouseEventCollector_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(
                                MouseEventCollector,
                                [
                                    {
                                        key: 'startFeature',
                                        value: function startFeature(e) {
                                            var t = this;
                                            try {
                                                var r = e.getDocument();
                                                this._domUtils.addEventListener(
                                                    r,
                                                    'mousemove',
                                                    this._getMouseEvent,
                                                    !0
                                                ),
                                                    this._domUtils.addEventListener(
                                                        r,
                                                        'mousedown',
                                                        this._getMouseEvent,
                                                        !0
                                                    ),
                                                    this._domUtils.addEventListener(
                                                        r,
                                                        'mouseup',
                                                        this._getMouseEvent,
                                                        !0
                                                    ),
                                                    this._domUtils.addEventListener(
                                                        r,
                                                        'click',
                                                        this._getMouseEvent,
                                                        !0
                                                    ),
                                                    this._domUtils.addEventListener(
                                                        r,
                                                        'dblclick',
                                                        this._getMouseEvent,
                                                        !0
                                                    ),
                                                    (this._isIE =
                                                        !!r.documentMode ||
                                                        /edge/.test(window.navigator.userAgent.toLowerCase())),
                                                    this._isIE
                                                        ? this._domUtils.onDocumentBody(e.Context, function () {
                                                              t._domUtils.addEventListener(
                                                                  r.body,
                                                                  'mouseleave',
                                                                  t._getMouseEvent
                                                              ),
                                                                  t._domUtils.addEventListener(
                                                                      r.body,
                                                                      'mouseenter',
                                                                      t._getMouseEvent
                                                                  );
                                                          })
                                                        : (this._domUtils.addEventListener(
                                                              r,
                                                              'mouseleave',
                                                              this._getMouseEvent
                                                          ),
                                                          this._domUtils.addEventListener(
                                                              r,
                                                              'mouseenter',
                                                              this._getMouseEvent
                                                          )),
                                                    this._domUtils.addEventListener(
                                                        r,
                                                        'wheel',
                                                        this._getMouseEvent,
                                                        !0
                                                    );
                                            } catch (e) {
                                                b.error('MouseEvents:startFeature failed. msg: '.concat(e.message), e);
                                            }
                                        },
                                    },
                                    {
                                        key: 'stopFeature',
                                        value: function stopFeature(e) {
                                            try {
                                                var t = e.getDocument();
                                                this._domUtils.removeEventListener(
                                                    t,
                                                    'mousemove',
                                                    this._getMouseEvent,
                                                    !0
                                                ),
                                                    this._domUtils.removeEventListener(
                                                        t,
                                                        'mousedown',
                                                        this._getMouseEvent,
                                                        !0
                                                    ),
                                                    this._domUtils.removeEventListener(
                                                        t,
                                                        'mouseup',
                                                        this._getMouseEvent,
                                                        !0
                                                    ),
                                                    this._domUtils.removeEventListener(
                                                        t,
                                                        'click',
                                                        this._getMouseEvent,
                                                        !0
                                                    ),
                                                    this._domUtils.removeEventListener(
                                                        t,
                                                        'dblclick',
                                                        this._getMouseEvent,
                                                        !0
                                                    ),
                                                    this._isIE
                                                        ? (this._domUtils.removeEventListener(
                                                              t.body,
                                                              'mouseleave',
                                                              this._getMouseEvent
                                                          ),
                                                          this._domUtils.removeEventListener(
                                                              t.body,
                                                              'mouseenter',
                                                              this._getMouseEvent
                                                          ))
                                                        : (this._domUtils.removeEventListener(
                                                              t,
                                                              'mouseleave',
                                                              this._getMouseEvent
                                                          ),
                                                          this._domUtils.removeEventListener(
                                                              t,
                                                              'mouseenter',
                                                              this._getMouseEvent
                                                          )),
                                                    this._domUtils.removeEventListener(
                                                        t,
                                                        'wheel',
                                                        this._getMouseEvent,
                                                        !0
                                                    );
                                            } catch (e) {
                                                b.error('MouseEvents:stopFeature failed. msg: '.concat(e.message), e);
                                            }
                                        },
                                    },
                                    {
                                        key: '_getMouseCoordinates',
                                        value: function _getMouseCoordinates(e) {
                                            return this._getConfigurationKey() ? -1e3 : e ? Math.round(e) : -1;
                                        },
                                    },
                                    {
                                        key: '_getConfigurationKey',
                                        value: function _getConfigurationKey() {
                                            return this._configurationRepository.get(y.enableCoordinatesMasking);
                                        },
                                    },
                                ],
                                [
                                    {
                                        key: 'getDefaultSettings',
                                        value: function getDefaultSettings() {
                                            return vn;
                                        },
                                    },
                                ]
                            ),
                            MouseEventCollector
                        );
                    })();
                function TabEventCollector_typeof(e) {
                    return (TabEventCollector_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function TabEventCollector_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function TabEventCollector_setPrototypeOf(e, t) {
                    return (TabEventCollector_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function TabEventCollector_createSuper(r) {
                    var n = (function TabEventCollector_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = TabEventCollector_getPrototypeOf(r);
                        return (function TabEventCollector_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === TabEventCollector_typeof(t) || 'function' == typeof t)) return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function TabEventCollector_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = TabEventCollector_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function TabEventCollector_getPrototypeOf(e) {
                    return (TabEventCollector_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var gn = {
                        configKey: 'isTabsEvents',
                        isDefault: !0,
                        shouldRunPerContext: !1,
                        shouldRunPerSession: !1,
                        shouldRun: !0,
                        isFrameRelated: !1,
                        runInSlave: !1,
                        runInLean: !1,
                        runInUns: !1,
                        isRunning: !1,
                        instance: null,
                    },
                    mn = 0,
                    bn = 1,
                    Cn = 2,
                    wn = ['eventSequence', 'timestamp', 'type', 'id', 'href', 'referrer', 'currentTabsList'],
                    En = (function () {
                        !(function TabEventCollector_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && TabEventCollector_setPrototypeOf(e, t);
                        })(TabEventCollector, Ce);
                        var n = TabEventCollector_createSuper(TabEventCollector);
                        function TabEventCollector(e, t) {
                            var r;
                            return (
                                (function TabEventCollector_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, TabEventCollector),
                                ((r = n.call(this))._utils = e),
                                (r._currState = null),
                                (r._dataQueue = t),
                                (r._tabData = { id: '', openTabTS: 0 }),
                                r
                            );
                        }
                        return (
                            (function TabEventCollector_createClass(e, t, r) {
                                t && TabEventCollector_defineProperties(e.prototype, t),
                                    r && TabEventCollector_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(
                                TabEventCollector,
                                [
                                    {
                                        key: 'startFeature',
                                        value: function startFeature() {
                                            b.info('Starting tab events feature'),
                                                this._initTabInfo(),
                                                this._utils.addEventListener(
                                                    window,
                                                    'beforeunload',
                                                    this._onUnloadTab.bind(this)
                                                );
                                        },
                                    },
                                    {
                                        key: 'stopFeature',
                                        value: function stopFeature() {
                                            b.info('Stopping tab events feature'),
                                                this._utils.removeEventListener(
                                                    window,
                                                    'beforeunload',
                                                    this._onUnloadTab.bind(this)
                                                );
                                        },
                                    },
                                    {
                                        key: '_initTabInfo',
                                        value: function _initTabInfo() {
                                            var e =
                                                    (e = this._utils.StorageUtils.getFromLocalStorage('cdTabList')) ||
                                                    [],
                                                t = mn;
                                            (this._tabData =
                                                this._utils.StorageUtils.getFromSessionStorage('cdTabData') ||
                                                this._tabData.id),
                                                this._tabData || (this._updateTabData(), (t = bn));
                                            for (var r = -1, n = 0, o = e.length; n < o; n++)
                                                if (e[n][0] === this._tabData.id) {
                                                    r = n;
                                                    break;
                                                }
                                            (-1 !== r && r !== e.length) ||
                                                (e.push([this._tabData.id, this._tabData.openTabTS]),
                                                this._utils.StorageUtils.saveToLocalStorage('cdTabList', e),
                                                b.debug(
                                                    'added tab to list. ' + this._tabData.id + ', tab index=' + e.length
                                                ));
                                            var i = this._utils.getDocUrl(),
                                                s = this._utils.StorageUtils.getAndUpdateEventSequenceNumber(),
                                                a = JSON.stringify(e);
                                            this._dataQueue.addToQueue(
                                                'tab_events',
                                                this._utils.convertToArrayByMap(wn, {
                                                    eventSequence: s,
                                                    timestamp: this._tabData.openTabTS,
                                                    type: t,
                                                    id: this._tabData.id || '',
                                                    href: i || '',
                                                    referrer: this._utils.clearTextFromNumbers(document.referrer),
                                                    currentTabsList: a || '',
                                                })
                                            );
                                        },
                                    },
                                    {
                                        key: '_onUnloadTab',
                                        value: function _onUnloadTab() {
                                            var e =
                                                    (e = this._utils.StorageUtils.getFromLocalStorage('cdTabList')) ||
                                                    [],
                                                t = this.getEventTimestamp(),
                                                r = this._utils.StorageUtils.getAndUpdateEventSequenceNumber(),
                                                n = this._utils.getDocUrl(),
                                                o = Cn,
                                                i = JSON.stringify(e);
                                            b.debug(
                                                'removing tab from list. id:'
                                                    .concat(this._tabData.id, ', timestamp:')
                                                    .concat(t)
                                            ),
                                                this._dataQueue.addToQueue(
                                                    'tab_events',
                                                    this._utils.convertToArrayByMap(wn, {
                                                        eventSequence: r,
                                                        timestamp: t,
                                                        type: o,
                                                        id: this._tabData.id || '',
                                                        href: n || '',
                                                        referrer: this._utils.clearTextFromNumbers(document.referrer),
                                                        currentTabsList: i || '',
                                                    }),
                                                    !0,
                                                    !0
                                                );
                                            for (var s = 0, a = e.length; s < a; s++)
                                                if (e[s][0] === this._tabData.id) {
                                                    e.splice(s, 1);
                                                    break;
                                                }
                                            this._utils.StorageUtils.saveToLocalStorage('cdTabList', e);
                                        },
                                    },
                                    {
                                        key: '_updateTabData',
                                        value: function _updateTabData() {
                                            (this._tabData = {}),
                                                (this._tabData = {
                                                    id: this._utils.generateUUID(),
                                                    openTabTS: this.getEventTimestamp(),
                                                }),
                                                b.debug(
                                                    'initialize tab data: id:'
                                                        .concat(this._tabData.id, ', timestamp:')
                                                        .concat(this._tabData.openTabTS)
                                                ),
                                                this._utils.StorageUtils.saveToSessionStorage(
                                                    'cdTabData',
                                                    this._tabData
                                                );
                                        },
                                    },
                                ],
                                [
                                    {
                                        key: 'getDefaultSettings',
                                        value: function getDefaultSettings() {
                                            return gn;
                                        },
                                    },
                                ]
                            ),
                            TabEventCollector
                        );
                    })();
                function LocationCollector_typeof(e) {
                    return (LocationCollector_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function LocationCollector_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function LocationCollector_setPrototypeOf(e, t) {
                    return (LocationCollector_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function LocationCollector_createSuper(r) {
                    var n = (function LocationCollector_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = LocationCollector_getPrototypeOf(r);
                        return (function LocationCollector_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === LocationCollector_typeof(t) || 'function' == typeof t)) return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return LocationCollector_assertThisInitialized(e);
                        })(
                            this,
                            n
                                ? ((e = LocationCollector_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function LocationCollector_assertThisInitialized(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e;
                }
                function LocationCollector_getPrototypeOf(e) {
                    return (LocationCollector_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                function LocationCollector_defineProperty(e, t, r) {
                    return (
                        t in e
                            ? Object.defineProperty(e, t, { value: r, enumerable: !0, configurable: !0, writable: !0 })
                            : (e[t] = r),
                        e
                    );
                }
                var Sn = {
                        configKey: 'isLocationEvents',
                        isDefault: !1,
                        shouldRunPerContext: !1,
                        shouldRunPerSession: !0,
                        shouldRun: !1,
                        isFrameRelated: !1,
                        runInSlave: !1,
                        runInLean: !1,
                        runInUns: !1,
                        isRunning: !1,
                        instance: null,
                    },
                    Pn = ['eventSequence', 'timestamp', 'longitude', 'latitude', 'accuracy', 'speed', 'provider'],
                    kn = (function () {
                        !(function LocationCollector_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && LocationCollector_setPrototypeOf(e, t);
                        })(LocationCollector, Ce);
                        var i = LocationCollector_createSuper(LocationCollector);
                        function LocationCollector(e, t, r) {
                            var n,
                                o = 3 < arguments.length && void 0 !== arguments[3] ? arguments[3] : window.navigator;
                            return (
                                (function LocationCollector_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, LocationCollector),
                                LocationCollector_defineProperty(
                                    LocationCollector_assertThisInitialized((n = i.call(this))),
                                    '_subscribeForLocationEvents',
                                    function () {
                                        n._unsubscribeFromLocationEvents(),
                                            (n._watcherID = n._navigator.geolocation.watchPosition(
                                                n._onGeoLocationPositionEvent,
                                                n._onGeoLocationPositionError
                                            )),
                                            n._clearLocationEventsTimeout(),
                                            (n._locationEventsTimeoutID = setTimeout(function () {
                                                n._unsubscribeFromLocationEvents();
                                            }));
                                    }
                                ),
                                LocationCollector_defineProperty(
                                    LocationCollector_assertThisInitialized(n),
                                    '_unsubscribeFromLocationEvents',
                                    function () {
                                        n._clearLocationEventsTimeout(),
                                            n._watcherID &&
                                                (n._navigator.geolocation.clearWatch(n._watcherID),
                                                (n._watcherID = null));
                                    }
                                ),
                                LocationCollector_defineProperty(
                                    LocationCollector_assertThisInitialized(n),
                                    '_onGeoLocationPositionEvent',
                                    function (e) {
                                        n._sendData(e);
                                    }
                                ),
                                LocationCollector_defineProperty(
                                    LocationCollector_assertThisInitialized(n),
                                    '_onGeoLocationPositionError',
                                    function (e) {
                                        b.warn(
                                            'Failed getting geolocation with code '
                                                .concat(e.code, '. ')
                                                .concat(e.message)
                                        );
                                    }
                                ),
                                (n._configurationRepository = r),
                                (n._locationEventsTimeoutMsec = n._configurationRepository.get(
                                    y.locationEventsTimeoutMsec
                                )),
                                (n._utils = t),
                                (n._dataQ = e),
                                (n._navigator = o),
                                (n._watcherID = null),
                                (n._locationEventsTimeoutID = null),
                                n
                            );
                        }
                        return (
                            (function LocationCollector_createClass(e, t, r) {
                                t && LocationCollector_defineProperties(e.prototype, t),
                                    r && LocationCollector_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(
                                LocationCollector,
                                [
                                    {
                                        key: 'startFeature',
                                        value: function startFeature() {
                                            this._subscribeForLocationIfPermissionGranted();
                                        },
                                    },
                                    {
                                        key: 'stopFeature',
                                        value: function stopFeature() {
                                            this._unsubscribeFromLocationEvents();
                                        },
                                    },
                                    {
                                        key: 'updateFeatureConfig',
                                        value: function updateFeatureConfig() {
                                            try {
                                                this._configurationRepository.get(y.locationEventsTimeoutMsec) !==
                                                    this._locationEventsTimeoutMsec &&
                                                    (this._locationEventsTimeoutMsec =
                                                        this._configurationRepository.get(y.locationEventsTimeoutMsec));
                                            } catch (e) {
                                                b.error(
                                                    'LocationEvents: updateFeatureConfig failed, msg: '.concat(
                                                        e.message
                                                    ),
                                                    e
                                                );
                                            }
                                        },
                                    },
                                    {
                                        key: '_subscribeForLocationIfPermissionGranted',
                                        value: function _subscribeForLocationIfPermissionGranted() {
                                            var t = this;
                                            this._navigator.permissions &&
                                                this._navigator.permissions.query &&
                                                this._navigator.permissions
                                                    .query({ name: 'geolocation' })
                                                    .then(function (e) {
                                                        'granted' === e.state
                                                            ? t._subscribeForLocationEvents()
                                                            : b.info(
                                                                  'location permission is denied. Location data will not be collected'
                                                              );
                                                    })
                                                    .catch(function (e) {
                                                        b.error(
                                                            'Failed querying for geolocation permission. '.concat(
                                                                e.message
                                                            )
                                                        );
                                                    });
                                        },
                                    },
                                    {
                                        key: '_clearLocationEventsTimeout',
                                        value: function _clearLocationEventsTimeout() {
                                            this._locationEventsTimeoutID &&
                                                clearTimeout(this._locationEventsTimeoutID),
                                                (this._locationEventsTimeoutID = null);
                                        },
                                    },
                                    {
                                        key: '_sendData',
                                        value: function _sendData(e) {
                                            var t = e.coords,
                                                r = this._utils.StorageUtils.getAndUpdateEventSequenceNumber(),
                                                e = this.getEventTimestamp();
                                            this._dataQ.addToQueue(
                                                'location_events',
                                                this._utils.convertToArrayByMap(Pn, {
                                                    eventSequence: r,
                                                    timestamp: e,
                                                    longitude: t.longitude || -1,
                                                    latitude: t.latitude || -1,
                                                    accuracy: t.accuracy || -1,
                                                    speed: t.speed || -1,
                                                    provider: '',
                                                })
                                            );
                                        },
                                    },
                                ],
                                [
                                    {
                                        key: 'getDefaultSettings',
                                        value: function getDefaultSettings() {
                                            return Sn;
                                        },
                                    },
                                ]
                            ),
                            LocationCollector
                        );
                    })();
                function StaticContract_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var On = (function () {
                    function StaticContract() {
                        !(function StaticContract_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, StaticContract);
                    }
                    return (
                        (function StaticContract_createClass(e, t, r) {
                            t && StaticContract_defineProperties(e.prototype, t),
                                r && StaticContract_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(StaticContract, [
                            {
                                key: 'validateParams',
                                value: function validateParams() {
                                    throw new Error('_validateParams should be overridden');
                                },
                            },
                            {
                                key: 'buildQueueMessage',
                                value: function buildQueueMessage() {
                                    throw new Error('buildQueueMessage should be overridden');
                                },
                            },
                            {
                                key: 'validateMessage',
                                value: function validateMessage() {
                                    throw new Error('_validateMessage should be overridden');
                                },
                            },
                            {
                                key: 'getName',
                                value: function getName() {
                                    throw new Error('_getName should be overridden');
                                },
                            },
                        ]),
                        StaticContract
                    );
                })();
                function BrowserDetectContract_typeof(e) {
                    return (BrowserDetectContract_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function BrowserDetectContract_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function BrowserDetectContract_setPrototypeOf(e, t) {
                    return (BrowserDetectContract_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function BrowserDetectContract_createSuper(r) {
                    var n = (function BrowserDetectContract_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = BrowserDetectContract_getPrototypeOf(r);
                        return (function BrowserDetectContract_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === BrowserDetectContract_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function BrowserDetectContract_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = BrowserDetectContract_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function BrowserDetectContract_getPrototypeOf(e) {
                    return (BrowserDetectContract_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var Bn = (function () {
                    !(function BrowserDetectContract_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && BrowserDetectContract_setPrototypeOf(e, t);
                    })(BrowserDetectContract, On);
                    var u = BrowserDetectContract_createSuper(BrowserDetectContract);
                    function BrowserDetectContract(e, t, r, n, o, i, s) {
                        var a;
                        return (
                            (function BrowserDetectContract_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, BrowserDetectContract),
                            (a = u.call(this)).validateParams(e, t, r, n, o, i, s),
                            (a.isChrome = e),
                            (a.isFirefox = t),
                            (a.isEdge = r),
                            (a.isIE = n),
                            (a.isSafari = o),
                            (a.isOpera = i),
                            (a.isBlink = s),
                            a
                        );
                    }
                    return (
                        (function BrowserDetectContract_createClass(e, t, r) {
                            t && BrowserDetectContract_defineProperties(e.prototype, t),
                                r && BrowserDetectContract_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(BrowserDetectContract, [
                            {
                                key: 'validateParams',
                                value: function validateParams(e, t, r, n, o, i, s) {
                                    ('boolean' == typeof e &&
                                        'boolean' == typeof t &&
                                        'boolean' == typeof r &&
                                        'boolean' == typeof n &&
                                        'boolean' == typeof o &&
                                        'boolean' == typeof i &&
                                        'boolean' == typeof s) ||
                                        b.warn(
                                            'wrong type in Per, BrowserDetectContract, parameters. isChrome : {expected: boolean, received: '
                                                .concat(
                                                    BrowserDetectContract_typeof(e),
                                                    '},\n            isFirefox : {expected: boolean, received: '
                                                )
                                                .concat(
                                                    BrowserDetectContract_typeof(t),
                                                    '},isEdge : {expected: boolean, received: '
                                                )
                                                .concat(
                                                    BrowserDetectContract_typeof(r),
                                                    '},isIE : {expected: boolean, received: '
                                                )
                                                .concat(
                                                    BrowserDetectContract_typeof(n),
                                                    '},\n            isSafari : {expected: boolean, received: '
                                                )
                                                .concat(
                                                    BrowserDetectContract_typeof(o),
                                                    '},isOpera : {expected: boolean, received: '
                                                )
                                                .concat(
                                                    BrowserDetectContract_typeof(i),
                                                    '} ,isBlink : {expected: boolean, received: '
                                                )
                                                .concat(BrowserDetectContract_typeof(s), '}')
                                        );
                                },
                            },
                            {
                                key: 'buildQueueMessage',
                                value: function buildQueueMessage() {
                                    var e = [
                                        this.getName(),
                                        [
                                            this.isChrome,
                                            this.isFirefox,
                                            this.isEdge,
                                            this.isIE,
                                            this.isSafari,
                                            this.isOpera,
                                            this.isBlink,
                                        ],
                                    ];
                                    return this.validateMessage(e), e;
                                },
                            },
                            {
                                key: 'validateMessage',
                                value: function validateMessage(e) {
                                    ('string' == typeof e[0] && Array.isArray(e[1]) && 7 === e[1].length) ||
                                        b.warn('BrowserDetect - Contract verification failed');
                                },
                            },
                            {
                                key: 'getName',
                                value: function getName() {
                                    return 'browser_spoofing';
                                },
                            },
                        ]),
                        BrowserDetectContract
                    );
                })();
                function BrowserDetect_typeof(e) {
                    return (BrowserDetect_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function BrowserDetect_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function BrowserDetect_setPrototypeOf(e, t) {
                    return (BrowserDetect_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function BrowserDetect_createSuper(r) {
                    var n = (function BrowserDetect_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = BrowserDetect_getPrototypeOf(r);
                        return (function BrowserDetect_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === BrowserDetect_typeof(t) || 'function' == typeof t)) return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function BrowserDetect_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = BrowserDetect_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function BrowserDetect_getPrototypeOf(e) {
                    return (BrowserDetect_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var Mn = {
                        configKey: 'isBrowserDetect',
                        isDefault: !1,
                        shouldRunPerContext: !1,
                        shouldRunPerSession: !0,
                        shouldRun: !0,
                        isFrameRelated: !1,
                        runInUns: !0,
                        runInSlave: !1,
                        runInLean: !1,
                        isRunning: !1,
                        instance: null,
                    },
                    Rn = (function () {
                        !(function BrowserDetect_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && BrowserDetect_setPrototypeOf(e, t);
                        })(BrowserDetect, Ce);
                        var r = BrowserDetect_createSuper(BrowserDetect);
                        function BrowserDetect(e) {
                            var t;
                            return (
                                (function BrowserDetect_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, BrowserDetect),
                                ((t = r.call(this))._dataQ = e),
                                t
                            );
                        }
                        return (
                            (function BrowserDetect_createClass(e, t, r) {
                                t && BrowserDetect_defineProperties(e.prototype, t),
                                    r && BrowserDetect_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(
                                BrowserDetect,
                                [
                                    {
                                        key: 'startFeature',
                                        value: function startFeature() {
                                            var e =
                                                    (!!window.opr && !!opr.addons) ||
                                                    !!window.opera ||
                                                    0 <= navigator.userAgent.indexOf(' OPR/'),
                                                t = 'undefined' != typeof InstallTrigger,
                                                r =
                                                    /constructor/i.test(window.HTMLElement) ||
                                                    '[object SafariRemoteNotification]' ===
                                                        (
                                                            !window.safari ||
                                                            ('undefined' != typeof safari && safari.pushNotification)
                                                        ).toString(),
                                                n = !!document.documentMode,
                                                o = !n && !!window.StyleMedia,
                                                i = !!window.chrome && !!window.chrome.webstore,
                                                s = (i || e) && !!window.CSS,
                                                s = new Bn(i, t, o, n, r, e, s).buildQueueMessage();
                                            this._dataQ.addToQueue('static_fields', s, !1);
                                        },
                                    },
                                ],
                                [
                                    {
                                        key: 'getDefaultSettings',
                                        value: function getDefaultSettings() {
                                            return Mn;
                                        },
                                    },
                                ]
                            ),
                            BrowserDetect
                        );
                    })();
                function VersionClientBrowserPropsContract_typeof(e) {
                    return (VersionClientBrowserPropsContract_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function VersionClientBrowserPropsContract_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function VersionClientBrowserPropsContract_setPrototypeOf(e, t) {
                    return (VersionClientBrowserPropsContract_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function VersionClientBrowserPropsContract_createSuper(r) {
                    var n = (function VersionClientBrowserPropsContract_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = VersionClientBrowserPropsContract_getPrototypeOf(r);
                        return (function VersionClientBrowserPropsContract_possibleConstructorReturn(e, t) {
                            {
                                if (
                                    t &&
                                    ('object' === VersionClientBrowserPropsContract_typeof(t) || 'function' == typeof t)
                                )
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function VersionClientBrowserPropsContract_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = VersionClientBrowserPropsContract_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function VersionClientBrowserPropsContract_getPrototypeOf(e) {
                    return (VersionClientBrowserPropsContract_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var Dn = (function () {
                    !(function VersionClientBrowserPropsContract_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && VersionClientBrowserPropsContract_setPrototypeOf(e, t);
                    })(VersionClientBrowserPropsContract, On);
                    var r = VersionClientBrowserPropsContract_createSuper(VersionClientBrowserPropsContract);
                    function VersionClientBrowserPropsContract(e) {
                        var t;
                        return (
                            (function VersionClientBrowserPropsContract_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, VersionClientBrowserPropsContract),
                            (t = r.call(this)).validateParams(e),
                            (t.scriptVersion = e),
                            t
                        );
                    }
                    return (
                        (function VersionClientBrowserPropsContract_createClass(e, t, r) {
                            t && VersionClientBrowserPropsContract_defineProperties(e.prototype, t),
                                r && VersionClientBrowserPropsContract_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(VersionClientBrowserPropsContract, [
                            {
                                key: 'validateParams',
                                value: function validateParams(e) {
                                    'string' == typeof e ||
                                        b.warn(
                                            ' wrong type in VersionClient, BrowserProps parameters. scriptVersion : {expected: string, received: '.concat(
                                                VersionClientBrowserPropsContract_typeof(e),
                                                '}'
                                            )
                                        );
                                },
                            },
                            {
                                key: 'buildQueueMessage',
                                value: function buildQueueMessage() {
                                    var e = [this.getName(), this.scriptVersion];
                                    return this.validateMessage(e), e;
                                },
                            },
                            {
                                key: 'validateMessage',
                                value: function validateMessage(e) {
                                    ('string' == typeof e[0] && 'string' == typeof e[1]) ||
                                        b.warn('version_client, BrowserPropsContract - Contract verification failed');
                                },
                            },
                            {
                                key: 'getName',
                                value: function getName() {
                                    return 'version_client';
                                },
                            },
                        ]),
                        VersionClientBrowserPropsContract
                    );
                })();
                function DeviceSourceBrowserPropsContract_typeof(e) {
                    return (DeviceSourceBrowserPropsContract_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function DeviceSourceBrowserPropsContract_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function DeviceSourceBrowserPropsContract_setPrototypeOf(e, t) {
                    return (DeviceSourceBrowserPropsContract_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function DeviceSourceBrowserPropsContract_createSuper(r) {
                    var n = (function DeviceSourceBrowserPropsContract_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = DeviceSourceBrowserPropsContract_getPrototypeOf(r);
                        return (function DeviceSourceBrowserPropsContract_possibleConstructorReturn(e, t) {
                            {
                                if (
                                    t &&
                                    ('object' === DeviceSourceBrowserPropsContract_typeof(t) || 'function' == typeof t)
                                )
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function DeviceSourceBrowserPropsContract_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = DeviceSourceBrowserPropsContract_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function DeviceSourceBrowserPropsContract_getPrototypeOf(e) {
                    return (DeviceSourceBrowserPropsContract_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var Fn = (function () {
                    !(function DeviceSourceBrowserPropsContract_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && DeviceSourceBrowserPropsContract_setPrototypeOf(e, t);
                    })(DeviceSourceBrowserPropsContract, On);
                    var r = DeviceSourceBrowserPropsContract_createSuper(DeviceSourceBrowserPropsContract);
                    function DeviceSourceBrowserPropsContract(e) {
                        var t;
                        return (
                            (function DeviceSourceBrowserPropsContract_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, DeviceSourceBrowserPropsContract),
                            (t = r.call(this)).validateParams(e),
                            (t.source = e),
                            t
                        );
                    }
                    return (
                        (function DeviceSourceBrowserPropsContract_createClass(e, t, r) {
                            t && DeviceSourceBrowserPropsContract_defineProperties(e.prototype, t),
                                r && DeviceSourceBrowserPropsContract_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(DeviceSourceBrowserPropsContract, [
                            {
                                key: 'validateParams',
                                value: function validateParams(e) {
                                    'string' == typeof e ||
                                        b.warn(
                                            ' wrong type in DeviceSource, BrowserProps parameters. source : {expected: string, received: '.concat(
                                                DeviceSourceBrowserPropsContract_typeof(e),
                                                '}'
                                            )
                                        );
                                },
                            },
                            {
                                key: 'buildQueueMessage',
                                value: function buildQueueMessage() {
                                    var e = [this.getName(), this.source];
                                    return this.validateMessage(e), e;
                                },
                            },
                            {
                                key: 'validateMessage',
                                value: function validateMessage(e) {
                                    ('string' == typeof e[0] && 'string' == typeof e[1]) ||
                                        b.warn('device_source, BrowserPropsContract - Contract verification failed');
                                },
                            },
                            {
                                key: 'getName',
                                value: function getName() {
                                    return 'device_source';
                                },
                            },
                        ]),
                        DeviceSourceBrowserPropsContract
                    );
                })();
                function OSBrowserPropsContract_typeof(e) {
                    return (OSBrowserPropsContract_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function OSBrowserPropsContract_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function OSBrowserPropsContract_setPrototypeOf(e, t) {
                    return (OSBrowserPropsContract_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function OSBrowserPropsContract_createSuper(r) {
                    var n = (function OSBrowserPropsContract_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = OSBrowserPropsContract_getPrototypeOf(r);
                        return (function OSBrowserPropsContract_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === OSBrowserPropsContract_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function OSBrowserPropsContract_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = OSBrowserPropsContract_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function OSBrowserPropsContract_getPrototypeOf(e) {
                    return (OSBrowserPropsContract_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var Tn = (function () {
                    !(function OSBrowserPropsContract_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && OSBrowserPropsContract_setPrototypeOf(e, t);
                    })(OSBrowserPropsContract, On);
                    var r = OSBrowserPropsContract_createSuper(OSBrowserPropsContract);
                    function OSBrowserPropsContract(e) {
                        var t;
                        return (
                            (function OSBrowserPropsContract_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, OSBrowserPropsContract),
                            (t = r.call(this)).validateParams(e),
                            (t.platform = e),
                            t
                        );
                    }
                    return (
                        (function OSBrowserPropsContract_createClass(e, t, r) {
                            t && OSBrowserPropsContract_defineProperties(e.prototype, t),
                                r && OSBrowserPropsContract_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(OSBrowserPropsContract, [
                            {
                                key: 'validateParams',
                                value: function validateParams(e) {
                                    'string' == typeof e ||
                                        b.warn(
                                            ' wrong type in OS, BrowserProps parameters. platform : {expected: string, received: '.concat(
                                                OSBrowserPropsContract_typeof(e),
                                                '}'
                                            )
                                        );
                                },
                            },
                            {
                                key: 'buildQueueMessage',
                                value: function buildQueueMessage() {
                                    var e = [this.getName(), this.platform];
                                    return this.validateMessage(e), e;
                                },
                            },
                            {
                                key: 'validateMessage',
                                value: function validateMessage(e) {
                                    ('string' == typeof e[0] && 'string' == typeof e[1]) ||
                                        b.warn('os, BrowserPropsContract - Contract verification failed');
                                },
                            },
                            {
                                key: 'getName',
                                value: function getName() {
                                    return 'os';
                                },
                            },
                        ]),
                        OSBrowserPropsContract
                    );
                })();
                function OSVersionBrowserPropsContract_typeof(e) {
                    return (OSVersionBrowserPropsContract_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function OSVersionBrowserPropsContract_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function OSVersionBrowserPropsContract_setPrototypeOf(e, t) {
                    return (OSVersionBrowserPropsContract_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function OSVersionBrowserPropsContract_createSuper(r) {
                    var n = (function OSVersionBrowserPropsContract_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = OSVersionBrowserPropsContract_getPrototypeOf(r);
                        return (function OSVersionBrowserPropsContract_possibleConstructorReturn(e, t) {
                            {
                                if (
                                    t &&
                                    ('object' === OSVersionBrowserPropsContract_typeof(t) || 'function' == typeof t)
                                )
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function OSVersionBrowserPropsContract_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = OSVersionBrowserPropsContract_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function OSVersionBrowserPropsContract_getPrototypeOf(e) {
                    return (OSVersionBrowserPropsContract_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var In = (function () {
                    !(function OSVersionBrowserPropsContract_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && OSVersionBrowserPropsContract_setPrototypeOf(e, t);
                    })(OSVersionBrowserPropsContract, On);
                    var r = OSVersionBrowserPropsContract_createSuper(OSVersionBrowserPropsContract);
                    function OSVersionBrowserPropsContract(e) {
                        var t;
                        return (
                            (function OSVersionBrowserPropsContract_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, OSVersionBrowserPropsContract),
                            (t = r.call(this)).validateParams(e),
                            (t.version = e),
                            t
                        );
                    }
                    return (
                        (function OSVersionBrowserPropsContract_createClass(e, t, r) {
                            t && OSVersionBrowserPropsContract_defineProperties(e.prototype, t),
                                r && OSVersionBrowserPropsContract_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(OSVersionBrowserPropsContract, [
                            {
                                key: 'validateParams',
                                value: function validateParams(e) {
                                    'number' == typeof e ||
                                        null === e ||
                                        b.warn(
                                            ' wrong type in OSVersion, BrowserProps parameters. version : {expected: number, received: '.concat(
                                                OSVersionBrowserPropsContract_typeof(e),
                                                '}'
                                            )
                                        );
                                },
                            },
                            {
                                key: 'buildQueueMessage',
                                value: function buildQueueMessage() {
                                    var e = [this.getName(), this.version];
                                    return this.validateMessage(e), e;
                                },
                            },
                            {
                                key: 'validateMessage',
                                value: function validateMessage(e) {
                                    ('string' == typeof e[0] && ('number' == typeof e[1] || null === e[1])) ||
                                        b.warn('os_version, BrowserPropsContract - Contract verification failed');
                                },
                            },
                            {
                                key: 'getName',
                                value: function getName() {
                                    return 'os_version';
                                },
                            },
                        ]),
                        OSVersionBrowserPropsContract
                    );
                })();
                function OSFamilyBrowserPropsContract_typeof(e) {
                    return (OSFamilyBrowserPropsContract_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function OSFamilyBrowserPropsContract_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function OSFamilyBrowserPropsContract_setPrototypeOf(e, t) {
                    return (OSFamilyBrowserPropsContract_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function OSFamilyBrowserPropsContract_createSuper(r) {
                    var n = (function OSFamilyBrowserPropsContract_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = OSFamilyBrowserPropsContract_getPrototypeOf(r);
                        return (function OSFamilyBrowserPropsContract_possibleConstructorReturn(e, t) {
                            {
                                if (
                                    t &&
                                    ('object' === OSFamilyBrowserPropsContract_typeof(t) || 'function' == typeof t)
                                )
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function OSFamilyBrowserPropsContract_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = OSFamilyBrowserPropsContract_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function OSFamilyBrowserPropsContract_getPrototypeOf(e) {
                    return (OSFamilyBrowserPropsContract_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var xn = (function () {
                    !(function OSFamilyBrowserPropsContract_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && OSFamilyBrowserPropsContract_setPrototypeOf(e, t);
                    })(OSFamilyBrowserPropsContract, On);
                    var r = OSFamilyBrowserPropsContract_createSuper(OSFamilyBrowserPropsContract);
                    function OSFamilyBrowserPropsContract(e) {
                        var t;
                        return (
                            (function OSFamilyBrowserPropsContract_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, OSFamilyBrowserPropsContract),
                            (t = r.call(this)).validateParams(e),
                            (t.osName = e),
                            t
                        );
                    }
                    return (
                        (function OSFamilyBrowserPropsContract_createClass(e, t, r) {
                            t && OSFamilyBrowserPropsContract_defineProperties(e.prototype, t),
                                r && OSFamilyBrowserPropsContract_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(OSFamilyBrowserPropsContract, [
                            {
                                key: 'validateParams',
                                value: function validateParams(e) {
                                    'string' == typeof e ||
                                        b.warn(
                                            ' wrong type in OSFamily, BrowserProps parameters. osName : {expected: string, received: '.concat(
                                                OSFamilyBrowserPropsContract_typeof(e),
                                                '}'
                                            )
                                        );
                                },
                            },
                            {
                                key: 'buildQueueMessage',
                                value: function buildQueueMessage() {
                                    var e = [this.getName(), this.osName];
                                    return this.validateMessage(e), e;
                                },
                            },
                            {
                                key: 'validateMessage',
                                value: function validateMessage(e) {
                                    ('string' == typeof e[0] && 'string' == typeof e[1]) ||
                                        b.warn('os_family, BrowserPropsContract - Contract verification failed');
                                },
                            },
                            {
                                key: 'getName',
                                value: function getName() {
                                    return 'os_family';
                                },
                            },
                        ]),
                        OSFamilyBrowserPropsContract
                    );
                })();
                function InputMechBrowserPropsContract_typeof(e) {
                    return (InputMechBrowserPropsContract_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function InputMechBrowserPropsContract_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function InputMechBrowserPropsContract_setPrototypeOf(e, t) {
                    return (InputMechBrowserPropsContract_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function InputMechBrowserPropsContract_createSuper(r) {
                    var n = (function InputMechBrowserPropsContract_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = InputMechBrowserPropsContract_getPrototypeOf(r);
                        return (function InputMechBrowserPropsContract_possibleConstructorReturn(e, t) {
                            {
                                if (
                                    t &&
                                    ('object' === InputMechBrowserPropsContract_typeof(t) || 'function' == typeof t)
                                )
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function InputMechBrowserPropsContract_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = InputMechBrowserPropsContract_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function InputMechBrowserPropsContract_getPrototypeOf(e) {
                    return (InputMechBrowserPropsContract_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var An = (function () {
                    !(function InputMechBrowserPropsContract_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && InputMechBrowserPropsContract_setPrototypeOf(e, t);
                    })(InputMechBrowserPropsContract, On);
                    var n = InputMechBrowserPropsContract_createSuper(InputMechBrowserPropsContract);
                    function InputMechBrowserPropsContract(e, t) {
                        var r;
                        return (
                            (function InputMechBrowserPropsContract_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, InputMechBrowserPropsContract),
                            (r = n.call(this)).validateParams(e, t),
                            (r.pointer = e),
                            (r.hover = t),
                            r
                        );
                    }
                    return (
                        (function InputMechBrowserPropsContract_createClass(e, t, r) {
                            t && InputMechBrowserPropsContract_defineProperties(e.prototype, t),
                                r && InputMechBrowserPropsContract_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(InputMechBrowserPropsContract, [
                            {
                                key: 'validateParams',
                                value: function validateParams(e, t) {
                                    ('number' != typeof e ||
                                        (1 !== e && 2 !== e && 3 !== e && 4 !== e && 5 !== e) ||
                                        'number' != typeof t ||
                                        (1 !== t && 2 !== t && 3 !== t && 4 !== t && 5 !== t)) &&
                                        b.warn(
                                            ' wrong type in InputMech, BrowserProps parameters. pointer : {expected: number, received: '
                                                .concat(
                                                    InputMechBrowserPropsContract_typeof(e),
                                                    '}, hover : {expected: number, received: '
                                                )
                                                .concat(InputMechBrowserPropsContract_typeof(t), '}')
                                        );
                                },
                            },
                            {
                                key: 'buildQueueMessage',
                                value: function buildQueueMessage() {
                                    var e = [this.getName(), [this.pointer, this.hover]];
                                    return this.validateMessage(e), e;
                                },
                            },
                            {
                                key: 'validateMessage',
                                value: function validateMessage(e) {
                                    ('string' == typeof e[0] && Array.isArray(e[1]) && 2 === e[1].length) ||
                                        b.warn('input_mech, BrowserPropsContract - Contract verification failed');
                                },
                            },
                            {
                                key: 'getName',
                                value: function getName() {
                                    return 'input_mech';
                                },
                            },
                        ]),
                        InputMechBrowserPropsContract
                    );
                })();
                function CoresBrowserPropsContract_typeof(e) {
                    return (CoresBrowserPropsContract_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function CoresBrowserPropsContract_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function CoresBrowserPropsContract_setPrototypeOf(e, t) {
                    return (CoresBrowserPropsContract_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function CoresBrowserPropsContract_createSuper(r) {
                    var n = (function CoresBrowserPropsContract_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = CoresBrowserPropsContract_getPrototypeOf(r);
                        return (function CoresBrowserPropsContract_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === CoresBrowserPropsContract_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function CoresBrowserPropsContract_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = CoresBrowserPropsContract_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function CoresBrowserPropsContract_getPrototypeOf(e) {
                    return (CoresBrowserPropsContract_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var Ln = (function () {
                    !(function CoresBrowserPropsContract_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && CoresBrowserPropsContract_setPrototypeOf(e, t);
                    })(CoresBrowserPropsContract, On);
                    var r = CoresBrowserPropsContract_createSuper(CoresBrowserPropsContract);
                    function CoresBrowserPropsContract(e) {
                        var t;
                        return (
                            (function CoresBrowserPropsContract_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, CoresBrowserPropsContract),
                            (t = r.call(this)).validateParams(e),
                            (t.hardwareConcurrency = e),
                            t
                        );
                    }
                    return (
                        (function CoresBrowserPropsContract_createClass(e, t, r) {
                            t && CoresBrowserPropsContract_defineProperties(e.prototype, t),
                                r && CoresBrowserPropsContract_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(CoresBrowserPropsContract, [
                            {
                                key: 'validateParams',
                                value: function validateParams(e) {
                                    'number' == typeof e ||
                                        b.warn(
                                            'wrong type in cores, BrowserProps parameters. hardwareConcurrency : {expected: number, received: '.concat(
                                                CoresBrowserPropsContract_typeof(e),
                                                '}'
                                            )
                                        );
                                },
                            },
                            {
                                key: 'buildQueueMessage',
                                value: function buildQueueMessage() {
                                    var e = [this.getName(), this.hardwareConcurrency];
                                    return this.validateMessage(e), e;
                                },
                            },
                            {
                                key: 'validateMessage',
                                value: function validateMessage(e) {
                                    ('string' == typeof e[0] && 'number' == typeof e[1]) ||
                                        b.warn('cores,BrowserPropsContract - Contract verification failed');
                                },
                            },
                            {
                                key: 'getName',
                                value: function getName() {
                                    return 'cores';
                                },
                            },
                        ]),
                        CoresBrowserPropsContract
                    );
                })();
                function _createForOfIteratorHelper(t, r) {
                    var o = ('undefined' != typeof Symbol && t[Symbol.iterator]) || t['@@iterator'];
                    if (!o) {
                        if (
                            Array.isArray(t) ||
                            (o = (function _unsupportedIterableToArray(e, t) {
                                if (!e) return;
                                if ('string' == typeof e) return _arrayLikeToArray(e, t);
                                var r = Object.prototype.toString.call(e).slice(8, -1);
                                'Object' === r && e.constructor && (r = e.constructor.name);
                                if ('Map' === r || 'Set' === r) return Array.from(e);
                                if ('Arguments' === r || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))
                                    return _arrayLikeToArray(e, t);
                            })(t)) ||
                            (r && t && 'number' == typeof t.length)
                        ) {
                            o && (t = o);
                            var i = 0,
                                r = function F() {};
                            return {
                                s: r,
                                n: function n() {
                                    return i >= t.length ? { done: !0 } : { done: !1, value: t[i++] };
                                },
                                e: function e(t) {
                                    throw t;
                                },
                                f: r,
                            };
                        }
                        throw new TypeError(
                            'Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.'
                        );
                    }
                    var a,
                        u = !0,
                        c = !1;
                    return {
                        s: function s() {
                            o = o.call(t);
                        },
                        n: function n() {
                            var e = o.next();
                            return (u = e.done), e;
                        },
                        e: function e(t) {
                            (c = !0), (a = t);
                        },
                        f: function f() {
                            try {
                                u || null == o.return || o.return();
                            } finally {
                                if (c) throw a;
                            }
                        },
                    };
                }
                function _arrayLikeToArray(e, t) {
                    (null == t || t > e.length) && (t = e.length);
                    for (var r = 0, n = new Array(t); r < t; r++) n[r] = e[r];
                    return n;
                }
                function PluginsBrowserPropsContract_typeof(e) {
                    return (PluginsBrowserPropsContract_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function PluginsBrowserPropsContract_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function PluginsBrowserPropsContract_setPrototypeOf(e, t) {
                    return (PluginsBrowserPropsContract_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function PluginsBrowserPropsContract_createSuper(r) {
                    var n = (function PluginsBrowserPropsContract_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = PluginsBrowserPropsContract_getPrototypeOf(r);
                        return (function PluginsBrowserPropsContract_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === PluginsBrowserPropsContract_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function PluginsBrowserPropsContract_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = PluginsBrowserPropsContract_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function PluginsBrowserPropsContract_getPrototypeOf(e) {
                    return (PluginsBrowserPropsContract_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var jn = (function () {
                    !(function PluginsBrowserPropsContract_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && PluginsBrowserPropsContract_setPrototypeOf(e, t);
                    })(PluginsBrowserPropsContract, On);
                    var r = PluginsBrowserPropsContract_createSuper(PluginsBrowserPropsContract);
                    function PluginsBrowserPropsContract(e) {
                        var t;
                        return (
                            (function PluginsBrowserPropsContract_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, PluginsBrowserPropsContract),
                            (t = r.call(this)).validateParams(e),
                            (t.plugins = e),
                            t
                        );
                    }
                    return (
                        (function PluginsBrowserPropsContract_createClass(e, t, r) {
                            t && PluginsBrowserPropsContract_defineProperties(e.prototype, t),
                                r && PluginsBrowserPropsContract_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(PluginsBrowserPropsContract, [
                            {
                                key: 'validateParams',
                                value: function validateParams(e) {
                                    (Array.isArray(e) && this._eachPluginIsValid(e)) ||
                                        b.warn(
                                            ' wrong type in plugins, BrowserProps parameters. plugins : {expected: [[...string]], received: '.concat(
                                                PluginsBrowserPropsContract_typeof(e),
                                                '}'
                                            )
                                        );
                                },
                            },
                            {
                                key: '_eachPluginIsValid',
                                value: function _eachPluginIsValid(e) {
                                    var t = !0,
                                        r = !0,
                                        n = !0,
                                        o = _createForOfIteratorHelper(e);
                                    try {
                                        for (o.s(); !(i = o.n()).done; ) {
                                            var i = i.value;
                                            if (Array.isArray(i)) {
                                                4 !== i.length && (n = !1);
                                                var s,
                                                    a = _createForOfIteratorHelper(i);
                                                try {
                                                    for (a.s(); !(s = a.n()).done; )
                                                        'string' != typeof s.value && (r = !1);
                                                } catch (e) {
                                                    a.e(e);
                                                } finally {
                                                    a.f();
                                                }
                                            } else t = !1;
                                        }
                                    } catch (e) {
                                        o.e(e);
                                    } finally {
                                        o.f();
                                    }
                                    return t && n && r;
                                },
                            },
                            {
                                key: 'buildQueueMessage',
                                value: function buildQueueMessage() {
                                    var e = [this.getName(), this.plugins];
                                    return this.validateMessage(e), e;
                                },
                            },
                            {
                                key: 'validateMessage',
                                value: function validateMessage(e) {
                                    ('string' == typeof e[0] && Array.isArray(e[1])) ||
                                        b.warn('plugins, BrowserPropsContract - Contract verification failed');
                                },
                            },
                            {
                                key: 'getName',
                                value: function getName() {
                                    return 'plugins';
                                },
                            },
                        ]),
                        PluginsBrowserPropsContract
                    );
                })();
                function JsUaBrowserPropsContract_typeof(e) {
                    return (JsUaBrowserPropsContract_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function JsUaBrowserPropsContract_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function JsUaBrowserPropsContract_setPrototypeOf(e, t) {
                    return (JsUaBrowserPropsContract_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function JsUaBrowserPropsContract_createSuper(r) {
                    var n = (function JsUaBrowserPropsContract_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = JsUaBrowserPropsContract_getPrototypeOf(r);
                        return (function JsUaBrowserPropsContract_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === JsUaBrowserPropsContract_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function JsUaBrowserPropsContract_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = JsUaBrowserPropsContract_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function JsUaBrowserPropsContract_getPrototypeOf(e) {
                    return (JsUaBrowserPropsContract_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var Un = (function () {
                    !(function JsUaBrowserPropsContract_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && JsUaBrowserPropsContract_setPrototypeOf(e, t);
                    })(JsUaBrowserPropsContract, On);
                    var r = JsUaBrowserPropsContract_createSuper(JsUaBrowserPropsContract);
                    function JsUaBrowserPropsContract(e) {
                        var t;
                        return (
                            (function JsUaBrowserPropsContract_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, JsUaBrowserPropsContract),
                            (t = r.call(this)).validateParams(e),
                            (t.userAgent = e),
                            t
                        );
                    }
                    return (
                        (function JsUaBrowserPropsContract_createClass(e, t, r) {
                            t && JsUaBrowserPropsContract_defineProperties(e.prototype, t),
                                r && JsUaBrowserPropsContract_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(JsUaBrowserPropsContract, [
                            {
                                key: 'validateParams',
                                value: function validateParams(e) {
                                    'string' == typeof e ||
                                        b.warn(
                                            'wrong type in JsUa, BrowserProps parameters. userAgent : {expected: string, received: '.concat(
                                                JsUaBrowserPropsContract_typeof(e),
                                                '}'
                                            )
                                        );
                                },
                            },
                            {
                                key: 'buildQueueMessage',
                                value: function buildQueueMessage() {
                                    var e = [this.getName(), this.userAgent];
                                    return this.validateMessage(e), e;
                                },
                            },
                            {
                                key: 'validateMessage',
                                value: function validateMessage(e) {
                                    ('string' == typeof e[0] && 'string' == typeof e[1]) ||
                                        b.warn('js_ua, BrowserPropsContract - Contract verification failed');
                                },
                            },
                            {
                                key: 'getName',
                                value: function getName() {
                                    return 'js_ua';
                                },
                            },
                        ]),
                        JsUaBrowserPropsContract
                    );
                })();
                function TimeZoneBrowserPropsContract_typeof(e) {
                    return (TimeZoneBrowserPropsContract_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function TimeZoneBrowserPropsContract_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function TimeZoneBrowserPropsContract_setPrototypeOf(e, t) {
                    return (TimeZoneBrowserPropsContract_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function TimeZoneBrowserPropsContract_createSuper(r) {
                    var n = (function TimeZoneBrowserPropsContract_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = TimeZoneBrowserPropsContract_getPrototypeOf(r);
                        return (function TimeZoneBrowserPropsContract_possibleConstructorReturn(e, t) {
                            {
                                if (
                                    t &&
                                    ('object' === TimeZoneBrowserPropsContract_typeof(t) || 'function' == typeof t)
                                )
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function TimeZoneBrowserPropsContract_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = TimeZoneBrowserPropsContract_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function TimeZoneBrowserPropsContract_getPrototypeOf(e) {
                    return (TimeZoneBrowserPropsContract_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var Nn = (function () {
                    !(function TimeZoneBrowserPropsContract_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && TimeZoneBrowserPropsContract_setPrototypeOf(e, t);
                    })(TimeZoneBrowserPropsContract, On);
                    var r = TimeZoneBrowserPropsContract_createSuper(TimeZoneBrowserPropsContract);
                    function TimeZoneBrowserPropsContract(e) {
                        var t;
                        return (
                            (function TimeZoneBrowserPropsContract_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, TimeZoneBrowserPropsContract),
                            (t = r.call(this)).validateParams(e),
                            (t.tz = e),
                            t
                        );
                    }
                    return (
                        (function TimeZoneBrowserPropsContract_createClass(e, t, r) {
                            t && TimeZoneBrowserPropsContract_defineProperties(e.prototype, t),
                                r && TimeZoneBrowserPropsContract_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(TimeZoneBrowserPropsContract, [
                            {
                                key: 'validateParams',
                                value: function validateParams(e) {
                                    'number' == typeof e ||
                                        b.warn(
                                            'wrong type in TimeZone, BrowserProps parameters. tz : {expected: string, received: '.concat(
                                                TimeZoneBrowserPropsContract_typeof(e),
                                                '}'
                                            )
                                        );
                                },
                            },
                            {
                                key: 'buildQueueMessage',
                                value: function buildQueueMessage() {
                                    var e = [this.getName(), this.tz];
                                    return this.validateMessage(e), e;
                                },
                            },
                            {
                                key: 'validateMessage',
                                value: function validateMessage(e) {
                                    ('string' == typeof e[0] && 'number' == typeof e[1]) ||
                                        b.warn('time_zone, BrowserPropsContract - Contract verification failed');
                                },
                            },
                            {
                                key: 'getName',
                                value: function getName() {
                                    return 'time_zone';
                                },
                            },
                        ]),
                        TimeZoneBrowserPropsContract
                    );
                })();
                function CookieEnabledBrowserPropsContract_typeof(e) {
                    return (CookieEnabledBrowserPropsContract_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function CookieEnabledBrowserPropsContract_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function CookieEnabledBrowserPropsContract_setPrototypeOf(e, t) {
                    return (CookieEnabledBrowserPropsContract_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function CookieEnabledBrowserPropsContract_createSuper(r) {
                    var n = (function CookieEnabledBrowserPropsContract_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = CookieEnabledBrowserPropsContract_getPrototypeOf(r);
                        return (function CookieEnabledBrowserPropsContract_possibleConstructorReturn(e, t) {
                            {
                                if (
                                    t &&
                                    ('object' === CookieEnabledBrowserPropsContract_typeof(t) || 'function' == typeof t)
                                )
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function CookieEnabledBrowserPropsContract_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = CookieEnabledBrowserPropsContract_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function CookieEnabledBrowserPropsContract_getPrototypeOf(e) {
                    return (CookieEnabledBrowserPropsContract_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var Wn = (function () {
                    !(function CookieEnabledBrowserPropsContract_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && CookieEnabledBrowserPropsContract_setPrototypeOf(e, t);
                    })(CookieEnabledBrowserPropsContract, On);
                    var r = CookieEnabledBrowserPropsContract_createSuper(CookieEnabledBrowserPropsContract);
                    function CookieEnabledBrowserPropsContract(e) {
                        var t;
                        return (
                            (function CookieEnabledBrowserPropsContract_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, CookieEnabledBrowserPropsContract),
                            (t = r.call(this)).validateParams(e),
                            (t.isCookie = e),
                            t
                        );
                    }
                    return (
                        (function CookieEnabledBrowserPropsContract_createClass(e, t, r) {
                            t && CookieEnabledBrowserPropsContract_defineProperties(e.prototype, t),
                                r && CookieEnabledBrowserPropsContract_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(CookieEnabledBrowserPropsContract, [
                            {
                                key: 'validateParams',
                                value: function validateParams(e) {
                                    'boolean' == typeof e ||
                                        b.warn(
                                            'wrong type in CookieEnabled, BrowserProps parameters. isCookie : {expected: boolean, received: '.concat(
                                                CookieEnabledBrowserPropsContract_typeof(e),
                                                '}'
                                            )
                                        );
                                },
                            },
                            {
                                key: 'buildQueueMessage',
                                value: function buildQueueMessage() {
                                    var e = [this.getName(), this.isCookie];
                                    return this.validateMessage(e), e;
                                },
                            },
                            {
                                key: 'validateMessage',
                                value: function validateMessage(e) {
                                    ('string' == typeof e[0] && 'boolean' == typeof e[1]) ||
                                        b.warn('CookieEnabled,BrowserPropsContract - Contract verification failed');
                                },
                            },
                            {
                                key: 'getName',
                                value: function getName() {
                                    return 'cookie_enabled';
                                },
                            },
                        ]),
                        CookieEnabledBrowserPropsContract
                    );
                })();
                function DeviceMemoryBrowserPropsContract_typeof(e) {
                    return (DeviceMemoryBrowserPropsContract_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function DeviceMemoryBrowserPropsContract_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function DeviceMemoryBrowserPropsContract_setPrototypeOf(e, t) {
                    return (DeviceMemoryBrowserPropsContract_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function DeviceMemoryBrowserPropsContract_createSuper(r) {
                    var n = (function DeviceMemoryBrowserPropsContract_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = DeviceMemoryBrowserPropsContract_getPrototypeOf(r);
                        return (function DeviceMemoryBrowserPropsContract_possibleConstructorReturn(e, t) {
                            {
                                if (
                                    t &&
                                    ('object' === DeviceMemoryBrowserPropsContract_typeof(t) || 'function' == typeof t)
                                )
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function DeviceMemoryBrowserPropsContract_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = DeviceMemoryBrowserPropsContract_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function DeviceMemoryBrowserPropsContract_getPrototypeOf(e) {
                    return (DeviceMemoryBrowserPropsContract_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var Hn = (function () {
                    !(function DeviceMemoryBrowserPropsContract_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && DeviceMemoryBrowserPropsContract_setPrototypeOf(e, t);
                    })(DeviceMemoryBrowserPropsContract, On);
                    var r = DeviceMemoryBrowserPropsContract_createSuper(DeviceMemoryBrowserPropsContract);
                    function DeviceMemoryBrowserPropsContract(e) {
                        var t;
                        return (
                            (function DeviceMemoryBrowserPropsContract_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, DeviceMemoryBrowserPropsContract),
                            (t = r.call(this)).validateParams(e),
                            (t.memory = e),
                            t
                        );
                    }
                    return (
                        (function DeviceMemoryBrowserPropsContract_createClass(e, t, r) {
                            t && DeviceMemoryBrowserPropsContract_defineProperties(e.prototype, t),
                                r && DeviceMemoryBrowserPropsContract_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(DeviceMemoryBrowserPropsContract, [
                            {
                                key: 'validateParams',
                                value: function validateParams(e) {
                                    ('number' == typeof e &&
                                        (0.25 === e ||
                                            0.5 === e ||
                                            1 === e ||
                                            2 === e ||
                                            4 === e ||
                                            8 === e ||
                                            0 === e)) ||
                                        b.warn(
                                            'wrong type in DeviceMemoryBrowser, BrowserProps parameters. memory : {expected: number in {0.25, 0.5, 1, 2, 4, 8, 0} received: type:'
                                                .concat(DeviceMemoryBrowserPropsContract_typeof(e), ' value:')
                                                .concat(e, '}')
                                        );
                                },
                            },
                            {
                                key: 'buildQueueMessage',
                                value: function buildQueueMessage() {
                                    var e = [this.getName(), this.memory];
                                    return this.validateMessage(e), e;
                                },
                            },
                            {
                                key: 'validateMessage',
                                value: function validateMessage(e) {
                                    ('string' == typeof e[0] && 'number' == typeof e[1]) ||
                                        b.warn('device_memory, BrowserPropsContract - Contract verification failed');
                                },
                            },
                            {
                                key: 'getName',
                                value: function getName() {
                                    return 'device_memory';
                                },
                            },
                        ]),
                        DeviceMemoryBrowserPropsContract
                    );
                })();
                function LangBrowserPropsContract_typeof(e) {
                    return (LangBrowserPropsContract_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function LangBrowserPropsContract_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function LangBrowserPropsContract_setPrototypeOf(e, t) {
                    return (LangBrowserPropsContract_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function LangBrowserPropsContract_createSuper(r) {
                    var n = (function LangBrowserPropsContract_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = LangBrowserPropsContract_getPrototypeOf(r);
                        return (function LangBrowserPropsContract_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === LangBrowserPropsContract_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function LangBrowserPropsContract_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = LangBrowserPropsContract_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function LangBrowserPropsContract_getPrototypeOf(e) {
                    return (LangBrowserPropsContract_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var Qn = (function () {
                    !(function LangBrowserPropsContract_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && LangBrowserPropsContract_setPrototypeOf(e, t);
                    })(LangBrowserPropsContract, On);
                    var r = LangBrowserPropsContract_createSuper(LangBrowserPropsContract);
                    function LangBrowserPropsContract(e) {
                        var t;
                        return (
                            (function LangBrowserPropsContract_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, LangBrowserPropsContract),
                            (t = r.call(this)).validateParams(e),
                            (t.language = e),
                            t
                        );
                    }
                    return (
                        (function LangBrowserPropsContract_createClass(e, t, r) {
                            t && LangBrowserPropsContract_defineProperties(e.prototype, t),
                                r && LangBrowserPropsContract_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(LangBrowserPropsContract, [
                            {
                                key: 'validateParams',
                                value: function validateParams(e) {
                                    'string' == typeof e ||
                                        b.warn(
                                            ' wrong type in Lang, BrowserProps parameters. language : {expected: string, received: '.concat(
                                                LangBrowserPropsContract_typeof(e),
                                                '}'
                                            )
                                        );
                                },
                            },
                            {
                                key: 'buildQueueMessage',
                                value: function buildQueueMessage() {
                                    var e = [this.getName(), this.language];
                                    return this.validateMessage(e), e;
                                },
                            },
                            {
                                key: 'validateMessage',
                                value: function validateMessage(e) {
                                    ('string' == typeof e[0] && 'string' == typeof e[1]) ||
                                        b.warn('main_lang, BrowserPropsContract - Contract verification failed');
                                },
                            },
                            {
                                key: 'getName',
                                value: function getName() {
                                    return 'main_lang';
                                },
                            },
                        ]),
                        LangBrowserPropsContract
                    );
                })();
                function LanguagesListBrowserPropsContract_createForOfIteratorHelper(t, r) {
                    var o = ('undefined' != typeof Symbol && t[Symbol.iterator]) || t['@@iterator'];
                    if (!o) {
                        if (
                            Array.isArray(t) ||
                            (o = (function LanguagesListBrowserPropsContract_unsupportedIterableToArray(e, t) {
                                if (!e) return;
                                if ('string' == typeof e)
                                    return LanguagesListBrowserPropsContract_arrayLikeToArray(e, t);
                                var r = Object.prototype.toString.call(e).slice(8, -1);
                                'Object' === r && e.constructor && (r = e.constructor.name);
                                if ('Map' === r || 'Set' === r) return Array.from(e);
                                if ('Arguments' === r || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))
                                    return LanguagesListBrowserPropsContract_arrayLikeToArray(e, t);
                            })(t)) ||
                            (r && t && 'number' == typeof t.length)
                        ) {
                            o && (t = o);
                            var i = 0,
                                r = function F() {};
                            return {
                                s: r,
                                n: function n() {
                                    return i >= t.length ? { done: !0 } : { done: !1, value: t[i++] };
                                },
                                e: function e(t) {
                                    throw t;
                                },
                                f: r,
                            };
                        }
                        throw new TypeError(
                            'Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.'
                        );
                    }
                    var a,
                        u = !0,
                        c = !1;
                    return {
                        s: function s() {
                            o = o.call(t);
                        },
                        n: function n() {
                            var e = o.next();
                            return (u = e.done), e;
                        },
                        e: function e(t) {
                            (c = !0), (a = t);
                        },
                        f: function f() {
                            try {
                                u || null == o.return || o.return();
                            } finally {
                                if (c) throw a;
                            }
                        },
                    };
                }
                function LanguagesListBrowserPropsContract_arrayLikeToArray(e, t) {
                    (null == t || t > e.length) && (t = e.length);
                    for (var r = 0, n = new Array(t); r < t; r++) n[r] = e[r];
                    return n;
                }
                function LanguagesListBrowserPropsContract_typeof(e) {
                    return (LanguagesListBrowserPropsContract_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function LanguagesListBrowserPropsContract_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function LanguagesListBrowserPropsContract_setPrototypeOf(e, t) {
                    return (LanguagesListBrowserPropsContract_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function LanguagesListBrowserPropsContract_createSuper(r) {
                    var n = (function LanguagesListBrowserPropsContract_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = LanguagesListBrowserPropsContract_getPrototypeOf(r);
                        return (function LanguagesListBrowserPropsContract_possibleConstructorReturn(e, t) {
                            {
                                if (
                                    t &&
                                    ('object' === LanguagesListBrowserPropsContract_typeof(t) || 'function' == typeof t)
                                )
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function LanguagesListBrowserPropsContract_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = LanguagesListBrowserPropsContract_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function LanguagesListBrowserPropsContract_getPrototypeOf(e) {
                    return (LanguagesListBrowserPropsContract_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var zn = (function () {
                    !(function LanguagesListBrowserPropsContract_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && LanguagesListBrowserPropsContract_setPrototypeOf(e, t);
                    })(LanguagesListBrowserPropsContract, On);
                    var r = LanguagesListBrowserPropsContract_createSuper(LanguagesListBrowserPropsContract);
                    function LanguagesListBrowserPropsContract(e) {
                        var t;
                        return (
                            (function LanguagesListBrowserPropsContract_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, LanguagesListBrowserPropsContract),
                            (t = r.call(this)).validateParams(e),
                            (t.languagesList = e),
                            t
                        );
                    }
                    return (
                        (function LanguagesListBrowserPropsContract_createClass(e, t, r) {
                            t && LanguagesListBrowserPropsContract_defineProperties(e.prototype, t),
                                r && LanguagesListBrowserPropsContract_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(LanguagesListBrowserPropsContract, [
                            {
                                key: 'validateParams',
                                value: function validateParams(e) {
                                    (Array.isArray(e) && this._eachLangIsValid(e)) ||
                                        b.warn(
                                            ' wrong type in LanguagesList, BrowserProps parameters. languagesList : {expected: [...string], received: '.concat(
                                                LanguagesListBrowserPropsContract_typeof(e),
                                                '}'
                                            )
                                        );
                                },
                            },
                            {
                                key: '_eachLangIsValid',
                                value: function _eachLangIsValid(e) {
                                    var t,
                                        r = !0,
                                        n = LanguagesListBrowserPropsContract_createForOfIteratorHelper(e);
                                    try {
                                        for (n.s(); !(t = n.n()).done; ) 'string' != typeof t.value && (r = !1);
                                    } catch (e) {
                                        n.e(e);
                                    } finally {
                                        n.f();
                                    }
                                    return r;
                                },
                            },
                            {
                                key: 'buildQueueMessage',
                                value: function buildQueueMessage() {
                                    var e = [this.getName(), this.languagesList];
                                    return this.validateMessage(e), e;
                                },
                            },
                            {
                                key: 'validateMessage',
                                value: function validateMessage(e) {
                                    ('string' == typeof e[0] && Array.isArray(e[1])) ||
                                        b.warn('languages, BrowserPropsContract - Contract verification failed');
                                },
                            },
                            {
                                key: 'getName',
                                value: function getName() {
                                    return 'languages';
                                },
                            },
                        ]),
                        LanguagesListBrowserPropsContract
                    );
                })();
                function BuildIDBrowserPropsContract_typeof(e) {
                    return (BuildIDBrowserPropsContract_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function BuildIDBrowserPropsContract_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function BuildIDBrowserPropsContract_setPrototypeOf(e, t) {
                    return (BuildIDBrowserPropsContract_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function BuildIDBrowserPropsContract_createSuper(r) {
                    var n = (function BuildIDBrowserPropsContract_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = BuildIDBrowserPropsContract_getPrototypeOf(r);
                        return (function BuildIDBrowserPropsContract_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === BuildIDBrowserPropsContract_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function BuildIDBrowserPropsContract_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = BuildIDBrowserPropsContract_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function BuildIDBrowserPropsContract_getPrototypeOf(e) {
                    return (BuildIDBrowserPropsContract_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var qn = (function () {
                    !(function BuildIDBrowserPropsContract_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && BuildIDBrowserPropsContract_setPrototypeOf(e, t);
                    })(BuildIDBrowserPropsContract, On);
                    var r = BuildIDBrowserPropsContract_createSuper(BuildIDBrowserPropsContract);
                    function BuildIDBrowserPropsContract(e) {
                        var t;
                        return (
                            (function BuildIDBrowserPropsContract_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, BuildIDBrowserPropsContract),
                            (t = r.call(this)).validateParams(e),
                            (t.buildID = e),
                            t
                        );
                    }
                    return (
                        (function BuildIDBrowserPropsContract_createClass(e, t, r) {
                            t && BuildIDBrowserPropsContract_defineProperties(e.prototype, t),
                                r && BuildIDBrowserPropsContract_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(BuildIDBrowserPropsContract, [
                            {
                                key: 'validateParams',
                                value: function validateParams(e) {
                                    (void 0 !== e && 'string' == typeof e) ||
                                        b.warn(
                                            'The buildID is either undefined or of a wrong type. Expected string, received: '.concat(
                                                BuildIDBrowserPropsContract_typeof(e)
                                            )
                                        );
                                },
                            },
                            {
                                key: 'buildQueueMessage',
                                value: function buildQueueMessage() {
                                    var e = [this.getName(), this.buildID];
                                    return this.validateMessage(e), e;
                                },
                            },
                            {
                                key: 'validateMessage',
                                value: function validateMessage(e) {
                                    ('string' == typeof e[0] && 'string' == typeof e[1]) ||
                                        b.warn(
                                            'navigator_build_id, BrowserPropsContract - Contract verification failed'
                                        );
                                },
                            },
                            {
                                key: 'getName',
                                value: function getName() {
                                    return 'navigator_build_id';
                                },
                            },
                        ]),
                        BuildIDBrowserPropsContract
                    );
                })();
                function MaxTouchPointsBrowserPropsContract_typeof(e) {
                    return (MaxTouchPointsBrowserPropsContract_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function MaxTouchPointsBrowserPropsContract_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function MaxTouchPointsBrowserPropsContract_setPrototypeOf(e, t) {
                    return (MaxTouchPointsBrowserPropsContract_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function MaxTouchPointsBrowserPropsContract_createSuper(r) {
                    var n = (function MaxTouchPointsBrowserPropsContract_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = MaxTouchPointsBrowserPropsContract_getPrototypeOf(r);
                        return (function MaxTouchPointsBrowserPropsContract_possibleConstructorReturn(e, t) {
                            {
                                if (
                                    t &&
                                    ('object' === MaxTouchPointsBrowserPropsContract_typeof(t) ||
                                        'function' == typeof t)
                                )
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function MaxTouchPointsBrowserPropsContract_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = MaxTouchPointsBrowserPropsContract_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function MaxTouchPointsBrowserPropsContract_getPrototypeOf(e) {
                    return (MaxTouchPointsBrowserPropsContract_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var Kn = (function () {
                    !(function MaxTouchPointsBrowserPropsContract_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && MaxTouchPointsBrowserPropsContract_setPrototypeOf(e, t);
                    })(MaxTouchPointsBrowserPropsContract, On);
                    var r = MaxTouchPointsBrowserPropsContract_createSuper(MaxTouchPointsBrowserPropsContract);
                    function MaxTouchPointsBrowserPropsContract(e) {
                        var t;
                        return (
                            (function MaxTouchPointsBrowserPropsContract_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, MaxTouchPointsBrowserPropsContract),
                            (t = r.call(this)).validateParams(e),
                            (t.maxTouchPoints = e),
                            t
                        );
                    }
                    return (
                        (function MaxTouchPointsBrowserPropsContract_createClass(e, t, r) {
                            t && MaxTouchPointsBrowserPropsContract_defineProperties(e.prototype, t),
                                r && MaxTouchPointsBrowserPropsContract_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(MaxTouchPointsBrowserPropsContract, [
                            {
                                key: 'validateParams',
                                value: function validateParams(e) {
                                    (void 0 !== e && 'number' == typeof e) ||
                                        b.warn(
                                            'wrong type in MaxTouchPointsContract parameters. Expected: number, received: '.concat(
                                                MaxTouchPointsBrowserPropsContract_typeof(e)
                                            )
                                        );
                                },
                            },
                            {
                                key: 'buildQueueMessage',
                                value: function buildQueueMessage() {
                                    var e = [this.getName(), this.maxTouchPoints];
                                    return this.validateMessage(e), e;
                                },
                            },
                            {
                                key: 'validateMessage',
                                value: function validateMessage(e) {
                                    ('string' == typeof e[0] && 'number' == typeof e[1]) ||
                                        b.warn(
                                            'navigator_max_touch_points, BrowserPropsContract - Contract verification failed'
                                        );
                                },
                            },
                            {
                                key: 'getName',
                                value: function getName() {
                                    return 'navigator_max_touch_points';
                                },
                            },
                        ]),
                        MaxTouchPointsBrowserPropsContract
                    );
                })();
                function BrowserPropsFeature_typeof(e) {
                    return (BrowserPropsFeature_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function BrowserPropsFeature_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function BrowserPropsFeature_setPrototypeOf(e, t) {
                    return (BrowserPropsFeature_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function BrowserPropsFeature_createSuper(r) {
                    var n = (function BrowserPropsFeature_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = BrowserPropsFeature_getPrototypeOf(r);
                        return (function BrowserPropsFeature_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === BrowserPropsFeature_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function BrowserPropsFeature_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = BrowserPropsFeature_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function BrowserPropsFeature_getPrototypeOf(e) {
                    return (BrowserPropsFeature_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var Gn = {
                        configKey: 'collectBrowserProps',
                        isDefault: !1,
                        shouldRunPerContext: !1,
                        shouldRunPerSession: !0,
                        shouldRun: !0,
                        isFrameRelated: !1,
                        runInUns: !0,
                        runInSlave: !1,
                        runInLean: !1,
                        isRunning: !1,
                        instance: null,
                    },
                    Vn = (function () {
                        !(function BrowserPropsFeature_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && BrowserPropsFeature_setPrototypeOf(e, t);
                        })(BrowserPropsFeature, Ce);
                        var i = BrowserPropsFeature_createSuper(BrowserPropsFeature);
                        function BrowserPropsFeature(e, t, r, n) {
                            var o;
                            return (
                                (function BrowserPropsFeature_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, BrowserPropsFeature),
                                ((o = i.call(this))._dataQ = e),
                                (o._pointerHoverDetector = t),
                                (o._utils = r),
                                (o._configurationRepository = n),
                                o
                            );
                        }
                        return (
                            (function BrowserPropsFeature_createClass(e, t, r) {
                                t && BrowserPropsFeature_defineProperties(e.prototype, t),
                                    r && BrowserPropsFeature_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(
                                BrowserPropsFeature,
                                [
                                    {
                                        key: 'startFeature',
                                        value: function startFeature() {
                                            var t = this;
                                            b.info('Collecting Browser Props');
                                            var e = new Dn(this._utils.scriptVersion).buildQueueMessage();
                                            this._dataQ.addToQueue('static_fields', e, !1);
                                            e = new Fn('js').buildQueueMessage();
                                            this._dataQ.addToQueue('static_fields', e, !1),
                                                b.info('SDK Version is '.concat(this._utils.scriptVersion));
                                            e = BrowserPropsFeature.getLanguage();
                                            e &&
                                                (this._configurationRepository.get(
                                                    'browserPropsShouldHashLanguageField'
                                                ) &&
                                                    (b.debug('Hashing language field according to configuration'),
                                                    (e = this._utils.getHash(e).toString())),
                                                (r = new Qn(e).buildQueueMessage()),
                                                this._dataQ.addToQueue('static_fields', r, !1));
                                            e = new Tn(
                                                BrowserPropsFeature.getAvailablePlatform(window.navigator)
                                            ).buildQueueMessage();
                                            this._dataQ.addToQueue('static_fields', e, !1);
                                            var r = BrowserPropsFeature.getOperatingSystem(),
                                                e = new In(r.version).buildQueueMessage();
                                            this._dataQ.addToQueue('static_fields', e, !1);
                                            r = new xn(r.name).buildQueueMessage();
                                            this._dataQ.addToQueue('static_fields', r, !1);
                                            (r = this._pointerHoverDetector.getPointerHover()),
                                                (r = new An(r.pointer, r.hover).buildQueueMessage());
                                            this._dataQ.addToQueue('static_fields', r, !1);
                                            r = new Ln(window.navigator.hardwareConcurrency || 0).buildQueueMessage();
                                            this._dataQ.addToQueue('static_fields', r, !1),
                                                navigator.languages &&
                                                    ((n = navigator.languages),
                                                    this._configurationRepository.get(
                                                        'browserPropsShouldHashLanguageField'
                                                    ) &&
                                                        (b.debug('Hashing languages field according to configuration'),
                                                        (n = Array.from(n, function (e) {
                                                            return t._utils.getHash(e).toString();
                                                        }))),
                                                    (n = new zn(n).buildQueueMessage()),
                                                    this._dataQ.addToQueue('static_fields', n, !1));
                                            var n = BrowserPropsFeature.getPlugins();
                                            n &&
                                                0 < n.length &&
                                                ((o = new jn(n).buildQueueMessage()),
                                                this._dataQ.addToQueue('static_fields', o, !1));
                                            var o = new Un(navigator.userAgent).buildQueueMessage();
                                            this._dataQ.addToQueue('static_fields', o, !1);
                                            (o = -1 * new Date().getTimezoneOffset()),
                                                (o = new Nn(o).buildQueueMessage());
                                            this._dataQ.addToQueue('static_fields', o, !1);
                                            (o = BrowserPropsFeature.checkCookie()),
                                                (o = new Wn(o).buildQueueMessage());
                                            this._dataQ.addToQueue('static_fields', o, !1);
                                            (o = navigator.deviceMemory || 0), (o = new Hn(o).buildQueueMessage());
                                            this._dataQ.addToQueue('static_fields', o, !1);
                                            o = navigator.buildID;
                                            o &&
                                                ((i = new qn(o).buildQueueMessage()),
                                                this._dataQ.addToQueue('static_fields', i, !1));
                                            var i = navigator.maxTouchPoints,
                                                i = new Kn(i).buildQueueMessage();
                                            this._dataQ.addToQueue('static_fields', i, !1),
                                                b.info('Browser Props collected');
                                        },
                                    },
                                ],
                                [
                                    {
                                        key: 'getDefaultSettings',
                                        value: function getDefaultSettings() {
                                            return Gn;
                                        },
                                    },
                                    {
                                        key: 'getLanguage',
                                        value: function getLanguage() {
                                            if (navigator) {
                                                if (navigator.language) return navigator.language;
                                                if (navigator.userLanguage) return navigator.userLanguage;
                                            }
                                        },
                                    },
                                    {
                                        key: 'getPlugins',
                                        value: function getPlugins() {
                                            try {
                                                var e = [];
                                                if (window.navigator.plugins && 0 < window.navigator.plugins.length)
                                                    for (var t = 0, r = window.navigator.plugins.length; t < r; t++)
                                                        e.push([
                                                            window.navigator.plugins[t].name,
                                                            window.navigator.plugins[t].filename,
                                                            window.navigator.plugins[t].description,
                                                            window.navigator.plugins[t].version || '',
                                                        ]);
                                                else if (
                                                    window.navigator.mimeTypes &&
                                                    0 < window.navigator.mimeTypes.length
                                                )
                                                    for (var n = 0; n < window.navigator.mimeTypes.length; n++)
                                                        e.push([
                                                            window.navigator.mimeTypes[n].type,
                                                            '',
                                                            window.navigator.mimeTypes[n].description,
                                                            '',
                                                        ]);
                                                var o = BrowserPropsFeature.isActiveXAndFlashEnabled;
                                                return (
                                                    BrowserPropsFeature.augmentWithFlashInIE(
                                                        e,
                                                        window.navigator.plugins,
                                                        o
                                                    ),
                                                    e
                                                );
                                            } catch (e) {
                                                b.warn('getPlugins error: '.concat(e.message), e);
                                            }
                                        },
                                    },
                                    {
                                        key: 'checkCookie',
                                        value: function checkCookie() {
                                            var e = navigator.cookieEnabled;
                                            return (
                                                e ||
                                                    (this._utils.StorageUtils.setCookie('testcookie', '1', 6e4),
                                                    (e = -1 !== document.cookie.indexOf('testcookie'))),
                                                e
                                            );
                                        },
                                    },
                                    {
                                        key: 'getOperatingSystem',
                                        value: function getOperatingSystem() {
                                            for (
                                                var e,
                                                    t,
                                                    r = [
                                                        {
                                                            name: 'Windows Phone',
                                                            value: 'Windows Phone',
                                                            version: 'OS',
                                                        },
                                                        { name: 'Windows', value: 'Win', version: 'NT' },
                                                        { name: 'iPhone', value: 'iPhone', version: 'OS' },
                                                        { name: 'iPad', value: 'iPad', version: 'OS' },
                                                        { name: 'Kindle', value: 'Silk', version: 'Silk' },
                                                        { name: 'Android', value: 'Android', version: 'Android' },
                                                        { name: 'PlayBook', value: 'PlayBook', version: 'OS' },
                                                        { name: 'BlackBerry', value: 'BlackBerry', version: '/' },
                                                        { name: 'Macintosh', value: 'Mac', version: 'OS X' },
                                                        { name: 'Linux', value: 'Linux', version: 'rv' },
                                                        { name: 'Palm', value: 'Palm', version: 'PalmOS' },
                                                    ],
                                                    n = [
                                                        BrowserPropsFeature.getAvailablePlatform(window.navigator),
                                                        navigator.userAgent,
                                                    ].join(' '),
                                                    o = '',
                                                    i = 'Unknown',
                                                    s = 0;
                                                s < r.length;
                                                s++
                                            )
                                                if (new RegExp(r[s].value, 'i').test(n)) {
                                                    if (
                                                        ((e = new RegExp(r[s].version + '[- /:;]([\\d._]+)', 'i')),
                                                        (t = n.match(e)))
                                                    ) {
                                                        t[1] && (t = t[1]), (t = t.split(/[._]+/));
                                                        for (var a = 0; a < t.length; a++)
                                                            o += 0 === a ? t[a] + '.' : t[a];
                                                    }
                                                    i = r[s].name;
                                                    break;
                                                }
                                            return { version: parseFloat(o) || null, name: i };
                                        },
                                    },
                                    {
                                        key: 'isActiveXAndFlashEnabled',
                                        value: function isActiveXAndFlashEnabled() {
                                            try {
                                                return Boolean(new ActiveXObject('ShockwaveFlash.ShockwaveFlash'));
                                            } catch (e) {
                                                return !1;
                                            }
                                        },
                                    },
                                    {
                                        key: 'getAvailablePlatform',
                                        value: function getAvailablePlatform(e) {
                                            return 'platform' in e
                                                ? e.platform
                                                : 'userAgentData' in e
                                                ? e.userAgentData.platform
                                                : null;
                                        },
                                    },
                                    {
                                        key: 'augmentWithFlashInIE',
                                        value: function augmentWithFlashInIE(e, t, r) {
                                            if ('[object PluginArray]' === Object.prototype.toString.call(t)) return e;
                                            return (
                                                r() &&
                                                    e.push([
                                                        'Flash32_32_0_0_238.ocx',
                                                        2,
                                                        'Shockwave Flash',
                                                        '32.0.0.238',
                                                    ]),
                                                e
                                            );
                                        },
                                    },
                                ]
                            ),
                            BrowserPropsFeature
                        );
                    })();
                function DoNotTrackContract_typeof(e) {
                    return (DoNotTrackContract_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function DoNotTrackContract_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function DoNotTrackContract_setPrototypeOf(e, t) {
                    return (DoNotTrackContract_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function DoNotTrackContract_createSuper(r) {
                    var n = (function DoNotTrackContract_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = DoNotTrackContract_getPrototypeOf(r);
                        return (function DoNotTrackContract_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === DoNotTrackContract_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function DoNotTrackContract_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = DoNotTrackContract_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function DoNotTrackContract_getPrototypeOf(e) {
                    return (DoNotTrackContract_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var Xn = (function () {
                    !(function DoNotTrackContract_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && DoNotTrackContract_setPrototypeOf(e, t);
                    })(DoNotTrackContract, On);
                    var r = DoNotTrackContract_createSuper(DoNotTrackContract);
                    function DoNotTrackContract(e) {
                        var t;
                        return (
                            (function DoNotTrackContract_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, DoNotTrackContract),
                            (t = r.call(this)).validateParams(e),
                            (t.dnt = e),
                            t
                        );
                    }
                    return (
                        (function DoNotTrackContract_createClass(e, t, r) {
                            t && DoNotTrackContract_defineProperties(e.prototype, t),
                                r && DoNotTrackContract_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(DoNotTrackContract, [
                            {
                                key: 'validateParams',
                                value: function validateParams(e) {
                                    ('number' == typeof e && (0 === e || 1 === e || 2 === e)) ||
                                        b.warn(
                                            'wrong type in DoNotTrackContract parameters. dnt : {expected: number in {0,1,2}, received: type: '
                                                .concat(DoNotTrackContract_typeof(e), ', value: ')
                                                .concat(e)
                                        );
                                },
                            },
                            {
                                key: 'buildQueueMessage',
                                value: function buildQueueMessage() {
                                    var e = [this.getName(), this.dnt];
                                    return this.validateMessage(e), e;
                                },
                            },
                            {
                                key: 'validateMessage',
                                value: function validateMessage(e) {
                                    ('string' == typeof e[0] && 'number' == typeof e[1]) ||
                                        b.warn('DoNotTrack - Contract verification failed');
                                },
                            },
                            {
                                key: 'getName',
                                value: function getName() {
                                    return 'dnt';
                                },
                            },
                        ]),
                        DoNotTrackContract
                    );
                })();
                function DoNotTrackFeature_typeof(e) {
                    return (DoNotTrackFeature_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function DoNotTrackFeature_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function DoNotTrackFeature_setPrototypeOf(e, t) {
                    return (DoNotTrackFeature_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function DoNotTrackFeature_createSuper(r) {
                    var n = (function DoNotTrackFeature_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = DoNotTrackFeature_getPrototypeOf(r);
                        return (function DoNotTrackFeature_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === DoNotTrackFeature_typeof(t) || 'function' == typeof t)) return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function DoNotTrackFeature_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = DoNotTrackFeature_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function DoNotTrackFeature_getPrototypeOf(e) {
                    return (DoNotTrackFeature_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var Zn = {
                        configKey: 'isDoNotTrack',
                        isDefault: !1,
                        shouldRunPerContext: !1,
                        shouldRunPerSession: !0,
                        shouldRun: !0,
                        isFrameRelated: !1,
                        runInUns: !0,
                        runInSlave: !1,
                        runInLean: !1,
                        isRunning: !1,
                        instance: null,
                    },
                    Yn = (function () {
                        !(function DoNotTrackFeature_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && DoNotTrackFeature_setPrototypeOf(e, t);
                        })(DoNotTrackFeature, Ce);
                        var r = DoNotTrackFeature_createSuper(DoNotTrackFeature);
                        function DoNotTrackFeature(e) {
                            var t;
                            return (
                                (function DoNotTrackFeature_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, DoNotTrackFeature),
                                ((t = r.call(this))._dataQ = e),
                                t
                            );
                        }
                        return (
                            (function DoNotTrackFeature_createClass(e, t, r) {
                                t && DoNotTrackFeature_defineProperties(e.prototype, t),
                                    r && DoNotTrackFeature_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(
                                DoNotTrackFeature,
                                [
                                    {
                                        key: 'startFeature',
                                        value: function startFeature() {
                                            var e = navigator.doNotTrack;
                                            void 0 === e &&
                                                void 0 === (e = window.doNotTrack) &&
                                                (e = navigator.msDoNotTrack);
                                            e = new Xn(
                                                (e =
                                                    null === e || 'unspecified' === e || '0' === e
                                                        ? 0
                                                        : '1' === e
                                                        ? 1
                                                        : 2)
                                            ).buildQueueMessage();
                                            this._dataQ.addToQueue('static_fields', e, !1);
                                        },
                                    },
                                ],
                                [
                                    {
                                        key: 'getDefaultSettings',
                                        value: function getDefaultSettings() {
                                            return Zn;
                                        },
                                    },
                                ]
                            ),
                            DoNotTrackFeature
                        );
                    })();
                function GraphicDetectContract_typeof(e) {
                    return (GraphicDetectContract_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function GraphicDetectContract_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function GraphicDetectContract_setPrototypeOf(e, t) {
                    return (GraphicDetectContract_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function GraphicDetectContract_createSuper(r) {
                    var n = (function GraphicDetectContract_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = GraphicDetectContract_getPrototypeOf(r);
                        return (function GraphicDetectContract_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === GraphicDetectContract_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function GraphicDetectContract_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = GraphicDetectContract_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function GraphicDetectContract_getPrototypeOf(e) {
                    return (GraphicDetectContract_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var Jn = (function () {
                    !(function GraphicDetectContract_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && GraphicDetectContract_setPrototypeOf(e, t);
                    })(GraphicDetectContract, On);
                    var o = GraphicDetectContract_createSuper(GraphicDetectContract);
                    function GraphicDetectContract(e, t, r) {
                        var n;
                        return (
                            (function GraphicDetectContract_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, GraphicDetectContract),
                            (n = o.call(this)).validateParams(e, t, r),
                            (n.renderer = e),
                            (n.vendor = t),
                            (n.version = r),
                            n
                        );
                    }
                    return (
                        (function GraphicDetectContract_createClass(e, t, r) {
                            t && GraphicDetectContract_defineProperties(e.prototype, t),
                                r && GraphicDetectContract_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(GraphicDetectContract, [
                            {
                                key: 'validateParams',
                                value: function validateParams(e, t, r) {
                                    ('string' == typeof e && 'string' == typeof t && 'string' == typeof r) ||
                                        b.warn(
                                            'wrong type in GraphicDetectContract parameters. renderer: {expected: string, received: '
                                                .concat(
                                                    GraphicDetectContract_typeof(e),
                                                    '}, vendor: {expected: string, received: '
                                                )
                                                .concat(
                                                    GraphicDetectContract_typeof(t),
                                                    '},\n            version: {expected: string, received: '
                                                )
                                                .concat(GraphicDetectContract_typeof(r), '}')
                                        );
                                },
                            },
                            {
                                key: 'buildQueueMessage',
                                value: function buildQueueMessage() {
                                    var e = [this.getName(), [this.renderer, this.vendor, this.version]];
                                    return this.validateMessage(e), e;
                                },
                            },
                            {
                                key: 'validateMessage',
                                value: function validateMessage(e) {
                                    ('string' == typeof e[0] && Array.isArray(e[1]) && 3 === e[1].length) ||
                                        b.warn('GraphicDetect - Contract verification failed');
                                },
                            },
                            {
                                key: 'getName',
                                value: function getName() {
                                    return 'grph_card';
                                },
                            },
                        ]),
                        GraphicDetectContract
                    );
                })();
                function GraphicDetectFeature_typeof(e) {
                    return (GraphicDetectFeature_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function GraphicDetectFeature_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function GraphicDetectFeature_setPrototypeOf(e, t) {
                    return (GraphicDetectFeature_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function GraphicDetectFeature_createSuper(r) {
                    var n = (function GraphicDetectFeature_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = GraphicDetectFeature_getPrototypeOf(r);
                        return (function GraphicDetectFeature_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === GraphicDetectFeature_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function GraphicDetectFeature_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = GraphicDetectFeature_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function GraphicDetectFeature_getPrototypeOf(e) {
                    return (GraphicDetectFeature_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var $n = {
                        configKey: 'isVMDetection',
                        isDefault: !1,
                        shouldRunPerContext: !1,
                        shouldRunPerSession: !0,
                        shouldRun: !0,
                        isFrameRelated: !1,
                        runInUns: !1,
                        runInSlave: !1,
                        runInLean: !1,
                        isRunning: !1,
                        instance: null,
                    },
                    eo = (function () {
                        !(function GraphicDetectFeature_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && GraphicDetectFeature_setPrototypeOf(e, t);
                        })(GraphicDetectFeature, Ce);
                        var r = GraphicDetectFeature_createSuper(GraphicDetectFeature);
                        function GraphicDetectFeature(e) {
                            var t;
                            return (
                                (function GraphicDetectFeature_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, GraphicDetectFeature),
                                ((t = r.call(this))._dataQ = e),
                                (t.canvasId = 'cd_canvas'),
                                t
                            );
                        }
                        return (
                            (function GraphicDetectFeature_createClass(e, t, r) {
                                t && GraphicDetectFeature_defineProperties(e.prototype, t),
                                    r && GraphicDetectFeature_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(
                                GraphicDetectFeature,
                                [
                                    {
                                        key: 'startFeature',
                                        value: function startFeature() {
                                            try {
                                                this._getMappedRenderInfo();
                                            } catch (e) {
                                                b.error('Failed collecting Graphic Card information. '.concat(e));
                                            }
                                        },
                                    },
                                    {
                                        key: '_getMappedRenderInfo',
                                        value: function _getMappedRenderInfo() {
                                            b.info('Collecting Graphic Card props');
                                            var e,
                                                t,
                                                r = { renderer: 'unknown', vendor: '', version: 'unknown' };
                                            (window.WebGLRenderingContext || window.WebGL2RenderingContext) &&
                                                (((t = document.createElement('canvas')).id = this.canvasId),
                                                !(e = t.getContext('experimental-webgl')) ||
                                                    (null != (t = e.getExtension('WEBGL_debug_renderer_info')) &&
                                                        ((r.renderer = e.getParameter(t.UNMASKED_RENDERER_WEBGL)),
                                                        (r.vendor = e.getParameter(t.UNMASKED_VENDOR_WEBGL)),
                                                        -1 < r.renderer.indexOf('Intel') &&
                                                            -1 < r.renderer.indexOf('HD Graphics') &&
                                                            (t = r.renderer.match(/\d+/g)) &&
                                                            (500 < (t = t[0]) &&
                                                                t < 599 &&
                                                                (r.version = 'SKL (6th gen core)'),
                                                            5300 < t &&
                                                                t < 6999 &&
                                                                (r.version = 'BDW (5th gen core)')))));
                                            r = new Jn(r.renderer, r.vendor, r.version).buildQueueMessage();
                                            this._dataQ.addToQueue('static_fields', r, !1),
                                                b.info('Graphic Card props collected');
                                        },
                                    },
                                ],
                                [
                                    {
                                        key: 'getDefaultSettings',
                                        value: function getDefaultSettings() {
                                            return $n;
                                        },
                                    },
                                ]
                            ),
                            GraphicDetectFeature
                        );
                    })();
                function MediaDevicesContract_typeof(e) {
                    return (MediaDevicesContract_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function MediaDevicesContract_createForOfIteratorHelper(t, r) {
                    var o = ('undefined' != typeof Symbol && t[Symbol.iterator]) || t['@@iterator'];
                    if (!o) {
                        if (
                            Array.isArray(t) ||
                            (o = (function MediaDevicesContract_unsupportedIterableToArray(e, t) {
                                if (!e) return;
                                if ('string' == typeof e) return MediaDevicesContract_arrayLikeToArray(e, t);
                                var r = Object.prototype.toString.call(e).slice(8, -1);
                                'Object' === r && e.constructor && (r = e.constructor.name);
                                if ('Map' === r || 'Set' === r) return Array.from(e);
                                if ('Arguments' === r || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))
                                    return MediaDevicesContract_arrayLikeToArray(e, t);
                            })(t)) ||
                            (r && t && 'number' == typeof t.length)
                        ) {
                            o && (t = o);
                            var i = 0,
                                r = function F() {};
                            return {
                                s: r,
                                n: function n() {
                                    return i >= t.length ? { done: !0 } : { done: !1, value: t[i++] };
                                },
                                e: function e(t) {
                                    throw t;
                                },
                                f: r,
                            };
                        }
                        throw new TypeError(
                            'Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.'
                        );
                    }
                    var a,
                        u = !0,
                        c = !1;
                    return {
                        s: function s() {
                            o = o.call(t);
                        },
                        n: function n() {
                            var e = o.next();
                            return (u = e.done), e;
                        },
                        e: function e(t) {
                            (c = !0), (a = t);
                        },
                        f: function f() {
                            try {
                                u || null == o.return || o.return();
                            } finally {
                                if (c) throw a;
                            }
                        },
                    };
                }
                function MediaDevicesContract_arrayLikeToArray(e, t) {
                    (null == t || t > e.length) && (t = e.length);
                    for (var r = 0, n = new Array(t); r < t; r++) n[r] = e[r];
                    return n;
                }
                function MediaDevicesContract_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function MediaDevicesContract_setPrototypeOf(e, t) {
                    return (MediaDevicesContract_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function MediaDevicesContract_createSuper(r) {
                    var n = (function MediaDevicesContract_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = MediaDevicesContract_getPrototypeOf(r);
                        return (function MediaDevicesContract_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === MediaDevicesContract_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function MediaDevicesContract_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = MediaDevicesContract_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function MediaDevicesContract_getPrototypeOf(e) {
                    return (MediaDevicesContract_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var to = (function () {
                    !(function MediaDevicesContract_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && MediaDevicesContract_setPrototypeOf(e, t);
                    })(MediaDevicesContract, On);
                    var r = MediaDevicesContract_createSuper(MediaDevicesContract);
                    function MediaDevicesContract(e) {
                        var t;
                        return (
                            (function MediaDevicesContract_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, MediaDevicesContract),
                            (t = r.call(this)).validateParams(e),
                            (t.mediaDevices = e),
                            t
                        );
                    }
                    return (
                        (function MediaDevicesContract_createClass(e, t, r) {
                            t && MediaDevicesContract_defineProperties(e.prototype, t),
                                r && MediaDevicesContract_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(MediaDevicesContract, [
                            {
                                key: 'validateParams',
                                value: function validateParams(e) {
                                    (Array.isArray(e) && this._eachDeviceIsValid(e)) ||
                                        b.warn(
                                            ' wrong type in MediaDevicesContract parameters. mediaDevices : {expected: [[...string]], received: '.concat(
                                                e,
                                                '}'
                                            )
                                        );
                                },
                            },
                            {
                                key: '_eachDeviceIsValid',
                                value: function _eachDeviceIsValid(e) {
                                    var t = !0,
                                        r = !0,
                                        n = !0,
                                        o = MediaDevicesContract_createForOfIteratorHelper(e);
                                    try {
                                        for (o.s(); !(i = o.n()).done; ) {
                                            var i = i.value;
                                            if (Array.isArray(i)) {
                                                4 !== i.length && (n = !1);
                                                var s,
                                                    a = MediaDevicesContract_createForOfIteratorHelper(i);
                                                try {
                                                    for (a.s(); !(s = a.n()).done; )
                                                        'string' != typeof s.value && (r = !1);
                                                } catch (e) {
                                                    a.e(e);
                                                } finally {
                                                    a.f();
                                                }
                                            } else t = !1;
                                        }
                                    } catch (e) {
                                        o.e(e);
                                    } finally {
                                        o.f();
                                    }
                                    return t && n && r;
                                },
                            },
                            {
                                key: 'buildQueueMessage',
                                value: function buildQueueMessage() {
                                    var e = [this.getName(), this.mediaDevices];
                                    return this.validateMessage(e), e;
                                },
                            },
                            {
                                key: 'validateMessage',
                                value: function validateMessage(e) {
                                    ('string' == typeof e[0] && Array.isArray(e[1])) ||
                                        b.warn('MediaDevices - Contract verification failed');
                                },
                            },
                            {
                                key: 'getName',
                                value: function getName() {
                                    return 'media_devices';
                                },
                            },
                        ]),
                        MediaDevicesContract
                    );
                })();
                function MediaDevicesFeature_typeof(e) {
                    return (MediaDevicesFeature_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function MediaDevicesFeature_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function MediaDevicesFeature_setPrototypeOf(e, t) {
                    return (MediaDevicesFeature_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function MediaDevicesFeature_createSuper(r) {
                    var n = (function MediaDevicesFeature_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = MediaDevicesFeature_getPrototypeOf(r);
                        return (function MediaDevicesFeature_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === MediaDevicesFeature_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function MediaDevicesFeature_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = MediaDevicesFeature_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function MediaDevicesFeature_getPrototypeOf(e) {
                    return (MediaDevicesFeature_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var ro = {
                        configKey: 'isMediaDevices',
                        isDefault: !1,
                        shouldRunPerContext: !1,
                        shouldRunPerSession: !0,
                        shouldRun: !0,
                        isFrameRelated: !1,
                        runInUns: !1,
                        runInSlave: !1,
                        runInLean: !1,
                        isRunning: !1,
                        instance: null,
                    },
                    no = (function () {
                        !(function MediaDevicesFeature_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && MediaDevicesFeature_setPrototypeOf(e, t);
                        })(MediaDevicesFeature, Ce);
                        var n = MediaDevicesFeature_createSuper(MediaDevicesFeature);
                        function MediaDevicesFeature(e) {
                            var t,
                                r = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : window.navigator;
                            return (
                                (function MediaDevicesFeature_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, MediaDevicesFeature),
                                ((t = n.call(this))._dataQ = e),
                                (t._navigator = r),
                                (t._metric = 'MediaDevicesFeature'),
                                t
                            );
                        }
                        return (
                            (function MediaDevicesFeature_createClass(e, t, r) {
                                t && MediaDevicesFeature_defineProperties(e.prototype, t),
                                    r && MediaDevicesFeature_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(
                                MediaDevicesFeature,
                                [
                                    {
                                        key: 'startFeature',
                                        value: function startFeature() {
                                            var r = this;
                                            this._navigator.mediaDevices &&
                                                this._navigator.mediaDevices.enumerateDevices &&
                                                this._navigator.mediaDevices
                                                    .enumerateDevices()
                                                    .then(function (e) {
                                                        var t = [];
                                                        e.forEach(function (e) {
                                                            e = [
                                                                e.kind || '',
                                                                e.label || '',
                                                                e.deviceId || '',
                                                                e.groupId || '',
                                                            ];
                                                            t.push(e);
                                                        });
                                                        e = new to(t).buildQueueMessage();
                                                        r._dataQ.addToQueue('static_fields', e, !1);
                                                    })
                                                    .catch(function (e) {
                                                        r.cancelMonitor(r._metric),
                                                            b.error(
                                                                'MediaDevicesFeature:startFeature failed to enumerateDevices: '.concat(
                                                                    e.message
                                                                )
                                                            );
                                                    });
                                        },
                                    },
                                ],
                                [
                                    {
                                        key: 'getDefaultSettings',
                                        value: function getDefaultSettings() {
                                            return ro;
                                        },
                                    },
                                ]
                            ),
                            MediaDevicesFeature
                        );
                    })();
                function PerUserPermissionContract_typeof(e) {
                    return (PerUserPermissionContract_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function PerUserPermissionContract_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function PerUserPermissionContract_setPrototypeOf(e, t) {
                    return (PerUserPermissionContract_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function PerUserPermissionContract_createSuper(r) {
                    var n = (function PerUserPermissionContract_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = PerUserPermissionContract_getPrototypeOf(r);
                        return (function PerUserPermissionContract_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === PerUserPermissionContract_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function PerUserPermissionContract_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = PerUserPermissionContract_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function PerUserPermissionContract_getPrototypeOf(e) {
                    return (PerUserPermissionContract_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var oo = (function () {
                    !(function PerUserPermissionContract_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && PerUserPermissionContract_setPrototypeOf(e, t);
                    })(PerUserPermissionContract, On);
                    var n = PerUserPermissionContract_createSuper(PerUserPermissionContract);
                    function PerUserPermissionContract(e, t) {
                        var r;
                        return (
                            (function PerUserPermissionContract_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, PerUserPermissionContract),
                            (r = n.call(this)).validateParams(e, t),
                            (r.per = e),
                            (r.state = t),
                            r
                        );
                    }
                    return (
                        (function PerUserPermissionContract_createClass(e, t, r) {
                            t && PerUserPermissionContract_defineProperties(e.prototype, t),
                                r && PerUserPermissionContract_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(PerUserPermissionContract, [
                            {
                                key: 'validateParams',
                                value: function validateParams(e, t) {
                                    ('string' == typeof e && 'number' == typeof t) ||
                                        b.warn(
                                            'wrong type in Per, UserPermissionContract, parameters. per : {expected: string, received: '
                                                .concat(
                                                    PerUserPermissionContract_typeof(e),
                                                    '}, state : {expected: number, received: '
                                                )
                                                .concat(PerUserPermissionContract_typeof(t), '}')
                                        );
                                },
                            },
                            {
                                key: 'buildQueueMessage',
                                value: function buildQueueMessage() {
                                    var e = [this.getName(), this.state];
                                    return this.validateMessage(e), e;
                                },
                            },
                            {
                                key: 'validateMessage',
                                value: function validateMessage(e) {
                                    ('string' == typeof e[0] && 'number' == typeof e[1]) ||
                                        b.warn('per, UserPermissionContract - Contract verification failed');
                                },
                            },
                            {
                                key: 'getName',
                                value: function getName() {
                                    return 'per_'.concat(this.per);
                                },
                            },
                        ]),
                        PerUserPermissionContract
                    );
                })();
                function PerStorageUserPermissionContract_typeof(e) {
                    return (PerStorageUserPermissionContract_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function PerStorageUserPermissionContract_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function PerStorageUserPermissionContract_setPrototypeOf(e, t) {
                    return (PerStorageUserPermissionContract_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function PerStorageUserPermissionContract_createSuper(r) {
                    var n = (function PerStorageUserPermissionContract_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = PerStorageUserPermissionContract_getPrototypeOf(r);
                        return (function PerStorageUserPermissionContract_possibleConstructorReturn(e, t) {
                            {
                                if (
                                    t &&
                                    ('object' === PerStorageUserPermissionContract_typeof(t) || 'function' == typeof t)
                                )
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function PerStorageUserPermissionContract_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = PerStorageUserPermissionContract_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function PerStorageUserPermissionContract_getPrototypeOf(e) {
                    return (PerStorageUserPermissionContract_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var io = (function () {
                    !(function PerStorageUserPermissionContract_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && PerStorageUserPermissionContract_setPrototypeOf(e, t);
                    })(PerStorageUserPermissionContract, On);
                    var r = PerStorageUserPermissionContract_createSuper(PerStorageUserPermissionContract);
                    function PerStorageUserPermissionContract(e) {
                        var t;
                        return (
                            (function PerStorageUserPermissionContract_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, PerStorageUserPermissionContract),
                            (t = r.call(this)).validateParams(e),
                            (t.persistent = e),
                            t
                        );
                    }
                    return (
                        (function PerStorageUserPermissionContract_createClass(e, t, r) {
                            t && PerStorageUserPermissionContract_defineProperties(e.prototype, t),
                                r && PerStorageUserPermissionContract_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(PerStorageUserPermissionContract, [
                            {
                                key: 'validateParams',
                                value: function validateParams(e) {
                                    'number' == typeof e ||
                                        b.warn(
                                            'wrong type in PerStorage , UserPermissionContract, parameters. persistent : {expected: number, received: '.concat(
                                                PerStorageUserPermissionContract_typeof(e),
                                                '}'
                                            )
                                        );
                                },
                            },
                            {
                                key: 'buildQueueMessage',
                                value: function buildQueueMessage() {
                                    var e = [this.getName(), this.persistent];
                                    return this.validateMessage(e), e;
                                },
                            },
                            {
                                key: 'validateMessage',
                                value: function validateMessage(e) {
                                    ('string' == typeof e[0] && 'number' == typeof e[1]) ||
                                        b.warn('per_storage, UserPermissionContract - Contract verification failed');
                                },
                            },
                            {
                                key: 'getName',
                                value: function getName() {
                                    return 'per_storage';
                                },
                            },
                        ]),
                        PerStorageUserPermissionContract
                    );
                })();
                function PerKindUserPermissionContract_typeof(e) {
                    return (PerKindUserPermissionContract_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function PerKindUserPermissionContract_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function PerKindUserPermissionContract_setPrototypeOf(e, t) {
                    return (PerKindUserPermissionContract_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function PerKindUserPermissionContract_createSuper(r) {
                    var n = (function PerKindUserPermissionContract_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = PerKindUserPermissionContract_getPrototypeOf(r);
                        return (function PerKindUserPermissionContract_possibleConstructorReturn(e, t) {
                            {
                                if (
                                    t &&
                                    ('object' === PerKindUserPermissionContract_typeof(t) || 'function' == typeof t)
                                )
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function PerKindUserPermissionContract_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = PerKindUserPermissionContract_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function PerKindUserPermissionContract_getPrototypeOf(e) {
                    return (PerKindUserPermissionContract_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var so = (function () {
                    !(function PerKindUserPermissionContract_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && PerKindUserPermissionContract_setPrototypeOf(e, t);
                    })(PerKindUserPermissionContract, On);
                    var n = PerKindUserPermissionContract_createSuper(PerKindUserPermissionContract);
                    function PerKindUserPermissionContract(e, t) {
                        var r;
                        return (
                            (function PerKindUserPermissionContract_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, PerKindUserPermissionContract),
                            (r = n.call(this)).validateParams(e, t),
                            (r.kind = e),
                            (r.perm = t),
                            r
                        );
                    }
                    return (
                        (function PerKindUserPermissionContract_createClass(e, t, r) {
                            t && PerKindUserPermissionContract_defineProperties(e.prototype, t),
                                r && PerKindUserPermissionContract_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(PerKindUserPermissionContract, [
                            {
                                key: 'validateParams',
                                value: function validateParams(e, t) {
                                    ('string' == typeof e && 'number' == typeof t) ||
                                        b.warn(
                                            'wrong type in PerKind , UserPermissionContract, parameters. kind : {expected: string, received: '
                                                .concat(
                                                    PerKindUserPermissionContract_typeof(e),
                                                    '}, perm : {expected: number, received: '
                                                )
                                                .concat(PerKindUserPermissionContract_typeof(t), '}')
                                        );
                                },
                            },
                            {
                                key: 'buildQueueMessage',
                                value: function buildQueueMessage() {
                                    var e = [this.getName(), this.perm];
                                    return this.validateMessage(e), e;
                                },
                            },
                            {
                                key: 'validateMessage',
                                value: function validateMessage(e) {
                                    ('string' == typeof e[0] && 'number' == typeof e[1]) ||
                                        b.warn('PerKind, UserPermissionContract - Contract verification failed');
                                },
                            },
                            {
                                key: 'getName',
                                value: function getName() {
                                    return 'per_'.concat(this.kind);
                                },
                            },
                        ]),
                        PerKindUserPermissionContract
                    );
                })();
                function UserPermissions_typeof(e) {
                    return (UserPermissions_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function UserPermissions_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function UserPermissions_setPrototypeOf(e, t) {
                    return (UserPermissions_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function UserPermissions_createSuper(r) {
                    var n = (function UserPermissions_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = UserPermissions_getPrototypeOf(r);
                        return (function UserPermissions_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === UserPermissions_typeof(t) || 'function' == typeof t)) return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function UserPermissions_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = UserPermissions_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function UserPermissions_getPrototypeOf(e) {
                    return (UserPermissions_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var ao = {
                        configKey: 'isUserPermissions',
                        isDefault: !1,
                        shouldRunPerContext: !1,
                        shouldRunPerSession: !0,
                        shouldRun: !0,
                        isFrameRelated: !1,
                        runInUns: !1,
                        runInSlave: !1,
                        runInLean: !1,
                        isRunning: !1,
                        instance: null,
                    },
                    uo = (function () {
                        !(function UserPermissions_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && UserPermissions_setPrototypeOf(e, t);
                        })(UserPermissions, Ce);
                        var n = UserPermissions_createSuper(UserPermissions);
                        function UserPermissions(e) {
                            var t,
                                r = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : window.navigator;
                            return (
                                (function UserPermissions_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, UserPermissions),
                                ((t = n.call(this))._permDefs = {
                                    granted: 1,
                                    prompt: 2,
                                    denied: 3,
                                    true: 1,
                                    false: 3,
                                }),
                                (t._permissions = ['geolocation', 'midi', 'notifications', 'push']),
                                (t._dataQ = e),
                                (t._navigator = r),
                                t
                            );
                        }
                        return (
                            (function UserPermissions_createClass(e, t, r) {
                                t && UserPermissions_defineProperties(e.prototype, t),
                                    r && UserPermissions_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(
                                UserPermissions,
                                [
                                    {
                                        key: 'startFeature',
                                        value: function startFeature() {
                                            this._reportQueryPermissions(),
                                                this._reportStoragePermission(),
                                                this._reportMicCameraPermissions();
                                        },
                                    },
                                    {
                                        key: '_reportQueryPermissions',
                                        value: function _reportQueryPermissions() {
                                            var n = this;
                                            this._navigator.permissions &&
                                                this._navigator.permissions.query &&
                                                (function () {
                                                    for (
                                                        var r = b,
                                                            e = function _loop(e) {
                                                                var t = n._permissions[e];
                                                                n._navigator.permissions
                                                                    .query({ name: t })
                                                                    .then(function (e) {
                                                                        (e = n._permDefs[e.state] || -1),
                                                                            (e = new oo(t, e).buildQueueMessage());
                                                                        n._dataQ.addToQueue('static_fields', e, !1);
                                                                    })
                                                                    .catch(function (e) {
                                                                        r.debug(
                                                                            'Failed querying for '
                                                                                .concat(t, ' permissions ')
                                                                                .concat(e.message)
                                                                        );
                                                                    });
                                                            },
                                                            t = 0;
                                                        t < n._permissions.length;
                                                        t++
                                                    )
                                                        e(t);
                                                })();
                                        },
                                    },
                                    {
                                        key: '_reportStoragePermission',
                                        value: function _reportStoragePermission() {
                                            var t = this;
                                            this._navigator.storage &&
                                                this._navigator.storage.persisted &&
                                                this._navigator.storage
                                                    .persisted()
                                                    .then(function (e) {
                                                        e = new io(t._permDefs[e] || -1).buildQueueMessage();
                                                        t._dataQ.addToQueue('static_fields', e, !1);
                                                    })
                                                    .catch(function (e) {
                                                        b.debug(
                                                            'Failed to check storage persisted: '.concat(e.message)
                                                        );
                                                    });
                                        },
                                    },
                                    {
                                        key: '_reportMicCameraPermissions',
                                        value: function _reportMicCameraPermissions() {
                                            var r = this,
                                                n = { audio: !1, video: !1 };
                                            this._navigator.mediaDevices &&
                                                this._navigator.mediaDevices.enumerateDevices &&
                                                this._navigator.mediaDevices
                                                    .enumerateDevices()
                                                    .then(function (e) {
                                                        e.forEach(function (e) {
                                                            var t;
                                                            !(function isAlreadyReported(e) {
                                                                return (
                                                                    (e.includes('audio') && n.audio) ||
                                                                    (e.includes('video') && n.video)
                                                                );
                                                            })(e.kind) &&
                                                                ((t = (function updateReported(e) {
                                                                    return e.includes('audio')
                                                                        ? ((n.audio = !0), 'audio')
                                                                        : e.includes('video')
                                                                        ? ((n.video = !0), 'video')
                                                                        : void 0;
                                                                })(e.kind)),
                                                                (e =
                                                                    '' !== e.label
                                                                        ? r._permDefs.granted
                                                                        : r._permDefs.denied),
                                                                (e = new so(t, e).buildQueueMessage()),
                                                                r._dataQ.addToQueue('static_fields', e, !1));
                                                        });
                                                    })
                                                    .catch(function (e) {
                                                        b.debug(
                                                            'UserPermissions:startFeature failed to enumerateDevices: '.concat(
                                                                e.message
                                                            )
                                                        );
                                                    });
                                        },
                                    },
                                ],
                                [
                                    {
                                        key: 'getDefaultSettings',
                                        value: function getDefaultSettings() {
                                            return ao;
                                        },
                                    },
                                ]
                            ),
                            UserPermissions
                        );
                    })();
                function IsPrivateBrowsingContract_typeof(e) {
                    return (IsPrivateBrowsingContract_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function IsPrivateBrowsingContract_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function IsPrivateBrowsingContract_setPrototypeOf(e, t) {
                    return (IsPrivateBrowsingContract_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function IsPrivateBrowsingContract_createSuper(r) {
                    var n = (function IsPrivateBrowsingContract_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = IsPrivateBrowsingContract_getPrototypeOf(r);
                        return (function IsPrivateBrowsingContract_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === IsPrivateBrowsingContract_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function IsPrivateBrowsingContract_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = IsPrivateBrowsingContract_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function IsPrivateBrowsingContract_getPrototypeOf(e) {
                    return (IsPrivateBrowsingContract_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var co = (function () {
                    !(function IsPrivateBrowsingContract_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && IsPrivateBrowsingContract_setPrototypeOf(e, t);
                    })(IsPrivateBrowsingContract, On);
                    var r = IsPrivateBrowsingContract_createSuper(IsPrivateBrowsingContract);
                    function IsPrivateBrowsingContract(e) {
                        var t;
                        return (
                            (function IsPrivateBrowsingContract_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, IsPrivateBrowsingContract),
                            (t = r.call(this)).validateParams(e),
                            (t.isPrivate = e),
                            t
                        );
                    }
                    return (
                        (function IsPrivateBrowsingContract_createClass(e, t, r) {
                            t && IsPrivateBrowsingContract_defineProperties(e.prototype, t),
                                r && IsPrivateBrowsingContract_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(IsPrivateBrowsingContract, [
                            {
                                key: 'validateParams',
                                value: function validateParams(e) {
                                    'boolean' == typeof e ||
                                        b.warn(
                                            'wrong type in IsPrivateBrowsingContract parameters. isPrivate : {expected: boolean, received: '.concat(
                                                IsPrivateBrowsingContract_typeof(e),
                                                '}'
                                            )
                                        );
                                },
                            },
                            {
                                key: 'buildQueueMessage',
                                value: function buildQueueMessage() {
                                    var e = [this.getName(), this.isPrivate];
                                    return this.validateMessage(e), e;
                                },
                            },
                            {
                                key: 'validateMessage',
                                value: function validateMessage(e) {
                                    ('string' == typeof e[0] && 'boolean' == typeof e[1]) ||
                                        b.warn('IsPrivateBrowsing - Contract verification failed');
                                },
                            },
                            {
                                key: 'getName',
                                value: function getName() {
                                    return 'is_private_browsing';
                                },
                            },
                        ]),
                        IsPrivateBrowsingContract
                    );
                })();
                function IsPrivateBrowsingFeature_typeof(e) {
                    return (IsPrivateBrowsingFeature_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function IsPrivateBrowsingFeature_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function IsPrivateBrowsingFeature_setPrototypeOf(e, t) {
                    return (IsPrivateBrowsingFeature_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function IsPrivateBrowsingFeature_createSuper(r) {
                    var n = (function IsPrivateBrowsingFeature_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = IsPrivateBrowsingFeature_getPrototypeOf(r);
                        return (function IsPrivateBrowsingFeature_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === IsPrivateBrowsingFeature_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function IsPrivateBrowsingFeature_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = IsPrivateBrowsingFeature_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function IsPrivateBrowsingFeature_getPrototypeOf(e) {
                    return (IsPrivateBrowsingFeature_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var lo = {
                        configKey: 'isPrivateBrowsing',
                        isDefault: !1,
                        shouldRunPerContext: !1,
                        shouldRunPerSession: !0,
                        shouldRun: !0,
                        isFrameRelated: !1,
                        runInUns: !0,
                        runInSlave: !1,
                        runInLean: !1,
                        isRunning: !1,
                        instance: null,
                    },
                    fo = (function () {
                        !(function IsPrivateBrowsingFeature_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && IsPrivateBrowsingFeature_setPrototypeOf(e, t);
                        })(IsPrivateBrowsingFeature, Ce);
                        var n = IsPrivateBrowsingFeature_createSuper(IsPrivateBrowsingFeature);
                        function IsPrivateBrowsingFeature(e, t) {
                            var r;
                            return (
                                (function IsPrivateBrowsingFeature_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, IsPrivateBrowsingFeature),
                                ((r = n.call(this))._dataQ = e),
                                (r._privateBrowsingDetector = t),
                                r
                            );
                        }
                        return (
                            (function IsPrivateBrowsingFeature_createClass(e, t, r) {
                                t && IsPrivateBrowsingFeature_defineProperties(e.prototype, t),
                                    r && IsPrivateBrowsingFeature_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(
                                IsPrivateBrowsingFeature,
                                [
                                    {
                                        key: 'startFeature',
                                        value: function startFeature() {
                                            var t = this;
                                            this._privateBrowsingDetector.detectPrivateMode(function (e) {
                                                e = new co(e).buildQueueMessage();
                                                t._dataQ.addToQueue('static_fields', e, !1);
                                            });
                                        },
                                    },
                                ],
                                [
                                    {
                                        key: 'getDefaultSettings',
                                        value: function getDefaultSettings() {
                                            return lo;
                                        },
                                    },
                                ]
                            ),
                            IsPrivateBrowsingFeature
                        );
                    })();
                function LegacyFontsDetectionContract_typeof(e) {
                    return (LegacyFontsDetectionContract_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function LegacyFontsDetectionContract_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function LegacyFontsDetectionContract_setPrototypeOf(e, t) {
                    return (LegacyFontsDetectionContract_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function LegacyFontsDetectionContract_createSuper(r) {
                    var n = (function LegacyFontsDetectionContract_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = LegacyFontsDetectionContract_getPrototypeOf(r);
                        return (function LegacyFontsDetectionContract_possibleConstructorReturn(e, t) {
                            {
                                if (
                                    t &&
                                    ('object' === LegacyFontsDetectionContract_typeof(t) || 'function' == typeof t)
                                )
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function LegacyFontsDetectionContract_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = LegacyFontsDetectionContract_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function LegacyFontsDetectionContract_getPrototypeOf(e) {
                    return (LegacyFontsDetectionContract_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var po = (function () {
                    !(function LegacyFontsDetectionContract_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && LegacyFontsDetectionContract_setPrototypeOf(e, t);
                    })(LegacyFontsDetectionContract, On);
                    var r = LegacyFontsDetectionContract_createSuper(LegacyFontsDetectionContract);
                    function LegacyFontsDetectionContract(e) {
                        var t;
                        return (
                            (function LegacyFontsDetectionContract_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, LegacyFontsDetectionContract),
                            (t = r.call(this)).validateParams(e),
                            (t.legacyFonts = e),
                            t
                        );
                    }
                    return (
                        (function LegacyFontsDetectionContract_createClass(e, t, r) {
                            t && LegacyFontsDetectionContract_defineProperties(e.prototype, t),
                                r && LegacyFontsDetectionContract_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(LegacyFontsDetectionContract, [
                            {
                                key: 'validateParams',
                                value: function validateParams(e) {
                                    'string' == typeof e ||
                                        b.warn(
                                            ' wrong type in LegacyFontsDetectionContract parameters. legacyFonts : {expected: string, received: '.concat(
                                                LegacyFontsDetectionContract_typeof(e),
                                                '}'
                                            )
                                        );
                                },
                            },
                            {
                                key: 'buildQueueMessage',
                                value: function buildQueueMessage() {
                                    var e = [this.getName(), this.legacyFonts];
                                    return this.validateMessage(e), e;
                                },
                            },
                            {
                                key: 'validateMessage',
                                value: function validateMessage(e) {
                                    ('string' == typeof e[0] && 'string' == typeof e[1]) ||
                                        b.warn('legacy_fonts, FontsDetection - Contract verification failed');
                                },
                            },
                            {
                                key: 'getName',
                                value: function getName() {
                                    return 'legacy_fonts';
                                },
                            },
                        ]),
                        LegacyFontsDetectionContract
                    );
                })();
                function ProblematicFontsDetectionContract_createForOfIteratorHelper(t, r) {
                    var o = ('undefined' != typeof Symbol && t[Symbol.iterator]) || t['@@iterator'];
                    if (!o) {
                        if (
                            Array.isArray(t) ||
                            (o = (function ProblematicFontsDetectionContract_unsupportedIterableToArray(e, t) {
                                if (!e) return;
                                if ('string' == typeof e)
                                    return ProblematicFontsDetectionContract_arrayLikeToArray(e, t);
                                var r = Object.prototype.toString.call(e).slice(8, -1);
                                'Object' === r && e.constructor && (r = e.constructor.name);
                                if ('Map' === r || 'Set' === r) return Array.from(e);
                                if ('Arguments' === r || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))
                                    return ProblematicFontsDetectionContract_arrayLikeToArray(e, t);
                            })(t)) ||
                            (r && t && 'number' == typeof t.length)
                        ) {
                            o && (t = o);
                            var i = 0,
                                r = function F() {};
                            return {
                                s: r,
                                n: function n() {
                                    return i >= t.length ? { done: !0 } : { done: !1, value: t[i++] };
                                },
                                e: function e(t) {
                                    throw t;
                                },
                                f: r,
                            };
                        }
                        throw new TypeError(
                            'Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.'
                        );
                    }
                    var a,
                        u = !0,
                        c = !1;
                    return {
                        s: function s() {
                            o = o.call(t);
                        },
                        n: function n() {
                            var e = o.next();
                            return (u = e.done), e;
                        },
                        e: function e(t) {
                            (c = !0), (a = t);
                        },
                        f: function f() {
                            try {
                                u || null == o.return || o.return();
                            } finally {
                                if (c) throw a;
                            }
                        },
                    };
                }
                function ProblematicFontsDetectionContract_arrayLikeToArray(e, t) {
                    (null == t || t > e.length) && (t = e.length);
                    for (var r = 0, n = new Array(t); r < t; r++) n[r] = e[r];
                    return n;
                }
                function ProblematicFontsDetectionContract_typeof(e) {
                    return (ProblematicFontsDetectionContract_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function ProblematicFontsDetectionContract_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function ProblematicFontsDetectionContract_setPrototypeOf(e, t) {
                    return (ProblematicFontsDetectionContract_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function ProblematicFontsDetectionContract_createSuper(r) {
                    var n = (function ProblematicFontsDetectionContract_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = ProblematicFontsDetectionContract_getPrototypeOf(r);
                        return (function ProblematicFontsDetectionContract_possibleConstructorReturn(e, t) {
                            {
                                if (
                                    t &&
                                    ('object' === ProblematicFontsDetectionContract_typeof(t) || 'function' == typeof t)
                                )
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function ProblematicFontsDetectionContract_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = ProblematicFontsDetectionContract_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function ProblematicFontsDetectionContract_getPrototypeOf(e) {
                    return (ProblematicFontsDetectionContract_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var ho = (function () {
                    !(function ProblematicFontsDetectionContract_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && ProblematicFontsDetectionContract_setPrototypeOf(e, t);
                    })(ProblematicFontsDetectionContract, On);
                    var r = ProblematicFontsDetectionContract_createSuper(ProblematicFontsDetectionContract);
                    function ProblematicFontsDetectionContract(e) {
                        var t;
                        return (
                            (function ProblematicFontsDetectionContract_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, ProblematicFontsDetectionContract),
                            (t = r.call(this)).validateParams(e),
                            (t.allFontsDiffs = e),
                            t
                        );
                    }
                    return (
                        (function ProblematicFontsDetectionContract_createClass(e, t, r) {
                            t && ProblematicFontsDetectionContract_defineProperties(e.prototype, t),
                                r && ProblematicFontsDetectionContract_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(ProblematicFontsDetectionContract, [
                            {
                                key: 'validateParams',
                                value: function validateParams(e) {
                                    (Array.isArray(e) && this._eachFontIsValid(e)) ||
                                        b.warn(
                                            ' wrong type in ProblematicFontsDetectionContract parameters. allFontsDiffs : {expected: [[string, number,number]], received: '.concat(
                                                ProblematicFontsDetectionContract_typeof(e),
                                                '}'
                                            )
                                        );
                                },
                            },
                            {
                                key: '_eachFontIsValid',
                                value: function _eachFontIsValid(e) {
                                    var t = !0,
                                        r = !0,
                                        n = !0,
                                        o = ProblematicFontsDetectionContract_createForOfIteratorHelper(e);
                                    try {
                                        for (o.s(); !(i = o.n()).done; ) {
                                            var i = i.value;
                                            Array.isArray(i)
                                                ? (3 !== i.length && (n = !1),
                                                  (r =
                                                      'string' == typeof i[0] &&
                                                      'number' == typeof i[1] &&
                                                      'number' == typeof i[2]))
                                                : (t = !1);
                                        }
                                    } catch (e) {
                                        o.e(e);
                                    } finally {
                                        o.f();
                                    }
                                    return t && n && r;
                                },
                            },
                            {
                                key: 'buildQueueMessage',
                                value: function buildQueueMessage() {
                                    var e = [this.getName(), this.allFontsDiffs];
                                    return this.validateMessage(e), e;
                                },
                            },
                            {
                                key: 'validateMessage',
                                value: function validateMessage(e) {
                                    ('string' == typeof e[0] && Array.isArray(e[1])) ||
                                        b.warn('problematic_fonts, FontsDetection - Contract verification failed');
                                },
                            },
                            {
                                key: 'getName',
                                value: function getName() {
                                    return 'problematic_fonts';
                                },
                            },
                        ]),
                        ProblematicFontsDetectionContract
                    );
                })();
                function FontsNotCachedFontsDetectionContract_typeof(e) {
                    return (FontsNotCachedFontsDetectionContract_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function FontsNotCachedFontsDetectionContract_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function FontsNotCachedFontsDetectionContract_setPrototypeOf(e, t) {
                    return (FontsNotCachedFontsDetectionContract_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function FontsNotCachedFontsDetectionContract_createSuper(r) {
                    var n = (function FontsNotCachedFontsDetectionContract_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = FontsNotCachedFontsDetectionContract_getPrototypeOf(r);
                        return (function FontsNotCachedFontsDetectionContract_possibleConstructorReturn(e, t) {
                            {
                                if (
                                    t &&
                                    ('object' === FontsNotCachedFontsDetectionContract_typeof(t) ||
                                        'function' == typeof t)
                                )
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function FontsNotCachedFontsDetectionContract_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = FontsNotCachedFontsDetectionContract_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function FontsNotCachedFontsDetectionContract_getPrototypeOf(e) {
                    return (FontsNotCachedFontsDetectionContract_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var vo = (function () {
                    !(function FontsNotCachedFontsDetectionContract_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && FontsNotCachedFontsDetectionContract_setPrototypeOf(e, t);
                    })(FontsNotCachedFontsDetectionContract, On);
                    var r = FontsNotCachedFontsDetectionContract_createSuper(FontsNotCachedFontsDetectionContract);
                    function FontsNotCachedFontsDetectionContract(e) {
                        var t;
                        return (
                            (function FontsNotCachedFontsDetectionContract_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, FontsNotCachedFontsDetectionContract),
                            (t = r.call(this)).validateParams(e),
                            (t.fontListNotCached = e),
                            t
                        );
                    }
                    return (
                        (function FontsNotCachedFontsDetectionContract_createClass(e, t, r) {
                            t && FontsNotCachedFontsDetectionContract_defineProperties(e.prototype, t),
                                r && FontsNotCachedFontsDetectionContract_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(FontsNotCachedFontsDetectionContract, [
                            {
                                key: 'validateParams',
                                value: function validateParams(e) {
                                    'string' == typeof e ||
                                        b.warn(
                                            ' wrong type in FontsNotCachedFontsDetectionContract parameters. fontListNotCached : {expected: string, received: '.concat(
                                                FontsNotCachedFontsDetectionContract_typeof(e),
                                                '}'
                                            )
                                        );
                                },
                            },
                            {
                                key: 'buildQueueMessage',
                                value: function buildQueueMessage() {
                                    var e = [this.getName(), this.fontListNotCached];
                                    return this.validateMessage(e), e;
                                },
                            },
                            {
                                key: 'validateMessage',
                                value: function validateMessage(e) {
                                    ('string' == typeof e[0] && 'string' == typeof e[1]) ||
                                        b.warn('fonts_not_cached, FontsDetection - Contract verification failed');
                                },
                            },
                            {
                                key: 'getName',
                                value: function getName() {
                                    return 'fonts_not_cached';
                                },
                            },
                        ]),
                        FontsNotCachedFontsDetectionContract
                    );
                })();
                function FontListFontsDetectionContract_typeof(e) {
                    return (FontListFontsDetectionContract_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function FontListFontsDetectionContract_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function FontListFontsDetectionContract_setPrototypeOf(e, t) {
                    return (FontListFontsDetectionContract_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function FontListFontsDetectionContract_createSuper(r) {
                    var n = (function FontListFontsDetectionContract_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = FontListFontsDetectionContract_getPrototypeOf(r);
                        return (function FontListFontsDetectionContract_possibleConstructorReturn(e, t) {
                            {
                                if (
                                    t &&
                                    ('object' === FontListFontsDetectionContract_typeof(t) || 'function' == typeof t)
                                )
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function FontListFontsDetectionContract_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = FontListFontsDetectionContract_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function FontListFontsDetectionContract_getPrototypeOf(e) {
                    return (FontListFontsDetectionContract_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var yo = (function () {
                    !(function FontListFontsDetectionContract_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && FontListFontsDetectionContract_setPrototypeOf(e, t);
                    })(FontListFontsDetectionContract, On);
                    var r = FontListFontsDetectionContract_createSuper(FontListFontsDetectionContract);
                    function FontListFontsDetectionContract(e) {
                        var t;
                        return (
                            (function FontListFontsDetectionContract_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, FontListFontsDetectionContract),
                            (t = r.call(this)).validateParams(e),
                            (t.fontListCached = e),
                            t
                        );
                    }
                    return (
                        (function FontListFontsDetectionContract_createClass(e, t, r) {
                            t && FontListFontsDetectionContract_defineProperties(e.prototype, t),
                                r && FontListFontsDetectionContract_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(FontListFontsDetectionContract, [
                            {
                                key: 'validateParams',
                                value: function validateParams(e) {
                                    'string' == typeof e ||
                                        b.warn(
                                            ' wrong type in FontListFontsDetectionContract parameters. fontListCached : {expected: string, received: '.concat(
                                                FontListFontsDetectionContract_typeof(e),
                                                '}'
                                            )
                                        );
                                },
                            },
                            {
                                key: 'buildQueueMessage',
                                value: function buildQueueMessage() {
                                    var e = [this.getName(), this.fontListCached];
                                    return this.validateMessage(e), e;
                                },
                            },
                            {
                                key: 'validateMessage',
                                value: function validateMessage(e) {
                                    ('string' == typeof e[0] && 'string' == typeof e[1]) ||
                                        b.warn('FontList, FontsDetection - Contract verification failed');
                                },
                            },
                            {
                                key: 'getName',
                                value: function getName() {
                                    return 'fonts';
                                },
                            },
                        ]),
                        FontListFontsDetectionContract
                    );
                })();
                function FontsDetectionFeature_typeof(e) {
                    return (FontsDetectionFeature_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function FontsDetectionFeature_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function FontsDetectionFeature_setPrototypeOf(e, t) {
                    return (FontsDetectionFeature_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function FontsDetectionFeature_createSuper(r) {
                    var n = (function FontsDetectionFeature_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = FontsDetectionFeature_getPrototypeOf(r);
                        return (function FontsDetectionFeature_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === FontsDetectionFeature_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function FontsDetectionFeature_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = FontsDetectionFeature_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function FontsDetectionFeature_getPrototypeOf(e) {
                    return (FontsDetectionFeature_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var _o = {
                        configKey: 'isFonts',
                        isDefault: !1,
                        shouldRunPerContext: !1,
                        shouldRunPerSession: !0,
                        shouldRun: !0,
                        isFrameRelated: !1,
                        runInUns: !0,
                        runInSlave: !1,
                        runInLean: !1,
                        isRunning: !1,
                        instance: null,
                    },
                    go = (function () {
                        !(function FontsDetectionFeature_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && FontsDetectionFeature_setPrototypeOf(e, t);
                        })(FontsDetectionFeature, Ce);
                        var i = FontsDetectionFeature_createSuper(FontsDetectionFeature);
                        function FontsDetectionFeature(e, t, r, n) {
                            var o;
                            return (
                                (function FontsDetectionFeature_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, FontsDetectionFeature),
                                ((o = i.call(this))._utils = e),
                                (o._domUtils = t),
                                (o._dataQ = r),
                                (o._fontDetectorCtor = n),
                                (o._storageKeyName = 'detectedFonts_2.1.5'),
                                (o._legacyStorageKeyName = 'detectedFonts'),
                                (o._serif_fonts = [
                                    'adobe jenson',
                                    'adobe text',
                                    'albertus',
                                    'aldus',
                                    'alexandria',
                                    'algerian',
                                    'american typewriter',
                                    'antiqua',
                                    'arno',
                                    'aster',
                                    'aurora',
                                    'baskerville',
                                    'bell',
                                    'bembo',
                                    'bembo schoolbook',
                                    'benguiat',
                                    'berkeley old style',
                                    'bernhard modern',
                                    'bodoni',
                                    'book antiqua',
                                    'bookman',
                                    'bordeaux roman',
                                    'californian fb',
                                    'calisto',
                                    'capitals',
                                    'cambria',
                                    'cartier',
                                    'caslon',
                                    'caslon antique',
                                    'catull',
                                    'centaur',
                                    'century old style',
                                    'century schoolbook',
                                    'new century schoolbook',
                                    'chaparral',
                                    'charis sil',
                                    'cheltenham',
                                    'clearface',
                                    'cochin',
                                    'colonna',
                                    'computer modern',
                                    'concrete roman',
                                    'constantia',
                                    'cooper black',
                                    'corona',
                                    'dejavu fonts',
                                    'ecotype',
                                    'elephant',
                                    'espy serif',
                                    'excelsior',
                                    'fairfield',
                                    'ff scala',
                                    'footlight',
                                    'freeserif',
                                    'friz quadrata',
                                    'garamond',
                                    'gentium',
                                    'georgia',
                                    'gloucester',
                                    'goudy old style',
                                    'goudy schoolbook',
                                    'goudy pro font',
                                    'granjon',
                                    'heather',
                                    'hercules',
                                    'high tower text',
                                    'hiroshige',
                                    'hoefler text',
                                    'humana serif',
                                    'imprint',
                                    'ionic no. 5',
                                    'janson',
                                    'jenson',
                                    'joanna',
                                    'korinna',
                                    'kursivschrift',
                                    'legacy serif',
                                    'lexicon',
                                    'liberation fonts',
                                    'linux libertine',
                                    'literaturnaya',
                                    'lucida',
                                    'melior',
                                    'memphis',
                                    'miller',
                                    'minion',
                                    'didone',
                                    'mona lisa',
                                    'mrs eaves',
                                    'ms serif',
                                    'new york',
                                    'nimbus roman',
                                    'nps rawlinson roadway',
                                    'ocr a extended',
                                    'palatino',
                                    'perpetua',
                                    'plantin',
                                    'plantin schoolbook',
                                    'playbill',
                                    'poor richard',
                                    'rawlinson roadway',
                                    'renault',
                                    'requiem',
                                    'roman',
                                    'rotis serif',
                                    'sabon',
                                    'seagull',
                                    'sistina',
                                    'souvenir',
                                    'stix',
                                    'stone informal',
                                    'stone serif',
                                    'sylfaen',
                                    'times new roman',
                                    'times',
                                    'trajan',
                                    'trinitÃ©',
                                    'trump mediaeval',
                                    'utopia',
                                    'vale type',
                                    'bitstream vera',
                                    'versailles',
                                    'wanted',
                                    'weiss',
                                    'wide latin',
                                    'windsor',
                                    'xits',
                                    'apex',
                                    'archer',
                                    'athens',
                                    'city',
                                    'cholla slab',
                                    'clarendon',
                                    'courier',
                                    'egyptienne',
                                    'guardian egyptian',
                                    'lexia',
                                    'museo slab',
                                    'rockwell',
                                    'nilland',
                                    'skeleton antique',
                                    'tower',
                                ]),
                                (o._sans_serif_fonts = [
                                    'abadi',
                                    'agency fb',
                                    'akzidenz grotesk',
                                    'aptifer',
                                    'arial',
                                    'arial unicode ms',
                                    'avant garde',
                                    'avenir',
                                    'bank gothic',
                                    'barmeno',
                                    'bauhaus',
                                    'bell centennial',
                                    'bell gothic',
                                    'benguiat gothic',
                                    'berlin sans',
                                    'beteckna',
                                    'brandon grotesque',
                                    'cabin',
                                    'cafeteria',
                                    'calibri',
                                    'century gothic',
                                    'charcoal',
                                    'chicago',
                                    'clearface gothic',
                                    'clearview',
                                    'co headline',
                                    'co text',
                                    'compacta',
                                    'corbel',
                                    'ff dax',
                                    'dotum',
                                    'droid',
                                    'dyslexie',
                                    'ecofont',
                                    'eras',
                                    'espy sans',
                                    'nu sans',
                                    'eurocrat',
                                    'eurostile',
                                    'ff meta',
                                    'flama',
                                    'formata',
                                    'freesans',
                                    'franklin gothic',
                                    'frutiger',
                                    'futura',
                                    'geneva',
                                    'gill sans',
                                    'gill sans schoolbook',
                                    'gotham',
                                    'handel gothic',
                                    'denmark',
                                    'haettenschweiler',
                                    'hei',
                                    'helvetica',
                                    'helvetica neue',
                                    'swiss 721',
                                    'highway gothic',
                                    'hiroshige sans',
                                    'hobo',
                                    'impact',
                                    'industria',
                                    'interstate',
                                    'johnston',
                                    'kabel',
                                    'lato',
                                    'legacy sans',
                                    'lexia readable',
                                    'meiryo',
                                    'microgramma',
                                    'motorway',
                                    'ms sans serif',
                                    'museo sans',
                                    'myriad',
                                    'neutraface',
                                    'neuzeit s',
                                    'news gothic',
                                    'nimbus sans l',
                                    'nina',
                                    'optima',
                                    'parisine',
                                    'pricedown',
                                    'prima sans',
                                    'pt sans',
                                    'rail alphabet',
                                    'revue',
                                    'roboto',
                                    'rotis sans',
                                    'ff scala sans',
                                    'segoe',
                                    'skia',
                                    'souvenir gothic',
                                    'stone sans',
                                    'syntax',
                                    'tahoma',
                                    'template gothic',
                                    'tiresias',
                                    'trade gothic',
                                    'transport alphabet',
                                    'trebuchet ms',
                                    'trump gothic',
                                    'tw cen',
                                    'twentieth century',
                                    'ubuntu font family',
                                    'univers',
                                    'zurich',
                                    'verdana',
                                    'virtue',
                                ]),
                                (o._monospace_fonts = [
                                    'andale mono',
                                    'anonymous',
                                    'consolas',
                                    'courierhp',
                                    'courier new',
                                    'courierps',
                                    'fontcraft courier',
                                    'everson mono',
                                    'fedra mono',
                                    'fixed',
                                    'fixedsys',
                                    'fixedsys excelsior',
                                    'inconsolata',
                                    'hyperfont',
                                    'letter gothic',
                                    'magnetic ink character recognition',
                                    'menlo',
                                    'miriam fixed',
                                    'monaco',
                                    'monofur',
                                    'monospace',
                                    'ms gothic',
                                    'ms mincho',
                                    'nimbus mono l',
                                    'ocr-a',
                                    'ocr-b',
                                    'orator',
                                    'ormaxx',
                                    'pragmatapro',
                                    'prestige elite',
                                    'profont',
                                    'proggy programming fonts',
                                    'small fonts',
                                    'sydnie',
                                    'terminal',
                                    'tex gyre cursor',
                                    'um typewriter',
                                    'william monospace',
                                    'balloon',
                                    'brush script',
                                    'dragonwick',
                                    'choc',
                                    'dom casual',
                                    'mistral',
                                    'papyrus',
                                    'tempus sans',
                                    'amazone',
                                    'ams euler',
                                    'apple chancery',
                                    'aristocrat',
                                    'bickley script',
                                    'civitype',
                                    'codex',
                                    'edwardian script',
                                    'forte',
                                    'french script',
                                    'kuenstler script',
                                    'monotype corsiva',
                                    'old english text mt',
                                    'palace script',
                                    'park avenue',
                                    'scriptina',
                                    'shelley volante',
                                    'vivaldi',
                                    'vladimir script',
                                    'zapf chancery',
                                    'zapfino',
                                    'andy',
                                    'ashley script',
                                    'chalkboard',
                                    'comic sans',
                                    'cezanne',
                                    'fontoon',
                                    'irregularis',
                                    'jefferson',
                                    'kristen',
                                    'lucida handwriting',
                                    'rage italic',
                                    'rufscript',
                                    'scribble',
                                    'soupbone',
                                    'tekton',
                                    'alecko',
                                    'cinderella',
                                    'cupola',
                                    'curlz',
                                    'magnificat',
                                    'script',
                                    'american text',
                                    'cloister black',
                                    'fraktur',
                                    'goudy text',
                                    'old english text',
                                    'wedding text',
                                    'aegyptus',
                                    'aharoni',
                                    'aisha',
                                    'amienne',
                                    'batak script',
                                    'chandas',
                                    'hanacaraka',
                                    'japanese gothic typeface',
                                    'jomolhari',
                                    'kochi font',
                                    'lontara script',
                                    'maiola',
                                    'minchÅ',
                                    'mona font',
                                    'nassim',
                                    'nastaliq navees',
                                    'neacademia',
                                    'perpetua greek',
                                    'simsun',
                                    'skolar',
                                    'skolar devanagari',
                                    'sundanese unicode',
                                    'sutturah',
                                    'tai le valentinium',
                                    'tengwar',
                                    'tibetan machine uni',
                                    'tunga',
                                    'wadalab',
                                    'apple symbols',
                                    'bookshelf symbol 7',
                                    'braille',
                                    'commercial pi',
                                    'corel',
                                    'erler dingbats',
                                    'hm phonetic',
                                    'mathematical pi',
                                    'morse code',
                                    'opensymbol',
                                    'richstyle',
                                    'symbol',
                                    'symbolps',
                                    'wingdings',
                                    'wingdings 2',
                                    'wingdings 3',
                                    'webdings',
                                    'zapf dingbats',
                                    'abracadabra',
                                    'ad lib',
                                    'allegro',
                                    'andreas',
                                    'arnold bÃ¶cklin',
                                    'astur',
                                    'balloon pop outlaw black',
                                    'banco',
                                    'beat',
                                    'braggadocio',
                                    'broadway',
                                    'ellington',
                                    'exablock',
                                    'exocet',
                                    'fig script',
                                    'gigi',
                                    'harlow solid',
                                    'harrington',
                                    'horizon',
                                    'jim crow',
                                    'jokerman',
                                    'juice',
                                    'lo-type',
                                    'magneto',
                                    'megadeth',
                                    'neuland',
                                    'peignot',
                                    'ravie',
                                    'san francisco',
                                    'showcard gothic',
                                    'snap',
                                    'stencil',
                                    'umbra',
                                    'westminster',
                                    'willow',
                                    'bagel',
                                    'lithos',
                                    'aldhabi',
                                    'andalus',
                                    'angsana new',
                                    'angsanaupc',
                                    'aparajita',
                                    'arabic typesetting',
                                    'arial black',
                                    'arial narrow',
                                    'arial rounded mt bold',
                                    'baskerville old face',
                                    'batang',
                                    'batangche',
                                    'bauhaus 93',
                                    'bell mt',
                                    'berlin sans fb',
                                    'berlin sans fb demi',
                                    'bernard mt condensed',
                                    'blackadder itc',
                                    'bodoni mt',
                                    'bodoni mt black',
                                    'bodoni mt condensed',
                                    'bodoni mt poster compressed',
                                    'bookman old style',
                                    'bradley hand itc',
                                    'britannic bold',
                                    'browallia new',
                                    'browalliaupc',
                                    'brush script mt',
                                    'buxton sketch',
                                    'calibri light',
                                    'calisto mt',
                                    'cambria math',
                                    'candara',
                                    'castellar',
                                    'century',
                                    'chiller',
                                    'colonna mt',
                                    'comic sans ms',
                                    'copperplate gothic bold',
                                    'copperplate gothic light',
                                    'cordia new',
                                    'cordiaupc',
                                    'curlz mt',
                                    'daunpenh',
                                    'david',
                                    'dfkai-sb',
                                    'dilleniaupc',
                                    'dokchampa',
                                    'dotumche',
                                    'ebrima',
                                    'edwardian script itc',
                                    'engravers mt',
                                    'eras bold itc',
                                    'eras demi itc',
                                    'eras light itc',
                                    'eras medium itc',
                                    'estrangelo edessa',
                                    'eucrosiaupc',
                                    'euphemia',
                                    'fangsong',
                                    'felix titling',
                                    'footlight mt light',
                                    'franklin gothic book',
                                    'franklin gothic demi',
                                    'franklin gothic demi cond',
                                    'franklin gothic heavy',
                                    'franklin gothic medium',
                                    'franklin gothic medium cond',
                                    'frankruehl',
                                    'freesiaupc',
                                    'freestyle script',
                                    'french script mt',
                                    'gabriola',
                                    'gadugi',
                                    'gautami',
                                    'gill sans mt',
                                    'gill sans mt condensed',
                                    'gill sans mt ext condensed bold',
                                    'gill sans ultra bold',
                                    'gill sans ultra bold condensed',
                                    'gisha',
                                    'gloucester mt extra condensed',
                                    'goudy stout',
                                    'gulim',
                                    'gulimche',
                                    'gungsuh',
                                    'gungsuhche',
                                    'harlow solid italic',
                                    'imprint mt shadow',
                                    'informal roman',
                                    'irisupc',
                                    'iskoola pota',
                                    'jasmineupc',
                                    'javanese text',
                                    'juice itc',
                                    'kaiti',
                                    'kalinga',
                                    'kartika',
                                    'khmer ui',
                                    'kodchiangupc',
                                    'kokila',
                                    'kristen itc',
                                    'kunstler script',
                                    'lao ui',
                                    'latha',
                                    'leelawadee',
                                    'leelawadee ui',
                                    'leelawadee ui semilight',
                                    'levenim mt',
                                    'lilyupc',
                                    'lucida bright',
                                    'lucida calligraphy',
                                    'lucida console',
                                    'lucida fax',
                                    'lucida sans',
                                    'lucida sans typewriter',
                                    'lucida sans unicode',
                                    'maiandra gd',
                                    'malgun gothic',
                                    'mangal',
                                    'marlett',
                                    'matura mt script capitals',
                                    'meiryo ui',
                                    'microsoft himalaya',
                                    'microsoft jhenghei',
                                    'microsoft jhenghei light',
                                    'microsoft jhenghei ui',
                                    'microsoft jhenghei ui light',
                                    'microsoft new tai lue',
                                    'microsoft phagspa',
                                    'microsoft sans serif',
                                    'microsoft tai le',
                                    'microsoft uighur',
                                    'microsoft yahei',
                                    'microsoft yahei light',
                                    'microsoft yahei ui',
                                    'microsoft yahei ui light',
                                    'microsoft yi baiti',
                                    'mingliu',
                                    'mingliu-extb',
                                    'mingliu_hkscs',
                                    'mingliu_hkscs-extb',
                                    'miriam',
                                    'modern',
                                    'modern no. 20',
                                    'mongolian baiti',
                                    'moolboran',
                                    'ms outlook',
                                    'ms pgothic',
                                    'ms pmincho',
                                    'ms reference sans serif',
                                    'ms reference specialty',
                                    'ms ui gothic',
                                    'mt extra',
                                    'mv boli',
                                    'myanmar text',
                                    'narkisim',
                                    'niagara engraved',
                                    'niagara solid',
                                    'nirmala ui',
                                    'nirmala ui semilight',
                                    'nsimsun',
                                    'nyala',
                                    'onyx',
                                    'palace script mt',
                                    'palatino linotype',
                                    'parchment',
                                    'perpetua titling mt',
                                    'plantagenet cherokee',
                                    'pmingliu',
                                    'pmingliu-extb',
                                    'pristina',
                                    'raavi',
                                    'rockwell condensed',
                                    'rockwell extra bold',
                                    'rod',
                                    'sakkal majalla',
                                    'script mt bold',
                                    'segoe marker',
                                    'segoe print',
                                    'segoe script',
                                    'segoe ui',
                                    'segoe ui black',
                                    'segoe ui emoji',
                                    'segoe ui light',
                                    'segoe ui semibold',
                                    'segoe ui semilight',
                                    'segoe ui symbol',
                                    'shonar bangla',
                                    'shruti',
                                    'simhei',
                                    'simplified arabic',
                                    'simplified arabic fixed',
                                    'simsun-extb',
                                    'sitka banner',
                                    'sitka display',
                                    'sitka heading',
                                    'sitka small',
                                    'sitka subheading',
                                    'sitka text',
                                    'sketchflow print',
                                    'snap itc',
                                    'system',
                                    'tempus sans itc',
                                    'traditional arabic',
                                    'tw cen mt',
                                    'tw cen mt condensed',
                                    'tw cen mt condensed extra bold',
                                    'urdu typesetting',
                                    'utsaah',
                                    'vani',
                                    'vijaya',
                                    'viner hand itc',
                                    'vrinda',
                                    'yu gothic',
                                    'yu gothic light',
                                    'yu mincho',
                                    'yu mincho demibold',
                                    'yu mincho light',
                                ]),
                                o
                            );
                        }
                        return (
                            (function FontsDetectionFeature_createClass(e, t, r) {
                                t && FontsDetectionFeature_defineProperties(e.prototype, t),
                                    r && FontsDetectionFeature_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(
                                FontsDetectionFeature,
                                [
                                    {
                                        key: 'startFeature',
                                        value: function startFeature() {
                                            var t = this;
                                            b.info('Collecting Fonts');
                                            var r =
                                                    (r = this._utils.StorageUtils.getFromLocalStorage(
                                                        this._storageKeyName
                                                    )) ||
                                                    this._utils.StorageUtils.getFromLocalStorage(
                                                        this._legacyStorageKeyName
                                                    ),
                                                n = this._utils.StorageUtils.getFromLocalStorage(
                                                    this._legacyStorageKeyName,
                                                    !1
                                                );
                                            n &&
                                                b.info(
                                                    'Detected legacy fonts data in the local storage. Will send them to server.'
                                                ),
                                                r &&
                                                    this._utils.StorageUtils.saveToLocalStorage(
                                                        this._storageKeyName,
                                                        r
                                                    ),
                                                this._detectFonts(function (e) {
                                                    (!r || 600 <= r.split(',').length) &&
                                                        ((r = e),
                                                        t._utils.StorageUtils.saveToLocalStorage(t._storageKeyName, r)),
                                                        t._updateFonts(r, e, n),
                                                        b.info('Fonts collected');
                                                });
                                        },
                                    },
                                    {
                                        key: '_detectFonts',
                                        value: function _detectFonts(o) {
                                            var e = this;
                                            this._domUtils.onDocumentBody(window, function () {
                                                var n = new e._fontDetectorCtor(e._domUtils);
                                                n.init(function () {
                                                    var t,
                                                        r = e;
                                                    r._utils.asyncCall.call(
                                                        n.detectByChunksWithIndex,
                                                        n,
                                                        r._serif_fonts,
                                                        2,
                                                        function (e) {
                                                            (t = e),
                                                                r._utils.asyncCall.call(
                                                                    n.detectByChunksWithIndex,
                                                                    n,
                                                                    r._sans_serif_fonts,
                                                                    1,
                                                                    function (e) {
                                                                        (t = t.concat(e)),
                                                                            r._utils.asyncCall.call(
                                                                                n.detectByChunksWithIndex,
                                                                                n,
                                                                                r._monospace_fonts,
                                                                                0,
                                                                                function (e) {
                                                                                    600 <= (t = t.concat(e)).length
                                                                                        ? ((e = n.getAllFontsDiffs()),
                                                                                          (e = new ho(
                                                                                              e
                                                                                          ).buildQueueMessage()),
                                                                                          r._dataQ.addToQueue(
                                                                                              'static_fields',
                                                                                              e,
                                                                                              !1
                                                                                          ))
                                                                                        : o(t.toString()),
                                                                                        n.clear();
                                                                                }
                                                                            );
                                                                    }
                                                                );
                                                        }
                                                    );
                                                });
                                            });
                                        },
                                    },
                                    {
                                        key: '_updateFonts',
                                        value: function _updateFonts(e, t, r) {
                                            e = new yo(e).buildQueueMessage();
                                            this._dataQ.addToQueue('static_fields', e, !1);
                                            t = new vo(t).buildQueueMessage();
                                            this._dataQ.addToQueue('static_fields', t, !1),
                                                r &&
                                                    ((r = new po(r).buildQueueMessage()),
                                                    this._dataQ.addToQueue('static_fields', r, !1));
                                        },
                                    },
                                ],
                                [
                                    {
                                        key: 'getDefaultSettings',
                                        value: function getDefaultSettings() {
                                            return _o;
                                        },
                                    },
                                ]
                            ),
                            FontsDetectionFeature
                        );
                    })();
                function ContextPropsFeature_typeof(e) {
                    return (ContextPropsFeature_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function ContextPropsFeature_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function ContextPropsFeature_setPrototypeOf(e, t) {
                    return (ContextPropsFeature_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function ContextPropsFeature_createSuper(r) {
                    var n = (function ContextPropsFeature_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = ContextPropsFeature_getPrototypeOf(r);
                        return (function ContextPropsFeature_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === ContextPropsFeature_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return ContextPropsFeature_assertThisInitialized(e);
                        })(
                            this,
                            n
                                ? ((e = ContextPropsFeature_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function ContextPropsFeature_assertThisInitialized(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e;
                }
                function ContextPropsFeature_getPrototypeOf(e) {
                    return (ContextPropsFeature_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var mo = {
                        configKey: 'isContextPropsFeature',
                        isDefault: !1,
                        shouldRunPerContext: !0,
                        shouldRunPerSession: !1,
                        shouldRun: !0,
                        isFrameRelated: !1,
                        runInUns: !0,
                        runInSlave: !1,
                        runInLean: !1,
                        isRunning: !1,
                        instance: null,
                    },
                    bo = (function () {
                        !(function ContextPropsFeature_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && ContextPropsFeature_setPrototypeOf(e, t);
                        })(ContextPropsFeature, Ce);
                        var i = ContextPropsFeature_createSuper(ContextPropsFeature);
                        function ContextPropsFeature(e, t, r, n) {
                            var o;
                            return (
                                (function ContextPropsFeature_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, ContextPropsFeature),
                                ((o = i.call(this))._dataQ = e),
                                (o._domUtils = t),
                                (o._perfMonitor = r),
                                (o._configurationRepository = n),
                                (o._observerCallback = o._observerCallback.bind(
                                    ContextPropsFeature_assertThisInitialized(o)
                                )),
                                (o.calcTime = o.calcTime.bind(ContextPropsFeature_assertThisInitialized(o))),
                                (o._getEntriesByType = o._getEntriesByType.bind(
                                    ContextPropsFeature_assertThisInitialized(o)
                                )),
                                o
                            );
                        }
                        return (
                            (function ContextPropsFeature_createClass(e, t, r) {
                                t && ContextPropsFeature_defineProperties(e.prototype, t),
                                    r && ContextPropsFeature_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(
                                ContextPropsFeature,
                                [
                                    {
                                        key: 'startFeature',
                                        value: function startFeature() {
                                            var e, t;
                                            self.screen &&
                                                ((e = window.devicePixelRatio || -1),
                                                (t = window.devicePixelRatio || -1),
                                                this._shouldCollectStaticFields() &&
                                                    this._dataQ.addToQueue(
                                                        'static_fields',
                                                        [
                                                            'display',
                                                            [
                                                                screen.colorDepth,
                                                                screen.width,
                                                                screen.height,
                                                                screen.availHeight || -1,
                                                                screen.availWidth || -1,
                                                                e,
                                                                t,
                                                            ],
                                                        ],
                                                        !1
                                                    )),
                                                this.reportPageLoadTime();
                                        },
                                    },
                                    {
                                        key: '_shouldCollectStaticFields',
                                        value: function _shouldCollectStaticFields() {
                                            var e;
                                            return (
                                                (null === (e = this._configurationRepository) || void 0 === e
                                                    ? void 0
                                                    : e.get(y.agentType)) !== l.SECONDARY
                                            );
                                        },
                                    },
                                    {
                                        key: '_observerCallback',
                                        value: function _observerCallback(e, t) {
                                            e = e.getEntries()[0];
                                            e.duration && (this.calcTime(e), 'disconnect' in t && t.disconnect());
                                        },
                                    },
                                    {
                                        key: '_isEntrySupportedByBrowser',
                                        value: function _isEntrySupportedByBrowser(e) {
                                            return (
                                                !('supportedEntryTypes' in window.PerformanceObserver) ||
                                                PerformanceObserver.supportedEntryTypes.includes(e)
                                            );
                                        },
                                    },
                                    {
                                        key: '_getEntriesByType',
                                        value: function _getEntriesByType() {
                                            var e;
                                            window.performance.timing &&
                                                window.performance.timing.loadEventEnd &&
                                                window.performance.timing.navigationStart &&
                                                ((e = {
                                                    duration:
                                                        window.performance.timing.loadEventEnd -
                                                        window.performance.timing.navigationStart,
                                                }),
                                                this.calcTime(e));
                                        },
                                    },
                                    {
                                        key: 'calcTime',
                                        value: function calcTime(e) {
                                            B.isUndefinedNull(e)
                                                ? b.warn(
                                                      'Context Props Feature: no entries of navigation timing were captured'
                                                  )
                                                : B.isUndefinedNull(e) || !B.isUndefinedNull(e.duration)
                                                ? this._perfMonitor.reportMonitor(
                                                      't.timeTillPageLoad',
                                                      Math.round(e.duration)
                                                  )
                                                : b.warn(
                                                      'Context Props Feature: page duration loading was not calculated'
                                                  );
                                        },
                                    },
                                    {
                                        key: 'reportPageLoadTime',
                                        value: function reportPageLoadTime() {
                                            if (window.performance && 'PerformanceNavigationTiming' in window) {
                                                var e = 'navigation';
                                                if (
                                                    'PerformanceObserver' in window &&
                                                    this._isEntrySupportedByBrowser(e)
                                                ) {
                                                    var t = new PerformanceObserver(this._observerCallback);
                                                    try {
                                                        t.observe({ type: e, buffered: !0 });
                                                    } catch (e) {
                                                        this.reportPageLoadTimeFallback();
                                                    }
                                                } else this.reportPageLoadTimeFallback();
                                            } else this.reportPageLoadTimeFallback();
                                        },
                                    },
                                    {
                                        key: 'reportPageLoadTimeFallback',
                                        value: function reportPageLoadTimeFallback() {
                                            var e = this;
                                            jt.isWindowDocumentReady(window)
                                                ? B.asyncCall.call(this._getEntriesByType)
                                                : B.addEventListener(self, 'load', function () {
                                                      B.asyncCall.call(e._getEntriesByType);
                                                  });
                                        },
                                    },
                                ],
                                [
                                    {
                                        key: 'getDefaultSettings',
                                        value: function getDefaultSettings() {
                                            return mo;
                                        },
                                    },
                                ]
                            ),
                            ContextPropsFeature
                        );
                    })();
                function ScriptsFeature_typeof(e) {
                    return (ScriptsFeature_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function ScriptsFeature_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function ScriptsFeature_setPrototypeOf(e, t) {
                    return (ScriptsFeature_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function ScriptsFeature_createSuper(r) {
                    var n = (function ScriptsFeature_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = ScriptsFeature_getPrototypeOf(r);
                        return (function ScriptsFeature_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === ScriptsFeature_typeof(t) || 'function' == typeof t)) return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return ScriptsFeature_assertThisInitialized(e);
                        })(
                            this,
                            n
                                ? ((e = ScriptsFeature_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function ScriptsFeature_assertThisInitialized(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e;
                }
                function ScriptsFeature_getPrototypeOf(e) {
                    return (ScriptsFeature_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var Co = {
                        configKey: 'isScriptsFeature',
                        isDefault: !1,
                        shouldRunPerContext: !0,
                        shouldRunPerSession: !1,
                        shouldRun: !0,
                        isFrameRelated: !1,
                        runInUns: !0,
                        runInSlave: !1,
                        runInLean: !1,
                        isRunning: !1,
                        instance: null,
                    },
                    wo = (function () {
                        !(function ScriptsFeature_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && ScriptsFeature_setPrototypeOf(e, t);
                        })(ScriptsFeature, Ce);
                        var n = ScriptsFeature_createSuper(ScriptsFeature);
                        function ScriptsFeature(e, t) {
                            var r;
                            return (
                                (function ScriptsFeature_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, ScriptsFeature),
                                ((r = n.call(this))._dataQ = e),
                                (r._timeoutValue = 1e3),
                                (r._scriptsRepository = t),
                                (r._runDetectionLoopBinded = r._runDetectionLoop.bind(
                                    ScriptsFeature_assertThisInitialized(r)
                                )),
                                r
                            );
                        }
                        return (
                            (function ScriptsFeature_createClass(e, t, r) {
                                t && ScriptsFeature_defineProperties(e.prototype, t),
                                    r && ScriptsFeature_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(
                                ScriptsFeature,
                                [
                                    {
                                        key: '_checkScriptsData',
                                        value: function _checkScriptsData() {
                                            for (var e = document.scripts, t = 0; t < e.length; t++) {
                                                var r = { src: e[t].src, text: e[t].text };
                                                this._scriptsRepository.exists(r) ||
                                                    (this._scriptsRepository.add(r),
                                                    this._dataQ.addToQueue('scripts', [null, r.src, r.textHash]));
                                            }
                                        },
                                    },
                                    {
                                        key: '_runDetectionLoop',
                                        value: function _runDetectionLoop() {
                                            this._checkScriptsData(),
                                                (this._timer = setTimeout(
                                                    this._runDetectionLoopBinded,
                                                    this._timeoutValue
                                                )),
                                                this._timeoutValue < 536870911 && (this._timeoutValue *= 4);
                                        },
                                    },
                                    {
                                        key: 'startFeature',
                                        value: function startFeature() {
                                            this._runDetectionLoop();
                                        },
                                    },
                                    {
                                        key: 'stopFeature',
                                        value: function stopFeature() {
                                            this._timer && clearTimeout(this._timer);
                                        },
                                    },
                                ],
                                [
                                    {
                                        key: 'getDefaultSettings',
                                        value: function getDefaultSettings() {
                                            return Co;
                                        },
                                    },
                                ]
                            ),
                            ScriptsFeature
                        );
                    })();
                function FilesFeature_typeof(e) {
                    return (FilesFeature_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function FilesFeature_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function FilesFeature_setPrototypeOf(e, t) {
                    return (FilesFeature_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function FilesFeature_createSuper(r) {
                    var n = (function FilesFeature_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = FilesFeature_getPrototypeOf(r);
                        return (function FilesFeature_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === FilesFeature_typeof(t) || 'function' == typeof t)) return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return (function FilesFeature_assertThisInitialized(e) {
                                if (void 0 !== e) return e;
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            })(e);
                        })(
                            this,
                            n
                                ? ((e = FilesFeature_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function FilesFeature_getPrototypeOf(e) {
                    return (FilesFeature_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var Eo = {
                        configKey: 'isFilesFeature',
                        isDefault: !1,
                        shouldRunPerContext: !1,
                        shouldRunPerSession: !0,
                        shouldRun: !0,
                        isFrameRelated: !1,
                        runInUns: !1,
                        runInSlave: !1,
                        runInLean: !1,
                        isRunning: !1,
                        instance: null,
                    },
                    So = (function () {
                        !(function FilesFeature_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && FilesFeature_setPrototypeOf(e, t);
                        })(FilesFeature, Ce);
                        var s = FilesFeature_createSuper(FilesFeature);
                        function FilesFeature(e, t, r, n, o) {
                            var i;
                            return (
                                (function FilesFeature_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, FilesFeature),
                                ((i = s.call(this))._utils = t),
                                (i._configurationRepository = e),
                                (i._sessionService = r),
                                (i._muidService = n),
                                (i._cidCache = o),
                                i
                            );
                        }
                        return (
                            (function FilesFeature_createClass(e, t, r) {
                                t && FilesFeature_defineProperties(e.prototype, t),
                                    r && FilesFeature_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(
                                FilesFeature,
                                [
                                    {
                                        key: 'getFiles',
                                        value: function getFiles() {
                                            if (
                                                this._customerId &&
                                                this._muid &&
                                                this._sid &&
                                                this._addrList &&
                                                0 < this._addrList.length
                                            )
                                                for (var e, t = 0; t < this._addrList.length; t++)
                                                    (e =
                                                        this._addrList[t] +
                                                        '?cid=' +
                                                        this._customerId +
                                                        '&snum=' +
                                                        this._sid +
                                                        '&muid=' +
                                                        this._muid),
                                                        this._utils.getPostUrl(e, 'GET', null, null, null),
                                                        (this._isSent = !0);
                                        },
                                    },
                                    {
                                        key: 'startFeature',
                                        value: function startFeature() {
                                            var e;
                                            this._isSent = !1;
                                            try {
                                                this._addrList = JSON.parse(
                                                    this._configurationRepository.get('getAddrList')
                                                );
                                            } catch (e) {
                                                this._addrList = '';
                                            }
                                            (this._customerId = this._cidCache.get() || ''),
                                                (this._muid =
                                                    (null === (e = this._muidService) || void 0 === e
                                                        ? void 0
                                                        : e.muid) || ''),
                                                (this._sid = this._sessionService.sessionId || ''),
                                                this.getFiles();
                                        },
                                    },
                                    {
                                        key: 'updateFeatureConfig',
                                        value: function updateFeatureConfig() {
                                            var e;
                                            try {
                                                this._addrList = JSON.parse(
                                                    this._configurationRepository.get('getAddrList')
                                                );
                                            } catch (e) {
                                                this._addrList = '';
                                            }
                                            (this._customerId = this._cidCache.get() || ''),
                                                (this._muid =
                                                    (null === (e = this._muidService) || void 0 === e
                                                        ? void 0
                                                        : e.muid) || ''),
                                                (this._sid = this._sessionService.sessionId || ''),
                                                this._isSent || this.getFiles();
                                        },
                                    },
                                ],
                                [
                                    {
                                        key: 'getDefaultSettings',
                                        value: function getDefaultSettings() {
                                            return Eo;
                                        },
                                    },
                                ]
                            ),
                            FilesFeature
                        );
                    })();
                function MetadataCollector_typeof(e) {
                    return (MetadataCollector_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function MetadataCollector_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function MetadataCollector_setPrototypeOf(e, t) {
                    return (MetadataCollector_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function MetadataCollector_createSuper(r) {
                    var n = (function MetadataCollector_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = MetadataCollector_getPrototypeOf(r);
                        return (function MetadataCollector_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === MetadataCollector_typeof(t) || 'function' == typeof t)) return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return MetadataCollector_assertThisInitialized(e);
                        })(
                            this,
                            n
                                ? ((e = MetadataCollector_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function MetadataCollector_assertThisInitialized(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e;
                }
                function MetadataCollector_getPrototypeOf(e) {
                    return (MetadataCollector_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var Po = {
                        configKey: 'isMetadataCollect',
                        isDefault: !0,
                        shouldRunPerContext: !1,
                        shouldRunPerSession: !1,
                        shouldRun: !0,
                        isFrameRelated: !1,
                        runInSlave: !0,
                        runInLean: !0,
                        runInUns: !1,
                        isRunning: !1,
                        instance: null,
                    },
                    ko = (function () {
                        !(function MetadataCollector_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && MetadataCollector_setPrototypeOf(e, t);
                        })(MetadataCollector, Ce);
                        var i = MetadataCollector_createSuper(MetadataCollector);
                        function MetadataCollector(e, t, r, n) {
                            var o;
                            return (
                                (function MetadataCollector_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, MetadataCollector),
                                ((o = i.call(this))._configurationRepository = e),
                                (o._dataQ = t),
                                (o._metaDataSiteMapper = r),
                                (o._utils = n),
                                o._metaDataSiteMapper.updateObserver(
                                    o.onSiteMapperMatch.bind(MetadataCollector_assertThisInitialized(o))
                                ),
                                o
                            );
                        }
                        return (
                            (function MetadataCollector_createClass(e, t, r) {
                                t && MetadataCollector_defineProperties(e.prototype, t),
                                    r && MetadataCollector_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(
                                MetadataCollector,
                                [
                                    {
                                        key: 'startFeature',
                                        value: function startFeature() {
                                            this._metaDataSiteMapper.initTracking();
                                        },
                                    },
                                    {
                                        key: 'stopFeature',
                                        value: function stopFeature() {
                                            this._metaDataSiteMapper.stopTracking();
                                        },
                                    },
                                    {
                                        key: 'onSiteMapperMatch',
                                        value: function onSiteMapperMatch(e) {
                                            b.debug('Metadata Collector mapper match - '.concat(JSON.stringify(e))),
                                                e.metaVal &&
                                                    this._dataQ.addToQueue('metadata_map', [
                                                        null,
                                                        e.metaVal,
                                                        this._utils.dateNow(),
                                                    ]);
                                        },
                                    },
                                    {
                                        key: 'updateFeatureConfig',
                                        value: function updateFeatureConfig() {
                                            this._metaDataSiteMapper.onConfigUpdate(this._configurationRepository);
                                        },
                                    },
                                ],
                                [
                                    {
                                        key: 'getDefaultSettings',
                                        value: function getDefaultSettings() {
                                            return Po;
                                        },
                                    },
                                ]
                            ),
                            MetadataCollector
                        );
                    })(),
                    Oo = null,
                    Bo = null,
                    Mo = null,
                    Ro = null;
                function _bindInputEvents(e) {
                    Oo.removeElementEvents(e), Oo.addElementEvents(e, !0);
                }
                function _bindOnClickEvents(e) {
                    Bo.removeElementEvents(e), Bo.addElementEvents(e, !0);
                }
                function _bindOnChangeEvents(e) {
                    Mo.removeElementEvents(e), Mo.addElementEvents(e, !0);
                }
                function _bindOnFormsEvents(e) {
                    Ro.removeElementEvents(e), Ro.addElementEvents(e, !0);
                }
                function CrossDomainMuidCollector_ownKeys(t, e) {
                    var r,
                        n = Object.keys(t);
                    return (
                        Object.getOwnPropertySymbols &&
                            ((r = Object.getOwnPropertySymbols(t)),
                            e &&
                                (r = r.filter(function (e) {
                                    return Object.getOwnPropertyDescriptor(t, e).enumerable;
                                })),
                            n.push.apply(n, r)),
                        n
                    );
                }
                function CrossDomainMuidCollector_objectSpread(t) {
                    for (var e = 1; e < arguments.length; e++) {
                        var r = null != arguments[e] ? arguments[e] : {};
                        e % 2
                            ? CrossDomainMuidCollector_ownKeys(Object(r), !0).forEach(function (e) {
                                  CrossDomainMuidCollector_defineProperty(t, e, r[e]);
                              })
                            : Object.getOwnPropertyDescriptors
                            ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r))
                            : CrossDomainMuidCollector_ownKeys(Object(r)).forEach(function (e) {
                                  Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e));
                              });
                    }
                    return t;
                }
                function CrossDomainMuidCollector_typeof(e) {
                    return (CrossDomainMuidCollector_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function CrossDomainMuidCollector_classCallCheck(e, t) {
                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                }
                function CrossDomainMuidCollector_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function CrossDomainMuidCollector_createClass(e, t, r) {
                    return (
                        t && CrossDomainMuidCollector_defineProperties(e.prototype, t),
                        r && CrossDomainMuidCollector_defineProperties(e, r),
                        Object.defineProperty(e, 'prototype', { writable: !1 }),
                        e
                    );
                }
                function CrossDomainMuidCollector_setPrototypeOf(e, t) {
                    return (CrossDomainMuidCollector_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function CrossDomainMuidCollector_createSuper(r) {
                    var n = (function CrossDomainMuidCollector_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = CrossDomainMuidCollector_getPrototypeOf(r);
                        return (function CrossDomainMuidCollector_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === CrossDomainMuidCollector_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return CrossDomainMuidCollector_assertThisInitialized(e);
                        })(
                            this,
                            n
                                ? ((e = CrossDomainMuidCollector_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function CrossDomainMuidCollector_assertThisInitialized(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e;
                }
                function CrossDomainMuidCollector_getPrototypeOf(e) {
                    return (CrossDomainMuidCollector_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                function CrossDomainMuidCollector_defineProperty(e, t, r) {
                    return (
                        t in e
                            ? Object.defineProperty(e, t, { value: r, enumerable: !0, configurable: !0, writable: !0 })
                            : (e[t] = r),
                        e
                    );
                }
                var Do = {
                        configKey: 'isCrossdomain',
                        isDefault: !1,
                        shouldRunPerContext: !1,
                        shouldRunPerSession: !1,
                        shouldRun: !0,
                        isFrameRelated: !1,
                        runInUns: !1,
                        runInSlave: !1,
                        runInLean: !1,
                        isRunning: !1,
                        instance: null,
                    },
                    Fo = { found: 0, new: 1 },
                    To = /(?=(child\-src)|(frame\-src))([^;]+)/gi,
                    Io = /http[s]?:\/\/([^\/]+)/gi,
                    xo = {
                        resource: null,
                        iframeElement: !1,
                        blockedByCSP: !1,
                        iframeLoaded: !1,
                        ACKMessageSent: !1,
                        ACKMessageRecieved: !1,
                        unavailable: !1,
                    },
                    Ao = ['eventSequence', 'timestamp', 'eventType', 'domainUrl', 'muid'],
                    Lo = (function () {
                        !(function CrossDomainMuidCollector_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && CrossDomainMuidCollector_setPrototypeOf(e, t);
                        })(CrossDomainMuidCollector, Ce);
                        var t = CrossDomainMuidCollector_createSuper(CrossDomainMuidCollector);
                        function CrossDomainMuidCollector(e) {
                            var i;
                            return (
                                CrossDomainMuidCollector_classCallCheck(this, CrossDomainMuidCollector),
                                CrossDomainMuidCollector_defineProperty(
                                    CrossDomainMuidCollector_assertThisInitialized((i = t.call(this))),
                                    'startFeature',
                                    function (e) {
                                        (i._domainsResources = i._configurationRepository.get(y.crossDomainsList)),
                                            (i._crossDomainsTimeout = i._configurationRepository.get(
                                                y.crossDomainsTimeout
                                            )),
                                            Array.isArray(i._domainsResources) &&
                                                0 < i._domainsResources.length &&
                                                (i._windowMessageEmitter.startObserver(e),
                                                i._domainsResources.forEach(function (e) {
                                                    var t = e.match(Io);
                                                    null !== t &&
                                                        'string' == typeof t[0] &&
                                                        ((t = t[0]),
                                                        'object' !==
                                                            CrossDomainMuidCollector_typeof(i._domainsStates[t]) &&
                                                            ((i._domainsStates[t] =
                                                                CrossDomainMuidCollector_objectSpread({}, xo)),
                                                            (i._domainsStates[t].resource = e),
                                                            i._domains.push(t)));
                                                }),
                                                Array.isArray(i._domains) &&
                                                    0 < i._domains.length &&
                                                    (i.isBlockedByCSP(e, i._domains),
                                                    i._domUtils.onDocumentBody(e.Context, function () {
                                                        i.connectDomains(e);
                                                    })));
                                    }
                                ),
                                CrossDomainMuidCollector_defineProperty(
                                    CrossDomainMuidCollector_assertThisInitialized(i),
                                    'stopFeature',
                                    function (e) {
                                        i._clearFeaturesObjects(e);
                                    }
                                ),
                                CrossDomainMuidCollector_defineProperty(
                                    CrossDomainMuidCollector_assertThisInitialized(i),
                                    '_clearFeaturesObjects',
                                    function (t) {
                                        i._windowMessageEmitter.stopObserver(t),
                                            Array.isArray(i._domains) &&
                                                0 < i._domains.length &&
                                                (i._domains.forEach(function (e) {
                                                    i.clearDomElements(t, e);
                                                }),
                                                (i._domains = []),
                                                (i._domainsStates = {}));
                                    }
                                ),
                                CrossDomainMuidCollector_defineProperty(
                                    CrossDomainMuidCollector_assertThisInitialized(i),
                                    'connectDomains',
                                    function (t) {
                                        Array.isArray(i._domains) &&
                                            0 < i._domains.length &&
                                            (i._domains.forEach(function (e) {
                                                i._domainsStates[e].blockedByCSP ||
                                                    !1 !== i._domainsStates[e].iframeElement ||
                                                    i.createIframe(t, e);
                                            }),
                                            (i._domainsTimeoutFunc = setTimeout(function () {
                                                i._domains.forEach(function (e) {
                                                    'object' === CrossDomainMuidCollector_typeof(i._domainsStates[e]) &&
                                                        !1 === i._domainsStates[e].ACKMessageRecieved &&
                                                        !1 === i._domainsStates[e].unavailable &&
                                                        (b.warn(
                                                            'Cross Domain feature - domain '.concat(
                                                                e,
                                                                ' is unavailable'
                                                            )
                                                        ),
                                                        (i._domainsStates[e].unavailable = !0),
                                                        i.clearDomElements(t, e));
                                                });
                                            }, i._crossDomainsTimeout)));
                                    }
                                ),
                                CrossDomainMuidCollector_defineProperty(
                                    CrossDomainMuidCollector_assertThisInitialized(i),
                                    'createIframe',
                                    function (e, t) {
                                        var r = e.getDocument().createElement('iframe');
                                        (r.onload = function () {
                                            i.postNextMessage(t);
                                        }),
                                            (r.id = je.ignorePrefixFrame + CrossDomainMuidCollector.generateRandomID()),
                                            (r.src = i._domainsStates[t].resource),
                                            (r.style.display = 'none'),
                                            (r.style.opacity = '0'),
                                            (r.width = '1'),
                                            (r.height = '1'),
                                            e.getDocument().body.appendChild(r),
                                            (i._domainsStates[t].iframeElement = r);
                                    }
                                ),
                                CrossDomainMuidCollector_defineProperty(
                                    CrossDomainMuidCollector_assertThisInitialized(i),
                                    'clearDomElements',
                                    function (e, t) {
                                        var r = i._domainsStates[t].iframeElement;
                                        'object' === CrossDomainMuidCollector_typeof(r) &&
                                            null !==
                                                e.getDocument().getElementById(i._domainsStates[t].iframeElement.id) &&
                                            e.getDocument().body.removeChild(r);
                                    }
                                ),
                                CrossDomainMuidCollector_defineProperty(
                                    CrossDomainMuidCollector_assertThisInitialized(i),
                                    'postNextMessage',
                                    function (e) {
                                        var t;
                                        !i._domainsStates[e].ACKMessageRecieved &&
                                            i._domainsStates[e].iframeElement &&
                                            ((t = { muid: i._generatedMUID }),
                                            i._domainsStates[e].iframeElement.contentWindow.postMessage(
                                                JSON.stringify(t),
                                                e
                                            ),
                                            (i._domainsStates[e].ACKMessageSent = !0));
                                    }
                                ),
                                CrossDomainMuidCollector_defineProperty(
                                    CrossDomainMuidCollector_assertThisInitialized(i),
                                    'isBlockedByCSP',
                                    function (e, r) {
                                        if (!Array.isArray(r) || r.length < 1)
                                            throw new Error(
                                                'Domains are expected for content security policy assertion'
                                            );
                                        var n = !1;
                                        [].slice
                                            .call(e.getDocument().getElementsByTagName('meta'))
                                            .forEach(function (e) {
                                                var t;
                                                if (
                                                    ('Content-Security-Policy' === e.getAttribute('http-equiv') &&
                                                        ((n = !0),
                                                        (t = e.getAttribute('content').match(To)),
                                                        r.forEach(function (e) {
                                                            t &&
                                                                -1 === t[0].indexOf(e) &&
                                                                'object' ===
                                                                    CrossDomainMuidCollector_typeof(
                                                                        i._domainsStates[e]
                                                                    ) &&
                                                                ((i._domainsStates[e].blockedByCSP = !0),
                                                                b.warn(
                                                                    'Cross Domain feature - domain '.concat(
                                                                        e,
                                                                        ' is blocked by CSP'
                                                                    )
                                                                ));
                                                        })),
                                                    n)
                                                )
                                                    return !1;
                                            });
                                    }
                                ),
                                CrossDomainMuidCollector_defineProperty(
                                    CrossDomainMuidCollector_assertThisInitialized(i),
                                    'windowMessageHandler',
                                    function (e) {
                                        var t = e.message.origin;
                                        i._domainsStates.hasOwnProperty(t) &&
                                            !0 !== i._domainsStates[t].ACKMessageRecieved &&
                                            ((i._domainsStates[t].ACKMessageRecieved = !0),
                                            i.clearDomElements(new We(e.message.currentTarget), t),
                                            (e = e.message.data),
                                            i.sendToQueue(t, e));
                                    }
                                ),
                                CrossDomainMuidCollector_defineProperty(
                                    CrossDomainMuidCollector_assertThisInitialized(i),
                                    'sendToQueue',
                                    function (e, n) {
                                        var o = e.replace(/http[s]?:\/\//i, '');
                                        'object' === CrossDomainMuidCollector_typeof(n.found) &&
                                            Object.keys(n.found).forEach(function (e) {
                                                var t = i._utils.StorageUtils.getAndUpdateEventSequenceNumber(),
                                                    r = o,
                                                    e = n.found[e].split('__'),
                                                    e = {
                                                        eventType: i._eventType.found,
                                                        eventSequence: t,
                                                        domainUrl: r,
                                                        muid: e[0],
                                                        timestamp: e[1],
                                                    };
                                                i._dataQ.addToQueue(
                                                    'crossmuid_event',
                                                    i._utils.convertToArrayByMap(Ao, e),
                                                    !0
                                                );
                                            }),
                                            'object' === CrossDomainMuidCollector_typeof(n.new) &&
                                                Object.keys(n.new).forEach(function (e) {
                                                    var t = i._utils.StorageUtils.getAndUpdateEventSequenceNumber(),
                                                        r = o,
                                                        e = n.new[e].split('__'),
                                                        e = {
                                                            eventType: i._eventType.new,
                                                            eventSequence: t,
                                                            domainUrl: r,
                                                            muid: e[0],
                                                            timestamp: e[1],
                                                        };
                                                    i._dataQ.addToQueue(
                                                        'crossmuid_event',
                                                        i._utils.convertToArrayByMap(Ao, e)
                                                    );
                                                }),
                                            'object' === CrossDomainMuidCollector_typeof(n.error_message) &&
                                                b.warn(
                                                    'Cross Domain feature - domain '
                                                        .concat(o, ' error. Error Message: \n                ')
                                                        .concat(n.error_message, ' Code: ')
                                                        .concat(n.error_code)
                                                );
                                    }
                                ),
                                CrossDomainMuidCollector_defineProperty(
                                    CrossDomainMuidCollector_assertThisInitialized(i),
                                    'updateFeatureConfig',
                                    function (e) {
                                        (i._domainsResources = i._configurationRepository.get(y.crossDomainsList)),
                                            (i._crossDomainsTimeout = i._configurationRepository.get(
                                                y.crossDomainsTimeout
                                            )),
                                            clearTimeout(i._domainsTimeoutFunc),
                                            (i._domainsTimeoutFunc = null),
                                            i.updateDomainStates(e);
                                    }
                                ),
                                CrossDomainMuidCollector_defineProperty(
                                    CrossDomainMuidCollector_assertThisInitialized(i),
                                    'updateDomainStates',
                                    function (e) {
                                        Array.isArray(i._domainsResources) &&
                                            0 < i._domainsResources.length &&
                                            ((i._domains = []),
                                            i._domainsResources.forEach(function (e) {
                                                var t = e.match(Io);
                                                null !== t &&
                                                    'string' == typeof t[0] &&
                                                    ((t = t[0]),
                                                    'object' !== CrossDomainMuidCollector_typeof(i._domainsStates[t]) &&
                                                        ((i._domainsStates[t] = CrossDomainMuidCollector_objectSpread(
                                                            {},
                                                            xo
                                                        )),
                                                        (i._domainsStates[t].resource = e)),
                                                    i._domains.push(t));
                                            }),
                                            Array.isArray(i._domains) &&
                                                0 < i._domains.length &&
                                                (i.isBlockedByCSP(e, i._domains),
                                                i._domUtils.onDocumentBody(e.Context, function () {
                                                    i.connectDomains(e);
                                                })));
                                    }
                                ),
                                (i._configurationRepository = e.configurationRepository),
                                (i._dataQ = e.dataQ),
                                (i._utils = e.utils),
                                (i._domUtils = e.domUtils),
                                (i._eventType = e.eventType),
                                (i._messageBus = e.messageBus),
                                (i._windowMessageEmitter = e.windowMessageEventEmitter),
                                i._messageBus.subscribe(me.WindowMessageEvent, i.windowMessageHandler),
                                (i._generatedMUID = i._utils.dateNow() + '-' + i._utils.generateUUID().toUpperCase()),
                                (i._domainsStates = {}),
                                (i._domainsResources = []),
                                (i._domains = []),
                                (i._domainsTimeoutFunc = null),
                                i
                            );
                        }
                        return (
                            CrossDomainMuidCollector_createClass(CrossDomainMuidCollector, null, [
                                {
                                    key: 'getDefaultSettings',
                                    value: function getDefaultSettings() {
                                        return Do;
                                    },
                                },
                                {
                                    key: 'Builder',
                                    get: function get() {
                                        return (function () {
                                            function Builder(e, t, r, n, o) {
                                                CrossDomainMuidCollector_classCallCheck(this, Builder),
                                                    (this.configurationRepository = e),
                                                    (this.dataQ = t),
                                                    (this.utils = r),
                                                    (this.domUtils = n),
                                                    (this.eventType = o);
                                            }
                                            return (
                                                CrossDomainMuidCollector_createClass(Builder, [
                                                    {
                                                        key: 'withMessageBus',
                                                        value: function withMessageBus(e) {
                                                            return (this.messageBus = e), this;
                                                        },
                                                    },
                                                    {
                                                        key: 'withWindowMessageEventEmitter',
                                                        value: function withWindowMessageEventEmitter(e) {
                                                            return (this.windowMessageEventEmitter = e), this;
                                                        },
                                                    },
                                                    {
                                                        key: 'build',
                                                        value: function build() {
                                                            return new CrossDomainMuidCollector(this);
                                                        },
                                                    },
                                                ]),
                                                Builder
                                            );
                                        })();
                                    },
                                },
                                {
                                    key: 'generateRandomID',
                                    value: function generateRandomID() {
                                        for (var e = 'abcdefghijklmnopqrstuvwxyz0123456789', t = '', r = 0; r < 16; r++)
                                            t += e.charAt(Math.floor(Math.random() * e.length));
                                        return t;
                                    },
                                },
                            ]),
                            CrossDomainMuidCollector
                        );
                    })();
                function Event_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var jo = (function () {
                    function Event() {
                        !(function Event_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, Event);
                    }
                    return (
                        (function Event_createClass(e, t, r) {
                            t && Event_defineProperties(e.prototype, t),
                                r && Event_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(Event, [
                            {
                                key: 'getEventTimestamp',
                                value: function getEventTimestamp() {
                                    return B.dateNow();
                                },
                            },
                            {
                                key: 'getTimestampFromEvent',
                                value: function getTimestampFromEvent(e) {
                                    return e.timeStamp ? B.cutDecimalPointDigits(e.timeStamp, 3) : 0;
                                },
                            },
                            { key: 'updateFeatureConfig', value: function updateFeatureConfig() {} },
                        ]),
                        Event
                    );
                })();
                function InputEvents_typeof(e) {
                    return (InputEvents_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function InputEvents_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function InputEvents_setPrototypeOf(e, t) {
                    return (InputEvents_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function InputEvents_createSuper(r) {
                    var n = (function InputEvents_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = InputEvents_getPrototypeOf(r);
                        return (function InputEvents_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === InputEvents_typeof(t) || 'function' == typeof t)) return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return InputEvents_assertThisInitialized(e);
                        })(
                            this,
                            n
                                ? ((e = InputEvents_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function InputEvents_assertThisInitialized(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e;
                }
                function InputEvents_getPrototypeOf(e) {
                    return (InputEvents_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                function InputEvents_defineProperty(e, t, r) {
                    return (
                        t in e
                            ? Object.defineProperty(e, t, { value: r, enumerable: !0, configurable: !0, writable: !0 })
                            : (e[t] = r),
                        e
                    );
                }
                function ye(s) {
                    return {
                        applyAction: function _applyAction(e, t, r) {
                            if (!['start', 'stop'].includes(t)) return !1;
                            for (var n = [], o = e.getDocument().querySelectorAll(Uo), i = 0; i < o.length; i++)
                                n.push(o[i]);
                            0 < n.length && s[t](n, e.Context, r);
                        },
                    };
                }
                var Uo =
                        "input:not([type='color']):not([type='hidden']):not([type='file']):not([type='image']):not([type='button']):not([type='radio']):not([type='checkbox']), textarea",
                    No = (function () {
                        !(function InputEvents_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && InputEvents_setPrototypeOf(e, t);
                        })(InputEvents, jo);
                        var c = InputEvents_createSuper(InputEvents);
                        function InputEvents(e, t, r, n, o, i, s, a) {
                            var u;
                            return (
                                (function InputEvents_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, InputEvents),
                                InputEvents_defineProperty(
                                    InputEvents_assertThisInitialized((u = c.call(this))),
                                    'handleInputEvents',
                                    function (e) {
                                        'InputEvent' === e.constructor.name &&
                                            u._inputEventsPerElement.set(e.target, {});
                                        var t = e.target.value || '';
                                        '' !== t && (t = u._maskingService.maskText(t)),
                                            u._sendToQueue(e, {
                                                length: t ? t.length : 0,
                                                elementValues: t,
                                                selected: -1,
                                            });
                                    }
                                ),
                                InputEvents_defineProperty(
                                    InputEvents_assertThisInitialized(u),
                                    'handleFocusBlurEvents',
                                    function (e) {
                                        u._sendToQueue(e, { length: 0, selected: -1, elementValues: '' });
                                    }
                                ),
                                InputEvents_defineProperty(
                                    InputEvents_assertThisInitialized(u),
                                    'handleSyntheticInputEvents',
                                    function (e) {
                                        var t;
                                        (u._inputEventsPerElement.has(e.target) &&
                                            (void 0 === e.jQueryMask ||
                                                ('autotab' !== e.jQueryMask && 'prasleyValidator' !== e.jQueryMask))) ||
                                            ('' !== (t = e.target.value || '') && (t = u._maskingService.maskText(t)),
                                            u._sendToQueue(e, {
                                                length: t ? t.length : 0,
                                                elementValues: t,
                                                selected: -1,
                                            }));
                                    }
                                ),
                                (u._elements = e),
                                (u._sendToQueue = t),
                                (u._messageBus = n),
                                (u._CDUtils = r),
                                (u._StandardInputEventsEmitter = o),
                                (u._SyntheticMaskInputEventsHandler = i),
                                (u._SyntheticAutotabInputEventsHandler = s),
                                (u._maskingService = a),
                                (u._inputEventsPerElement = new WeakMap()),
                                u
                            );
                        }
                        return (
                            (function InputEvents_createClass(e, t, r) {
                                t && InputEvents_defineProperties(e.prototype, t),
                                    r && InputEvents_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(InputEvents, [
                                {
                                    key: 'bind',
                                    value: function bind(e) {
                                        this._messageBus.subscribe(me.StandardInputEvent, this.handleInputEvents),
                                            this._messageBus.subscribe(
                                                me.StandardInputFocusEvent,
                                                this.handleFocusBlurEvents
                                            ),
                                            this._messageBus.subscribe(
                                                me.StandardInputBlurEvent,
                                                this.handleFocusBlurEvents
                                            ),
                                            this._messageBus.subscribe(
                                                me.SyntheticInputMaskEvent,
                                                this.handleSyntheticInputEvents
                                            ),
                                            ye(this._StandardInputEventsEmitter).applyAction(e, 'start'),
                                            ye(this._SyntheticMaskInputEventsHandler).applyAction(e, 'start'),
                                            ye(this._SyntheticAutotabInputEventsHandler).applyAction(e, 'start');
                                    },
                                },
                                {
                                    key: 'unbind',
                                    value: function unbind(e) {
                                        ye(this._StandardInputEventsEmitter).applyAction(e, 'stop'),
                                            ye(this._SyntheticMaskInputEventsHandler).applyAction(e, 'stop'),
                                            ye(this._SyntheticAutotabInputEventsHandler).applyAction(e, 'stop'),
                                            this._messageBus.unsubscribe(me.StandardInputEvent, this.handleInputEvents),
                                            this._messageBus.unsubscribe(
                                                me.StandardInputFocusEvent,
                                                this.handleFocusBlurEvents
                                            ),
                                            this._messageBus.unsubscribe(
                                                me.StandardInputBlurEvent,
                                                this.handleFocusBlurEvents
                                            ),
                                            this._messageBus.unsubscribe(
                                                me.SyntheticInputMaskEvent,
                                                this.handleSyntheticInputEvents
                                            );
                                    },
                                },
                                {
                                    key: 'addOnLoadInputData',
                                    value: function addOnLoadInputData(e, t) {
                                        for (var r = e.getDocument().querySelectorAll(Uo), n = 0; n < r.length; n++) {
                                            var o = r[n];
                                            this._elements.isListed(o)
                                                ? t || this._elements.resendElementPerContext(o)
                                                : this._elements.getElement(o, !1);
                                        }
                                    },
                                },
                            ]),
                            InputEvents
                        );
                    })();
                function CustomInputEvents_typeof(e) {
                    return (CustomInputEvents_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function _toConsumableArray(e) {
                    return (
                        (function _arrayWithoutHoles(e) {
                            if (Array.isArray(e)) return CustomInputEvents_arrayLikeToArray(e);
                        })(e) ||
                        (function _iterableToArray(e) {
                            if (('undefined' != typeof Symbol && null != e[Symbol.iterator]) || null != e['@@iterator'])
                                return Array.from(e);
                        })(e) ||
                        (function CustomInputEvents_unsupportedIterableToArray(e, t) {
                            if (!e) return;
                            if ('string' == typeof e) return CustomInputEvents_arrayLikeToArray(e, t);
                            var r = Object.prototype.toString.call(e).slice(8, -1);
                            'Object' === r && e.constructor && (r = e.constructor.name);
                            if ('Map' === r || 'Set' === r) return Array.from(e);
                            if ('Arguments' === r || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))
                                return CustomInputEvents_arrayLikeToArray(e, t);
                        })(e) ||
                        (function _nonIterableSpread() {
                            throw new TypeError(
                                'Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.'
                            );
                        })()
                    );
                }
                function CustomInputEvents_arrayLikeToArray(e, t) {
                    (null == t || t > e.length) && (t = e.length);
                    for (var r = 0, n = new Array(t); r < t; r++) n[r] = e[r];
                    return n;
                }
                function CustomInputEvents_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function CustomInputEvents_setPrototypeOf(e, t) {
                    return (CustomInputEvents_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function CustomInputEvents_createSuper(r) {
                    var n = (function CustomInputEvents_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = CustomInputEvents_getPrototypeOf(r);
                        return (function CustomInputEvents_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === CustomInputEvents_typeof(t) || 'function' == typeof t)) return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return CustomInputEvents_assertThisInitialized(e);
                        })(
                            this,
                            n
                                ? ((e = CustomInputEvents_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function CustomInputEvents_assertThisInitialized(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e;
                }
                function CustomInputEvents_getPrototypeOf(e) {
                    return (CustomInputEvents_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var Wo = (function () {
                    !(function CustomInputEvents_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && CustomInputEvents_setPrototypeOf(e, t);
                    })(CustomInputEvents, jo);
                    var u = CustomInputEvents_createSuper(CustomInputEvents);
                    function CustomInputEvents(e, t, r, n, o, i, s) {
                        var a;
                        return (
                            (function CustomInputEvents_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, CustomInputEvents),
                            (function CustomInputEvents_defineProperty(e, t, r) {
                                t in e
                                    ? Object.defineProperty(e, t, {
                                          value: r,
                                          enumerable: !0,
                                          configurable: !0,
                                          writable: !0,
                                      })
                                    : (e[t] = r);
                            })(
                                CustomInputEvents_assertThisInitialized((a = u.call(this))),
                                'handleInputEvents',
                                function (e) {
                                    var t,
                                        r,
                                        n,
                                        o,
                                        i = '',
                                        s =
                                            null == e || null === (t = e.getAttribute) || void 0 === t
                                                ? void 0
                                                : t.call(
                                                      e,
                                                      null === (s = a._inputElementSettings) || void 0 === s
                                                          ? void 0
                                                          : s.elementDataAttribute
                                                  );
                                    s
                                        ? (i = s)
                                        : null != e && null !== (r = e.target) && void 0 !== r && r.ariaValueNow
                                        ? (i = e.target.ariaValueNow)
                                        : null != e && null !== (n = e.target) && void 0 !== n && n.value
                                        ? (i = null === (n = e.target) || void 0 === n ? void 0 : n.value)
                                        : null != e &&
                                          e[
                                              null === (o = a._inputElementSettings) || void 0 === o
                                                  ? void 0
                                                  : o.elementDataAttribute
                                          ] &&
                                          (i =
                                              e[
                                                  null === (o = a._inputElementSettings) || void 0 === o
                                                      ? void 0
                                                      : o.elementDataAttribute
                                              ]),
                                        '' !== i && (i = a._maskingService.maskText(i)),
                                        '' !== i &&
                                            a._sendToQueue(e, {
                                                length: (null === i || void 0 === i ? void 0 : i.length) || 0,
                                                elementValues: i,
                                                selected: -1,
                                            });
                                }
                            ),
                            (a._elements = e),
                            (a._sendToQueue = t),
                            (a._CDUtils = r),
                            (a._messageBus = n),
                            (a._StandardCustomInputEmitter = o),
                            (a._maskingService = i),
                            (a._inputElementSettings = s),
                            (a._elementsFromDoc = { mainElement: '', customButtons: [] }),
                            a
                        );
                    }
                    return (
                        (function CustomInputEvents_createClass(e, t, r) {
                            t && CustomInputEvents_defineProperties(e.prototype, t),
                                r && CustomInputEvents_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(CustomInputEvents, [
                            {
                                key: 'bind',
                                value: function bind(e) {
                                    var t, r;
                                    ((null !== (r = this._inputElementSettings) &&
                                        void 0 !== r &&
                                        r.parentElementSelector) ||
                                        (null !== (t = this._inputElementSettings) &&
                                            void 0 !== t &&
                                            t.childElementWithCustomAttribute)) &&
                                        ((r = e.getDocument()),
                                        this._messageBus.subscribe(me.CustomInputElement, this.handleInputEvents),
                                        (e = [
                                            null === (t = this._elementsFromDoc) || void 0 === t
                                                ? void 0
                                                : t.mainElement,
                                        ].concat(_toConsumableArray(this._elementsFromDoc.customButtons))),
                                        '' ===
                                            (null === (t = this._elementsFromDoc) || void 0 === t
                                                ? void 0
                                                : t.mainElement) && this.getSelectElementsFromDoc(r),
                                        this.addListenersBySelector(e));
                                },
                            },
                            {
                                key: 'unbind',
                                value: function unbind(e) {
                                    var t, r;
                                    ((null !== (r = this._inputElementSettings) &&
                                        void 0 !== r &&
                                        r.parentElementSelector) ||
                                        (null !== (t = this._inputElementSettings) &&
                                            void 0 !== t &&
                                            t.childElementWithCustomAttribute)) &&
                                        ((r = e.getDocument()),
                                        this._messageBus.subscribe(me.CustomInputElement, this.handleInputEvents),
                                        (e = [
                                            null === (t = this._elementsFromDoc) || void 0 === t
                                                ? void 0
                                                : t.mainElement,
                                        ].concat(_toConsumableArray(this._elementsFromDoc.customButtons))),
                                        '' ===
                                            (null === (t = this._elementsFromDoc) || void 0 === t
                                                ? void 0
                                                : t.mainElement) && this.getSelectElementsFromDoc(r),
                                        this.removeListenersBySelector(e));
                                },
                            },
                            {
                                key: 'getSelectElementsFromDoc',
                                value: function getSelectElementsFromDoc(t) {
                                    var e,
                                        r = this,
                                        n = t.querySelector('body'),
                                        o = t.querySelector(
                                            null === (o = this._inputElementSettings) || void 0 === o
                                                ? void 0
                                                : o.childElementWithCustomAttribute
                                        );
                                    return (
                                        n &&
                                            (o && (this._elementsFromDoc.mainElement = o),
                                            null !== (o = this._inputElementSettings) &&
                                                void 0 !== o &&
                                                o.customButtons &&
                                                null !== (e = this._inputElementSettings) &&
                                                void 0 !== e &&
                                                e.customButtons.forEach(function (e) {
                                                    e = t.querySelector(e);
                                                    e && r._elementsFromDoc.customButtons.push(e);
                                                })),
                                        this._elementsFromDoc
                                    );
                                },
                            },
                            {
                                key: 'addListenersBySelector',
                                value: function addListenersBySelector(e) {
                                    var t;
                                    null !== (t = this._elementsFromDoc) &&
                                        void 0 !== t &&
                                        t.mainElement &&
                                        1 <= e.length &&
                                        this._StandardCustomInputEmitter.start(e);
                                },
                            },
                            {
                                key: 'removeListenersBySelector',
                                value: function removeListenersBySelector(e) {
                                    var t;
                                    null !== (t = this._elementsFromDoc) &&
                                        void 0 !== t &&
                                        t.mainElement &&
                                        1 <= e.length &&
                                        this._StandardCustomInputEmitter.stop(e),
                                        (this._elementsFromDoc = { mainElement: '', customButtons: [] });
                                },
                            },
                            {
                                key: 'addOnLoadInputData',
                                value: function addOnLoadInputData(e, t) {
                                    var r,
                                        n,
                                        o = this;
                                    ((null !== (n = this._inputElementSettings) &&
                                        void 0 !== n &&
                                        n.parentElementSelector) ||
                                        (null !== (r = this._inputElementSettings) &&
                                            void 0 !== r &&
                                            r.childElementWithCustomAttribute)) &&
                                        ((n = e.getDocument()),
                                        (e = [
                                            null === (r = this._elementsFromDoc) || void 0 === r
                                                ? void 0
                                                : r.mainElement,
                                        ].concat(_toConsumableArray(this._elementsFromDoc.customButtons))),
                                        '' ===
                                            (null === (r = this._elementsFromDoc) || void 0 === r
                                                ? void 0
                                                : r.mainElement) && this.getSelectElementsFromDoc(n),
                                        null !== (n = this._elementsFromDoc) &&
                                            void 0 !== n &&
                                            n.mainElement &&
                                            1 <= e.length &&
                                            e.forEach(function (e) {
                                                o._elements.isListed(e)
                                                    ? t || o._elements.resendElementPerContext(e)
                                                    : o._elements.getElement(e, !1);
                                            }));
                                },
                            },
                        ]),
                        CustomInputEvents
                    );
                })();
                function ClickEvents_typeof(e) {
                    return (ClickEvents_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function ClickEvents_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function ClickEvents_setPrototypeOf(e, t) {
                    return (ClickEvents_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function ClickEvents_createSuper(r) {
                    var n = (function ClickEvents_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = ClickEvents_getPrototypeOf(r);
                        return (function ClickEvents_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === ClickEvents_typeof(t) || 'function' == typeof t)) return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return ClickEvents_assertThisInitialized(e);
                        })(
                            this,
                            n
                                ? ((e = ClickEvents_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function ClickEvents_assertThisInitialized(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e;
                }
                function ClickEvents_getPrototypeOf(e) {
                    return (ClickEvents_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var Ho = "input[type='button'], input[type='radio'], input[type='checkbox'], button",
                    Qo = (function () {
                        !(function ClickEvents_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && ClickEvents_setPrototypeOf(e, t);
                        })(ClickEvents, jo);
                        var s = ClickEvents_createSuper(ClickEvents);
                        function ClickEvents(e, t, r, n, o) {
                            var i;
                            return (
                                (function ClickEvents_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, ClickEvents),
                                (function ClickEvents_defineProperty(e, t, r) {
                                    t in e
                                        ? Object.defineProperty(e, t, {
                                              value: r,
                                              enumerable: !0,
                                              configurable: !0,
                                              writable: !0,
                                          })
                                        : (e[t] = r);
                                })(
                                    ClickEvents_assertThisInitialized((i = s.call(this))),
                                    'handleOnClickEvents',
                                    function (e) {
                                        var t = e.target,
                                            r = t.value || t.innerHTML || '',
                                            r = i._shouldMaskValueField
                                                ? i._CDUtils.maskText(r)
                                                : i._CDUtils.clearTextFromNumbers(r);
                                        i._sendToQueue(e, {
                                            length: r.length,
                                            elementValues: r,
                                            selected: void 0 === t.checked ? -1 : t.checked ? 1 : 0,
                                        });
                                    }
                                ),
                                (i._sendToQueue = e),
                                (i._CDUtils = t),
                                (i._messageBus = r),
                                (i._StandardOnClickEventsEmitter = o),
                                (i._configurationRepository = n),
                                (i._shouldMaskValueField = n.get(y.shouldMaskClickEventValueField)),
                                i
                            );
                        }
                        return (
                            (function ClickEvents_createClass(e, t, r) {
                                t && ClickEvents_defineProperties(e.prototype, t),
                                    r && ClickEvents_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(ClickEvents, [
                                {
                                    key: 'bind',
                                    value: function bind(e) {
                                        e = e.getDocument();
                                        this._messageBus.subscribe(me.StandardOnClickEvent, this.handleOnClickEvents),
                                            this.addListenersBySelector(e);
                                    },
                                },
                                {
                                    key: 'unbind',
                                    value: function unbind(e) {
                                        for (
                                            var t = [], r = e.getDocument().querySelectorAll(Ho), n = 0;
                                            n < r.length;
                                            n++
                                        )
                                            t.push(r[n]);
                                        this._StandardOnClickEventsEmitter.stop(t),
                                            this._messageBus.unsubscribe(
                                                me.StandardOnClickEvent,
                                                this.handleOnClickEvents
                                            );
                                    },
                                },
                                {
                                    key: 'addListenersBySelector',
                                    value: function addListenersBySelector(e) {
                                        for (var t = [], r = e.querySelectorAll(Ho), n = 0; n < r.length; n++)
                                            t.push(r[n]);
                                        this._StandardOnClickEventsEmitter.start(t);
                                    },
                                },
                                {
                                    key: 'updateSettings',
                                    value: function updateSettings() {
                                        this._shouldMaskValueField = this._configurationRepository.get(
                                            y.shouldMaskClickEventValueField
                                        );
                                    },
                                },
                            ]),
                            ClickEvents
                        );
                    })();
                function SelectElementEvents_typeof(e) {
                    return (SelectElementEvents_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function SelectElementEvents_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function SelectElementEvents_setPrototypeOf(e, t) {
                    return (SelectElementEvents_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function SelectElementEvents_createSuper(r) {
                    var n = (function SelectElementEvents_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = SelectElementEvents_getPrototypeOf(r);
                        return (function SelectElementEvents_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === SelectElementEvents_typeof(t) || 'function' == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return SelectElementEvents_assertThisInitialized(e);
                        })(
                            this,
                            n
                                ? ((e = SelectElementEvents_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function SelectElementEvents_assertThisInitialized(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e;
                }
                function SelectElementEvents_getPrototypeOf(e) {
                    return (SelectElementEvents_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                function SelectElementEvents_defineProperty(e, t, r) {
                    return (
                        t in e
                            ? Object.defineProperty(e, t, { value: r, enumerable: !0, configurable: !0, writable: !0 })
                            : (e[t] = r),
                        e
                    );
                }
                var zo = (function () {
                    !(function SelectElementEvents_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && SelectElementEvents_setPrototypeOf(e, t);
                    })(SelectElementEvents, jo);
                    var u = SelectElementEvents_createSuper(SelectElementEvents);
                    function SelectElementEvents(e, t, r, n, o, i, s) {
                        var a;
                        return (
                            (function SelectElementEvents_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, SelectElementEvents),
                            SelectElementEvents_defineProperty(
                                SelectElementEvents_assertThisInitialized((a = u.call(this))),
                                'handleOnChangeEvents',
                                function (e) {
                                    var t = a._CDUtils.getDropDownListValues(e.target).join(';'),
                                        t = a._CDUtils.clearTextFromNumbers(t),
                                        r = e.target.selectedIndex,
                                        n = e.target.value.length;
                                    a._sendToQueue(e, { length: n, selected: r, elementValues: t });
                                }
                            ),
                            SelectElementEvents_defineProperty(
                                SelectElementEvents_assertThisInitialized(a),
                                'handleBlurEvent',
                                function (e) {
                                    a._sendToQueue(e, { length: 0, selected: -1, elementValues: '' });
                                }
                            ),
                            SelectElementEvents_defineProperty(
                                SelectElementEvents_assertThisInitialized(a),
                                'handleFocusEvent',
                                function (e) {
                                    a._sendToQueue(e, { length: 0, selected: -1, elementValues: '' });
                                }
                            ),
                            (a._sendToQueue = e),
                            (a._CDUtils = t),
                            (a._messageBus = r),
                            (a._StandardOnChangeEventsEmitter = n),
                            (a._elementFocusEventEmitter = o),
                            (a._elementBlurEventEmitter = i),
                            (a._configurationRepository = s),
                            (a._collectSelectElementBlurAndFocusEvents = a._configurationRepository.get(
                                y.collectSelectElementBlurAndFocusEvents
                            )),
                            a
                        );
                    }
                    return (
                        (function SelectElementEvents_createClass(e, t, r) {
                            t && SelectElementEvents_defineProperties(e.prototype, t),
                                r && SelectElementEvents_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(SelectElementEvents, [
                            {
                                key: 'bind',
                                value: function bind(e) {
                                    e = e.getDocument();
                                    this._messageBus.subscribe(me.StandardOnSelectEvent, this.handleOnChangeEvents),
                                        this._messageBus.subscribe(me.ElementFocusEvent, this.handleFocusEvent),
                                        this._messageBus.subscribe(me.ElementBlurEvent, this.handleBlurEvent),
                                        this.addListenersBySelector(e);
                                },
                            },
                            {
                                key: 'unbind',
                                value: function unbind(e) {
                                    (e = e.getDocument()), (e = this._getSelectElementsFromDoc(e));
                                    this._StandardOnChangeEventsEmitter.stop(e),
                                        this._elementFocusEventEmitter.stop(e),
                                        this._elementBlurEventEmitter.stop(e),
                                        this._messageBus.unsubscribe(
                                            me.StandardOnSelectEvent,
                                            this.handleOnChangeEvents
                                        ),
                                        this._messageBus.unsubscribe(me.ElementFocusEvent, this.handleFocusEvent),
                                        this._messageBus.unsubscribe(me.ElementBlurEvent, this.handleBlurEvent);
                                },
                            },
                            {
                                key: 'addListenersBySelector',
                                value: function addListenersBySelector(e) {
                                    e = this._getSelectElementsFromDoc(e);
                                    this._StandardOnChangeEventsEmitter.start(e),
                                        this._collectSelectElementBlurAndFocusEvents &&
                                            (this._elementFocusEventEmitter.start(e),
                                            this._elementBlurEventEmitter.start(e));
                                },
                            },
                            {
                                key: 'updateSettings',
                                value: function updateSettings(e) {
                                    (this._collectSelectElementBlurAndFocusEvents = this._configurationRepository.get(
                                        y.collectSelectElementBlurAndFocusEvents
                                    )),
                                        this._collectSelectElementBlurAndFocusEvents ||
                                            ((e = e.getDocument()),
                                            (e = this._getSelectElementsFromDoc(e)),
                                            this._elementFocusEventEmitter.stop(e),
                                            this._elementBlurEventEmitter.stop(e));
                                },
                            },
                            {
                                key: '_getSelectElementsFromDoc',
                                value: function _getSelectElementsFromDoc(e) {
                                    for (var t = [], r = e.querySelectorAll('select'), n = 0; n < r.length; n++)
                                        t.push(r[n]);
                                    return t;
                                },
                            },
                        ]),
                        SelectElementEvents
                    );
                })();
                function FormEvents_typeof(e) {
                    return (FormEvents_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function FormEvents_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function FormEvents_setPrototypeOf(e, t) {
                    return (FormEvents_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function FormEvents_createSuper(r) {
                    var n = (function FormEvents_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = FormEvents_getPrototypeOf(r);
                        return (function FormEvents_possibleConstructorReturn(e, t) {
                            {
                                if (t && ('object' === FormEvents_typeof(t) || 'function' == typeof t)) return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return FormEvents_assertThisInitialized(e);
                        })(
                            this,
                            n
                                ? ((e = FormEvents_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function FormEvents_assertThisInitialized(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e;
                }
                function FormEvents_getPrototypeOf(e) {
                    return (FormEvents_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var qo = 'form',
                    Ko = (function () {
                        !(function FormEvents_inherits(e, t) {
                            if ('function' != typeof t && null !== t)
                                throw new TypeError('Super expression must either be null or a function');
                            (e.prototype = Object.create(t && t.prototype, {
                                constructor: { value: e, writable: !0, configurable: !0 },
                            })),
                                Object.defineProperty(e, 'prototype', { writable: !1 }),
                                t && FormEvents_setPrototypeOf(e, t);
                        })(FormEvents, jo);
                        var o = FormEvents_createSuper(FormEvents);
                        function FormEvents(e, t, r) {
                            var n;
                            return (
                                (function FormEvents_classCallCheck(e, t) {
                                    if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                                })(this, FormEvents),
                                (function FormEvents_defineProperty(e, t, r) {
                                    t in e
                                        ? Object.defineProperty(e, t, {
                                              value: r,
                                              enumerable: !0,
                                              configurable: !0,
                                              writable: !0,
                                          })
                                        : (e[t] = r);
                                })(
                                    FormEvents_assertThisInitialized((n = o.call(this))),
                                    'handleOnFormEvents',
                                    function (e) {
                                        b.trace('ElementEvents:_onFormSubmitEvent'),
                                            n._sendToQueue(e, { length: 0, selected: -1, elementValues: '' });
                                    }
                                ),
                                (n._sendToQueue = e),
                                (n._messageBus = t),
                                (n._StandardOnFormEventsEmitter = r),
                                n
                            );
                        }
                        return (
                            (function FormEvents_createClass(e, t, r) {
                                t && FormEvents_defineProperties(e.prototype, t),
                                    r && FormEvents_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(FormEvents, [
                                {
                                    key: 'bind',
                                    value: function bind(e) {
                                        e = e.getDocument();
                                        this._messageBus.subscribe(
                                            me.StandardOnFormSubmitEvent,
                                            this.handleOnFormEvents
                                        ),
                                            this.addListenersBySelector(e);
                                    },
                                },
                                {
                                    key: 'unbind',
                                    value: function unbind(e) {
                                        for (
                                            var t = [], r = e.getDocument().querySelectorAll(qo), n = 0;
                                            n < r.length;
                                            n++
                                        )
                                            t.push(r[n]);
                                        this._StandardOnFormEventsEmitter.stop(t),
                                            this._messageBus.unsubscribe(
                                                me.StandardOnFormSubmitEvent,
                                                this.handleOnFormEvents
                                            );
                                    },
                                },
                                {
                                    key: 'addListenersBySelector',
                                    value: function addListenersBySelector(e) {
                                        for (var t = [], r = e.querySelectorAll(qo), n = 0; n < r.length; n++)
                                            t.push(r[n]);
                                        this._StandardOnFormEventsEmitter.start(t);
                                    },
                                },
                            ]),
                            FormEvents
                        );
                    })();
                function PrivateBrowsingDetector_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Go = (function () {
                    function PrivateBrowsingDetector() {
                        !(function PrivateBrowsingDetector_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, PrivateBrowsingDetector);
                    }
                    return (
                        (function PrivateBrowsingDetector_createClass(e, t, r) {
                            t && PrivateBrowsingDetector_defineProperties(e.prototype, t),
                                r && PrivateBrowsingDetector_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(PrivateBrowsingDetector, [
                            {
                                key: 'detectPrivateMode',
                                value: function detectPrivateMode(e) {
                                    this._isWebkitBrowser()
                                        ? this._detectPrivateBrowsingOnWebkit(e)
                                        : this._isMozillaBrowser()
                                        ? this._detectPrivateBrowsingOnMozilla(e)
                                        : this._isIE10OrLater(window.navigator.userAgent)
                                        ? this._detectPrivateBrowsingOnIESinceVersion10(e)
                                        : window.localStorage && /Safari/.test(window.navigator.userAgent)
                                        ? this._detectPrivateBrowsingOnSafari(e)
                                        : e(null);
                                },
                            },
                            {
                                key: '_isWebkitBrowser',
                                value: function _isWebkitBrowser() {
                                    return !!window.webkitRequestFileSystem;
                                },
                            },
                            {
                                key: '_isMozillaBrowser',
                                value: function _isMozillaBrowser() {
                                    return 'MozAppearance' in document.documentElement.style;
                                },
                            },
                            {
                                key: '_isIE10OrLater',
                                value: function _isIE10OrLater(e) {
                                    var t = e.toLowerCase();
                                    if (0 === t.indexOf('msie') && 0 === t.indexOf('trident')) return !1;
                                    var r = /(?:msie|rv:)\s?([\d\.]+)/.exec(t);
                                    if (r && 10 <= parseInt(r[1], 10)) return !0;
                                    if (
                                        ((r =
                                            'documentElement' in document &&
                                            ('filters' in document.documentElement || 'documentMode' in document)),
                                        r && document.documentMode) &&
                                        10 <= parseFloat((t.match(/.+(?:ie|rv)[\/: ]([\d.]+)/) || [])[1])
                                    )
                                        return !0;
                                    r = /edge/.test(t);
                                    e = !!t.match(/trident\/7\./);
                                    if ((r || e) && 10 <= parseFloat((t.match(/.+(?:edge|rv)[\/: ]([\d.]+)/) || [])[1]))
                                        return !0;
                                    return !1;
                                },
                            },
                            {
                                key: '_detectPrivateBrowsingOnWebkit',
                                value: function _detectPrivateBrowsingOnWebkit(e) {
                                    void 0 !== navigator.storage && 'function' == typeof navigator.storage.estimate
                                        ? this._storageEstimateDetectionOnWebkit(e)
                                        : this._fileSystemDetectionOnWebkit(e);
                                },
                            },
                            {
                                key: '_fileSystemDetectionOnWebkit',
                                value: function _fileSystemDetectionOnWebkit(e) {
                                    window.webkitRequestFileSystem(
                                        window.TEMPORARY,
                                        1,
                                        function () {
                                            e(!1);
                                        },
                                        function () {
                                            e(!0);
                                        }
                                    );
                                },
                            },
                            {
                                key: '_storageEstimateDetectionOnWebkit',
                                value: function _storageEstimateDetectionOnWebkit(t) {
                                    navigator.storage
                                        .estimate()
                                        .then(function (e) {
                                            e = e.quota;
                                            t(e < 12e7);
                                        })
                                        .catch(function (e) {
                                            b.error('failed to detect private browsing', e);
                                        });
                                },
                            },
                            {
                                key: '_detectPrivateBrowsingOnMozilla',
                                value: function _detectPrivateBrowsingOnMozilla(t) {
                                    try {
                                        var e = (indexedDB || window.indexedDB).open('test');
                                        (e.onerror = function () {
                                            t(!0);
                                        }),
                                            (e.onsuccess = function () {
                                                t(!1);
                                            });
                                    } catch (e) {
                                        t(!0);
                                    }
                                },
                            },
                            {
                                key: '_detectPrivateBrowsingOnIESinceVersion10',
                                value: function _detectPrivateBrowsingOnIESinceVersion10(e) {
                                    var t = !1;
                                    try {
                                        window.indexedDB || (t = !0);
                                    } catch (e) {
                                        t = !0;
                                    }
                                    e(t);
                                },
                            },
                            {
                                key: '_detectPrivateBrowsingOnSafari',
                                value: function _detectPrivateBrowsingOnSafari(e) {
                                    var t;
                                    try {
                                        window.openDatabase(null, null, null, null);
                                    } catch (e) {
                                        t = !0;
                                    }
                                    try {
                                        window.localStorage.setItem('test', 1);
                                    } catch (e) {
                                        t = !0;
                                    }
                                    t || ((t = !1), window.localStorage.removeItem('test')), e(t);
                                },
                            },
                        ]),
                        PrivateBrowsingDetector
                    );
                })();
                function PointerHoverDetector_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Vo = 1,
                    Xo = 2,
                    Zo = 3,
                    Yo = 4,
                    Jo = 5,
                    $o = 1,
                    ei = 2,
                    ti = 3,
                    ri = 4,
                    ni = (function () {
                        function PointerHoverDetector() {
                            !(function PointerHoverDetector_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, PointerHoverDetector);
                        }
                        return (
                            (function PointerHoverDetector_createClass(e, t, r) {
                                t && PointerHoverDetector_defineProperties(e.prototype, t),
                                    r && PointerHoverDetector_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(PointerHoverDetector, null, [
                                {
                                    key: 'getPointerHover',
                                    value: function getPointerHover() {
                                        var e,
                                            t = { pointer: Jo, hover: Jo };
                                        return (
                                            window.matchMedia &&
                                                ((e = window.matchMedia)('( any-pointer: fine )').matches
                                                    ? (t.pointer = Vo)
                                                    : e('( any-pointer: coarse )').matches
                                                    ? (t.pointer = Xo)
                                                    : e('( any-pointer: none )').matches
                                                    ? (t.pointer = Zo)
                                                    : e('( any-pointer )').matches && (t.pointer = Yo),
                                                e('( any-hover: hover )').matches
                                                    ? (t.hover = $o)
                                                    : e('( any-hover: on-demand )').matches
                                                    ? (t.hover = ei)
                                                    : e('( any-hove: none )').matches
                                                    ? (t.hover = ti)
                                                    : window.matchMedia('( any-hover )').matches && (t.hover = ri)),
                                            t
                                        );
                                    },
                                },
                            ]),
                            PointerHoverDetector
                        );
                    })();
                function FontsDetector_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var oi = (function () {
                    function FontsDetector(e) {
                        !(function FontsDetector_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, FontsDetector),
                            (this._domUtils = e),
                            (this._baseFonts = ['monospace', 'sans-serif', 'serif']),
                            (this._testString = 'mmmmmmmmmmlli'),
                            (this._testSize = '72px'),
                            (this._chunkSize = 30),
                            (this._defaultWidth = {}),
                            (this._defaultHeight = {}),
                            (this._body = null),
                            (this._iframe = null),
                            (this._spanArray = null),
                            (this._allFontsDiffs = []);
                    }
                    return (
                        (function FontsDetector_createClass(e, t, r) {
                            t && FontsDetector_defineProperties(e.prototype, t),
                                r && FontsDetector_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(FontsDetector, [
                            {
                                key: 'clear',
                                value: function clear() {
                                    this._body.removeChild(this._iframe),
                                        (this._iframe = null),
                                        (this._spanArray = null),
                                        (this._allFontsDiffs = []);
                                },
                            },
                            {
                                key: 'init',
                                value: function init(e) {
                                    var t = this;
                                    if (((this._body = document.body), !this._body)) return '';
                                    (this._iframe = document.createElement('iframe')),
                                        this._iframe.setAttribute('sandbox', 'allow-same-origin'),
                                        (this._iframe.id = je.fontDetectionFrame),
                                        (this._iframe.style.visibility = 'hidden'),
                                        (this._iframe.style.zIndex = '-1'),
                                        (this._iframe.style.width = 0),
                                        (this._iframe.style.height = 0),
                                        this._body.appendChild(this._iframe),
                                        this._iframe.contentDocument.body ||
                                            ((this._iframe.style.width = null),
                                            (this._iframe.style.height = null),
                                            this._iframe.contentDocument.appendChild(document.createElement('body'))),
                                        this._domUtils.onWindowDocumentReady(this._iframe.contentWindow, function () {
                                            t._createCalculationElements(e);
                                        });
                                },
                            },
                            {
                                key: '_createCalculationElements',
                                value: function _createCalculationElements(e) {
                                    var t = document.createElement('span');
                                    (t.style.fontSize = this._testSize),
                                        (t.style.visibility = 'hidden'),
                                        (t.style.position = 'absolute'),
                                        (t.style.zIndex = '-1'),
                                        (t.style.lineHeight = 'normal'),
                                        (t.innerHTML = this._testString);
                                    for (var r = 0; r < this._baseFonts.length; r++)
                                        (t.style.fontFamily = this._baseFonts[r]),
                                            this._iframe.contentDocument.body.appendChild(t),
                                            (this._defaultWidth[this._baseFonts[r]] = t.offsetWidth),
                                            (this._defaultHeight[this._baseFonts[r]] = t.offsetHeight),
                                            this._iframe.contentDocument.body.removeChild(t);
                                    b.debug(
                                        'FontsDetector:init - base fonts width: \n                '
                                            .concat(this._baseFonts[0], ':')
                                            .concat(this._defaultWidth[this._baseFonts[0]], ';\n                ')
                                            .concat(this._baseFonts[1], ':')
                                            .concat(this._defaultWidth[this._baseFonts[1]], ';\n                ')
                                            .concat(this._baseFonts[2], ':')
                                            .concat(this._defaultWidth[this._baseFonts[2]])
                                    ),
                                        b.debug(
                                            'FontsDetector:init - base fonts height: \n                '
                                                .concat(this._baseFonts[0], ':')
                                                .concat(this._defaultHeight[this._baseFonts[0]], ';\n                ')
                                                .concat(this._baseFonts[1], ':')
                                                .concat(this._defaultHeight[this._baseFonts[1]], ';\n                ')
                                                .concat(this._baseFonts[2], ':')
                                                .concat(this._defaultHeight[this._baseFonts[2]])
                                        ),
                                        this._createSpanArray(),
                                        e();
                                },
                            },
                            {
                                key: '_createSpanArray',
                                value: function _createSpanArray() {
                                    var e = document.createElement('div');
                                    (e.id = 'currentDiv'),
                                        (e.style.position = 'absolute'),
                                        (e.style.visibility = 'hidden');
                                    for (var t = 0; t < this._chunkSize; t++) {
                                        var r = document.createElement('span');
                                        (r.style.lineHeight = 'normal'),
                                            (r.style.position = 'absolute'),
                                            (r.style.zIndex = '-1'),
                                            (r.style.fontSize = this._testSize),
                                            (r.innerHTML = this._testString),
                                            e.appendChild(r);
                                        r = document.createElement('br');
                                        e.appendChild(r);
                                    }
                                    this._iframe.contentDocument.body.appendChild(e), (this._spanArray = e);
                                },
                            },
                            {
                                key: 'detectByChunksWithIndex',
                                value: function detectByChunksWithIndex(e, t, r) {
                                    var n = [],
                                        o = 0,
                                        i = 0;
                                    if (!this._spanArray) return n;
                                    for (
                                        var s = this._spanArray.getElementsByTagName('span'),
                                            a = this._defaultWidth[this._baseFonts[t]],
                                            u = this._defaultHeight[this._baseFonts[t]],
                                            c = 0;
                                        c < e.length;
                                        c++
                                    ) {
                                        if (i >= this._chunkSize)
                                            for (var l = (i = 0); l < s.length; l++) {
                                                var f = Math.abs(s[l].offsetWidth - a),
                                                    p = Math.abs(s[l].offsetHeight - u);
                                                this._allFontsDiffs.push([s[l].id, f, p]),
                                                    (1 < f || 1 < p) && ((n[o] = s[l].id), o++);
                                            }
                                        (s[i].style.fontFamily = e[c] + ',' + this._baseFonts[t]),
                                            (s[i].id = e[c]),
                                            i++;
                                    }
                                    r(n);
                                },
                            },
                            {
                                key: 'getAllFontsDiffs',
                                value: function getAllFontsDiffs() {
                                    return this._allFontsDiffs;
                                },
                            },
                        ]),
                        FontsDetector
                    );
                })();
                function ScriptsRepository_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var ii = (function () {
                    function ScriptsRepository(e) {
                        !(function ScriptsRepository_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, ScriptsRepository),
                            (this._utils = e),
                            (this._scriptList = []);
                    }
                    return (
                        (function ScriptsRepository_createClass(e, t, r) {
                            t && ScriptsRepository_defineProperties(e.prototype, t),
                                r && ScriptsRepository_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(ScriptsRepository, [
                            {
                                key: 'count',
                                value: function count() {
                                    return this._scriptList.length;
                                },
                            },
                            {
                                key: 'exists',
                                value: function exists(e) {
                                    /\d\d\d/.test(e.src) && (e.src = this._utils.clearTextFromNumbers(e.src));
                                    for (var t = this._utils.getHash(e.text), r = 0; r < this._scriptList.length; r++)
                                        if (
                                            (e.src && e.src === this._scriptList[r].src) ||
                                            (t && t === this._scriptList[r].textHash)
                                        )
                                            return !0;
                                    return !1;
                                },
                            },
                            {
                                key: 'add',
                                value: function add(e) {
                                    (e.textHash = this._utils.getHash(e.text)),
                                        /\d\d\d/.test(e.src) && (e.src = this._utils.clearTextFromNumbers(e.src)),
                                        this._scriptList.push({ src: e.src, textHash: e.textHash });
                                },
                            },
                        ]),
                        ScriptsRepository
                    );
                })();
                function MutationEmitter_typeof(e) {
                    return (MutationEmitter_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function MutationEmitter_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var si = (function () {
                    function MutationEmitter(e) {
                        var r = this;
                        if (
                            (!(function MutationEmitter_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, MutationEmitter),
                            (function MutationEmitter_defineProperty(e, t, r) {
                                t in e
                                    ? Object.defineProperty(e, t, {
                                          value: r,
                                          enumerable: !0,
                                          configurable: !0,
                                          writable: !0,
                                      })
                                    : (e[t] = r);
                            })(this, 'handleMutationEvent', function (e, t) {
                                e &&
                                    t &&
                                    r._messageBus.publish(me.MutationSingleEvent, { mutation: e, browserContext: t });
                            }),
                            (this._messageBus = e),
                            'object' !== MutationEmitter_typeof(this._messageBus))
                        )
                            throw new Error('Bootstrap aborted! MessageBus missing for MutationEmitter');
                        this._documentObservers = new WeakMap();
                    }
                    return (
                        (function MutationEmitter_createClass(e, t, r) {
                            t && MutationEmitter_defineProperties(e.prototype, t),
                                r && MutationEmitter_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(MutationEmitter, [
                            {
                                key: 'startObserver',
                                value: function startObserver(n) {
                                    var e,
                                        o = this,
                                        t = n.getDocument();
                                    this._documentObservers.has(t) ||
                                        ((e = new window.MutationObserver(function (e) {
                                            try {
                                                for (var t = 0; t < e.length; t++) {
                                                    var r = e[t];
                                                    if (0 < r.addedNodes.length) {
                                                        o.handleMutationEvent(r, n);
                                                        break;
                                                    }
                                                }
                                            } catch (e) {
                                                b.error('An error has occurred: '.concat(e.message));
                                            }
                                        })).observe(t, { childList: !0, subtree: !0 }),
                                        this._documentObservers.set(t, { instance: e }));
                                },
                            },
                            {
                                key: 'stopObserver',
                                value: function stopObserver(e) {
                                    var t,
                                        e = e.getDocument();
                                    this._documentObservers.has(e) &&
                                        (t = this._documentObservers.get(e)) &&
                                        (t.instance && t.instance.disconnect(), this._documentObservers.delete(e));
                                },
                            },
                        ]),
                        MutationEmitter
                    );
                })();
                function StandardInputEventsEmitter_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function StandardInputEventsEmitter_defineProperty(e, t, r) {
                    return (
                        t in e
                            ? Object.defineProperty(e, t, { value: r, enumerable: !0, configurable: !0, writable: !0 })
                            : (e[t] = r),
                        e
                    );
                }
                var ai = (function () {
                    function StandardInputEventsEmitter(e, t, r) {
                        var n = this;
                        !(function StandardInputEventsEmitter_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, StandardInputEventsEmitter),
                            StandardInputEventsEmitter_defineProperty(this, 'handleInputEvents', function (e) {
                                n._messageBus.publish(me.StandardInputEvent, e);
                            }),
                            StandardInputEventsEmitter_defineProperty(this, 'handleFocusEvents', function (e) {
                                n._messageBus.publish(me.StandardInputFocusEvent, e);
                            }),
                            StandardInputEventsEmitter_defineProperty(this, 'handleBlurEvents', function (e) {
                                n._messageBus.publish(me.StandardInputBlurEvent, e);
                            }),
                            (this._messageBus = e),
                            (this._eventAggregator = t),
                            (this._elementBindingWMap = new WeakMap()),
                            (this._utils = r),
                            (this.defaultInputEventListener = [
                                { event: 'input', handler: this.handleInputEvents },
                                { event: 'focus', handler: this.handleFocusEvents },
                                { event: 'blur', handler: this.handleBlurEvents },
                            ]);
                    }
                    return (
                        (function StandardInputEventsEmitter_createClass(e, t, r) {
                            t && StandardInputEventsEmitter_defineProperties(e.prototype, t),
                                r && StandardInputEventsEmitter_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(StandardInputEventsEmitter, [
                            {
                                key: 'start',
                                value: function start(e, n, o) {
                                    var i = this;
                                    e.forEach(function (t) {
                                        var r;
                                        i._elementBindingWMap.has(t) ||
                                            ((r = []),
                                            void 0 !== o
                                                ? 'function' == typeof o.func &&
                                                  Array.isArray(o.allowedEvents) &&
                                                  0 < o.allowedEvents.length &&
                                                  (o.func(n, t)
                                                      ? i.defaultInputEventListener.forEach(function (e) {
                                                            o.allowedEvents.includes(e.event) && r.push(e);
                                                        })
                                                      : (r = Array.from(i.defaultInputEventListener)))
                                                : (r = Array.from(i.defaultInputEventListener)),
                                            r.forEach(function (e) {
                                                i._eventAggregator.addEventListener(t, e.event, e.handler);
                                            }),
                                            i._elementBindingWMap.set(t, {
                                                isBinded: !0,
                                                listeners: [
                                                    i.handleInputEvents,
                                                    i.handleFocusEvents,
                                                    i.handleBlurEvents,
                                                ],
                                                isUsingJQuery: !1,
                                            }));
                                    });
                                },
                            },
                            {
                                key: 'stop',
                                value: function stop(e) {
                                    var r = this;
                                    e.forEach(function (t) {
                                        var e = r._elementBindingWMap.get(t);
                                        e &&
                                            e.isBinded &&
                                            (r.defaultInputEventListener.forEach(function (e) {
                                                r._eventAggregator.removeEventListener(t, e.event, e.handler);
                                            }),
                                            r._elementBindingWMap.delete(t));
                                    });
                                },
                            },
                            {
                                key: 'addElementEvents',
                                value: function addElementEvents(t) {
                                    var r = this,
                                        e = 1 < arguments.length && void 0 !== arguments[1] && arguments[1];
                                    if (!this._elementBindingWMap.has(t)) {
                                        if (e) {
                                            if (!this._utils.JQueryUtils.isJQueryAvailable())
                                                return void b.error(
                                                    'Unable to add event listeners for element using jQuery because jQuery is not available'
                                                );
                                            this.defaultInputEventListener.forEach(function (e) {
                                                r._utils.JQueryUtils.addEventListener(t, e.event, e.handler);
                                            });
                                        } else
                                            this.defaultInputEventListener.forEach(function (e) {
                                                r._eventAggregator.addEventListener(t, e.event, e.handler);
                                            });
                                        this._elementBindingWMap.set(t, {
                                            isBinded: !0,
                                            listeners: [
                                                this.handleInputEvents,
                                                this.handleFocusEvents,
                                                this.handleBlurEvents,
                                            ],
                                            isUsingJQuery: e,
                                        });
                                    }
                                },
                            },
                            {
                                key: 'removeElementEvents',
                                value: function removeElementEvents(t) {
                                    var r = this,
                                        e = this._elementBindingWMap.get(t);
                                    if (e && e.isBinded) {
                                        if (e.isUsingJQuery) {
                                            if (!this._utils.JQueryUtils.isJQueryAvailable())
                                                return void b.error(
                                                    'Unable to remove event listeners for element using jQuery because jQuery is not available'
                                                );
                                            this.defaultInputEventListener.forEach(function (e) {
                                                r._utils.JQueryUtils.removeEventListener(t, e.event, e.handler);
                                            });
                                        } else
                                            this.defaultInputEventListener.forEach(function (e) {
                                                r._eventAggregator.removeEventListener(elements, e.event, e.handler);
                                            });
                                        this._elementBindingWMap.delete(t);
                                    }
                                },
                            },
                        ]),
                        StandardInputEventsEmitter
                    );
                })();
                function EventAggregator_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var ui = !1;
                !(function () {
                    try {
                        var e = Object.defineProperty({}, 'passive', {
                            get: function get() {
                                ui = !0;
                            },
                        });
                        window.addEventListener('test', null, e);
                    } catch (e) {}
                })();
                var ci = (function () {
                    function EventAggregator() {
                        !(function EventAggregator_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, EventAggregator);
                    }
                    return (
                        (function EventAggregator_createClass(e, t, r) {
                            t && EventAggregator_defineProperties(e.prototype, t),
                                r && EventAggregator_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(EventAggregator, null, [
                            {
                                key: 'addEventListener',
                                value: function addEventListener(e, t, r) {
                                    var n = 3 < arguments.length && void 0 !== arguments[3] && arguments[3],
                                        o = !(4 < arguments.length && void 0 !== arguments[4]) || arguments[4],
                                        i = 5 < arguments.length && void 0 !== arguments[5] && arguments[5];
                                    ui
                                        ? e.addEventListener(t, r, { capture: n, passive: o, once: i })
                                        : e.addEventListener
                                        ? e.addEventListener(t, r, n)
                                        : e.attachEvent('on' + t, r);
                                },
                            },
                            {
                                key: 'removeEventListener',
                                value: function removeEventListener(e, t, r) {
                                    var n = 3 < arguments.length && void 0 !== arguments[3] && arguments[3];
                                    e.removeEventListener ? e.removeEventListener(t, r, n) : e.detachEvent('on' + t, r);
                                },
                            },
                        ]),
                        EventAggregator
                    );
                })();
                function StandardOnClickEventsEmitter_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var li = (function () {
                    function StandardOnClickEventsEmitter(e, t, r) {
                        var n = this;
                        !(function StandardOnClickEventsEmitter_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, StandardOnClickEventsEmitter),
                            (function StandardOnClickEventsEmitter_defineProperty(e, t, r) {
                                t in e
                                    ? Object.defineProperty(e, t, {
                                          value: r,
                                          enumerable: !0,
                                          configurable: !0,
                                          writable: !0,
                                      })
                                    : (e[t] = r);
                            })(this, 'handleOnClickEvents', function (e) {
                                n._messageBus.publish(me.StandardOnClickEvent, e);
                            }),
                            (this._messageBus = e),
                            (this._eventAggregator = t),
                            (this._elementBindingWMap = new WeakMap()),
                            (this._utils = r),
                            (this.defaultOnClickEventListener = [
                                { event: 'click', handler: this.handleOnClickEvents },
                            ]);
                    }
                    return (
                        (function StandardOnClickEventsEmitter_createClass(e, t, r) {
                            t && StandardOnClickEventsEmitter_defineProperties(e.prototype, t),
                                r && StandardOnClickEventsEmitter_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(StandardOnClickEventsEmitter, [
                            {
                                key: 'start',
                                value: function start(e) {
                                    var r = this;
                                    e.forEach(function (t) {
                                        r._elementBindingWMap.has(t) ||
                                            (r.defaultOnClickEventListener.forEach(function (e) {
                                                r._eventAggregator.addEventListener(t, e.event, e.handler);
                                            }),
                                            r._elementBindingWMap.set(t, {
                                                isBinded: !0,
                                                listeners: [r.handleOnClickEvents],
                                                isUsingJQuery: !1,
                                            }));
                                    });
                                },
                            },
                            {
                                key: 'stop',
                                value: function stop(e) {
                                    var r = this;
                                    e.forEach(function (t) {
                                        var e = r._elementBindingWMap.get(t);
                                        e &&
                                            e.isBinded &&
                                            (r.defaultOnClickEventListener.forEach(function (e) {
                                                r._eventAggregator.removeEventListener(t, e.event, e.handler);
                                            }),
                                            r._elementBindingWMap.delete(t));
                                    });
                                },
                            },
                            {
                                key: 'addElementEvents',
                                value: function addElementEvents(t) {
                                    var r = this,
                                        e = 1 < arguments.length && void 0 !== arguments[1] && arguments[1];
                                    if (!this._elementBindingWMap.has(t)) {
                                        if (e) {
                                            if (!this._utils.JQueryUtils.isJQueryAvailable())
                                                return void b.error(
                                                    'Unable to add event listeners for element using jQuery because jQuery is not available'
                                                );
                                            this.defaultOnClickEventListener.forEach(function (e) {
                                                r._utils.JQueryUtils.addEventListener(t, e.event, e.handler);
                                            });
                                        } else
                                            this.defaultOnClickEventListener.forEach(function (e) {
                                                r._eventAggregator.addEventListener(t, e.event, e.handler);
                                            });
                                        this._elementBindingWMap.set(t, {
                                            isBinded: !0,
                                            listeners: [this.handleOnClickEvents],
                                            isUsingJQuery: e,
                                        });
                                    }
                                },
                            },
                            {
                                key: 'removeElementEvents',
                                value: function removeElementEvents(t) {
                                    var r = this,
                                        e = this._elementBindingWMap.get(t);
                                    if (e && e.isBinded) {
                                        if (e.isUsingJQuery) {
                                            if (!this._utils.JQueryUtils.isJQueryAvailable())
                                                return void b.error(
                                                    'Unable to remove event listeners for element using jQuery because jQuery is not available'
                                                );
                                            this.defaultOnClickEventListener.forEach(function (e) {
                                                r._utils.JQueryUtils.removeEventListener(t, e.event, e.handler);
                                            });
                                        } else
                                            this.defaultOnClickEventListener.forEach(function (e) {
                                                r._eventAggregator.removeEventListener(elements, e.event, e.handler);
                                            });
                                        this._elementBindingWMap.delete(t);
                                    }
                                },
                            },
                        ]),
                        StandardOnClickEventsEmitter
                    );
                })();
                function StandardOnChangeEventsEmitter_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var fi = (function () {
                    function StandardOnChangeEventsEmitter(e, t, r) {
                        var n = this;
                        !(function StandardOnChangeEventsEmitter_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, StandardOnChangeEventsEmitter),
                            (function StandardOnChangeEventsEmitter_defineProperty(e, t, r) {
                                t in e
                                    ? Object.defineProperty(e, t, {
                                          value: r,
                                          enumerable: !0,
                                          configurable: !0,
                                          writable: !0,
                                      })
                                    : (e[t] = r);
                            })(this, 'handleOnChangeEvents', function (e) {
                                n._messageBus.publish(me.StandardOnSelectEvent, e);
                            }),
                            (this._messageBus = e),
                            (this._eventAggregator = t),
                            (this._elementBindingWMap = new WeakMap()),
                            (this._utils = r),
                            (this.defaultOnChangeEventListener = [
                                { event: 'change', handler: this.handleOnChangeEvents },
                            ]);
                    }
                    return (
                        (function StandardOnChangeEventsEmitter_createClass(e, t, r) {
                            t && StandardOnChangeEventsEmitter_defineProperties(e.prototype, t),
                                r && StandardOnChangeEventsEmitter_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(StandardOnChangeEventsEmitter, [
                            {
                                key: 'start',
                                value: function start(e) {
                                    var r = this;
                                    e.forEach(function (t) {
                                        r._elementBindingWMap.has(t) ||
                                            (r.defaultOnChangeEventListener.forEach(function (e) {
                                                r._eventAggregator.addEventListener(t, e.event, e.handler);
                                            }),
                                            r._elementBindingWMap.set(t, {
                                                isBinded: !0,
                                                listeners: [r.handleOnChangeEvents],
                                                isUsingJQuery: !1,
                                            }));
                                    });
                                },
                            },
                            {
                                key: 'stop',
                                value: function stop(e) {
                                    var r = this;
                                    e.forEach(function (t) {
                                        var e = r._elementBindingWMap.get(t);
                                        e &&
                                            e.isBinded &&
                                            (r.defaultOnChangeEventListener.forEach(function (e) {
                                                r._eventAggregator.removeEventListener(t, e.event, e.handler);
                                            }),
                                            r._elementBindingWMap.delete(t));
                                    });
                                },
                            },
                            {
                                key: 'addElementEvents',
                                value: function addElementEvents(t) {
                                    var r = this,
                                        e = 1 < arguments.length && void 0 !== arguments[1] && arguments[1];
                                    if (!this._elementBindingWMap.has(t)) {
                                        if (e) {
                                            if (!this._utils.JQueryUtils.isJQueryAvailable())
                                                return void b.error(
                                                    'Unable to add event listeners for element using jQuery because jQuery is not available'
                                                );
                                            this.defaultOnChangeEventListener.forEach(function (e) {
                                                r._utils.JQueryUtils.addEventListener(t, e.event, e.handler);
                                            });
                                        } else
                                            this.defaultOnChangeEventListener.forEach(function (e) {
                                                r._eventAggregator.addEventListener(t, e.event, e.handler);
                                            });
                                        this._elementBindingWMap.set(t, {
                                            isBinded: !0,
                                            listeners: [this.handleOnChangeEvents],
                                            isUsingJQuery: e,
                                        });
                                    }
                                },
                            },
                            {
                                key: 'removeElementEvents',
                                value: function removeElementEvents(t) {
                                    var r = this,
                                        e = this._elementBindingWMap.get(t);
                                    if (e && e.isBinded) {
                                        if (e.isUsingJQuery) {
                                            if (!this._utils.JQueryUtils.isJQueryAvailable())
                                                return void b.error(
                                                    'Unable to remove event listeners for element using jQuery because jQuery is not available'
                                                );
                                            this.defaultOnChangeEventListener.forEach(function (e) {
                                                r._utils.JQueryUtils.removeEventListener(t, e.event, e.handler);
                                            });
                                        } else
                                            this.defaultOnChangeEventListener.forEach(function (e) {
                                                r._eventAggregator.removeEventListener(elements, e.event, e.handler);
                                            });
                                        this._elementBindingWMap.delete(t);
                                    }
                                },
                            },
                        ]),
                        StandardOnChangeEventsEmitter
                    );
                })();
                function StandardOnFormEventsEmitter_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var pi = (function () {
                    function StandardOnFormEventsEmitter(e, t, r) {
                        var n = this;
                        !(function StandardOnFormEventsEmitter_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, StandardOnFormEventsEmitter),
                            (function StandardOnFormEventsEmitter_defineProperty(e, t, r) {
                                t in e
                                    ? Object.defineProperty(e, t, {
                                          value: r,
                                          enumerable: !0,
                                          configurable: !0,
                                          writable: !0,
                                      })
                                    : (e[t] = r);
                            })(this, 'handleOnFormSubmitEvents', function (e) {
                                n._messageBus.publish(me.StandardOnFormSubmitEvent, e);
                            }),
                            (this._messageBus = e),
                            (this._eventAggregator = t),
                            (this._elementBindingWMap = new WeakMap()),
                            (this._utils = r),
                            (this.defaultOnFormEventListener = [
                                { event: 'submit', handler: this.handleOnFormSubmitEvents },
                            ]);
                    }
                    return (
                        (function StandardOnFormEventsEmitter_createClass(e, t, r) {
                            t && StandardOnFormEventsEmitter_defineProperties(e.prototype, t),
                                r && StandardOnFormEventsEmitter_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(StandardOnFormEventsEmitter, [
                            {
                                key: 'start',
                                value: function start(e) {
                                    var r = this;
                                    e.forEach(function (t) {
                                        r._elementBindingWMap.has(t) ||
                                            (r.defaultOnFormEventListener.forEach(function (e) {
                                                r._eventAggregator.addEventListener(t, e.event, e.handler);
                                            }),
                                            r._elementBindingWMap.set(t, {
                                                isBinded: !0,
                                                listeners: [r.handleOnFormSubmitEvents],
                                                isUsingJQuery: !1,
                                            }));
                                    });
                                },
                            },
                            {
                                key: 'stop',
                                value: function stop(e) {
                                    var r = this;
                                    e.forEach(function (t) {
                                        var e = r._elementBindingWMap.get(t);
                                        e &&
                                            e.isBinded &&
                                            (r.defaultOnFormEventListener.forEach(function (e) {
                                                r._eventAggregator.removeEventListener(t, e.event, e.handler);
                                            }),
                                            r._elementBindingWMap.delete(t));
                                    });
                                },
                            },
                            {
                                key: 'addElementEvents',
                                value: function addElementEvents(t) {
                                    var r = this,
                                        e = 1 < arguments.length && void 0 !== arguments[1] && arguments[1];
                                    if (!this._elementBindingWMap.has(t)) {
                                        if (e) {
                                            if (!this._utils.JQueryUtils.isJQueryAvailable())
                                                return void b.error(
                                                    'Unable to add event listeners for element using jQuery because jQuery is not available'
                                                );
                                            this.defaultOnFormEventListener.forEach(function (e) {
                                                r._utils.JQueryUtils.addEventListener(t, e.event, e.handler);
                                            });
                                        } else
                                            this.defaultOnFormEventListener.forEach(function (e) {
                                                r._eventAggregator.addEventListener(t, e.event, e.handler);
                                            });
                                        this._elementBindingWMap.set(t, {
                                            isBinded: !0,
                                            listeners: [this.handleOnFormSubmitEvents],
                                            isUsingJQuery: e,
                                        });
                                    }
                                },
                            },
                            {
                                key: 'removeElementEvents',
                                value: function removeElementEvents(t) {
                                    var r = this,
                                        e = this._elementBindingWMap.get(t);
                                    if (e && e.isBinded) {
                                        if (e.isUsingJQuery) {
                                            if (!this._utils.JQueryUtils.isJQueryAvailable())
                                                return void b.error(
                                                    'Unable to remove event listeners for element using jQuery because jQuery is not available'
                                                );
                                            this.defaultOnFormEventListener.forEach(function (e) {
                                                r._utils.JQueryUtils.removeEventListener(t, e.event, e.handler);
                                            });
                                        } else
                                            this.defaultOnFormEventListener.forEach(function (e) {
                                                r._eventAggregator.removeEventListener(elements, e.event, e.handler);
                                            });
                                        this._elementBindingWMap.delete(t);
                                    }
                                },
                            },
                        ]),
                        StandardOnFormEventsEmitter
                    );
                })();
                function SyntheticInputEventsHandlerBase_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var di = (function () {
                    function SyntheticInputEventsHandlerBase(e, t, r) {
                        !(function SyntheticInputEventsHandlerBase_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, SyntheticInputEventsHandlerBase),
                            (function SyntheticInputEventsHandlerBase_defineProperty(e, t, r) {
                                t in e
                                    ? Object.defineProperty(e, t, {
                                          value: r,
                                          enumerable: !0,
                                          configurable: !0,
                                          writable: !0,
                                      })
                                    : (e[t] = r);
                            })(this, 'isJQueryDataSupported', function (e) {
                                return !(!e.jQuery || !e.jQuery._data);
                            }),
                            (this._messageBus = e),
                            (this._eventAggregator = t),
                            (this._elementBindingWMap = new WeakMap()),
                            (this._utils = r),
                            (this.defaultEventListener = [{ event: 'keypress', handler: this.handleKeypressEvents }]);
                    }
                    return (
                        (function SyntheticInputEventsHandlerBase_createClass(e, t, r) {
                            t && SyntheticInputEventsHandlerBase_defineProperties(e.prototype, t),
                                r && SyntheticInputEventsHandlerBase_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(SyntheticInputEventsHandlerBase, [
                            {
                                key: 'registerElement',
                                value: function registerElement(e, r) {
                                    var n,
                                        o = this;
                                    this._elementBindingWMap.has(e) ||
                                        ((n = {}),
                                        this.defaultEventListener.forEach(function (t) {
                                            function _Za(e) {
                                                t.handler(e, r);
                                            }
                                            (n[t.event] = _Za), o._eventAggregator.addEventListener(e, t.event, _Za);
                                        }),
                                        this._elementBindingWMap.set(e, { isBinded: !0, listeners: n }));
                                },
                            },
                            {
                                key: 'unregisterElements',
                                value: function unregisterElements(e) {
                                    var n = this;
                                    e.forEach(function (t) {
                                        var r = n._elementBindingWMap.get(t);
                                        r &&
                                            r.isBinded &&
                                            (n.defaultEventListener.forEach(function (e) {
                                                n._eventAggregator.removeEventListener(
                                                    t,
                                                    e.event,
                                                    r.listeners[e.event]
                                                );
                                            }),
                                            n._elementBindingWMap.delete(t));
                                    });
                                },
                            },
                            {
                                key: 'publishEvent',
                                value: function publishEvent(e, t, r, n) {
                                    e = {
                                        bubbles: !0,
                                        cancelBubble: !1,
                                        cancelable: !1,
                                        composed: !0,
                                        currentTarget: null,
                                        data: n,
                                        dataTransfer: null,
                                        defaultPrevented: !1,
                                        detail: 0,
                                        eventPhase: 0,
                                        inputType: r,
                                        isComposing: !1,
                                        isTrusted: !0,
                                        jqueryMask: t,
                                        returnValue: !0,
                                        sourceCapabilities: null,
                                        srcElement: Object.assign(e.target || e.srcElement, {}),
                                        target: Object.assign(e.target, {}),
                                        timeStamp: e.timeStamp,
                                        type: 'input',
                                        view: null,
                                        which: 0,
                                    };
                                    this._messageBus.publish(me.SyntheticInputMaskEvent, e);
                                },
                            },
                        ]),
                        SyntheticInputEventsHandlerBase
                    );
                })();
                function SyntheticMaskInputEventsHandler_typeof(e) {
                    return (SyntheticMaskInputEventsHandler_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function SyntheticMaskInputEventsHandler_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function SyntheticMaskInputEventsHandler_setPrototypeOf(e, t) {
                    return (SyntheticMaskInputEventsHandler_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function SyntheticMaskInputEventsHandler_createSuper(r) {
                    var n = (function SyntheticMaskInputEventsHandler_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = SyntheticMaskInputEventsHandler_getPrototypeOf(r);
                        return (function SyntheticMaskInputEventsHandler_possibleConstructorReturn(e, t) {
                            {
                                if (
                                    t &&
                                    ('object' === SyntheticMaskInputEventsHandler_typeof(t) || 'function' == typeof t)
                                )
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return SyntheticMaskInputEventsHandler_assertThisInitialized(e);
                        })(
                            this,
                            n
                                ? ((e = SyntheticMaskInputEventsHandler_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function SyntheticMaskInputEventsHandler_assertThisInitialized(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e;
                }
                function SyntheticMaskInputEventsHandler_getPrototypeOf(e) {
                    return (SyntheticMaskInputEventsHandler_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var hi = (function () {
                    !(function SyntheticMaskInputEventsHandler_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && SyntheticMaskInputEventsHandler_setPrototypeOf(e, t);
                    })(SyntheticMaskInputEventsHandler, di);
                    var o = SyntheticMaskInputEventsHandler_createSuper(SyntheticMaskInputEventsHandler);
                    function SyntheticMaskInputEventsHandler() {
                        var r;
                        !(function SyntheticMaskInputEventsHandler_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, SyntheticMaskInputEventsHandler);
                        for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++) t[n] = arguments[n];
                        return (
                            (function SyntheticMaskInputEventsHandler_defineProperty(e, t, r) {
                                t in e
                                    ? Object.defineProperty(e, t, {
                                          value: r,
                                          enumerable: !0,
                                          configurable: !0,
                                          writable: !0,
                                      })
                                    : (e[t] = r);
                            })(
                                SyntheticMaskInputEventsHandler_assertThisInitialized(
                                    (r = o.call.apply(o, [this].concat(t)))
                                ),
                                'handleKeypressEvents',
                                function (e, t) {
                                    r.isJQueryDataSupported(t) &&
                                        r.hasMaskEventSupported(e.target, t) &&
                                        ((t = e.key), r.publishEvent(e, 'maskedInput', 'insertText', t));
                                }
                            ),
                            r
                        );
                    }
                    return (
                        (function SyntheticMaskInputEventsHandler_createClass(e, t, r) {
                            t && SyntheticMaskInputEventsHandler_defineProperties(e.prototype, t),
                                r && SyntheticMaskInputEventsHandler_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(SyntheticMaskInputEventsHandler, [
                            {
                                key: 'start',
                                value: function start(e, t) {
                                    var r = this;
                                    (t = t || window.self),
                                        e.forEach(function (e) {
                                            r.isJQueryDataSupported(t) &&
                                                r.hasMaskEventSupported(e, t) &&
                                                r.registerElement(e, t);
                                        });
                                },
                            },
                            {
                                key: 'stop',
                                value: function stop(e) {
                                    this.unregisterElements(e);
                                },
                            },
                            {
                                key: 'hasMaskEventSupported',
                                value: function hasMaskEventSupported(e, t) {
                                    e = t.jQuery._data(e, 'events');
                                    if (void 0 === e) return !1;
                                    for (var r = Object.keys(e), n = 0; n < r.length; n++)
                                        if ('unmask' === r[n]) return !0;
                                    return !1;
                                },
                            },
                        ]),
                        SyntheticMaskInputEventsHandler
                    );
                })();
                function SyntheticAutotabInputEventsHandler_typeof(e) {
                    return (SyntheticAutotabInputEventsHandler_typeof =
                        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
                            ? function (e) {
                                  return typeof e;
                              }
                            : function (e) {
                                  return e &&
                                      'function' == typeof Symbol &&
                                      e.constructor === Symbol &&
                                      e !== Symbol.prototype
                                      ? 'symbol'
                                      : typeof e;
                              })(e);
                }
                function SyntheticAutotabInputEventsHandler_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function SyntheticAutotabInputEventsHandler_setPrototypeOf(e, t) {
                    return (SyntheticAutotabInputEventsHandler_setPrototypeOf = Object.setPrototypeOf
                        ? Object.setPrototypeOf.bind()
                        : function _setPrototypeOf(e, t) {
                              return (e.__proto__ = t), e;
                          })(e, t);
                }
                function SyntheticAutotabInputEventsHandler_createSuper(r) {
                    var n = (function SyntheticAutotabInputEventsHandler_isNativeReflectConstruct() {
                        if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
                        if (Reflect.construct.sham) return !1;
                        if ('function' == typeof Proxy) return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
                        } catch (e) {
                            return !1;
                        }
                    })();
                    return function _createSuperInternal() {
                        var e,
                            t = SyntheticAutotabInputEventsHandler_getPrototypeOf(r);
                        return (function SyntheticAutotabInputEventsHandler_possibleConstructorReturn(e, t) {
                            {
                                if (
                                    t &&
                                    ('object' === SyntheticAutotabInputEventsHandler_typeof(t) ||
                                        'function' == typeof t)
                                )
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError('Derived constructors may only return object or undefined');
                            }
                            return SyntheticAutotabInputEventsHandler_assertThisInitialized(e);
                        })(
                            this,
                            n
                                ? ((e = SyntheticAutotabInputEventsHandler_getPrototypeOf(this).constructor),
                                  Reflect.construct(t, arguments, e))
                                : t.apply(this, arguments)
                        );
                    };
                }
                function SyntheticAutotabInputEventsHandler_assertThisInitialized(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e;
                }
                function SyntheticAutotabInputEventsHandler_getPrototypeOf(e) {
                    return (SyntheticAutotabInputEventsHandler_getPrototypeOf = Object.setPrototypeOf
                        ? Object.getPrototypeOf.bind()
                        : function _getPrototypeOf(e) {
                              return e.__proto__ || Object.getPrototypeOf(e);
                          })(e);
                }
                var vi = (function () {
                    !(function SyntheticAutotabInputEventsHandler_inherits(e, t) {
                        if ('function' != typeof t && null !== t)
                            throw new TypeError('Super expression must either be null or a function');
                        (e.prototype = Object.create(t && t.prototype, {
                            constructor: { value: e, writable: !0, configurable: !0 },
                        })),
                            Object.defineProperty(e, 'prototype', { writable: !1 }),
                            t && SyntheticAutotabInputEventsHandler_setPrototypeOf(e, t);
                    })(SyntheticAutotabInputEventsHandler, di);
                    var o = SyntheticAutotabInputEventsHandler_createSuper(SyntheticAutotabInputEventsHandler);
                    function SyntheticAutotabInputEventsHandler() {
                        var r;
                        !(function SyntheticAutotabInputEventsHandler_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, SyntheticAutotabInputEventsHandler);
                        for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++) t[n] = arguments[n];
                        return (
                            (function SyntheticAutotabInputEventsHandler_defineProperty(e, t, r) {
                                t in e
                                    ? Object.defineProperty(e, t, {
                                          value: r,
                                          enumerable: !0,
                                          configurable: !0,
                                          writable: !0,
                                      })
                                    : (e[t] = r);
                            })(
                                SyntheticAutotabInputEventsHandler_assertThisInitialized(
                                    (r = o.call.apply(o, [this].concat(t)))
                                ),
                                'handleKeypressEvents',
                                function (e, t) {
                                    r.isJQueryDataSupported(t) &&
                                        r.hasjQueryAutoTab(e.target, t) &&
                                        ((t = e.key), 8 !== e.keyCode && r.publishEvent(e, 'autotab', 'insertText', t));
                                }
                            ),
                            r
                        );
                    }
                    return (
                        (function SyntheticAutotabInputEventsHandler_createClass(e, t, r) {
                            t && SyntheticAutotabInputEventsHandler_defineProperties(e.prototype, t),
                                r && SyntheticAutotabInputEventsHandler_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(SyntheticAutotabInputEventsHandler, [
                            {
                                key: 'start',
                                value: function start(e, t) {
                                    var r = this;
                                    e.forEach(function (e) {
                                        r.isJQueryDataSupported(t) &&
                                            r.hasjQueryAutoTab(e, t) &&
                                            r.registerElement(e, t);
                                    });
                                },
                            },
                            {
                                key: 'stop',
                                value: function stop(e) {
                                    this.unregisterElements(e);
                                },
                            },
                            {
                                key: 'hasjQueryAutoTab',
                                value: function hasjQueryAutoTab(e, t) {
                                    if (void 0 === t.jQuery._data(e, 'events')) return !1;
                                    for (var r = Object.keys(t.jQuery._data(e, 'events')), n = 0; n < r.length; n++)
                                        if (-1 !== r[n].indexOf('autotab')) return !0;
                                    return !1;
                                },
                            },
                        ]),
                        SyntheticAutotabInputEventsHandler
                    );
                })();
                function FocusEventEmitter_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var yi = (function () {
                    function FocusEventEmitter(e, t) {
                        var r = this;
                        !(function FocusEventEmitter_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, FocusEventEmitter),
                            (function FocusEventEmitter_defineProperty(e, t, r) {
                                t in e
                                    ? Object.defineProperty(e, t, {
                                          value: r,
                                          enumerable: !0,
                                          configurable: !0,
                                          writable: !0,
                                      })
                                    : (e[t] = r);
                            })(this, 'handleFocusEvent', function (e) {
                                r._messageBus.publish(me.FocusEvent, e);
                            }),
                            (this._messageBus = e),
                            (this._eventAggregator = t);
                    }
                    return (
                        (function FocusEventEmitter_createClass(e, t, r) {
                            t && FocusEventEmitter_defineProperties(e.prototype, t),
                                r && FocusEventEmitter_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(FocusEventEmitter, [
                            {
                                key: 'start',
                                value: function start(e) {
                                    if (!e) throw new Error('invalid window parameter');
                                    this._eventAggregator.addEventListener(e, 'focus', this.handleFocusEvent, !1, !0);
                                },
                            },
                            {
                                key: 'stop',
                                value: function stop(e) {
                                    if (!e) throw new Error('invalid window parameter');
                                    this._eventAggregator.removeEventListener(e, 'focus', this.handleFocusEvent);
                                },
                            },
                        ]),
                        FocusEventEmitter
                    );
                })();
                function BlurEventEmitter_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var _i = (function () {
                    function BlurEventEmitter(e, t) {
                        var r = this;
                        !(function BlurEventEmitter_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, BlurEventEmitter),
                            (function BlurEventEmitter_defineProperty(e, t, r) {
                                t in e
                                    ? Object.defineProperty(e, t, {
                                          value: r,
                                          enumerable: !0,
                                          configurable: !0,
                                          writable: !0,
                                      })
                                    : (e[t] = r);
                            })(this, 'handleBlurEvent', function (e) {
                                r._messageBus.publish(me.BlurEvent, e);
                            }),
                            (this._messageBus = e),
                            (this._eventAggregator = t);
                    }
                    return (
                        (function BlurEventEmitter_createClass(e, t, r) {
                            t && BlurEventEmitter_defineProperties(e.prototype, t),
                                r && BlurEventEmitter_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(BlurEventEmitter, [
                            {
                                key: 'start',
                                value: function start(e) {
                                    if (!e) throw new Error('invalid window parameter');
                                    this._eventAggregator.addEventListener(e, 'blur', this.handleBlurEvent, !1, !0);
                                },
                            },
                            {
                                key: 'stop',
                                value: function stop(e) {
                                    if (!e) throw new Error('invalid window parameter');
                                    this._eventAggregator.removeEventListener(e, 'blur', this.handleBlurEvent);
                                },
                            },
                        ]),
                        BlurEventEmitter
                    );
                })();
                function ResizeEventEmitter_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var gi = (function () {
                    function ResizeEventEmitter(e, t) {
                        var r = this;
                        !(function ResizeEventEmitter_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, ResizeEventEmitter),
                            (function ResizeEventEmitter_defineProperty(e, t, r) {
                                t in e
                                    ? Object.defineProperty(e, t, {
                                          value: r,
                                          enumerable: !0,
                                          configurable: !0,
                                          writable: !0,
                                      })
                                    : (e[t] = r);
                            })(this, 'handleResizeEvent', function (e) {
                                r._messageBus.publish(me.ResizeEvent, e);
                            }),
                            (this._messageBus = e),
                            (this._eventAggregator = t);
                    }
                    return (
                        (function ResizeEventEmitter_createClass(e, t, r) {
                            t && ResizeEventEmitter_defineProperties(e.prototype, t),
                                r && ResizeEventEmitter_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(ResizeEventEmitter, [
                            {
                                key: 'start',
                                value: function start(e) {
                                    if (!e) throw new Error('invalid window parameter');
                                    this._eventAggregator.addEventListener(e, 'resize', this.handleResizeEvent, !1, !0);
                                },
                            },
                            {
                                key: 'stop',
                                value: function stop(e) {
                                    if (!e) throw new Error('invalid window parameter');
                                    this._eventAggregator.removeEventListener(e, 'resize', this.handleResizeEvent);
                                },
                            },
                        ]),
                        ResizeEventEmitter
                    );
                })();
                function DOMContentLoadedEventEmitter_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var mi = (function () {
                    function DOMContentLoadedEventEmitter(e, t) {
                        var r = this;
                        !(function DOMContentLoadedEventEmitter_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, DOMContentLoadedEventEmitter),
                            (function DOMContentLoadedEventEmitter_defineProperty(e, t, r) {
                                t in e
                                    ? Object.defineProperty(e, t, {
                                          value: r,
                                          enumerable: !0,
                                          configurable: !0,
                                          writable: !0,
                                      })
                                    : (e[t] = r);
                            })(this, 'handleDOMContentLoadedEvent', function (e) {
                                r._messageBus.publish(me.DOMContentLoadedEvent, e);
                            }),
                            (this._messageBus = e),
                            (this._eventAggregator = t);
                    }
                    return (
                        (function DOMContentLoadedEventEmitter_createClass(e, t, r) {
                            t && DOMContentLoadedEventEmitter_defineProperties(e.prototype, t),
                                r && DOMContentLoadedEventEmitter_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(DOMContentLoadedEventEmitter, [
                            {
                                key: 'start',
                                value: function start(e) {
                                    if (!e) throw new Error('invalid document parameter');
                                    this._eventAggregator.addEventListener(
                                        e,
                                        'DOMContentLoaded',
                                        this.handleDOMContentLoadedEvent
                                    );
                                },
                            },
                            {
                                key: 'stop',
                                value: function stop(e) {
                                    if (!e) throw new Error('invalid document parameter');
                                    this._eventAggregator.removeEventListener(
                                        e,
                                        'DOMContentLoaded',
                                        this.handleDOMContentLoadedEvent
                                    );
                                },
                            },
                        ]),
                        DOMContentLoadedEventEmitter
                    );
                })();
                function VisibilityChangeEventEmitter_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var bi = (function () {
                    function VisibilityChangeEventEmitter(e, t) {
                        var r = this;
                        !(function VisibilityChangeEventEmitter_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, VisibilityChangeEventEmitter),
                            (function VisibilityChangeEventEmitter_defineProperty(e, t, r) {
                                t in e
                                    ? Object.defineProperty(e, t, {
                                          value: r,
                                          enumerable: !0,
                                          configurable: !0,
                                          writable: !0,
                                      })
                                    : (e[t] = r);
                            })(this, 'handleVisibilityChangeEvent', function (e) {
                                r._messageBus.publish(me.VisibilityChangeEvent, e);
                            }),
                            (this._messageBus = e),
                            (this._eventAggregator = t);
                    }
                    return (
                        (function VisibilityChangeEventEmitter_createClass(e, t, r) {
                            t && VisibilityChangeEventEmitter_defineProperties(e.prototype, t),
                                r && VisibilityChangeEventEmitter_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(VisibilityChangeEventEmitter, [
                            {
                                key: 'start',
                                value: function start(e) {
                                    if (!e) throw new Error('invalid document parameter');
                                    this._eventAggregator.addEventListener(
                                        e,
                                        'visibilitychange',
                                        this.handleVisibilityChangeEvent,
                                        !1,
                                        !0
                                    );
                                },
                            },
                            {
                                key: 'stop',
                                value: function stop(e) {
                                    if (!e) throw new Error('invalid document parameter');
                                    this._eventAggregator.removeEventListener(
                                        e,
                                        'visibilitychange',
                                        this.handleVisibilityChangeEvent
                                    );
                                },
                            },
                        ]),
                        VisibilityChangeEventEmitter
                    );
                })();
                function ScrollEventEmitter_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Ci = (function () {
                    function ScrollEventEmitter(e, t) {
                        var r = this;
                        !(function ScrollEventEmitter_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, ScrollEventEmitter),
                            (function ScrollEventEmitter_defineProperty(e, t, r) {
                                t in e
                                    ? Object.defineProperty(e, t, {
                                          value: r,
                                          enumerable: !0,
                                          configurable: !0,
                                          writable: !0,
                                      })
                                    : (e[t] = r);
                            })(this, 'handleScrollEvent', function (e) {
                                r._messageBus.publish(me.ScrollEvent, e);
                            }),
                            (this._messageBus = e),
                            (this._eventAggregator = t);
                    }
                    return (
                        (function ScrollEventEmitter_createClass(e, t, r) {
                            t && ScrollEventEmitter_defineProperties(e.prototype, t),
                                r && ScrollEventEmitter_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(ScrollEventEmitter, [
                            {
                                key: 'start',
                                value: function start(e) {
                                    if (!e) throw new Error('invalid window parameter');
                                    this._eventAggregator.addEventListener(e, 'scroll', this.handleScrollEvent, !1, !0);
                                },
                            },
                            {
                                key: 'stop',
                                value: function stop(e) {
                                    if (!e) throw new Error('invalid window parameter');
                                    this._eventAggregator.removeEventListener(e, 'scroll', this.handleScrollEvent);
                                },
                            },
                        ]),
                        ScrollEventEmitter
                    );
                })();
                function WindowMessageEventEmitter_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var wi = (function () {
                    function WindowMessageEventEmitter(e, t) {
                        var r = this;
                        !(function WindowMessageEventEmitter_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, WindowMessageEventEmitter),
                            (function WindowMessageEventEmitter_defineProperty(e, t, r) {
                                t in e
                                    ? Object.defineProperty(e, t, {
                                          value: r,
                                          enumerable: !0,
                                          configurable: !0,
                                          writable: !0,
                                      })
                                    : (e[t] = r);
                            })(this, 'handleWindowMessage', function (e) {
                                e && r._messageBus.publish(me.WindowMessageEvent, { message: e });
                            }),
                            (this._messageBus = e),
                            (this._EventAggregator = t),
                            (this._windowListeners = new WeakMap()),
                            (this.defaultPostMessageEventListener = [
                                { event: 'message', handler: this.handleWindowMessage },
                            ]);
                    }
                    return (
                        (function WindowMessageEventEmitter_createClass(e, t, r) {
                            t && WindowMessageEventEmitter_defineProperties(e.prototype, t),
                                r && WindowMessageEventEmitter_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(WindowMessageEventEmitter, [
                            {
                                key: 'startObserver',
                                value: function startObserver(t) {
                                    var r = this;
                                    this._windowListeners.has(t.Context) ||
                                        (this.defaultPostMessageEventListener.forEach(function (e) {
                                            r._EventAggregator.addEventListener(t.Context, e.event, e.handler);
                                        }),
                                        this._windowListeners.set(t.Context, {
                                            isBinded: !0,
                                            listeners: [this.handleWindowMessage],
                                        }));
                                },
                            },
                            {
                                key: 'stopObserver',
                                value: function stopObserver(t) {
                                    var r = this,
                                        e = this._windowListeners.get(t.Context);
                                    e &&
                                        e.isBinded &&
                                        (this.defaultPostMessageEventListener.forEach(function (e) {
                                            r._EventAggregator.removeEventListener(t.Context, e.event, e.handler);
                                        }),
                                        this._windowListeners.delete(t.Context));
                                },
                            },
                        ]),
                        WindowMessageEventEmitter
                    );
                })();
                function DeviceOrientationEventEmitter_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Ei = (function () {
                    function DeviceOrientationEventEmitter(e, t) {
                        var r = this;
                        !(function DeviceOrientationEventEmitter_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, DeviceOrientationEventEmitter),
                            (function DeviceOrientationEventEmitter_defineProperty(e, t, r) {
                                t in e
                                    ? Object.defineProperty(e, t, {
                                          value: r,
                                          enumerable: !0,
                                          configurable: !0,
                                          writable: !0,
                                      })
                                    : (e[t] = r);
                            })(this, 'handleDeviceOrientationEvent', function (e) {
                                r._messageBus.publish(me.DeviceOrientationEvent, e);
                            }),
                            (this._messageBus = e),
                            (this._eventAggregator = t);
                    }
                    return (
                        (function DeviceOrientationEventEmitter_createClass(e, t, r) {
                            t && DeviceOrientationEventEmitter_defineProperties(e.prototype, t),
                                r && DeviceOrientationEventEmitter_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(DeviceOrientationEventEmitter, [
                            {
                                key: 'start',
                                value: function start() {
                                    this._eventAggregator.addEventListener(
                                        window,
                                        'deviceorientation',
                                        this.handleDeviceOrientationEvent
                                    );
                                },
                            },
                            {
                                key: 'stop',
                                value: function stop() {
                                    this._eventAggregator.removeEventListener(
                                        window,
                                        'deviceorientation',
                                        this.handleDeviceOrientationEvent
                                    );
                                },
                            },
                        ]),
                        DeviceOrientationEventEmitter
                    );
                })();
                function BeforeInstallPromptEventEmitter_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Si = (function () {
                    function BeforeInstallPromptEventEmitter(e, t) {
                        var r = this;
                        !(function BeforeInstallPromptEventEmitter_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, BeforeInstallPromptEventEmitter),
                            (function BeforeInstallPromptEventEmitter_defineProperty(e, t, r) {
                                t in e
                                    ? Object.defineProperty(e, t, {
                                          value: r,
                                          enumerable: !0,
                                          configurable: !0,
                                          writable: !0,
                                      })
                                    : (e[t] = r);
                            })(this, 'handleBeforeInstallPrompt', function (e) {
                                r._messageBus.publish(me.BeforeInstallPromptEvent, e);
                            }),
                            (this._messageBus = e),
                            (this._eventAggregator = t);
                    }
                    return (
                        (function BeforeInstallPromptEventEmitter_createClass(e, t, r) {
                            t && BeforeInstallPromptEventEmitter_defineProperties(e.prototype, t),
                                r && BeforeInstallPromptEventEmitter_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(BeforeInstallPromptEventEmitter, [
                            {
                                key: 'start',
                                value: function start(e) {
                                    if (!e) throw new Error('invalid window parameter');
                                    this._eventAggregator.addEventListener(
                                        e,
                                        'beforeinstallprompt',
                                        this.handleBeforeInstallPrompt
                                    );
                                },
                            },
                            {
                                key: 'stop',
                                value: function stop(e) {
                                    if (!e) throw new Error('invalid window parameter');
                                    this._eventAggregator.removeEventListener(
                                        e,
                                        'beforeinstallprompt',
                                        this.handleBeforeInstallPrompt
                                    );
                                },
                            },
                        ]),
                        BeforeInstallPromptEventEmitter
                    );
                })();
                function CutEventEmitter_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Pi = (function () {
                    function CutEventEmitter(e, t) {
                        var r = this;
                        !(function CutEventEmitter_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, CutEventEmitter),
                            (function CutEventEmitter_defineProperty(e, t, r) {
                                t in e
                                    ? Object.defineProperty(e, t, {
                                          value: r,
                                          enumerable: !0,
                                          configurable: !0,
                                          writable: !0,
                                      })
                                    : (e[t] = r);
                            })(this, 'handleCutEvent', function (e) {
                                r._messageBus.publish(me.CutEvent, e);
                            }),
                            (this._messageBus = e),
                            (this._eventAggregator = t);
                    }
                    return (
                        (function CutEventEmitter_createClass(e, t, r) {
                            t && CutEventEmitter_defineProperties(e.prototype, t),
                                r && CutEventEmitter_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(CutEventEmitter, [
                            {
                                key: 'start',
                                value: function start(e) {
                                    if (!e) throw new Error('invalid document parameter');
                                    this._eventAggregator.addEventListener(e, 'cut', this.handleCutEvent);
                                },
                            },
                            {
                                key: 'stop',
                                value: function stop(e) {
                                    if (!e) throw new Error('invalid document parameter');
                                    this._eventAggregator.removeEventListener(e, 'cut', this.handleCutEvent);
                                },
                            },
                        ]),
                        CutEventEmitter
                    );
                })();
                function CopyEventEmitter_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var ki = (function () {
                    function CopyEventEmitter(e, t) {
                        var r = this;
                        !(function CopyEventEmitter_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, CopyEventEmitter),
                            (function CopyEventEmitter_defineProperty(e, t, r) {
                                t in e
                                    ? Object.defineProperty(e, t, {
                                          value: r,
                                          enumerable: !0,
                                          configurable: !0,
                                          writable: !0,
                                      })
                                    : (e[t] = r);
                            })(this, 'handleCopyEvent', function (e) {
                                r._messageBus.publish(me.CopyEvent, e);
                            }),
                            (this._messageBus = e),
                            (this._eventAggregator = t);
                    }
                    return (
                        (function CopyEventEmitter_createClass(e, t, r) {
                            t && CopyEventEmitter_defineProperties(e.prototype, t),
                                r && CopyEventEmitter_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(CopyEventEmitter, [
                            {
                                key: 'start',
                                value: function start(e) {
                                    if (!e) throw new Error('invalid document parameter');
                                    this._eventAggregator.addEventListener(e, 'copy', this.handleCopyEvent);
                                },
                            },
                            {
                                key: 'stop',
                                value: function stop(e) {
                                    if (!e) throw new Error('invalid document parameter');
                                    this._eventAggregator.removeEventListener(e, 'copy', this.handleCopyEvent);
                                },
                            },
                        ]),
                        CopyEventEmitter
                    );
                })();
                function PasteEventEmitter_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Oi = (function () {
                    function PasteEventEmitter(e, t) {
                        var r = this;
                        !(function PasteEventEmitter_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, PasteEventEmitter),
                            (function PasteEventEmitter_defineProperty(e, t, r) {
                                t in e
                                    ? Object.defineProperty(e, t, {
                                          value: r,
                                          enumerable: !0,
                                          configurable: !0,
                                          writable: !0,
                                      })
                                    : (e[t] = r);
                            })(this, 'handlePasteEvent', function (e) {
                                r._messageBus.publish(me.PasteEvent, e);
                            }),
                            (this._messageBus = e),
                            (this._eventAggregator = t);
                    }
                    return (
                        (function PasteEventEmitter_createClass(e, t, r) {
                            t && PasteEventEmitter_defineProperties(e.prototype, t),
                                r && PasteEventEmitter_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(PasteEventEmitter, [
                            {
                                key: 'start',
                                value: function start(e) {
                                    if (!e) throw new Error('invalid document parameter');
                                    this._eventAggregator.addEventListener(e, 'paste', this.handlePasteEvent);
                                },
                            },
                            {
                                key: 'stop',
                                value: function stop(e) {
                                    if (!e) throw new Error('invalid document parameter');
                                    this._eventAggregator.removeEventListener(e, 'paste', this.handlePasteEvent);
                                },
                            },
                        ]),
                        PasteEventEmitter
                    );
                })();
                function ElementFocusEventEmitter_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Bi = (function () {
                    function ElementFocusEventEmitter(e, t) {
                        var r = this;
                        !(function ElementFocusEventEmitter_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, ElementFocusEventEmitter),
                            (function ElementFocusEventEmitter_defineProperty(e, t, r) {
                                t in e
                                    ? Object.defineProperty(e, t, {
                                          value: r,
                                          enumerable: !0,
                                          configurable: !0,
                                          writable: !0,
                                      })
                                    : (e[t] = r);
                            })(this, 'handleElementFocusEvents', function (e) {
                                r._messageBus.publish(me.ElementFocusEvent, e);
                            }),
                            (this._messageBus = e),
                            (this._eventAggregator = t);
                    }
                    return (
                        (function ElementFocusEventEmitter_createClass(e, t, r) {
                            t && ElementFocusEventEmitter_defineProperties(e.prototype, t),
                                r && ElementFocusEventEmitter_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(ElementFocusEventEmitter, [
                            {
                                key: 'start',
                                value: function start(e) {
                                    var t = this;
                                    e.forEach(function (e) {
                                        t._eventAggregator.addEventListener(e, 'focus', t.handleElementFocusEvents);
                                    });
                                },
                            },
                            {
                                key: 'stop',
                                value: function stop(e) {
                                    var t = this;
                                    e.forEach(function (e) {
                                        t._eventAggregator.removeEventListener(e, 'focus', t.handleElementFocusEvents);
                                    });
                                },
                            },
                        ]),
                        ElementFocusEventEmitter
                    );
                })();
                function ElementBlurEventEmitter_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Mi = (function () {
                    function ElementBlurEventEmitter(e, t) {
                        var r = this;
                        !(function ElementBlurEventEmitter_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, ElementBlurEventEmitter),
                            (function ElementBlurEventEmitter_defineProperty(e, t, r) {
                                t in e
                                    ? Object.defineProperty(e, t, {
                                          value: r,
                                          enumerable: !0,
                                          configurable: !0,
                                          writable: !0,
                                      })
                                    : (e[t] = r);
                            })(this, 'handleElementBlurEvents', function (e) {
                                r._messageBus.publish(me.ElementBlurEvent, e);
                            }),
                            (this._messageBus = e),
                            (this._eventAggregator = t);
                    }
                    return (
                        (function ElementBlurEventEmitter_createClass(e, t, r) {
                            t && ElementBlurEventEmitter_defineProperties(e.prototype, t),
                                r && ElementBlurEventEmitter_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(ElementBlurEventEmitter, [
                            {
                                key: 'start',
                                value: function start(e) {
                                    var t = this;
                                    e.forEach(function (e) {
                                        t._eventAggregator.addEventListener(e, 'blur', t.handleElementBlurEvents);
                                    });
                                },
                            },
                            {
                                key: 'stop',
                                value: function stop(e) {
                                    var t = this;
                                    e.forEach(function (e) {
                                        t._eventAggregator.removeEventListener(e, 'blur', t.handleElementBlurEvents);
                                    });
                                },
                            },
                        ]),
                        ElementBlurEventEmitter
                    );
                })();
                function StandardCustomInputEmitter_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                function StandardCustomInputEmitter_defineProperty(e, t, r) {
                    return (
                        t in e
                            ? Object.defineProperty(e, t, { value: r, enumerable: !0, configurable: !0, writable: !0 })
                            : (e[t] = r),
                        e
                    );
                }
                var Ri = (function () {
                    function StandardCustomInputEmitter(e, t, r) {
                        var n = this;
                        !(function StandardCustomInputEmitter_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, StandardCustomInputEmitter),
                            StandardCustomInputEmitter_defineProperty(this, 'mousemove', function (e) {
                                n._messageBus.publish(me.CustomInputElement, e);
                            }),
                            StandardCustomInputEmitter_defineProperty(this, 'keydown', function (e) {
                                n._messageBus.publish(me.CustomInputElement, e);
                            }),
                            StandardCustomInputEmitter_defineProperty(this, 'mouseleave', function (e) {
                                n._eventAggregator.removeEventListener(e.target, 'mousemove', n.mousemove),
                                    n._messageBus.publish(me.CustomInputElement, e);
                            }),
                            StandardCustomInputEmitter_defineProperty(this, 'mouseup', function (e) {
                                n._eventAggregator.removeEventListener(e.target, 'mousemove', n.mousemove),
                                    n._eventAggregator.removeEventListener(e.target, 'mouseleave', n.mouseleave);
                            }),
                            StandardCustomInputEmitter_defineProperty(this, 'mousedown', function (e) {
                                n._eventAggregator.addEventListener(e.target, 'mousemove', n.mousemove),
                                    n._eventAggregator.addEventListener(e.target, 'mouseleave', n.mouseleave),
                                    n._eventAggregator.addEventListener(e.target, 'mouseup', n.mouseup),
                                    n._eventAggregator.addEventListener(e.target, 'keydown', n.keydown);
                            }),
                            StandardCustomInputEmitter_defineProperty(this, 'handleFocus', function (e) {
                                n._messageBus.publish(me.CustomInputElement, e);
                            }),
                            StandardCustomInputEmitter_defineProperty(this, 'handleMouseEnter', function (e) {
                                n._eventAggregator.addEventListener(e.target, 'mousedown', n.mousedown);
                            }),
                            StandardCustomInputEmitter_defineProperty(this, 'handleOnClickEvents', function () {
                                n._messageBus.publish(me.CustomInputElement, n._mainElm);
                            }),
                            (this._messageBus = e),
                            (this._eventAggregator = t),
                            (this._utils = r),
                            (this._elementsBindingWMap = new WeakMap()),
                            (this.customInputEventListener = [
                                { event: 'mouseenter', handler: this.handleMouseEnter },
                                { event: 'focus', handler: this.handleFocus },
                            ]),
                            (this.defaultOnClickEventListener = [
                                { event: 'click', handler: this.handleOnClickEvents },
                            ]),
                            (this._mainElm = ''),
                            (this._mainTagName = ['SPAN', 'DIV']),
                            (this._btnTagName = 'BUTTON'),
                            (this._btnInnerText = ['+', '-']);
                    }
                    return (
                        (function StandardCustomInputEmitter_createClass(e, t, r) {
                            t && StandardCustomInputEmitter_defineProperties(e.prototype, t),
                                r && StandardCustomInputEmitter_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(StandardCustomInputEmitter, [
                            {
                                key: 'start',
                                value: function start(e) {
                                    var r = this;
                                    e &&
                                        e.forEach(function (t) {
                                            r._elementsBindingWMap.has(t) ||
                                                (null != t &&
                                                    t.tagName &&
                                                    r._mainTagName.includes(t.tagName) &&
                                                    ((r._mainElm = t),
                                                    r.customInputEventListener.forEach(function (e) {
                                                        r._eventAggregator.addEventListener(t, e.event, e.handler);
                                                    }),
                                                    r._elementsBindingWMap.set(t, {
                                                        isBinded: !0,
                                                        listeners: [r.handleMouseEnter, r.handleFocus],
                                                        isUsingJQuery: !1,
                                                    })),
                                                ((null != t && t.tagName && t.tagName === r._btnTagName) ||
                                                    (null != t &&
                                                        t.innerText &&
                                                        r._btnInnerText.includes(t.innerText))) &&
                                                    (r.defaultOnClickEventListener.forEach(function (e) {
                                                        r._eventAggregator.addEventListener(t, e.event, e.handler);
                                                    }),
                                                    r._elementsBindingWMap.set(t, {
                                                        isBinded: !0,
                                                        listeners: [r.handleOnClickEvents],
                                                        isUsingJQuery: !1,
                                                    })));
                                        });
                                },
                            },
                            {
                                key: 'stop',
                                value: function stop(e) {
                                    var r = this;
                                    e.forEach(function (t) {
                                        var e = r._elementsBindingWMap.get(t);
                                        null != e &&
                                            e.isBinded &&
                                            (null != t &&
                                                t.tagName &&
                                                r._mainTagName.includes(t.tagName) &&
                                                r.customInputEventListener.forEach(function (e) {
                                                    r._eventAggregator.removeEventListener(t, e.event, e.handler);
                                                }),
                                            ((null != t && t.tagName && t.tagName === r._btnTagName) ||
                                                (null != t && t.innerText && r._btnInnerText.includes(t.innerText))) &&
                                                r.defaultOnClickEventListener.forEach(function (e) {
                                                    r._eventAggregator.removeEventListener(t, e.event, e.handler);
                                                }),
                                            r._elementsBindingWMap.delete(t));
                                    });
                                },
                            },
                        ]),
                        StandardCustomInputEmitter
                    );
                })();
                function FeaturesList_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Di = [
                        {
                            name: 'MouseEvents',
                            className: _n,
                            init: function init() {
                                return function () {
                                    this._features.list.MouseEvents.instance = new _n(
                                        this._utils,
                                        jt,
                                        this._elements,
                                        this._dataQ,
                                        this._configurationRepository
                                    );
                                };
                            },
                        },
                        {
                            name: 'KeyEvents',
                            className: Ie,
                            init: function init() {
                                return function () {
                                    this._features.list.KeyEvents.instance = new Ie(
                                        this._configurationRepository,
                                        this._utils,
                                        this._elements,
                                        this._dataQ,
                                        this._msgBus,
                                        this._sameCharService,
                                        this._maskingService
                                    );
                                };
                            },
                        },
                        {
                            name: 'TouchEvents',
                            className: Oe,
                            init: function init() {
                                return function () {
                                    this._features.list.TouchEvents.instance = new Oe(
                                        this._utils,
                                        this._elements,
                                        this._dataQ,
                                        this._msgBus
                                    );
                                };
                            },
                        },
                        {
                            name: 'ClipboardEvents',
                            className: br,
                            init: function init() {
                                return function () {
                                    var e = new br.Builder(this._utils, this._elements, this._dataQ),
                                        t = new Pi(this._msgBus, ci),
                                        r = new ki(this._msgBus, ci),
                                        n = new Oi(this._msgBus, ci);
                                    e
                                        .withMessageBus(this._msgBus)
                                        .withCutEventEmitter(t)
                                        .withCopyEventEmitter(r)
                                        .withPasteEventEmitter(n),
                                        (this._features.list.ClipboardEvents.instance = e.build());
                                };
                            },
                        },
                        {
                            name: 'ElementEvents',
                            className: yr,
                            init: function init() {
                                return function () {
                                    var e = new ai(this._msgBus, ci, this._utils),
                                        t = new li(this._msgBus, ci, this._utils),
                                        r = new fi(this._msgBus, ci, this._utils),
                                        n = new Bi(this._msgBus, ci, this._utils),
                                        o = new Mi(this._msgBus, ci, this._utils),
                                        i = new pi(this._msgBus, ci, this._utils),
                                        s = new Ri(this._msgBus, ci, this._utils),
                                        a = new ue(
                                            MutationObserver,
                                            this._utils,
                                            jt,
                                            'jQueryElementListenerConfig',
                                            null,
                                            !1
                                        ),
                                        u = (function JqueryElementsHandler(e, t, r, n) {
                                            return (
                                                (Oo = e),
                                                (Bo = t),
                                                (Mo = r),
                                                (Ro = n),
                                                {
                                                    bindInputEvents: _bindInputEvents,
                                                    bindOnClickEvents: _bindOnClickEvents,
                                                    bindOnChangeEvents: _bindOnChangeEvents,
                                                    bindOnFormsEvents: _bindOnFormsEvents,
                                                }
                                            );
                                        })(e, t, r, i),
                                        c = new yr.Builder(
                                            this._configurationRepository,
                                            this._utils,
                                            jt,
                                            this._elements,
                                            this._dataQ
                                        ),
                                        l = new si(this._msgBus),
                                        f = new hi(this._msgBus, ci, this._utils),
                                        p = new vi(this._msgBus, ci, this._utils);
                                    c.withjQueryElementListenerSiteMapper(a),
                                        c.withMessageBus(this._msgBus),
                                        c.withMutationEmitter(l),
                                        c.withjQueryElementsHandler(u),
                                        c.withInputEvents(No, Uo, this._maskingService),
                                        c.withStandardInputEventsEmitter(e),
                                        c.withSyntheticMaskInputEventsHandler(f),
                                        c.withSyntheticAutotabInputEventsHandler(p),
                                        c.withClickEvents(Qo, Ho),
                                        c.withStandardOnClickEventsEmitter(t),
                                        c.withSelectElementEvents(zo, 'select'),
                                        c.withElementFocusEventsEmitter(n),
                                        c.withElementBlurEventsEmitter(o),
                                        c.withStandardOnChangeEventsEmitter(r),
                                        c.withFormEvents(Ko, qo),
                                        c.withStandardOnFormEventsEmitter(i),
                                        c.withCustomInputEventEmitter(Wo, s),
                                        (this._features.list.ElementEvents.instance = c.build());
                                };
                            },
                        },
                        {
                            name: 'WindowEvents',
                            className: Mr,
                            init: function init() {
                                return function () {
                                    var e = new Mr.Builder(this._configurationRepository, B, this._dataQ),
                                        t = new yi(this._msgBus, ci),
                                        r = new _i(this._msgBus, ci),
                                        n = new gi(this._msgBus, ci),
                                        o = new mi(this._msgBus, ci),
                                        i = new bi(this._msgBus, ci),
                                        s = new Ci(this._msgBus, ci);
                                    e.withMessageBus(this._msgBus),
                                        e.withFocusEventEmitter(t),
                                        e.withBlurEventEmitter(r),
                                        e.withResizeEventEmitter(n),
                                        e.withDOMContentLoadedEventEmitter(o),
                                        e.withVisibilityChangeEventEmitter(i),
                                        e.withScrollEventEmitter(s),
                                        (this._features.list.WindowEvents.instance = e.build());
                                };
                            },
                        },
                        {
                            name: 'MetadataCollector',
                            className: ko,
                            init: function init() {
                                return function () {
                                    var e = new ue(MutationObserver, this._utils, jt, 'metadataConfig', null, !1);
                                    this._features.list.MetadataCollector.instance = new ko(
                                        this._configurationRepository,
                                        this._dataQ,
                                        e,
                                        this._utils
                                    );
                                };
                            },
                        },
                        {
                            name: 'TabsEvents',
                            className: En,
                            init: function init() {
                                return function () {
                                    this._features.list.TabsEvents.instance = new En(this._utils, this._dataQ);
                                };
                            },
                        },
                        {
                            name: 'DoNotTrack',
                            className: Yn,
                            init: function init() {
                                return function () {
                                    this._features.list.DoNotTrack.instance = new Yn(this._dataQ);
                                };
                            },
                        },
                        {
                            name: 'BrowserProps',
                            className: Vn,
                            init: function init() {
                                return function () {
                                    this._features.list.BrowserProps.instance = new Vn(
                                        this._dataQ,
                                        ni,
                                        this._utils,
                                        this._configurationRepository
                                    );
                                };
                            },
                        },
                        {
                            name: 'IsPrivateBrowsing',
                            className: fo,
                            init: function init() {
                                return function () {
                                    var e = new Go();
                                    this._features.list.IsPrivateBrowsing.instance = new fo(this._dataQ, e);
                                };
                            },
                        },
                        {
                            name: 'FontsDetectionFeature',
                            className: go,
                            init: function init() {
                                return function () {
                                    this._features.list.FontsDetectionFeature.instance = new go(B, jt, this._dataQ, oi);
                                };
                            },
                        },
                        {
                            name: 'GraphicDetectFeature',
                            className: eo,
                            init: function init() {
                                return function () {
                                    this._features.list.GraphicDetectFeature.instance = new eo(this._dataQ);
                                };
                            },
                        },
                        {
                            name: 'BrowserDetect',
                            className: Rn,
                            init: function init() {
                                return function () {
                                    this._features.list.BrowserDetect.instance = new Rn(this._dataQ);
                                };
                            },
                        },
                        {
                            name: 'FilesFeature',
                            className: So,
                            init: function init() {
                                return function () {
                                    this._features.list.FilesFeature.instance = new So(
                                        this._configurationRepository,
                                        this._utils,
                                        this._sessionService,
                                        this._muidService,
                                        this._cidCache
                                    );
                                };
                            },
                        },
                        {
                            name: 'UserPermissions',
                            className: uo,
                            init: function init() {
                                return function () {
                                    this._features.list.UserPermissions.instance = new uo(this._dataQ);
                                };
                            },
                        },
                        {
                            name: 'MediaDevicesFeature',
                            className: no,
                            init: function init() {
                                return function () {
                                    this._features.list.MediaDevicesFeature.instance = new no(this._dataQ);
                                };
                            },
                        },
                        {
                            name: 'ContextPropsFeature',
                            className: bo,
                            init: function init() {
                                return function () {
                                    this._features.list.ContextPropsFeature.instance = new bo(
                                        this._dataQ,
                                        jt,
                                        this._perfMonitor,
                                        this._configurationRepository
                                    );
                                };
                            },
                        },
                        {
                            name: 'ScriptsFeature',
                            className: wo,
                            init: function init() {
                                return function () {
                                    var e = new ii(this._utils);
                                    this._features.list.ScriptsFeature.instance = new wo(this._dataQ, e);
                                };
                            },
                        },
                        {
                            name: 'AccelerometerEvents',
                            className: Dr,
                            init: function init() {
                                return function () {
                                    this._features.list.AccelerometerEvents.instance = new Dr(
                                        this._configurationRepository,
                                        this._utils,
                                        this._sensorDataQ
                                    );
                                };
                            },
                        },
                        {
                            name: 'PinchZoomEvents',
                            className: Lr,
                            init: function init() {
                                return function () {
                                    this._features.list.PinchZoomEvents.instance = new Lr(
                                        this._utils,
                                        this._elements,
                                        this._dataQ,
                                        this._msgBus
                                    );
                                };
                            },
                        },
                        {
                            name: 'ScriptEvents',
                            className: Wr,
                            init: function init() {
                                return function () {
                                    this._features.list.ScriptEvents.instance = new Wr(this._utils, this._dataQ);
                                };
                            },
                        },
                        {
                            name: 'NetInfoEvents',
                            className: zr,
                            init: function init() {
                                return function () {
                                    this._features.list.NetInfoEvents.instance = new zr(this._utils, this._dataQ);
                                };
                            },
                        },
                        {
                            name: 'DeviceOrientationCollector',
                            className: Vr,
                            init: function init() {
                                return function () {
                                    this._features.list.DeviceOrientationCollector.instance = new Vr(
                                        this._utils,
                                        this._dataQ
                                    );
                                };
                            },
                        },
                        {
                            name: 'TapEvents',
                            className: en,
                            init: function init() {
                                return function () {
                                    this._features.list.TapEvents.instance = new en(
                                        this._configurationRepository,
                                        this._utils,
                                        this._elements,
                                        this._dataQ
                                    );
                                };
                            },
                        },
                        {
                            name: 'LocationEvents',
                            className: kn,
                            init: function init() {
                                return function () {
                                    this._features.list.LocationEvents.instance = new kn(
                                        this._dataQ,
                                        this._utils,
                                        this._configurationRepository
                                    );
                                };
                            },
                        },
                        {
                            name: 'StorageEvents',
                            className: on,
                            init: function init() {
                                return function () {
                                    this._features.list.StorageEvents.instance = new on(
                                        this._utils,
                                        this._elements,
                                        this._dataQ,
                                        this._msgBus
                                    );
                                };
                            },
                        },
                        {
                            name: 'PrintEvents',
                            className: ln,
                            init: function init() {
                                return function () {
                                    this._features.list.PrintEvents.instance = new ln(this._utils, this._dataQ);
                                };
                            },
                        },
                        {
                            name: 'LightSensorEvents',
                            className: hn,
                            init: function init() {
                                return function () {
                                    this._features.list.LightSensorEvents.instance = new hn(
                                        this._dataQ,
                                        this._utils,
                                        this._configurationRepository
                                    );
                                };
                            },
                        },
                        {
                            name: 'CrossDomain',
                            className: Lo,
                            init: function init() {
                                return function () {
                                    var e = new Lo.Builder(
                                            this._configurationRepository,
                                            this._dataQ,
                                            this._utils,
                                            jt,
                                            Fo
                                        ),
                                        t = new wi(this._msgBus, ci);
                                    e.withMessageBus(this._msgBus),
                                        e.withWindowMessageEventEmitter(t),
                                        (this._features.list.CrossDomain.instance = e.build());
                                };
                            },
                        },
                        {
                            name: 'OrientationEvents',
                            className: wr,
                            init: function init() {
                                return function () {
                                    var e = new Ei(this._msgBus, ci);
                                    this._features.list.OrientationEvents.instance = new wr(
                                        this._configurationRepository,
                                        this._utils,
                                        this._sensorDataQ,
                                        this._msgBus,
                                        e
                                    );
                                };
                            },
                        },
                        {
                            name: 'BeforeInstallPromptEvents',
                            className: Pr,
                            init: function init() {
                                return function () {
                                    var e = new Si(this._msgBus, ci);
                                    this._features.list.BeforeInstallPromptEvents.instance = new Pr(
                                        this._dataQ,
                                        this._utils,
                                        this._msgBus,
                                        e
                                    );
                                };
                            },
                        },
                    ],
                    Fi = (function () {
                        function FeaturesList() {
                            !(function FeaturesList_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, FeaturesList);
                        }
                        return (
                            (function FeaturesList_createClass(e, t, r) {
                                t && FeaturesList_defineProperties(e.prototype, t),
                                    r && FeaturesList_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(FeaturesList, null, [
                                {
                                    key: 'register',
                                    value: function register() {
                                        var t = this;
                                        (FeaturesList.list = {}),
                                            Di.forEach(function (e) {
                                                t._addFeature(e);
                                            });
                                    },
                                },
                                {
                                    key: 'registerLeanFeatures',
                                    value: function registerLeanFeatures() {
                                        var t = this;
                                        (FeaturesList.list = {}),
                                            Di.forEach(function (e) {
                                                e.className.getDefaultSettings().runInLean && t._addFeature(e);
                                            });
                                    },
                                },
                                {
                                    key: 'getDefaultFeatures',
                                    value: function getDefaultFeatures() {
                                        return this.getFeaturesByCondition(function (e) {
                                            return e.isDefault;
                                        });
                                    },
                                },
                                {
                                    key: 'getPerContextFeatures',
                                    value: function getPerContextFeatures() {
                                        return this.getFeaturesByCondition(function (e) {
                                            return e.shouldRunPerContext;
                                        });
                                    },
                                },
                                {
                                    key: 'getPerSessionFeatures',
                                    value: function getPerSessionFeatures() {
                                        return this.getFeaturesByCondition(function (e) {
                                            return e.shouldRunPerSession;
                                        });
                                    },
                                },
                                {
                                    key: 'getNonDefaultFeatures',
                                    value: function getNonDefaultFeatures() {
                                        return this.getFeaturesByCondition(function (e) {
                                            return !e.isDefault && !e.shouldRunPerContext && !e.shouldRunPerSession;
                                        });
                                    },
                                },
                                {
                                    key: 'getFeaturesByCondition',
                                    value: function getFeaturesByCondition(r) {
                                        var n = {};
                                        return (
                                            Object.keys(FeaturesList.list).forEach(function (e) {
                                                var t = FeaturesList.list[e];
                                                r(t) && (n[e] = t);
                                            }),
                                            n
                                        );
                                    },
                                },
                                {
                                    key: '_addFeature',
                                    value: function _addFeature(e) {
                                        var t = e.className.getDefaultSettings(),
                                            r = e.name;
                                        (t.init = e.init()), (FeaturesList.list[r] = t);
                                    },
                                },
                            ]),
                            FeaturesList
                        );
                    })();
                function SystemBootstrapper_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                !(function FeaturesList_defineProperty(e, t, r) {
                    t in e
                        ? Object.defineProperty(e, t, { value: r, enumerable: !0, configurable: !0, writable: !0 })
                        : (e[t] = r);
                })(Fi, 'list', void 0);
                var Ti = (function () {
                    function SystemBootstrapper() {
                        !(function SystemBootstrapper_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, SystemBootstrapper),
                            (this._serverWorker = null),
                            (this._serverWorkerCommunicator = null),
                            (this._configurationService = null),
                            (this._featureBuilder = null),
                            (this._featureService = null),
                            (this._dataQ = null),
                            (this._frameHandler = null),
                            (this._eventHandlers = []),
                            (this._contextMgr = null),
                            (this._runWorker = function (e) {
                                return new ee(e.getUseUrlWorker(), e.getWorkerUrl()).create();
                            });
                    }
                    return (
                        (function SystemBootstrapper_createClass(e, t, r) {
                            t && SystemBootstrapper_defineProperties(e.prototype, t),
                                r && SystemBootstrapper_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(SystemBootstrapper, [
                            {
                                key: 'start',
                                value: function start(e, t) {
                                    this._loadSystem(e, t);
                                },
                            },
                            {
                                key: 'stop',
                                value: function stop() {
                                    this._serverWorker && this._serverWorker.close(),
                                        this.heartBeatService && this.heartBeatService.stop();
                                },
                            },
                            {
                                key: 'registerPostLoadEvents',
                                value: function registerPostLoadEvents() {
                                    this._slaveListener.onResetSessionTrigger.subscribe(
                                        this._sessionService.resetSession.bind(this._sessionService)
                                    );
                                },
                            },
                            {
                                key: 'flushAllMessages',
                                value: function flushAllMessages() {
                                    this._dataQ.flushAllMessages();
                                },
                            },
                            {
                                key: 'handleCoordinatesMaskingConfigurationUpdate',
                                value: function handleCoordinatesMaskingConfigurationUpdate(e) {
                                    this._coordinatesMaskingConfigurationUpdater.updateConfig(e);
                                },
                            },
                            {
                                key: 'getServerWorkerCommunicator',
                                value: function getServerWorkerCommunicator() {
                                    return this._serverWorkerCommunicator;
                                },
                            },
                            {
                                key: 'getFeatureBuilder',
                                value: function getFeatureBuilder() {
                                    return this._featureBuilder;
                                },
                            },
                            {
                                key: 'getFeatureService',
                                value: function getFeatureService() {
                                    return this._featureService;
                                },
                            },
                            {
                                key: 'getConfigurationService',
                                value: function getConfigurationService() {
                                    return this._configurationService;
                                },
                            },
                            {
                                key: 'getConfigurationRepository',
                                value: function getConfigurationRepository() {
                                    return this._configurationRepository;
                                },
                            },
                            {
                                key: 'getSessionService',
                                value: function getSessionService() {
                                    return this._sessionService;
                                },
                            },
                            {
                                key: 'getContextMgr',
                                value: function getContextMgr() {
                                    return this._contextMgr;
                                },
                            },
                            {
                                key: 'getMuidService',
                                value: function getMuidService() {
                                    return this._muidService;
                                },
                            },
                            {
                                key: 'getApiBridge',
                                value: function getApiBridge() {
                                    return this._customerApiBridge;
                                },
                            },
                            {
                                key: 'getPerfMonitor',
                                value: function getPerfMonitor() {
                                    return this._perfMonitor;
                                },
                            },
                            {
                                key: 'getServerStateMgr',
                                value: function getServerStateMgr() {
                                    return this._serverStateMgr;
                                },
                            },
                            {
                                key: 'getMessageBus',
                                value: function getMessageBus() {
                                    return this._msgBus;
                                },
                            },
                            {
                                key: 'getAgentIdService',
                                value: function getAgentIdService() {
                                    return this._agentIdService;
                                },
                            },
                            {
                                key: '_loadSystem',
                                value: function _loadSystem(e, t) {
                                    this._runServerWorker(t),
                                        (this._serverWorkerCommunicator = new ie()),
                                        this._serverWorkerCommunicator.setMessagingPort(this._serverWorker.port);
                                    var r = new or(
                                        jt,
                                        this._serverWorkerCommunicator,
                                        null,
                                        'logPerfQPassWorkerInterval',
                                        z
                                    );
                                    (this._perfMonitor = new ae(r)),
                                        (this._configurationRepository = new ge()),
                                        new $t(this._configurationRepository, t).loadStartUpConfigurations();
                                    var n =
                                        null === (u = this._configurationRepository) || void 0 === u
                                            ? void 0
                                            : u.get(y.collectionMode);
                                    this._registerFeatures(n);
                                    var o =
                                        null === (c = this._configurationRepository) || void 0 === c
                                            ? void 0
                                            : c.get(y.enableWupMessagesHashing);
                                    this._shouldEnableWorkerWupMessagesHashing(o, this._serverWorkerCommunicator);
                                    var i = new ir(B, this._configurationRepository),
                                        s = new ue(self.MutationObserver, B, jt, 'contextConfiguration', null, !0, 400);
                                    this._contextMgr = new le(B, s, this._serverWorkerCommunicator, i);
                                    var a = new nr(r, this._contextMgr.url),
                                        u = new f(a);
                                    b.setLogger(u),
                                        (this._currScriptName = document.currentScript
                                            ? document.currentScript.src
                                            : ''),
                                        (this._globalexceptionHandler = new fe(B, this._currScriptName)),
                                        (this._msgBus = new pe()),
                                        (this._dataQ = new se(
                                            jt,
                                            this._serverWorkerCommunicator,
                                            this._contextMgr,
                                            'dataQPassWorkerInterval',
                                            Q
                                        )),
                                        (this._agentIdCache = new fr(i)),
                                        (this._agentIdService = new pr(
                                            this._agentIdCache,
                                            this._serverWorkerCommunicator
                                        )),
                                        (this._cidCache = new de()),
                                        (this._serverStateMgr = new ve(
                                            this._serverWorkerCommunicator,
                                            B,
                                            this._agentIdService
                                        )),
                                        (this._sessionInfoService = new Qt()),
                                        (this._sensorGateKeeper = new zt(
                                            this._sessionInfoService,
                                            this._configurationRepository
                                        )),
                                        (this._configurationService = new be(
                                            B,
                                            this._configurationRepository,
                                            this._msgBus,
                                            this._cidCache,
                                            this._serverWorkerCommunicator
                                        )),
                                        (this._sensorDataQ = new xe(
                                            this._configurationRepository,
                                            this._dataQ,
                                            this._msgBus,
                                            B,
                                            this._sensorGateKeeper
                                        )),
                                        (this._maskingService = new tr(this._configurationRepository)),
                                        (this._elementsUtils = new Le(
                                            this._configurationRepository,
                                            B,
                                            this._dataQ,
                                            this._contextMgr,
                                            this._maskingService
                                        ));
                                    var n = new qe(),
                                        c = new Ze(this._configurationRepository, jt, B);
                                    (this._frameHandler = c.create()),
                                        (this._featureService = new Ye(
                                            Fi,
                                            this._frameHandler,
                                            this._configurationRepository,
                                            jt,
                                            B,
                                            n
                                        ));
                                    o = new Yt(Ve, B, this._msgBus);
                                    (this._pauseResumeMgr = new $e(
                                        this._featureService,
                                        this._configurationRepository,
                                        this._dataQ
                                    )),
                                        (this._customerApiBridge = new at(this._pauseResumeMgr, this._msgBus, e, B)),
                                        this._configurationRepository.get(y.agentType) !== l.SECONDARY &&
                                            (this._muidService = new ut(
                                                B,
                                                this._dataQ,
                                                i,
                                                this._configurationRepository
                                            )),
                                        (this._psidCache = new ct());
                                    (s = new lt(this._psidCache, this._serverWorkerCommunicator)),
                                        (a = new ue(self.MutationObserver, B, jt, 'resetSessionConfig')),
                                        (c = new ft(B, i, this._configurationRepository));
                                    this._csidCache = new pt();
                                    (e = new dt(
                                        this._customerApiBridge,
                                        this._csidCache,
                                        this._serverWorkerCommunicator
                                    )),
                                        (i = new ar(B, i));
                                    (this._brandService = new sr(this._serverWorkerCommunicator, i)),
                                        (this._coordinatesMaskingConfigurationUpdater = new cr(
                                            this._configurationRepository
                                        )),
                                        (this._sessionService = new vt(
                                            this._msgBus,
                                            this._configurationService,
                                            this._configurationRepository,
                                            B,
                                            jt,
                                            this._serverWorkerCommunicator,
                                            this._contextMgr,
                                            this._muidService,
                                            this._serverStateMgr,
                                            a,
                                            c,
                                            e,
                                            this._csidCache,
                                            this._psidCache,
                                            this._brandService,
                                            this._agentIdService
                                        )),
                                        (this._metadataService = new yt(this._configurationRepository, this._dataQ)),
                                        (this._slaveListener = new mt(
                                            this._dataQ,
                                            this._configurationRepository,
                                            B,
                                            r,
                                            this._contextMgr
                                        )),
                                        this._slaveListener.listen(),
                                        (this._sameChar = new Me()),
                                        (this._featureBuilder = new bt(
                                            Fi,
                                            this._configurationRepository,
                                            B,
                                            this._elementsUtils,
                                            self.MutationObserver,
                                            this._dataQ,
                                            this._sessionService,
                                            this._muidService,
                                            this._perfMonitor,
                                            this._sensorDataQ,
                                            this._msgBus,
                                            this._cidCache,
                                            this._sameChar,
                                            this._maskingService
                                        )),
                                        (this._contextApiHandler = new Ct(this._contextMgr, this._dataQ)),
                                        this._contextMgr.onContextChange.subscribe(
                                            this._featureService.runPerContextFeatures.bind(this._featureService)
                                        ),
                                        (this._stateService = new wt(this._msgBus));
                                    r = new Ot();
                                    (this.heartBeatService = new Ut(
                                        this._serverWorkerCommunicator,
                                        new Ht(),
                                        this._configurationRepository.get(y.heartBeatMessageInterval)
                                    )),
                                        this.heartBeatService.start(),
                                        this._eventHandlers.push(
                                            new ur(this._msgBus, this._muidService, r, this._serverWorkerCommunicator)
                                        ),
                                        this._eventHandlers.push(new Bt(this._msgBus, this._contextMgr)),
                                        this._eventHandlers.push(new Mt(this._msgBus, this._sessionService)),
                                        this._eventHandlers.push(new Rt(this._msgBus, this._metadataService)),
                                        this._eventHandlers.push(
                                            new Dt(this._msgBus, this._pauseResumeMgr, this._slaveListener)
                                        ),
                                        this._eventHandlers.push(new Ft(this._msgBus, e)),
                                        this._eventHandlers.push(new Tt(this._msgBus, s)),
                                        this._eventHandlers.push(new Lt(this._msgBus, this._brandService)),
                                        this._eventHandlers.push(new At(this._msgBus, r)),
                                        this._eventHandlers.push(
                                            new xt(
                                                this._msgBus,
                                                this._featureService,
                                                this._dataQ,
                                                this._pauseResumeMgr,
                                                this._metadataService,
                                                u,
                                                this._contextMgr,
                                                this._sessionService,
                                                this._sensorDataQ,
                                                this._slaveListener,
                                                this._stateService,
                                                this._perfMonitor,
                                                this.heartBeatService,
                                                this._sensorGateKeeper,
                                                c,
                                                this._coordinatesMaskingConfigurationUpdater
                                            )
                                        ),
                                        this._eventHandlers.push(
                                            new It(
                                                this._msgBus,
                                                this._featureService,
                                                this._customerApiBridge,
                                                this._contextMgr,
                                                r,
                                                this._sessionInfoService
                                            )
                                        ),
                                        this._configurationRepository.get(y.enableCustomElementsProcessing) &&
                                            (o.start(new We(window.self)),
                                            this._eventHandlers.push(new Jt(n, this._featureService, this._msgBus))),
                                        t.getLogServerURL() &&
                                            this._configurationService.updateLogUrlToWorker(
                                                this._sessionService.sessionId,
                                                this._csidCache.get(),
                                                this._serverWorkerCommunicator,
                                                t.getLogServerURL()
                                            ),
                                        this._stateService.updateState(Z.starting);
                                },
                            },
                            {
                                key: '_runServerWorker',
                                value: function _runServerWorker(e) {
                                    this._serverWorker = this._runWorker(e);
                                },
                            },
                            {
                                key: '_registerFeatures',
                                value: function _registerFeatures(e) {
                                    if (e !== u.LEAN)
                                        return b.info('Built features per collection mode: FULL'), void Fi.register();
                                    b.info('Build features per collection mode: LEAN'), Fi.registerLeanFeatures();
                                },
                            },
                            {
                                key: '_shouldEnableWorkerWupMessagesHashing',
                                value: function _shouldEnableWorkerWupMessagesHashing(e, t) {
                                    e && t.sendAsync(X, { enableWupMessagesHashing: e });
                                },
                            },
                        ]),
                        SystemBootstrapper
                    );
                })();
                function Client_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Ii = (function () {
                    function Client() {
                        !(function Client_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, Client);
                    }
                    return (
                        (function Client_createClass(e, t, r) {
                            t && Client_defineProperties(e.prototype, t),
                                r && Client_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(Client, [
                            {
                                key: 'start',
                                value: function start(e, t, r) {
                                    (this._cdApiFacade = e),
                                        (this._startupConfigurations = t),
                                        (this._configurationLoadedCallback = r),
                                        (this.systemBootstrapper = new Ti()),
                                        this.systemBootstrapper.start(e, t),
                                        b.info('Got server address: '.concat(t.getWupServerURL()));
                                    e = this.systemBootstrapper.getPerfMonitor();
                                    e.startMonitor('t.timeTillServerConfig'),
                                        e.startMonitor('t.timeTillDataCollect'),
                                        (this.configurationService = this.systemBootstrapper.getConfigurationService()),
                                        (this.sessionService = this.systemBootstrapper.getSessionService()),
                                        this.configurationService.setConfigurationLoadedCallback(r),
                                        this.systemBootstrapper.getFeatureService().buildFrameRelatedLists(),
                                        this.systemBootstrapper.getFeatureBuilder().buildFeatures(),
                                        b.info('Started default features collection'),
                                        this.systemBootstrapper.getFeatureService().runDefault(),
                                        this.systemBootstrapper.getApiBridge().enableApi(),
                                        this.systemBootstrapper.getContextMgr().initContextHandling(),
                                        this.systemBootstrapper.registerPostLoadEvents(),
                                        null !== (r = this.systemBootstrapper.getMuidService()) &&
                                            void 0 !== r &&
                                            r.initMuid(),
                                        this.configurationService.setServerUrl(t.getWupServerURL()),
                                        this.sessionService.resumeOrStartSession();
                                },
                            },
                            {
                                key: 'stop',
                                value: function stop() {
                                    this.systemBootstrapper.stop();
                                },
                            },
                            {
                                key: 'restart',
                                value: function restart() {
                                    this.stop(),
                                        this.start(
                                            this._cdApiFacade,
                                            this._startupConfigurations,
                                            this._configurationLoadedCallback
                                        );
                                },
                            },
                            {
                                key: 'flush',
                                value: function flush() {
                                    this.systemBootstrapper.flushAllMessages();
                                },
                            },
                            {
                                key: 'setCoordinatesMasking',
                                value: function setCoordinatesMasking(e) {
                                    this.systemBootstrapper.handleCoordinatesMaskingConfigurationUpdate(e);
                                },
                            },
                            {
                                key: 'submitCustomElement',
                                value: function submitCustomElement(e) {
                                    this.systemBootstrapper.getMessageBus().publish(me.CustomElementSubmitted, e);
                                },
                            },
                        ]),
                        Client
                    );
                })();
                function StartPoint_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var xi = (function () {
                    function StartPoint() {
                        !(function StartPoint_classCallCheck(e, t) {
                            if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                        })(this, StartPoint);
                    }
                    return (
                        (function StartPoint_createClass(e, t, r) {
                            t && StartPoint_defineProperties(e.prototype, t),
                                r && StartPoint_defineProperties(e, r),
                                Object.defineProperty(e, 'prototype', { writable: !1 });
                        })(StartPoint, [
                            {
                                key: 'start',
                                value: function start(e, r) {
                                    if (A.isSupported()) {
                                        var n = new x(),
                                            o = new Ii();
                                        return (
                                            n.getConfigurations(function (e) {
                                                if (!e)
                                                    throw (
                                                        (b.error(
                                                            'Failed starting the JS SDK. Received invalid start configurations'
                                                        ),
                                                        new Error(
                                                            'Failed starting the JS SDK. Received invalid start configurations'
                                                        ))
                                                    );
                                                if (!e.getWupServerURL())
                                                    throw (
                                                        (b.error('Missing server URL. Unable to start the library.'),
                                                        new Error('Missing server URL. Unable to start the library.'))
                                                    );
                                                if (e.getUseUrlWorker() && '' === e.getWorkerUrl())
                                                    throw (
                                                        (b.error(
                                                            'Failed starting the JS SDK. Received invalid WorkerUrl configuration'
                                                        ),
                                                        new Error(
                                                            'Failed starting the JS SDK. Received invalid WorkerUrl configuration'
                                                        ))
                                                    );
                                                var t = e.getClientSettings();
                                                t && n.createClientInterface(o, t), o.start(n, e, r);
                                            }),
                                            o.systemBootstrapper
                                        );
                                    }
                                },
                            },
                        ]),
                        StartPoint
                    );
                })();
                function Application_defineProperties(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        (n.enumerable = n.enumerable || !1),
                            (n.configurable = !0),
                            'value' in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n);
                    }
                }
                var Ai = {
                    Application: (function () {
                        function Application() {
                            !(function Application_classCallCheck(e, t) {
                                if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                            })(this, Application),
                                (function PolyfillsApplier_apply() {
                                    apply(self),
                                        Polyfills_apply(),
                                        WeakMapPolyfill_apply(
                                            'undefined' != typeof self
                                                ? self
                                                : 'undefined' != typeof window
                                                ? window
                                                : this
                                        );
                                })();
                        }
                        return (
                            (function Application_createClass(e, t, r) {
                                t && Application_defineProperties(e.prototype, t),
                                    r && Application_defineProperties(e, r),
                                    Object.defineProperty(e, 'prototype', { writable: !1 });
                            })(Application, [
                                {
                                    key: 'start',
                                    value: function start(e, t) {
                                        return new xi().start(e, t);
                                    },
                                },
                            ]),
                            Application
                        );
                    })(),
                };
            },
            599: function (e, t, r) {
                e.exports = function () {
                    return r(855)(
                        '!function(){var r={563:function(e,t,m){var g,w;function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}w=function(){return function t(s,a,o){function i(r,e){if(!a[r]){if(!s[r]){if(0,u)return u(r,!0);var n=new Error("Cannot find module \'"+r+"\'");throw n.code="MODULE_NOT_FOUND",n}n=a[r]={exports:{}};s[r][0].call(n.exports,function(e){var t=s[r][1][e];return i(t||e)},n,n.exports,t,s,a,o)}return a[r].exports}for(var u=void 0,e=0;e<o.length;e++)i(o[e]);return i}({1:[function(e,t,r){r.encode=e("./encode").encode,r.decode=e("./decode").decode,r.Encoder=e("./encoder").Encoder,r.Decoder=e("./decoder").Decoder,r.createCodec=e("./ext").createCodec,r.codec=e("./codec").codec},{"./codec":10,"./decode":12,"./decoder":13,"./encode":15,"./encoder":16,"./ext":20}],2:[function(e,r,n){(function(e){function t(e){return e&&e.isBuffer&&e}r.exports=t(void 0!==e&&e)||t(this.Buffer)||t("undefined"!=typeof window&&window.Buffer)||this.Buffer}).call(this,e("buffer").Buffer)},{buffer:29}],3:[function(e,t,r){r.copy=function o(e,t,r,n){var i;r=r||0,n||0===n||(n=this.length),t=t||0;var s=n-r;if(e===this&&r<t&&t<n)for(i=s-1;0<=i;i--)e[i+t]=this[i+r];else for(i=0;i<s;i++)e[i+t]=this[i+r];return s},r.toString=function i(e,t,r){var n=this,s=0|t;r=r||n.length;for(var a="",o=0;s<r;)(o=n[s++])<128?a+=String.fromCharCode(o):(192==(224&o)?o=(31&o)<<6|63&n[s++]:224==(240&o)?o=(15&o)<<12|(63&n[s++])<<6|63&n[s++]:240==(248&o)&&(o=(7&o)<<18|(63&n[s++])<<12|(63&n[s++])<<6|63&n[s++]),65536<=o?(o-=65536,a+=String.fromCharCode(55296+(o>>>10),56320+(1023&o))):a+=String.fromCharCode(o));return a},r.write=function n(e,t){for(var r=this,i=t||(t|=0),s=e.length,a=0,o=0;o<s;)(a=e.charCodeAt(o++))<128?r[i++]=a:(a<2048?r[i++]=192|a>>>6:(a<55296||57343<a?r[i++]=224|a>>>12:(a=65536+(a-55296<<10|e.charCodeAt(o++)-56320),r[i++]=240|a>>>18,r[i++]=128|a>>>12&63),r[i++]=128|a>>>6&63),r[i++]=128|63&a);return i-t}},{}],4:[function(e,t,r){function n(e){return new Array(e)}var s=e("./bufferish");(r=t.exports=n(0)).alloc=n,r.concat=s.concat,r.from=function i(e){if(!s.isBuffer(e)&&s.isView(e))e=s.Uint8Array.from(e);else if(s.isArrayBuffer(e))e=new Uint8Array(e);else{if("string"==typeof e)return s.from.call(r,e);if("number"==typeof e)throw new TypeError(\'"value" argument must not be a number\')}return Array.prototype.slice.call(e)}},{"./bufferish":8}],5:[function(e,t,r){function n(e){return new a(e)}var s=e("./bufferish"),a=s.global;(r=t.exports=s.hasBuffer?n(0):[]).alloc=s.hasBuffer&&a.alloc||n,r.concat=s.concat,r.from=function i(e){if(!s.isBuffer(e)&&s.isView(e))e=s.Uint8Array.from(e);else if(s.isArrayBuffer(e))e=new Uint8Array(e);else{if("string"==typeof e)return s.from.call(r,e);if("number"==typeof e)throw new TypeError(\'"value" argument must not be a number\')}return a.from&&1!==a.from.length?a.from(e):new a(e)}},{"./bufferish":8}],6:[function(e,t,s){function n(e,t,r,n){var s=c.isBuffer(this),a=c.isBuffer(e);if(s&&a)return this.copy(e,t,r,n);if(l||s||a||!c.isView(this)||!c.isView(e))return u.copy.call(this,e,t,r,n);n=r||null!=n?i.call(this,r,n):this;return e.set(n,t),n.length}function i(e,t){var r=this.slice||!l&&this.subarray;if(r)return r.call(this,e,t);r=c.alloc.call(this,t-e);return n.call(this,r,0,e,t),r}var u=e("./buffer-lite");s.copy=n,s.slice=i,s.toString=function o(e,t,r){return(!a&&c.isBuffer(this)?this:u).toString.apply(this,arguments)},s.write=function f(e){return function r(){return(this[e]||u[e]).apply(this,arguments)}}("write");var c=e("./bufferish"),e=c.global,a=c.hasBuffer&&"TYPED_ARRAY_SUPPORT"in e,l=a&&!e.TYPED_ARRAY_SUPPORT},{"./buffer-lite":3,"./bufferish":8}],7:[function(e,t,s){function n(e){return new Uint8Array(e)}var a=e("./bufferish");(s=t.exports=a.hasArrayBuffer?n(0):[]).alloc=n,s.concat=a.concat,s.from=function i(e){if(a.isView(e)){var t=e.byteOffset,r=e.byteLength;(e=e.buffer).byteLength!==r&&(e.slice?e=e.slice(t,t+r):(e=new Uint8Array(e)).byteLength!==r&&(e=Array.prototype.slice.call(e,t,t+r)))}else{if("string"==typeof e)return a.from.call(s,e);if("number"==typeof e)throw new TypeError(\'"value" argument must not be a number\')}return new Uint8Array(e)}},{"./bufferish":8}],8:[function(e,t,l){function i(e){return a(this).alloc(e)}function a(e){return g(e)?y:_(e)?m:p(e)?v:h?y:d?m:v}function s(){return!1}function c(t,r){return t="[object "+t+"]",function(e){return null!=e&&{}.toString.call(r?e[r]:e)===t}}var r=l.global=e("./buffer-global"),h=l.hasBuffer=r&&!!r.isBuffer,d=l.hasArrayBuffer="undefined"!=typeof ArrayBuffer,p=l.isArray=e("isarray");l.isArrayBuffer=d?function f(e){return e instanceof ArrayBuffer||S(e)}:s;var g=l.isBuffer=h?r.isBuffer:s,_=l.isView=d?ArrayBuffer.isView||c("ArrayBuffer","buffer"):s;l.alloc=i,l.concat=function o(e,t){t||(t=0,Array.prototype.forEach.call(e,function n(e){t+=e.length}));var r=this!==l&&this||e[0],s=i.call(r,t),a=0;return Array.prototype.forEach.call(e,function o(e){a+=w.copy.call(e,s,a)}),s},l.from=function n(e){return"string"==typeof e?function u(e){var t=3*e.length,r=i.call(this,t),e=w.write.call(r,e);return t!==e&&(r=w.slice.call(r,0,e)),r}.call(this,e):a(this).from(e)};var v=l.Array=e("./bufferish-array"),y=l.Buffer=e("./bufferish-buffer"),m=l.Uint8Array=e("./bufferish-uint8array"),w=l.prototype=e("./bufferish-proto"),S=c("ArrayBuffer")},{"./buffer-global":2,"./bufferish-array":4,"./bufferish-buffer":5,"./bufferish-proto":6,"./bufferish-uint8array":7,isarray:34}],9:[function(e,t,r){function n(e){return this instanceof n?(this.options=e,void this.init()):new n(e)}function a(e){return new n(e)}var s=e("isarray");r.createCodec=a,r.install=function i(e){for(var t in e)n.prototype[t]=function o(t,r){return t&&r?function e(){return t.apply(this,arguments),r.apply(this,arguments)}:t||r}(n.prototype[t],e[t])},r.filter=function u(e){return s(e)?function f(t){function r(e,t){return t(e)}return t=t.slice(),function(e){return t.reduce(r,e)}}(e):e};var o=e("./bufferish");n.prototype.init=function(){var e=this.options;return e&&e.uint8array&&(this.bufferish=o.Uint8Array),this},r.preset=a({preset:!0})},{"./bufferish":8,isarray:34}],10:[function(e,t,r){e("./read-core"),e("./write-core"),r.codec={preset:e("./codec-base").preset}},{"./codec-base":9,"./read-core":22,"./write-core":25}],11:[function(e,t,r){function n(e){if(!(this instanceof n))return new n(e);e&&(this.options=e).codec&&((e=this.codec=e.codec).bufferish&&(this.bufferish=e.bufferish))}r.DecodeBuffer=n;r=e("./read-core").preset;e("./flex-buffer").FlexDecoder.mixin(n.prototype),n.prototype.codec=r,n.prototype.fetch=function(){return this.codec.decode(this)}},{"./flex-buffer":21,"./read-core":22}],12:[function(e,t,r){r.decode=function n(e,t){return(t=new i(t)).write(e),t.read()};var i=e("./decode-buffer").DecodeBuffer},{"./decode-buffer":11}],13:[function(e,t,r){function n(e){return this instanceof n?void i.call(this,e):new n(e)}r.Decoder=n;var r=e("event-lite"),i=e("./decode-buffer").DecodeBuffer;n.prototype=new i,r.mixin(n.prototype),n.prototype.decode=function(e){arguments.length&&this.write(e),this.flush()},n.prototype.push=function(e){this.emit("data",e)},n.prototype.end=function(e){this.decode(e),this.emit("end")}},{"./decode-buffer":11,"event-lite":31}],14:[function(e,t,r){function n(e){if(!(this instanceof n))return new n(e);e&&(this.options=e).codec&&((e=this.codec=e.codec).bufferish&&(this.bufferish=e.bufferish))}r.EncodeBuffer=n;r=e("./write-core").preset;e("./flex-buffer").FlexEncoder.mixin(n.prototype),n.prototype.codec=r,n.prototype.write=function(e){this.codec.encode(this,e)}},{"./flex-buffer":21,"./write-core":25}],15:[function(e,t,r){r.encode=function n(e,t){return(t=new i(t)).write(e),t.read()};var i=e("./encode-buffer").EncodeBuffer},{"./encode-buffer":14}],16:[function(e,t,r){function n(e){return this instanceof n?void i.call(this,e):new n(e)}r.Encoder=n;var r=e("event-lite"),i=e("./encode-buffer").EncodeBuffer;n.prototype=new i,r.mixin(n.prototype),n.prototype.encode=function(e){this.write(e),this.emit("data",this.read())},n.prototype.end=function(e){arguments.length&&this.encode(e),this.flush(),this.emit("end")}},{"./encode-buffer":14,"event-lite":31}],17:[function(e,t,r){r.ExtBuffer=function n(e,t){return this instanceof n?(this.buffer=i.from(e),void(this.type=t)):new n(e,t)};var i=e("./bufferish")},{"./bufferish":8}],18:[function(t,e,r){function i(e){return(s=s||t("./encode").encode)(e)}function o(e){return e.valueOf()}function f(e){(e=RegExp.prototype.toString.call(e).split("/")).shift();var t=[e.pop()];return t.unshift(e.join("/")),t}function u(e){var t,r={};for(t in h)r[t]=e[t];return r}r.setExtPackers=function n(e){e.addExtPacker(14,Error,[u,i]),e.addExtPacker(1,EvalError,[u,i]),e.addExtPacker(2,RangeError,[u,i]),e.addExtPacker(3,ReferenceError,[u,i]),e.addExtPacker(4,SyntaxError,[u,i]),e.addExtPacker(5,TypeError,[u,i]),e.addExtPacker(6,URIError,[u,i]),e.addExtPacker(10,RegExp,[f,i]),e.addExtPacker(11,Boolean,[o,i]),e.addExtPacker(12,String,[o,i]),e.addExtPacker(13,Date,[Number,i]),e.addExtPacker(15,Number,[o,i]),"undefined"!=typeof Uint8Array&&(e.addExtPacker(17,Int8Array,l),e.addExtPacker(18,Uint8Array,l),e.addExtPacker(19,Int16Array,l),e.addExtPacker(20,Uint16Array,l),e.addExtPacker(21,Int32Array,l),e.addExtPacker(22,Uint32Array,l),e.addExtPacker(23,Float32Array,l),"undefined"!=typeof Float64Array&&e.addExtPacker(24,Float64Array,l),"undefined"!=typeof Uint8ClampedArray&&e.addExtPacker(25,Uint8ClampedArray,l),e.addExtPacker(26,ArrayBuffer,l),e.addExtPacker(29,DataView,l)),a.hasBuffer&&e.addExtPacker(27,c,a.from)};var s,a=t("./bufferish"),c=a.global,l=a.Uint8Array.from,h={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1}},{"./bufferish":8,"./encode":15}],19:[function(t,e,r){function i(e){return(s=s||t("./decode").decode)(e)}function o(e){return RegExp.apply(null,e)}function f(n){return function(e){var t,r=new n;for(t in h)r[t]=e[t];return r}}function u(t){return function(e){return new t(e)}}function a(e){return new Uint8Array(e).buffer}r.setExtUnpackers=function n(e){e.addExtUnpacker(14,[i,f(Error)]),e.addExtUnpacker(1,[i,f(EvalError)]),e.addExtUnpacker(2,[i,f(RangeError)]),e.addExtUnpacker(3,[i,f(ReferenceError)]),e.addExtUnpacker(4,[i,f(SyntaxError)]),e.addExtUnpacker(5,[i,f(TypeError)]),e.addExtUnpacker(6,[i,f(URIError)]),e.addExtUnpacker(10,[i,o]),e.addExtUnpacker(11,[i,u(Boolean)]),e.addExtUnpacker(12,[i,u(String)]),e.addExtUnpacker(13,[i,u(Date)]),e.addExtUnpacker(15,[i,u(Number)]),"undefined"!=typeof Uint8Array&&(e.addExtUnpacker(17,u(Int8Array)),e.addExtUnpacker(18,u(Uint8Array)),e.addExtUnpacker(19,[a,u(Int16Array)]),e.addExtUnpacker(20,[a,u(Uint16Array)]),e.addExtUnpacker(21,[a,u(Int32Array)]),e.addExtUnpacker(22,[a,u(Uint32Array)]),e.addExtUnpacker(23,[a,u(Float32Array)]),"undefined"!=typeof Float64Array&&e.addExtUnpacker(24,[a,u(Float64Array)]),"undefined"!=typeof Uint8ClampedArray&&e.addExtUnpacker(25,u(Uint8ClampedArray)),e.addExtUnpacker(26,a),e.addExtUnpacker(29,[a,u(DataView)])),c.hasBuffer&&e.addExtUnpacker(27,u(l))};var s,c=t("./bufferish"),l=c.global,h={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1}},{"./bufferish":8,"./decode":12}],20:[function(e,t,r){e("./read-core"),e("./write-core"),r.createCodec=e("./codec-base").createCodec},{"./codec-base":9,"./read-core":22,"./write-core":25}],21:[function(d,p,g){function n(){if(!(this instanceof n))return new n}function i(){if(!(this instanceof i))return new i}function u(){throw new Error("method not implemented: write()")}function a(){throw new Error("method not implemented: fetch()")}function s(){return this.buffers&&this.buffers.length?(this.flush(),this.pull()):this.fetch()}function c(e){(this.buffers||(this.buffers=[])).push(e)}function h(){return(this.buffers||(this.buffers=[])).shift()}function l(n){return function r(e){for(var t in n)e[t]=n[t];return e}}g.FlexDecoder=n,g.FlexEncoder=i;var _=d("./bufferish"),v="BUFFER_SHORTAGE";n.mixin=l(function o(){return{bufferish:_,write:function t(e){var r=this.offset?_.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=r?e?this.bufferish.concat([r,e]):r:e,this.offset=0},fetch:a,flush:function r(){for(;this.offset<this.buffer.length;){var e,t=this.offset;try{e=this.fetch()}catch(e){if(e&&e.message!=v)throw e;this.offset=t;break}this.push(e)}},push:c,pull:h,read:s,reserve:function e(t){var r=this.offset;if((t=r+t)>this.buffer.length)throw new Error(v);return this.offset=t,r},offset:0}}()),n.mixin(n.prototype),i.mixin=l(function f(){return{bufferish:_,write:u,fetch:function t(){var e=this.start;if(e<this.offset){var r=this.start=this.offset;return _.prototype.slice.call(this.buffer,e,r)}},flush:function r(){for(;this.start<this.offset;){var e=this.fetch();e&&this.push(e)}},push:c,pull:function e(){var t=this.buffers||(this.buffers=[]),r=1<t.length?this.bufferish.concat(t):t[0];return t.length=0,r},read:s,reserve:function n(e){var t=0|e;if(this.buffer){var r=this.buffer.length,i=0|this.offset,s=i+t;if(s<r)return this.offset=s,i;this.flush(),e=Math.max(e,Math.min(2*r,this.maxBufferSize))}return e=Math.max(e,this.minBufferSize),this.buffer=this.bufferish.alloc(e),this.start=0,this.offset=t,0},send:function i(e){var t=e.length;t>this.minBufferSize?(this.flush(),this.push(e)):(t=this.reserve(t),_.prototype.copy.call(e,this.buffer,t))},maxBufferSize:65536,minBufferSize:2048,offset:0,start:0}}()),i.mixin(i.prototype)},{"./bufferish":8}],22:[function(e,t,s){function n(e){var i=l.getReadToken(e);return function r(e){var t=c(e),n=i[t];if(!n)throw new Error("Invalid type: "+(t&&"0x"+t.toString(16)));return n(e)}}function i(){var e=this.options;return this.decode=n(e),e&&e.preset&&u.setExtUnpackers(this),this}var a=e("./ext-buffer").ExtBuffer,u=e("./ext-unpacker"),c=e("./read-format").readUint8,l=e("./read-token"),h=e("./codec-base");h.install({addExtUnpacker:function o(e,t){(this.extUnpackers||(this.extUnpackers=[]))[e]=h.filter(t)},getExtUnpacker:function f(t){return(this.extUnpackers||(this.extUnpackers=[]))[t]||function r(e){return new a(e,t)}},init:i}),s.preset=i.call(h.preset)},{"./codec-base":9,"./ext-buffer":17,"./ext-unpacker":19,"./read-format":23,"./read-token":24}],23:[function(e,t,r){function i(e,t){for(var r={},n=new Array(t),i=new Array(t),s=e.codec.decode,a=0;a<t;a++)n[a]=s(e),i[a]=s(e);for(a=0;a<t;a++)r[n[a]]=i[a];return r}function o(e,t){for(var r=new Map,n=new Array(t),i=new Array(t),s=e.codec.decode,a=0;a<t;a++)n[a]=s(e),i[a]=s(e);for(a=0;a<t;a++)r.set(n[a],i[a]);return r}function f(e,t){for(var r=new Array(t),n=e.codec.decode,i=0;i<t;i++)r[i]=n(e);return r}function u(e,t){var r=e.reserve(t),t=r+t;return R.toString.call(e.buffer,"utf-8",r,t)}function a(e,t){var r=e.reserve(t),t=r+t,t=R.slice.call(e.buffer,r,t);return B.from(t)}function s(e,t){var r=e.reserve(t),t=r+t,t=R.slice.call(e.buffer,r,t);return B.Uint8Array.from(t).buffer}function c(e,t){var r=e.reserve(t+1),n=e.buffer[r++],i=r+t,t=e.codec.getExtUnpacker(n);if(!t)throw new Error("Invalid ext type: "+(n&&"0x"+n.toString(16)));return t(R.slice.call(e.buffer,r,i))}function h(e){var t=e.reserve(1);return e.buffer[t]}function l(e){var t=e.reserve(1),t=e.buffer[t];return 128&t?t-256:t}function p(e){var t=e.reserve(2),e=e.buffer;return e[t++]<<8|e[t]}function d(e){var t=e.reserve(2),e=e.buffer,t=e[t++]<<8|e[t];return 32768&t?t-65536:t}function y(e){var t=e.reserve(4),e=e.buffer;return 16777216*e[t++]+(e[t++]<<16)+(e[t++]<<8)+e[t]}function v(e){var t=e.reserve(4),e=e.buffer;return e[t++]<<24|e[t++]<<16|e[t++]<<8|e[t]}function g(r,n){return function(e){var t=e.reserve(r);return n.call(e.buffer,t,M)}}function b(e){return new k(this,e).toNumber()}function w(e){return new C(this,e).toNumber()}function E(e){return new k(this,e)}function A(e){return new C(this,e)}function m(e){return _.read(this,e,!1,23,4)}function x(e){return _.read(this,e,!1,52,8)}var _=e("ieee754"),S=e("int64-buffer"),k=S.Uint64BE,C=S.Int64BE;r.getReadFormat=function n(e){var t=B.hasArrayBuffer&&e&&e.binarraybuffer,r=e&&e.int64;return{map:P&&e&&e.usemap?o:i,array:f,str:u,bin:t?s:a,ext:c,uint8:h,uint16:p,uint32:y,uint64:g(8,r?E:b),int8:l,int16:d,int32:v,int64:g(8,r?A:w),float32:g(4,m),float64:g(8,x)}},r.readUint8=h;var B=e("./bufferish"),R=e("./bufferish-proto"),P="undefined"!=typeof Map,M=!0},{"./bufferish":8,"./bufferish-proto":6,ieee754:32,"int64-buffer":33}],24:[function(e,t,r){function i(e){for(var t=new Array(256),r=0;r<=127;r++)t[r]=f(r);for(r=128;r<=143;r++)t[r]=a(r-128,e.map);for(r=144;r<=159;r++)t[r]=a(r-144,e.array);for(r=160;r<=191;r++)t[r]=a(r-160,e.str);for(t[192]=f(null),t[193]=null,t[194]=f(!1),t[195]=f(!0),t[196]=u(e.uint8,e.bin),t[197]=u(e.uint16,e.bin),t[198]=u(e.uint32,e.bin),t[199]=u(e.uint8,e.ext),t[200]=u(e.uint16,e.ext),t[201]=u(e.uint32,e.ext),t[202]=e.float32,t[203]=e.float64,t[204]=e.uint8,t[205]=e.uint16,t[206]=e.uint32,t[207]=e.uint64,t[208]=e.int8,t[209]=e.int16,t[210]=e.int32,t[211]=e.int64,t[212]=a(1,e.ext),t[213]=a(2,e.ext),t[214]=a(4,e.ext),t[215]=a(8,e.ext),t[216]=a(16,e.ext),t[217]=u(e.uint8,e.str),t[218]=u(e.uint16,e.str),t[219]=u(e.uint32,e.str),t[220]=u(e.uint16,e.array),t[221]=u(e.uint32,e.array),t[222]=u(e.uint16,e.map),t[223]=u(e.uint32,e.map),r=224;r<=255;r++)t[r]=f(r-256);return t}function f(e){return function(){return e}}function u(r,n){return function(e){var t=r(e);return n(e,t)}}function a(t,r){return function(e){return r(e,t)}}var s=e("./read-format");r.getReadToken=function n(e){var t=s.getReadFormat(e);return(e&&e.useraw?function o(e){var t,r=i(e).slice();for(r[217]=r[196],r[218]=r[197],r[219]=r[198],t=160;t<=191;t++)r[t]=a(t-160,e.bin);return r}:i)(t)}},{"./read-format":23}],25:[function(e,t,r){function n(e){var i=u.getWriteType(e);return function r(e,t){var n=i[_typeof(t)];if(!n)throw new Error(\'Unsupported type "\'+_typeof(t)+\'": \'+t);n(e,t)}}function i(){var e=this.options;return this.encode=n(e),e&&e.preset&&a.setExtPackers(this),this}var s=e("./ext-buffer").ExtBuffer,a=e("./ext-packer"),u=e("./write-type"),c=e("./codec-base");c.install({addExtPacker:function o(t,e,r){function n(e){return r&&(e=r(e)),new s(e,t)}r=c.filter(r);var i=e.name;i&&"Object"!==i?(this.extPackers||(this.extPackers={}))[i]=n:(this.extEncoderList||(this.extEncoderList=[])).unshift([e,n])},getExtPacker:function f(e){var t=this.extPackers||(this.extPackers={}),r=e.constructor;if(t=r&&r.name&&t[r.name])return t;for(var n=this.extEncoderList||(this.extEncoderList=[]),i=n.length,s=0;s<i;s++){var a=n[s];if(r===a[0])return a[1]}},init:i}),r.preset=i.call(c.preset)},{"./codec-base":9,"./ext-buffer":17,"./ext-packer":18,"./write-type":27}],26:[function(e,t,r){function o(){var e=m.slice();return e[196]=u(196),e[197]=a(197),e[198]=s(198),e[199]=u(199),e[200]=a(200),e[201]=s(201),e[202]=c(202,4,k.writeFloatBE||p,!0),e[203]=c(203,8,k.writeDoubleBE||d,!0),e[204]=u(204),e[205]=a(205),e[206]=s(206),e[207]=c(207,8,h),e[208]=u(208),e[209]=a(209),e[210]=s(210),e[211]=c(211,8,l),e[217]=u(217),e[218]=a(218),e[219]=s(219),e[220]=a(220),e[221]=s(221),e[222]=a(222),e[223]=s(223),e}function u(n){return function(e,t){var r=e.reserve(2),e=e.buffer;e[r++]=n,e[r]=t}}function a(n){return function(e,t){var r=e.reserve(3),e=e.buffer;e[r++]=n,e[r++]=t>>>8,e[r]=t}}function s(n){return function(e,t){var r=e.reserve(5),e=e.buffer;e[r++]=n,e[r++]=t>>>24,e[r++]=t>>>16,e[r++]=t>>>8,e[r]=t}}function c(n,i,s,a){return function(e,t){var r=e.reserve(i+1);e.buffer[r++]=n,s.call(e.buffer,t,r,a)}}function h(e,t){new v(this,t,e)}function l(e,t){new y(this,t,e)}function p(e,t){g.write(this,e,t,!1,23,4)}function d(e,t){g.write(this,e,t,!1,52,8)}var g=e("ieee754"),_=e("int64-buffer"),v=_.Uint64BE,y=_.Int64BE,m=e("./write-uint8").uint8,w=e("./bufferish"),S=w.global,b=w.hasBuffer&&"TYPED_ARRAY_SUPPORT"in S&&!S.TYPED_ARRAY_SUPPORT,k=w.hasBuffer&&S.prototype||{};r.getWriteToken=function n(e){return(e&&e.uint8array?function i(){var e=o();return e[202]=c(202,4,p),e[203]=c(203,8,d),e}:b||w.hasBuffer&&e&&e.safe?function f(){var e=m.slice();return e[196]=c(196,1,S.prototype.writeUInt8),e[197]=c(197,2,S.prototype.writeUInt16BE),e[198]=c(198,4,S.prototype.writeUInt32BE),e[199]=c(199,1,S.prototype.writeUInt8),e[200]=c(200,2,S.prototype.writeUInt16BE),e[201]=c(201,4,S.prototype.writeUInt32BE),e[202]=c(202,4,S.prototype.writeFloatBE),e[203]=c(203,8,S.prototype.writeDoubleBE),e[204]=c(204,1,S.prototype.writeUInt8),e[205]=c(205,2,S.prototype.writeUInt16BE),e[206]=c(206,4,S.prototype.writeUInt32BE),e[207]=c(207,8,h),e[208]=c(208,1,S.prototype.writeInt8),e[209]=c(209,2,S.prototype.writeInt16BE),e[210]=c(210,4,S.prototype.writeInt32BE),e[211]=c(211,8,l),e[217]=c(217,1,S.prototype.writeUInt8),e[218]=c(218,2,S.prototype.writeUInt16BE),e[219]=c(219,4,S.prototype.writeUInt32BE),e[220]=c(220,2,S.prototype.writeUInt16BE),e[221]=c(221,4,S.prototype.writeUInt32BE),e[222]=c(222,2,S.prototype.writeUInt16BE),e[223]=c(223,4,S.prototype.writeUInt32BE),e}:o)()}},{"./bufferish":8,"./write-uint8":28,ieee754:32,"int64-buffer":33}],27:[function(e,t,i){var f=e("isarray"),s=e("int64-buffer"),h=s.Uint64BE,d=s.Int64BE,p=e("./bufferish"),g=e("./bufferish-proto"),_=e("./write-token"),v=e("./write-uint8").uint8,y=e("./ext-buffer").ExtBuffer,S="undefined"!=typeof Uint8Array,C="undefined"!=typeof Map,M=[];M[1]=212,M[2]=213,M[4]=214,M[8]=215,M[16]=216,i.getWriteType=function n(t){function w(e,t){if(null===t)return A(e,t);if(a(t))return u(e,t);if(f(t))return function m(e,t){var r=t.length;c[r<16?144+r:r<=65535?220:221](e,r);for(var n=e.codec.encode,i=0;i<r;i++)n(e,t[i])}(e,t);if(h.isUint64BE(t))return function n(e,t){c[207](e,t.toArray())}(e,t);if(d.isInt64BE(t))return function o(e,t){c[211](e,t.toArray())}(e,t);var r=e.codec.getExtPacker(t);return r&&(t=r(t)),t instanceof y?function U(e,t){var r=t.buffer,n=r.length,i=M[n]||(n<255?199:n<=65535?200:201);c[i](e,n),v[t.type](e),e.send(r)}(e,t):void l(e,t)}function A(e,t){c[192](e,t)}function x(e,t){var r=t.length;c[r<255?196:r<=65535?197:198](e,r),e.send(t)}function P(t,r){var e=Object.keys(r),n=e.length;c[n<16?128+n:n<=65535?222:223](t,n);var i=t.codec.encode;e.forEach(function(e){i(t,e),i(t,r[e])})}var c=_.getWriteToken(t),i=t&&t.useraw,s=S&&t&&t.binarraybuffer,a=s?p.isArrayBuffer:p.isBuffer,u=s?function B(e,t){x(e,new Uint8Array(t))}:x,l=C&&t&&t.usemap?function R(n,e){if(!(e instanceof Map))return P(n,e);var t=e.size;c[t<16?128+t:t<=65535?222:223](n,t);var i=n.codec.encode;e.forEach(function(e,t,r){i(n,t),i(n,e)})}:P;return{boolean:function r(e,t){c[t?195:194](e,t)},function:A,number:function e(t,r){var n=0|r;return r!==n?void c[203](t,r):void c[-32<=n&&n<=127?255&n:0<=n?n<=255?204:n<=65535?205:206:-128<=n?208:-32768<=n?209:210](t,n)},object:i?function E(e,t){return a(t)?function k(e,t){var r=t.length;c[r<32?160+r:r<=65535?218:219](e,r),e.send(t)}(e,t):void w(e,t)}:w,string:function b(u){return function r(e,t){var n=5+3*(o=t.length);e.offset=e.reserve(n);var i=e.buffer,s=u(o),a=e.offset+s,o=g.write.call(i,t,a),n=u(o);s!==n&&(t=a+n-s,s=a+o,g.copy.call(i,i,t,a,s)),c[1===n?160+o:n<=3?215+n:219](e,o),e.offset+=o}}(i?function g(e){return e<32?1:e<=65535?3:5}:function v(e){return e<32?1:e<=255?2:e<=65535?3:5}),symbol:A,undefined:A}}},{"./bufferish":8,"./bufferish-proto":6,"./ext-buffer":17,"./write-token":26,"./write-uint8":28,"int64-buffer":33,isarray:34}],28:[function(e,t,r){for(var n=r.uint8=new Array(256),i=0;i<=255;i++)n[i]=function n(r){return function(e){var t=e.reserve(1);e.buffer[t]=r}}(i)},{}],29:[function(r,e,n){(function(e){"use strict";function i(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Buffer.prototype:(null===e&&(e=new Buffer(t)),e.length=t),e}function Buffer(e,t,r){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(e,t,r);if("number"!=typeof e)return f(this,e,t,r);if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return s(this,e)}function f(e,t,r,n){if("number"==typeof t)throw new TypeError(\'"value" argument must not be a number\');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function l(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("\'offset\' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("\'length\' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),Buffer.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Buffer.prototype:e=h(e,t),e}(e,t,r,n):"string"==typeof t?function c(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!Buffer.isEncoding(r))throw new TypeError(\'"encoding" must be a valid string encoding\');var n=0|v(t,r),r=(e=o(e,n)).write(t,r);return r!==n&&(e=e.slice(0,r)),e}(e,t,r):function p(e,t){if(Buffer.isBuffer(t)){var r=0|d(t.length);return 0===(e=o(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function H(e){return e!=e}(t.length)?o(e,0):h(e,t);if("Buffer"===t.type&&A(t.data))return h(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function u(e){if("number"!=typeof e)throw new TypeError(\'"size" argument must be a number\');if(e<0)throw new RangeError(\'"size" argument must not be negative\')}function s(e,t){if(u(t),e=o(e,t<0?0:0|d(t)),!Buffer.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function h(e,t){var r=t.length<0?0:0|d(t.length);e=o(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function d(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function v(e,t){if(Buffer.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return X(e).length;default:if(n)return q(e).length;t=(""+t).toLowerCase(),n=!0}}function g(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return function I(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||n<r)&&(r=n);for(var i="",s=t;s<r;++s)i+=function V(e){return e<16?"0"+e.toString(16):e.toString(16)}(e[s]);return i}(this,t,r);case"utf8":case"utf-8":return k(this,t,r);case"ascii":return function T(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}(this,t,r);case"latin1":case"binary":return function S(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}(this,t,r);case"base64":return function R(e,t,r){return 0===t&&r===e.length?S.fromByteArray(e):S.fromByteArray(e.slice(t,r))}(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function Y(e,t,r){for(var n=e.slice(t,r),i="",s=0;s<n.length;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function b(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function w(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=Buffer.from(t,n)),Buffer.isBuffer(t))return 0===t.length?-1:E(e,t,r,n,i);if("number"==typeof t)return t&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,r):E(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function E(e,t,r,n,i){function o(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a/=s=2,u/=2,r/=2}if(i)for(var c=-1,l=r;l<a;l++)if(o(e,l)===o(t,-1===c?0:l-c)){if(-1===c&&(c=l),l-c+1===u)return c*s}else-1!==c&&(l-=l-c),c=-1;else for(a<r+u&&(r=a-u),l=r;0<=l;l--){for(var f=!0,h=0;h<u;h++)if(o(e,l+h)!==o(t,h)){f=!1;break}if(f)return l}return-1}function x(e,t,r,n){return G(function W(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function P(e,t,r,n){return G(function J(e,t){for(var r,n,i=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,n=n%256,i.push(n),i.push(r);return i}(t,e.length-r),e,r,n)}function k(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var s,a,o,u,c=e[i],l=null,f=239<c?4:223<c?3:191<c?2:1;if(i+f<=r)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(s=e[i+1]))&&(127<(u=(31&c)<<6|63&s)&&(l=u));break;case 3:s=e[i+1],a=e[i+2],128==(192&s)&&128==(192&a)&&(2047<(u=(15&c)<<12|(63&s)<<6|63&a)&&(u<55296||57343<u)&&(l=u));break;case 4:s=e[i+1],a=e[i+2],o=e[i+3],128==(192&s)&&128==(192&a)&&128==(192&o)&&(65535<(u=(15&c)<<18|(63&s)<<12|(63&a)<<6|63&o)&&u<1114112&&(l=u))}null===l?(l=65533,f=1):65535<l&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=f}return function _(e){var t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=I));return r}(n)}function C(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+t)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,r,n,i,s){if(!Buffer.isBuffer(e))throw new TypeError(\'"buffer" argument must be a Buffer instance\');if(i<t||t<s)throw new RangeError(\'"value" argument is out of bounds\');if(r+n>e.length)throw new RangeError("Index out of range")}function O(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,s=Math.min(e.length-r,2);i<s;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function L(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,s=Math.min(e.length-r,4);i<s;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function M(e,t,r,n){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function N(e,t,r,n,i){return i||M(e,0,r,4),B.write(e,t,r,n,23,4),r+4}function F(e,t,r,n,i){return i||M(e,0,r,8),B.write(e,t,r,n,52,8),r+8}function j(e){if((e=function z(e){return e.trim?e.trim():e.replace(/^\\s+|\\s+$/g,"")}(e).replace(t,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function q(e,t){t=t||1/0;for(var r,n=e.length,i=null,s=[],a=0;a<n;++a){if(55295<(r=e.charCodeAt(a))&&r<57344){if(!i){if(56319<r){-1<(t-=3)&&s.push(239,191,189);continue}if(a+1===n){-1<(t-=3)&&s.push(239,191,189);continue}i=r;continue}if(r<56320){-1<(t-=3)&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&-1<(t-=3)&&s.push(239,191,189);if(i=null,r<128){if(--t<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function X(e){return S.toByteArray(j(e))}function G(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}var S=r("base64-js"),B=r("ieee754"),A=r("isarray");n.Buffer=Buffer,n.SlowBuffer=function y(e){return+e!=e&&(e=0),Buffer.alloc(+e)},n.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function n(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function foo(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),n.kMaxLength=i(),Buffer.poolSize=8192,Buffer._augment=function(e){return e.__proto__=Buffer.prototype,e},Buffer.from=function(e,t,r){return f(null,e,t,r)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(e,t,r){return function a(e,t,r,n){return u(t),!(t<=0)&&void 0!==r?"string"==typeof n?o(e,t).fill(r,n):o(e,t).fill(r):o(e,t)}(null,e,t,r)},Buffer.allocUnsafe=function(e){return s(null,e)},Buffer.allocUnsafeSlow=function(e){return s(null,e)},Buffer.isBuffer=function(e){return!(null==e||!e._isBuffer)},Buffer.compare=function(e,t){if(!Buffer.isBuffer(e)||!Buffer.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},Buffer.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(e,t){if(!A(e))throw new TypeError(\'"list" argument must be an Array of Buffers\');if(0===e.length)return Buffer.alloc(0);if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;for(var r=Buffer.allocUnsafe(t),n=0,i=0;i<e.length;++i){var s=e[i];if(!Buffer.isBuffer(s))throw new TypeError(\'"list" argument must be an Array of Buffers\');s.copy(r,n),n+=s.length}return r},Buffer.byteLength=v,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},Buffer.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},Buffer.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},Buffer.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?k(this,0,e):g.apply(this,arguments)},Buffer.prototype.equals=function(e){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Buffer.compare(this,e)},Buffer.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},Buffer.prototype.compare=function(e,t,r,n,i){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(i<=n&&r<=t)return 0;if(i<=n)return-1;if(r<=t)return 1;if(this===e)return 0;for(var s=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),o=Math.min(s,a),u=this.slice(n,i),c=e.slice(t,r),l=0;l<o;++l)if(u[l]!==c[l]){s=u[l],a=c[l];break}return s<a?-1:a<s?1:0},Buffer.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},Buffer.prototype.indexOf=function(e,t,r){return w(this,e,t,r,!0)},Buffer.prototype.lastIndexOf=function(e,t,r){return w(this,e,t,r,!1)},Buffer.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||i<r)&&(r=i),0<e.length&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var s=!1;;)switch(n){case"hex":return function A(e,t,r,n){r=Number(r)||0;var i=e.length-r;if(n?i<(n=Number(n))&&(n=i):n=i,(i=t.length)%2!=0)throw new TypeError("Invalid hex string");i/2<n&&(n=i/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[r+s]=a}return s}(this,e,t,r);case"utf8":case"utf-8":return function m(e,t,r,n){return G(q(t,e.length-r),e,r,n)}(this,e,t,r);case"ascii":return x(this,e,t,r);case"latin1":case"binary":return x(this,e,t,r);case"base64":return function U(e,t,r,n){return G(X(t),e,r,n)}(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;Buffer.prototype.slice=function(e,t){var r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e),Buffer.TYPED_ARRAY_SUPPORT)(i=this.subarray(e,t)).__proto__=Buffer.prototype;else for(var n=t-e,i=new Buffer(n,void 0),s=0;s<n;++s)i[s]=this[s+e];return i},Buffer.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n},Buffer.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var n=this[e+--t],i=1;0<t&&(i*=256);)n+=this[e+--t]*i;return n},Buffer.prototype.readUInt8=function(e,t){return t||C(e,1,this.length),this[e]},Buffer.prototype.readUInt16LE=function(e,t){return t||C(e,2,this.length),this[e]|this[e+1]<<8},Buffer.prototype.readUInt16BE=function(e,t){return t||C(e,2,this.length),this[e]<<8|this[e+1]},Buffer.prototype.readUInt32LE=function(e,t){return t||C(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer.prototype.readUInt32BE=function(e,t){return t||C(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return(i*=128)<=n&&(n-=Math.pow(2,8*t)),n},Buffer.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var n=t,i=1,s=this[e+--n];0<n&&(i*=256);)s+=this[e+--n]*i;return(i*=128)<=s&&(s-=Math.pow(2,8*t)),s},Buffer.prototype.readInt8=function(e,t){return t||C(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer.prototype.readInt16LE=function(e,t){t||C(e,2,this.length);e=this[e]|this[e+1]<<8;return 32768&e?4294901760|e:e},Buffer.prototype.readInt16BE=function(e,t){t||C(e,2,this.length);e=this[e+1]|this[e]<<8;return 32768&e?4294901760|e:e},Buffer.prototype.readInt32LE=function(e,t){return t||C(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer.prototype.readInt32BE=function(e,t){return t||C(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer.prototype.readFloatLE=function(e,t){return t||C(e,4,this.length),B.read(this,e,!0,23,4)},Buffer.prototype.readFloatBE=function(e,t){return t||C(e,4,this.length),B.read(this,e,!1,23,4)},Buffer.prototype.readDoubleLE=function(e,t){return t||C(e,8,this.length),B.read(this,e,!0,52,8)},Buffer.prototype.readDoubleBE=function(e,t){return t||C(e,8,this.length),B.read(this,e,!1,52,8)},Buffer.prototype.writeUIntLE=function(e,t,r,n){e=+e,t|=0,r|=0,n||D(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},Buffer.prototype.writeUIntBE=function(e,t,r,n){e=+e,t|=0,r|=0,n||D(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,s=1;for(this[t+i]=255&e;0<=--i&&(s*=256);)this[t+i]=e/s&255;return t+r},Buffer.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Buffer.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},Buffer.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},Buffer.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):L(this,e,t,!0),t+4},Buffer.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},Buffer.prototype.writeIntLE=function(e,t,r,n){e=+e,t|=0,n||D(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var i=0,s=1,a=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},Buffer.prototype.writeIntBE=function(e,t,r,n){e=+e,t|=0,n||D(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var i=r-1,s=1,a=0;for(this[t+i]=255&e;0<=--i&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},Buffer.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Buffer.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},Buffer.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},Buffer.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):L(this,e,t,!0),t+4},Buffer.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},Buffer.prototype.writeFloatLE=function(e,t,r){return N(this,e,t,!0,r)},Buffer.prototype.writeFloatBE=function(e,t,r){return N(this,e,t,!1,r)},Buffer.prototype.writeDoubleLE=function(e,t,r){return F(this,e,t,!0,r)},Buffer.prototype.writeDoubleBE=function(e,t,r){return F(this,e,t,!1,r)},Buffer.prototype.copy=function(e,t,r,n){if(r=r||0,n||0===n||(n=this.length),t>=e.length&&(t=e.length),t=t||0,0<n&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,s=n-r;if(this===e&&r<t&&t<n)for(i=s-1;0<=i;--i)e[i+t]=this[i+r];else if(s<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+s),t);return s},Buffer.prototype.fill=function(e,t,r,n){if("string"==typeof e){var i;if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length&&(i=e.charCodeAt(0))<256&&(e=i),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!Buffer.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(e=e||0))for(o=t;o<r;++o)this[o]=e;else for(var s=Buffer.isBuffer(e)?e:q(new Buffer(e,n).toString()),a=s.length,o=0;o<r-t;++o)this[o+t]=s[o%a];return this};var t=/[^+\\/0-9A-Za-z-_]/g}).call(this,void 0!==m.g?m.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":30,ieee754:32,isarray:34}],30:[function(e,t,r){"use strict";function n(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function u(e,t,r){for(var n,i=[],s=t;s<r;s+=3)n=(e[s]<<16)+(e[s+1]<<8)+e[s+2],i.push(function f(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[63&e]}(n));return i.join("")}r.byteLength=function i(e){return 3*e.length/4-n(e)},r.toByteArray=function o(e){for(var t,r=e.length,i=n(e),s=new d(3*r/4-i),a=0<i?r-4:r,u=0,c=0;c<a;c+=4,0)t=h[e.charCodeAt(c)]<<18|h[e.charCodeAt(c+1)]<<12|h[e.charCodeAt(c+2)]<<6|h[e.charCodeAt(c+3)],s[u++]=t>>16&255,s[u++]=t>>8&255,s[u++]=255&t;return 2===i?(t=h[e.charCodeAt(c)]<<2|h[e.charCodeAt(c+1)]>>4,s[u++]=255&t):1===i&&(t=h[e.charCodeAt(c)]<<10|h[e.charCodeAt(c+1)]<<4|h[e.charCodeAt(c+2)]>>2,s[u++]=t>>8&255,s[u++]=255&t),s},r.fromByteArray=function a(e){for(var t,r=e.length,n=r%3,i="",s=[],o=0,c=r-n;o<c;o+=16383)s.push(u(e,o,c<o+16383?c:o+16383));return 1==n?(t=e[r-1],i+=l[t>>2],i+=l[t<<4&63],i+="=="):2==n&&(t=(e[r-2]<<8)+e[r-1],i+=l[t>>10],i+=l[t>>4&63],i+=l[t<<2&63],i+="="),s.push(i),s.join("")};for(var l=[],h=[],d="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,p=s.length;c<p;++c)l[c]=s[c],h[s.charCodeAt(c)]=c;h["-".charCodeAt(0)]=62,h["_".charCodeAt(0)]=63},{}],31:[function(t,a,r){!function(t){function e(e){for(var t in r)e[t]=r[t];return e}function o(t,r){var n,i=this;if(arguments.length){if(r){if(n=u(i,t,!0)){if(!(n=n.filter(function e(t){return t!==r&&t.originalListener!==r})).length)return o.call(i,t);i[s][t]=n}}else if((n=i[s])&&(delete n[t],!Object.keys(n).length))return o.call(i)}else delete i[s];return i}function u(e,t,r){if(!r||e[s]){e=e[s]||(e[s]={});return e[t]||(e[t]=[])}}void 0!==a&&(a.exports=t);var s="listeners",r={on:function n(e,t){return u(this,e).push(t),this},once:function i(t,r){function e(){o.call(n,t,e),r.apply(this,arguments)}var n=this;return e.originalListener=r,u(n,t).push(e),n},off:o,emit:function f(t,r){var s=this,a=u(s,t,!0);if(!a)return!1;var o,c=arguments.length;return 1===c?a.forEach(function e(t){t.call(s)}):2===c?a.forEach(function n(e){e.call(s,r)}):(o=Array.prototype.slice.call(arguments,1),a.forEach(function i(e){e.apply(s,o)})),!!a.length}};e(t.prototype),t.mixin=e}(function n(){if(!(this instanceof n))return new n})},{}],32:[function(e,t,r){r.read=function(e,t,r,n,i){var s,a,o=8*i-n-1,u=(1<<o)-1,c=u>>1,l=-7,f=r?i-1:0,h=r?-1:1,r=e[t+f];for(f+=h,s=r&(1<<-l)-1,r>>=-l,l+=o;0<l;s=256*s+e[t+f],f+=h,l-=8);for(a=s&(1<<-l)-1,s>>=-l,l+=n;0<l;a=256*a+e[t+f],f+=h,l-=8);if(0===s)s=1-c;else{if(s===u)return a?NaN:1/0*(r?-1:1);a+=Math.pow(2,n),s-=c}return(r?-1:1)*a*Math.pow(2,s-n)},r.write=function(e,t,r,n,i,s){var a,o,u=8*s-i-1,c=(1<<u)-1,l=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:s-1,d=n?1:-1,s=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(n=Math.pow(2,-a))<1&&(a--,n*=2),2<=(t+=1<=a+l?f/n:f*Math.pow(2,1-l))*n&&(a++,n/=2),c<=a+l?(o=0,a=c):1<=a+l?(o=(t*n-1)*Math.pow(2,i),a+=l):(o=t*Math.pow(2,l-1)*Math.pow(2,i),a=0));8<=i;e[r+h]=255&o,h+=d,o/=256,i-=8);for(a=a<<i|o,u+=i;0<u;e[r+h]=255&a,h+=d,a/=256,u-=8);e[r+h-d]|=128*s}},{}],33:[function(e,t,r){(function(n){var A,D,I,W,T,L,U,g,F;function o(e,t,g){function i(e,t,r,n){return this instanceof i?function v(e,t,r,n,i){if(T&&L&&(t instanceof L&&(t=new T(t)),n instanceof L&&(n=new T(n))),!(t||r||n||D))return void(e.buffer=h(U,0));{var a;s(t,r)||(a=D||Array,i=r,n=t,r=0,t=new a(8))}e.buffer=t,e.offset=r|=0,I!==_typeof(n)&&("string"==typeof n?function x(e,t,r,n){var i=0,s=r.length,a=0,o=0;"-"===r[0]&&i++;for(var u=i;i<s;){var c=parseInt(r[i++],n);if(!(0<=c))break;o=o*n+c,a=a*n+Math.floor(o/F),o%=F}u&&(a=~a,o?o=F-o:a++),k(e,t+m,a),k(e,t+w,o)}(t,r,n,i||10):s(n,i)?c(t,r,n,i):"number"==typeof i?(k(t,r+m,n),k(t,r+w,i)):0<n?E(t,r,n):n<0?B(t,r,n):c(t,r,U,0))}(this,e,t,r,n):new i(e,t,r,n)}function P(){var e=this.buffer,t=this.offset,r=_(e,t+m),t=_(e,t+w);return g||(r|=0),r?r*F+t:t}function k(e,t,r){e[t+C]=255&r,r>>=8,e[t+b]=255&r,r>>=8,e[t+S]=255&r,r>>=8,e[t+n]=255&r}function _(e,t){return 16777216*e[t+n]+(e[t+S]<<16)+(e[t+b]<<8)+e[t+C]}var m=t?0:4,w=t?4:0,n=t?0:3,S=t?1:2,b=t?2:1,C=t?3:0,E=t?l:d,B=t?p:y,r=i.prototype,t="is"+e,M="_"+t;return r.buffer=void 0,r.offset=0,r[M]=!0,r.toNumber=P,r.toString=function R(e){var t=this.buffer,r=this.offset,n=_(t,r+m),i=_(t,r+w),s="";for((r=!g&&2147483648&n)&&(n=~n,i=F-i),e=e||10;;){var a=n%e*F+i,n=Math.floor(n/e),i=Math.floor(a/e),s=(a%e).toString(e)+s;if(!n&&!i)break}return r&&(s="-"+s),s},r.toJSON=P,r.toArray=f,W&&(r.toBuffer=u),T&&(r.toArrayBuffer=a),i[t]=function o(e){return!(!e||!e[M])},A[e]=i}function f(e){var t=this.buffer,r=this.offset;return D=null,!1!==e&&0===r&&8===t.length&&g(t)?t:h(t,r)}function u(e){var t=this.buffer,r=this.offset;if(D=W,!1!==e&&0===r&&8===t.length&&n.isBuffer(t))return t;e=new W(8);return c(e,0,t,r),e}function a(e){var t=this.buffer,r=this.offset,n=t.buffer;if(D=T,!1!==e&&0===r&&n instanceof L&&8===n.byteLength)return n;n=new T(8);return c(n,0,t,r),n.buffer}function s(e,t){var r=e&&e.length;return t|=0,r&&t+8<=r&&"string"!=typeof e[t]}function c(e,t,r,n){t|=0,n|=0;for(var i=0;i<8;i++)e[t++]=255&r[n++]}function h(e,t){return Array.prototype.slice.call(e,t,t+8)}function l(e,t,r){for(var n=t+8;t<n;)e[--n]=255&r,r/=256}function p(e,t,r){var n=t+8;for(r++;t<n;)e[--n]=255&-r^255,r/=256}function d(e,t,r){for(var n=t+8;t<n;)e[t++]=255&r,r/=256}function y(e,t,r){var n=t+8;for(r++;t<n;)e[t++]=255&-r^255,r/=256}A="object"==_typeof(r)&&"string"!=typeof r.nodeName?r:this||{},W=(I="undefined")!==_typeof(n)&&n,T=I!==("undefined"==typeof Uint8Array?"undefined":_typeof(Uint8Array))&&Uint8Array,L=I!==("undefined"==typeof ArrayBuffer?"undefined":_typeof(ArrayBuffer))&&ArrayBuffer,U=[0,0,0,0,0,0,0,0],g=Array.isArray||function v(e){return!!e&&"[object Array]"==Object.prototype.toString.call(e)},F=4294967296,o("Uint64BE",!0,!0),o("Int64BE",!0,!1),o("Uint64LE",!1,!0),o("Int64LE",!1,!1)}).call(this,e("buffer").Buffer)},{buffer:29}],34:[function(e,t,r){var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},{}]},{},[1])(1)},"object"==_typeof(t)?e.exports=w():(g=[],void 0===(w="function"==typeof(w=w)?w.apply(t,g):w)||(e.exports=w))},12:function(e,t){var r,n;function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n=function(){return function r(i,s,a){function h(t,e){if(!s[t]){if(!i[t]){if(0,o)return o(t,!0);var n=new Error("Cannot find module \'"+t+"\'");throw n.code="MODULE_NOT_FOUND",n}n=s[t]={exports:{}};i[t][0].call(n.exports,function(e){return h(i[t][1][e]||e)},n,n.exports,r,i,s,a)}return s[t].exports}for(var o=void 0,e=0;e<a.length;e++)h(a[e]);return h}({1:[function(e,t,r){"use strict";var a=e("./zlib/deflate"),o=e("./utils/common"),u=e("./utils/strings"),n=e("./zlib/messages"),s=e("./zlib/zstream"),l=Object.prototype.toString,f=0,h=-1,d=0,p=8;function c(e){if(!(this instanceof c))return new c(e);this.options=o.assign({level:h,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;e=a.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(e!==f)throw new Error(n[e]);if(t.header&&a.deflateSetHeader(this.strm,t.header),t.dictionary){t="string"==typeof t.dictionary?u.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary;if((e=a.deflateSetDictionary(this.strm,t))!==f)throw new Error(n[e]);this._dict_set=!0}}function i(e,t){t=new c(t);if(t.push(e,!0),t.err)throw t.msg||n[t.err];return t.result}c.prototype.push=function(e,t){var r,n,i=this.strm,s=this.options.chunkSize;if(this.ended)return!1;n=t===~~t?t:!0===t?4:0,"string"==typeof e?i.input=u.string2buf(e):"[object ArrayBuffer]"===l.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new o.Buf8(s),i.next_out=0,i.avail_out=s),1!==(r=a.deflate(i,n))&&r!==f)return this.onEnd(r),!(this.ended=!0)}while(0!==i.avail_out&&(0!==i.avail_in||4!==n&&2!==n)||("string"===this.options.to?this.onData(u.buf2binstring(o.shrinkBuf(i.output,i.next_out))):this.onData(o.shrinkBuf(i.output,i.next_out))),(0<i.avail_in||0===i.avail_out)&&1!==r);return 4===n?(r=a.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===f):2!==n||(this.onEnd(f),!(i.avail_out=0))},c.prototype.onData=function(e){this.chunks.push(e)},c.prototype.onEnd=function(e){e===f&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Deflate=c,r.deflate=i,r.deflateRaw=function(e,t){return(t=t||{}).raw=!0,i(e,t)},r.gzip=function(e,t){return(t=t||{}).gzip=!0,i(e,t)}},{"./utils/common":3,"./utils/strings":4,"./zlib/deflate":8,"./zlib/messages":13,"./zlib/zstream":15}],2:[function(e,t,r){"use strict";var f=e("./zlib/inflate"),h=e("./utils/common"),d=e("./utils/strings"),p=e("./zlib/constants"),n=e("./zlib/messages"),i=e("./zlib/zstream"),a=e("./zlib/gzheader"),g=Object.prototype.toString;function s(e){if(!(this instanceof s))return new s(e);this.options=h.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;e=f.inflateInit2(this.strm,t.windowBits);if(e!==p.Z_OK)throw new Error(n[e]);if(this.header=new a,f.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=d.string2buf(t.dictionary):"[object ArrayBuffer]"===g.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=f.inflateSetDictionary(this.strm,t.dictionary))!==p.Z_OK))throw new Error(n[e])}function o(e,t){t=new s(t);if(t.push(e,!0),t.err)throw t.msg||n[t.err];return t.result}s.prototype.push=function(e,t){var r,n,i,s,a,o=this.strm,u=this.options.chunkSize,c=this.options.dictionary,l=!1;if(this.ended)return!1;n=t===~~t?t:!0===t?p.Z_FINISH:p.Z_NO_FLUSH,"string"==typeof e?o.input=d.binstring2buf(e):"[object ArrayBuffer]"===g.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new h.Buf8(u),o.next_out=0,o.avail_out=u),(r=f.inflate(o,p.Z_NO_FLUSH))===p.Z_NEED_DICT&&c&&(r=f.inflateSetDictionary(this.strm,c)),r===p.Z_BUF_ERROR&&!0===l&&(r=p.Z_OK,l=!1),r!==p.Z_STREAM_END&&r!==p.Z_OK)return this.onEnd(r),!(this.ended=!0)}while(o.next_out&&(0!==o.avail_out&&r!==p.Z_STREAM_END&&(0!==o.avail_in||n!==p.Z_FINISH&&n!==p.Z_SYNC_FLUSH)||("string"===this.options.to?(i=d.utf8border(o.output,o.next_out),s=o.next_out-i,a=d.buf2string(o.output,i),o.next_out=s,o.avail_out=u-s,s&&h.arraySet(o.output,o.output,i,s,0),this.onData(a)):this.onData(h.shrinkBuf(o.output,o.next_out)))),0===o.avail_in&&0===o.avail_out&&(l=!0),(0<o.avail_in||0===o.avail_out)&&r!==p.Z_STREAM_END);return r===p.Z_STREAM_END&&(n=p.Z_FINISH),n===p.Z_FINISH?(r=f.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===p.Z_OK):n!==p.Z_SYNC_FLUSH||(this.onEnd(p.Z_OK),!(o.avail_out=0))},s.prototype.onData=function(e){this.chunks.push(e)},s.prototype.onEnd=function(e){e===p.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Inflate=s,r.inflate=o,r.inflateRaw=function(e,t){return(t=t||{}).raw=!0,o(e,t)},r.ungzip=o},{"./utils/common":3,"./utils/strings":4,"./zlib/constants":6,"./zlib/gzheader":9,"./zlib/inflate":11,"./zlib/messages":13,"./zlib/zstream":15}],3:[function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=_typeof(r))throw new TypeError(r+"must be non-object");for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function arraySet(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var s=0;s<n;s++)e[i+s]=t[r+s]},flattenChunks:function flattenChunks(e){for(var t,r,n,i,s=t=0,a=e.length;s<a;s++)t+=e[s].length;for(i=new Uint8Array(t),s=r=0,a=e.length;s<a;s++)n=e[s],i.set(n,r),r+=n.length;return i}},s={arraySet:function arraySet(e,t,r,n,i){for(var s=0;s<n;s++)e[i+s]=t[r+s]},flattenChunks:function flattenChunks(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,s))},r.setTyped(n)},{}],4:[function(e,t,r){"use strict";var u=e("./common"),i=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){s=!1}for(var c=new u.Buf8(256),n=0;n<256;n++)c[n]=252<=n?6:248<=n?5:240<=n?4:224<=n?3:192<=n?2:1;function d(e,t){if(t<65534&&(e.subarray&&s||!e.subarray&&i))return String.fromCharCode.apply(null,u.shrinkBuf(e,t));for(var r="",n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r}c[254]=c[254]=1,r.string2buf=function(e){for(var t,r,n,i,s=e.length,a=0,o=0;o<s;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(n=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),a+=r<128?1:r<2048?2:r<65536?3:4;for(t=new u.Buf8(a),o=i=0;i<a;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(n=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),r<128?t[i++]=r:(r<2048?t[i++]=192|r>>>6:(r<65536?t[i++]=224|r>>>12:(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63),t[i++]=128|r>>>6&63),t[i++]=128|63&r);return t},r.buf2binstring=function(e){return d(e,e.length)},r.binstring2buf=function(e){for(var t=new u.Buf8(e.length),r=0,n=t.length;r<n;r++)t[r]=e.charCodeAt(r);return t},r.buf2string=function(e,t){for(var r,n,i,s=t||e.length,a=new Array(2*s),o=r=0;o<s;)if((n=e[o++])<128)a[r++]=n;else if(4<(i=c[n]))a[r++]=65533,o+=i-1;else{for(n&=2===i?31:3===i?15:7;1<i&&o<s;)n=n<<6|63&e[o++],i--;1<i?a[r++]=65533:n<65536?a[r++]=n:(n-=65536,a[r++]=55296|n>>10&1023,a[r++]=56320|1023&n)}return d(a,r)},r.utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return!(r<0)&&0!==r&&r+c[e[r]]>t?r:t}},{"./common":3}],5:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){for(var i=65535&e|0,s=e>>>16&65535|0,a=0;0!==r;){for(r-=a=2e3<r?2e3:r;s=s+(i=i+t[n++]|0)|0,--a;);i%=65521,s%=65521}return i|s<<16|0}},{}],6:[function(e,t,r){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],7:[function(e,t,r){"use strict";var o=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t,r,n){var i=o,s=n+r;e^=-1;for(var a=n;a<s;a++)e=e>>>8^i[255&(e^t[a])];return-1^e}},{}],8:[function(e,t,r){"use strict";var o,f=e("../utils/common"),u=e("./trees"),h=e("./adler32"),d=e("./crc32"),n=e("./messages"),c=0,l=0,p=-2,i=2,g=8,s=286,a=30,_=19,v=2*s+1,y=15,m=3,w=258,S=w+m+1,b=42,k=113;function N(e,t){return e.msg=n[t],t}function O(e){return(e<<1)-(4<e?9:0)}function D(e){for(var t=e.length;0<=--t;)e[t]=0}function I(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(f.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function U(e,t){u._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,I(e.strm)}function T(e,t){e.pending_buf[e.pending++]=t}function F(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function L(e,t){var r,n,i=e.max_chain_length,s=e.strstart,a=e.prev_length,o=e.nice_match,u=e.strstart>e.w_size-S?e.strstart-(e.w_size-S):0,c=e.window,l=e.w_mask,f=e.prev,h=e.strstart+w,d=c[s+a-1],p=c[s+a];e.prev_length>=e.good_match&&(i>>=2),o>e.lookahead&&(o=e.lookahead);do{if(c[(r=t)+a]===p&&c[r+a-1]===d&&c[r]===c[s]&&c[++r]===c[s+1]){for(s+=2,r++;c[++s]===c[++r]&&c[++s]===c[++r]&&c[++s]===c[++r]&&c[++s]===c[++r]&&c[++s]===c[++r]&&c[++s]===c[++r]&&c[++s]===c[++r]&&c[++s]===c[++r]&&s<h;);if(n=w-(h-s),s=h-w,a<n){if(e.match_start=t,o<=(a=n))break;d=c[s+a-1],p=c[s+a]}}}while((t=f[t&l])>u&&0!=--i);return a<=e.lookahead?a:e.lookahead}function H(e){var t,r,n,i,s,a,o,u,c,l=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=l+(l-S)){for(f.arraySet(e.window,e.window,l,l,0),e.match_start-=l,e.strstart-=l,e.block_start-=l,t=r=e.hash_size;n=e.head[--t],e.head[t]=l<=n?n-l:0,--r;);for(t=r=l;n=e.prev[--t],e.prev[t]=l<=n?n-l:0,--r;);i+=l}if(0===e.strm.avail_in)break;if(a=e.strm,o=e.window,u=e.strstart+e.lookahead,c=void 0,i<(c=a.avail_in)&&(c=i),r=0===c?0:(a.avail_in-=c,f.arraySet(o,a.input,a.next_in,c,u),1===a.state.wrap?a.adler=h(a.adler,o,c,u):2===a.state.wrap&&(a.adler=d(a.adler,o,c,u)),a.next_in+=c,a.total_in+=c,c),e.lookahead+=r,e.lookahead+e.insert>=m)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+m-1])&e.hash_mask,e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<m)););}while(e.lookahead<S&&0!==e.strm.avail_in)}function j(e,t){for(var r,n;;){if(e.lookahead<S){if(H(e),e.lookahead<S&&t===c)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=m&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+m-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-S&&(e.match_length=L(e,r)),e.match_length>=m)if(n=u._tr_tally(e,e.strstart-e.match_start,e.match_length-m),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=m){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+m-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=u._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(U(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<m-1?e.strstart:m-1,4===t?(U(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(U(e,!1),0===e.strm.avail_out)?1:2}function K(e,t){for(var r,n,i;;){if(e.lookahead<S){if(H(e),e.lookahead<S&&t===c)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=m&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+m-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=m-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-S&&(e.match_length=L(e,r),e.match_length<=5&&(1===e.strategy||e.match_length===m&&4096<e.strstart-e.match_start)&&(e.match_length=m-1)),e.prev_length>=m&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-m,n=u._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-m),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+m-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=m-1,e.strstart++,n&&(U(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=u._tr_tally(e,0,e.window[e.strstart-1]))&&U(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=u._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<m-1?e.strstart:m-1,4===t?(U(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(U(e,!1),0===e.strm.avail_out)?1:2}function M(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function P(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new f.Buf16(2*v),this.dyn_dtree=new f.Buf16(2*(2*a+1)),this.bl_tree=new f.Buf16(2*(2*_+1)),D(this.dyn_ltree),D(this.dyn_dtree),D(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new f.Buf16(y+1),this.heap=new f.Buf16(2*s+1),D(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new f.Buf16(2*s+1),D(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Y(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=i,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?b:k,e.adler=2===t.wrap?0:1,t.last_flush=c,u._tr_init(t),l):N(e,p)}function q(e){var t=Y(e);return t===l&&((e=e.state).window_size=2*e.w_size,D(e.head),e.max_lazy_match=o[e.level].max_lazy,e.good_match=o[e.level].good_length,e.nice_match=o[e.level].nice_length,e.max_chain_length=o[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=m-1,e.match_available=0,e.ins_h=0),t}function G(e,t,r,n,i,s){if(!e)return p;var a=1;if(-1===t&&(t=6),n<0?(a=0,n=-n):15<n&&(a=2,n-=16),i<1||9<i||r!==g||n<8||15<n||t<0||9<t||s<0||4<s)return N(e,p);8===n&&(n=9);var o=new P;return(e.state=o).strm=e,o.wrap=a,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+m-1)/m),o.window=new f.Buf8(2*o.w_size),o.head=new f.Buf16(o.hash_size),o.prev=new f.Buf16(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new f.Buf8(o.pending_buf_size),o.d_buf=+o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=t,o.strategy=s,o.method=r,q(e)}o=[new M(0,0,0,0,function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(H(e),0===e.lookahead&&t===c)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,U(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-S&&(U(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(U(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(U(e,!1),e.strm.avail_out),1)}),new M(4,4,8,4,j),new M(4,5,16,8,j),new M(4,6,32,32,j),new M(4,4,16,16,K),new M(8,16,32,32,K),new M(8,16,128,128,K),new M(8,32,128,256,K),new M(32,128,258,1024,K),new M(32,258,258,4096,K)],r.deflateInit=function(e,t){return G(e,t,g,15,8,0)},r.deflateInit2=G,r.deflateReset=q,r.deflateResetKeep=Y,r.deflateSetHeader=function(e,t){return!e||!e.state||2!==e.state.wrap?p:(e.state.gzhead=t,l)},r.deflate=function(e,t){var r,n,i,s;if(!e||!e.state||5<t||t<0)return e?N(e,p):p;if(r=e.state,!e.output||!e.input&&0!==e.avail_in||666===r.status&&4!==t)return N(e,0===e.avail_out?-5:p);if(r.strm=e,a=r.last_flush,r.last_flush=t,r.status===b&&(2===r.wrap?(e.adler=0,T(r,31),T(r,139),T(r,8),r.gzhead?(T(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),T(r,255&r.gzhead.time),T(r,r.gzhead.time>>8&255),T(r,r.gzhead.time>>16&255),T(r,r.gzhead.time>>24&255),T(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),T(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(T(r,255&r.gzhead.extra.length),T(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=d(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(T(r,0),T(r,0),T(r,0),T(r,0),T(r,0),T(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),T(r,3),r.status=k)):(s=g+(r.w_bits-8<<4)<<8,s|=(2<=r.strategy||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(s|=32),s+=31-s%31,r.status=k,F(r,s),0!==r.strstart&&(F(r,e.adler>>>16),F(r,65535&e.adler)),e.adler=1)),69===r.status)if(r.gzhead.extra){for(n=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>n&&(e.adler=d(e.adler,r.pending_buf,r.pending-n,n)),I(e),n=r.pending,r.pending!==r.pending_buf_size));)T(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>n&&(e.adler=d(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=d(e.adler,r.pending_buf,r.pending-n,n)),I(e),n=r.pending,r.pending===r.pending_buf_size)){i=1;break}}while(T(r,i=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0),0!==i);r.gzhead.hcrc&&r.pending>n&&(e.adler=d(e.adler,r.pending_buf,r.pending-n,n)),0===i&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=d(e.adler,r.pending_buf,r.pending-n,n)),I(e),n=r.pending,r.pending===r.pending_buf_size)){i=1;break}}while(T(r,i=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0),0!==i);r.gzhead.hcrc&&r.pending>n&&(e.adler=d(e.adler,r.pending_buf,r.pending-n,n)),0===i&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&I(e),r.pending+2<=r.pending_buf_size&&(T(r,255&e.adler),T(r,e.adler>>8&255),e.adler=0,r.status=k)):r.status=k),0!==r.pending){if(I(e),0===e.avail_out)return r.last_flush=-1,l}else if(0===e.avail_in&&O(t)<=O(a)&&4!==t)return N(e,-5);if(666===r.status&&0!==e.avail_in)return N(e,-5);if(0!==e.avail_in||0!==r.lookahead||t!==c&&666!==r.status){var a=2===r.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(H(e),0===e.lookahead)){if(t===c)return 1;break}if(e.match_length=0,r=u._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(U(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(U(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(U(e,!1),0===e.strm.avail_out)?1:2}(r,t):3===r.strategy?function(e,t){for(var r,n,i,s,a=e.window;;){if(e.lookahead<=w){if(H(e),e.lookahead<=w&&t===c)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=m&&0<e.strstart&&(n=a[i=e.strstart-1])===a[++i]&&n===a[++i]&&n===a[++i]){for(s=e.strstart+w;n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<s;);e.match_length=w-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=m?(r=u._tr_tally(e,1,e.match_length-m),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=u._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(U(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(U(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(U(e,!1),0===e.strm.avail_out)?1:2}(r,t):o[r.level].func(r,t);if(3!==a&&4!==a||(r.status=666),1===a||3===a)return 0===e.avail_out&&(r.last_flush=-1),l;if(2===a&&(1===t?u._tr_align(r):5!==t&&(u._tr_stored_block(r,0,0,!1),3===t&&(D(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),I(e),0===e.avail_out))return r.last_flush=-1,l}return 4!==t?l:r.wrap<=0?1:(2===r.wrap?(T(r,255&e.adler),T(r,e.adler>>8&255),T(r,e.adler>>16&255),T(r,e.adler>>24&255),T(r,255&e.total_in),T(r,e.total_in>>8&255),T(r,e.total_in>>16&255),T(r,e.total_in>>24&255)):(F(r,e.adler>>>16),F(r,65535&e.adler)),I(e),0<r.wrap&&(r.wrap=-r.wrap),0!==r.pending?l:1)},r.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==b&&69!==t&&73!==t&&91!==t&&103!==t&&t!==k&&666!==t?N(e,p):(e.state=null,t===k?N(e,-3):l):p},r.deflateSetDictionary=function(e,t){var r,n,i,s,a,o,u,c=t.length;if(!e||!e.state)return p;if(2===(s=(r=e.state).wrap)||1===s&&r.status!==b||r.lookahead)return p;for(1===s&&(e.adler=h(e.adler,t,c,0)),r.wrap=0,c>=r.w_size&&(0===s&&(D(r.head),r.strstart=0,r.block_start=0,r.insert=0),u=new f.Buf8(r.w_size),f.arraySet(u,t,c-r.w_size,r.w_size,0),t=u,c=r.w_size),a=e.avail_in,o=e.next_in,u=e.input,e.avail_in=c,e.next_in=0,e.input=t,H(r);r.lookahead>=m;){for(n=r.strstart,i=r.lookahead-(m-1);r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+m-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++,--i;);r.strstart=n,r.lookahead=m-1,H(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=m-1,r.match_available=0,e.next_in=o,e.input=u,e.avail_in=a,r.wrap=s,l},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./messages":13,"./trees":14}],9:[function(e,t,r){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],10:[function(e,t,r){"use strict";t.exports=function(e,t){var r,n,i,s,a,o,u=e.state,c=e.next_in,l=e.input,f=c+(e.avail_in-5),h=e.next_out,d=e.output,p=h-(t-e.avail_out),g=h+(e.avail_out-257),_=u.dmax,v=u.wsize,y=u.whave,m=u.wnext,w=u.window,S=u.hold,b=u.bits,k=u.lencode,C=u.distcode,E=(1<<u.lenbits)-1,B=(1<<u.distbits)-1;e:do{b<15&&(S+=l[c++]<<b,b+=8,S+=l[c++]<<b,b+=8),r=k[S&E];t:for(;;){if(S>>>=n=r>>>24,b-=n,0==(n=r>>>16&255))d[h++]=65535&r;else{if(!(16&n)){if(0==(64&n)){r=k[(65535&r)+(S&(1<<n)-1)];continue t}if(32&n){u.mode=12;break e}e.msg="invalid literal/length code",u.mode=30;break e}i=65535&r,(n&=15)&&(b<n&&(S+=l[c++]<<b,b+=8),i+=S&(1<<n)-1,S>>>=n,b-=n),b<15&&(S+=l[c++]<<b,b+=8,S+=l[c++]<<b,b+=8),r=C[S&B];r:for(;;){if(S>>>=n=r>>>24,b-=n,!(16&(n=r>>>16&255))){if(0==(64&n)){r=C[(65535&r)+(S&(1<<n)-1)];continue r}e.msg="invalid distance code",u.mode=30;break e}if(s=65535&r,b<(n&=15)&&(S+=l[c++]<<b,(b+=8)<n&&(S+=l[c++]<<b,b+=8)),_<(s+=S&(1<<n)-1)){e.msg="invalid distance too far back",u.mode=30;break e}if(S>>>=n,b-=n,(n=h-p)<s){if(y<(n=s-n)&&u.sane){e.msg="invalid distance too far back",u.mode=30;break e}if(o=w,(a=0)===m){if(a+=v-n,n<i){for(i-=n;d[h++]=w[a++],--n;);a=h-s,o=d}}else if(m<n){if(a+=v+m-n,(n-=m)<i){for(i-=n;d[h++]=w[a++],--n;);if(a=0,m<i){for(i-=n=m;d[h++]=w[a++],--n;);a=h-s,o=d}}}else if(a+=m-n,n<i){for(i-=n;d[h++]=w[a++],--n;);a=h-s,o=d}for(;2<i;)d[h++]=o[a++],d[h++]=o[a++],d[h++]=o[a++],i-=3;i&&(d[h++]=o[a++],1<i&&(d[h++]=o[a++]))}else{for(a=h-s;d[h++]=d[a++],d[h++]=d[a++],d[h++]=d[a++],2<(i-=3););i&&(d[h++]=d[a++],1<i&&(d[h++]=d[a++]))}break}}break}}while(c<f&&h<g);c-=i=b>>3,S&=(1<<(b-=i<<3))-1,e.next_in=c,e.next_out=h,e.avail_in=c<f?f-c+5:5-(c-f),e.avail_out=h<g?g-h+257:257-(h-g),u.hold=S,u.bits=b}},{}],11:[function(e,t,n){"use strict";var P=e("../utils/common"),M=e("./adler32"),A=e("./crc32"),D=e("./inffast"),I=e("./inftrees"),W=1,T=2,U=0,F=-2,O=1,i=852,a=592;function L(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function r(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new P.Buf16(320),this.work=new P.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function s(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=O,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new P.Buf32(i),t.distcode=t.distdyn=new P.Buf32(a),t.sane=1,t.back=-1,U):F}function o(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,s(e)):F}function l(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?F:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,o(e))):F}function h(e,t){var n;return e?(n=new r,(e.state=n).window=null,(t=l(e,t))!==U&&(e.state=null),t):F}var N,z,q=!0;function j(e,t,r,n){var i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new P.Buf8(i.wsize)),n>=i.wsize?(P.arraySet(i.window,t,r-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):(n<(e=i.wsize-i.wnext)&&(e=n),P.arraySet(i.window,t,r-n,e,i.wnext),(n-=e)?(P.arraySet(i.window,t,r-n,n,0),i.wnext=n,i.whave=i.wsize):(i.wnext+=e,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=e))),0}n.inflateReset=o,n.inflateReset2=l,n.inflateResetKeep=s,n.inflateInit=function(e){return h(e,15)},n.inflateInit2=h,n.inflate=function(e,t){var r,n,i,s,a,o,u,c,l,f,h,d,p,g,_,v,y,m,w,S,b,k,C,E,B=0,R=new P.Buf8(4),x=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return F;12===(r=e.state).mode&&(r.mode=13),a=e.next_out,i=e.output,u=e.avail_out,s=e.next_in,n=e.input,o=e.avail_in,c=r.hold,l=r.bits,f=o,h=u,k=U;e:for(;;)switch(r.mode){case O:if(0===r.wrap){r.mode=13;break}for(;l<16;){if(0===o)break e;o--,c+=n[s++]<<l,l+=8}if(2&r.wrap&&35615===c){R[r.check=0]=255&c,R[1]=c>>>8&255,r.check=A(r.check,R,2,0),l=c=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",r.mode=30;break}if(8!=(15&c)){e.msg="unknown compression method",r.mode=30;break}if(l-=4,b=8+(15&(c>>>=4)),0===r.wbits)r.wbits=b;else if(b>r.wbits){e.msg="invalid window size",r.mode=30;break}r.dmax=1<<b,e.adler=r.check=1,r.mode=512&c?10:12,l=c=0;break;case 2:for(;l<16;){if(0===o)break e;o--,c+=n[s++]<<l,l+=8}if(r.flags=c,8!=(255&r.flags)){e.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=c>>8&1),512&r.flags&&(R[0]=255&c,R[1]=c>>>8&255,r.check=A(r.check,R,2,0)),l=c=0,r.mode=3;case 3:for(;l<32;){if(0===o)break e;o--,c+=n[s++]<<l,l+=8}r.head&&(r.head.time=c),512&r.flags&&(R[0]=255&c,R[1]=c>>>8&255,R[2]=c>>>16&255,R[3]=c>>>24&255,r.check=A(r.check,R,4,0)),l=c=0,r.mode=4;case 4:for(;l<16;){if(0===o)break e;o--,c+=n[s++]<<l,l+=8}r.head&&(r.head.xflags=255&c,r.head.os=c>>8),512&r.flags&&(R[0]=255&c,R[1]=c>>>8&255,r.check=A(r.check,R,2,0)),l=c=0,r.mode=5;case 5:if(1024&r.flags){for(;l<16;){if(0===o)break e;o--,c+=n[s++]<<l,l+=8}r.length=c,r.head&&(r.head.extra_len=c),512&r.flags&&(R[0]=255&c,R[1]=c>>>8&255,r.check=A(r.check,R,2,0)),l=c=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(o<(d=r.length)&&(d=o),d&&(r.head&&(b=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),P.arraySet(r.head.extra,n,s,d,b)),512&r.flags&&(r.check=A(r.check,n,d,s)),o-=d,s+=d,r.length-=d),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===o)break e;for(d=0;b=n[s+d++],r.head&&b&&r.length<65536&&(r.head.name+=String.fromCharCode(b)),b&&d<o;);if(512&r.flags&&(r.check=A(r.check,n,d,s)),o-=d,s+=d,b)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===o)break e;for(d=0;b=n[s+d++],r.head&&b&&r.length<65536&&(r.head.comment+=String.fromCharCode(b)),b&&d<o;);if(512&r.flags&&(r.check=A(r.check,n,d,s)),o-=d,s+=d,b)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;l<16;){if(0===o)break e;o--,c+=n[s++]<<l,l+=8}if(c!==(65535&r.check)){e.msg="header crc mismatch",r.mode=30;break}l=c=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=12;break;case 10:for(;l<32;){if(0===o)break e;o--,c+=n[s++]<<l,l+=8}e.adler=r.check=L(c),l=c=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=a,e.avail_out=u,e.next_in=s,e.avail_in=o,r.hold=c,r.bits=l,2;e.adler=r.check=1,r.mode=12;case 12:if(5===t||6===t)break e;case 13:if(r.last){c>>>=7&l,l-=7&l,r.mode=27;break}for(;l<3;){if(0===o)break e;o--,c+=n[s++]<<l,l+=8}switch(r.last=1&c,--l,3&(c>>>=1)){case 0:r.mode=14;break;case 1:if(function H(e){if(q){var t;for(N=new P.Buf32(512),z=new P.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(I(W,e.lens,0,288,N,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;I(T,e.lens,0,32,z,0,e.work,{bits:5}),q=!1}e.lencode=N,e.lenbits=9,e.distcode=z,e.distbits=5}(r),r.mode=20,6!==t)break;c>>>=2,l-=2;break e;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=30}c>>>=2,l-=2;break;case 14:for(c>>>=7&l,l-=7&l;l<32;){if(0===o)break e;o--,c+=n[s++]<<l,l+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&c,l=c=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(d=r.length){if(o<d&&(d=o),u<d&&(d=u),0===d)break e;P.arraySet(i,n,s,d,a),o-=d,s+=d,u-=d,a+=d,r.length-=d;break}r.mode=12;break;case 17:for(;l<14;){if(0===o)break e;o--,c+=n[s++]<<l,l+=8}if(r.nlen=257+(31&c),c>>>=5,l-=5,r.ndist=1+(31&c),c>>>=5,l-=5,r.ncode=4+(15&c),c>>>=4,l-=4,286<r.nlen||30<r.ndist){e.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;l<3;){if(0===o)break e;o--,c+=n[s++]<<l,l+=8}r.lens[x[r.have++]]=7&c,c>>>=3,l-=3}for(;r.have<19;)r.lens[x[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,C={bits:r.lenbits},k=I(0,r.lens,0,19,r.lencode,0,r.work,C),r.lenbits=C.bits,k){e.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;v=(B=r.lencode[c&(1<<r.lenbits)-1])>>>16&255,y=65535&B,!((_=B>>>24)<=l);){if(0===o)break e;o--,c+=n[s++]<<l,l+=8}if(y<16)c>>>=_,l-=_,r.lens[r.have++]=y;else{if(16===y){for(E=_+2;l<E;){if(0===o)break e;o--,c+=n[s++]<<l,l+=8}if(c>>>=_,l-=_,0===r.have){e.msg="invalid bit length repeat",r.mode=30;break}b=r.lens[r.have-1],d=3+(3&c),c>>>=2,l-=2}else if(17===y){for(E=_+3;l<E;){if(0===o)break e;o--,c+=n[s++]<<l,l+=8}l-=_,b=0,d=3+(7&(c>>>=_)),c>>>=3,l-=3}else{for(E=_+7;l<E;){if(0===o)break e;o--,c+=n[s++]<<l,l+=8}l-=_,b=0,d=11+(127&(c>>>=_)),c>>>=7,l-=7}if(r.have+d>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=30;break}for(;d--;)r.lens[r.have++]=b}}if(30===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,C={bits:r.lenbits},k=I(W,r.lens,0,r.nlen,r.lencode,0,r.work,C),r.lenbits=C.bits,k){e.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,C={bits:r.distbits},k=I(T,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,C),r.distbits=C.bits,k){e.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(6<=o&&258<=u){e.next_out=a,e.avail_out=u,e.next_in=s,e.avail_in=o,r.hold=c,r.bits=l,D(e,h),a=e.next_out,i=e.output,u=e.avail_out,s=e.next_in,n=e.input,o=e.avail_in,c=r.hold,l=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;v=(B=r.lencode[c&(1<<r.lenbits)-1])>>>16&255,y=65535&B,!((_=B>>>24)<=l);){if(0===o)break e;o--,c+=n[s++]<<l,l+=8}if(v&&0==(240&v)){for(m=_,w=v,S=y;v=(B=r.lencode[S+((c&(1<<m+w)-1)>>m)])>>>16&255,y=65535&B,!(m+(_=B>>>24)<=l);){if(0===o)break e;o--,c+=n[s++]<<l,l+=8}c>>>=m,l-=m,r.back+=m}if(c>>>=_,l-=_,r.back+=_,r.length=y,0===v){r.mode=26;break}if(32&v){r.back=-1,r.mode=12;break}if(64&v){e.msg="invalid literal/length code",r.mode=30;break}r.extra=15&v,r.mode=22;case 22:if(r.extra){for(E=r.extra;l<E;){if(0===o)break e;o--,c+=n[s++]<<l,l+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;v=(B=r.distcode[c&(1<<r.distbits)-1])>>>16&255,y=65535&B,!((_=B>>>24)<=l);){if(0===o)break e;o--,c+=n[s++]<<l,l+=8}if(0==(240&v)){for(m=_,w=v,S=y;v=(B=r.distcode[S+((c&(1<<m+w)-1)>>m)])>>>16&255,y=65535&B,!(m+(_=B>>>24)<=l);){if(0===o)break e;o--,c+=n[s++]<<l,l+=8}c>>>=m,l-=m,r.back+=m}if(c>>>=_,l-=_,r.back+=_,64&v){e.msg="invalid distance code",r.mode=30;break}r.offset=y,r.extra=15&v,r.mode=24;case 24:if(r.extra){for(E=r.extra;l<E;){if(0===o)break e;o--,c+=n[s++]<<l,l+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===u)break e;if(d=h-u,r.offset>d){if((d=r.offset-d)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=30;break}p=d>r.wnext?(d-=r.wnext,r.wsize-d):r.wnext-d,d>r.length&&(d=r.length),g=r.window}else g=i,p=a-r.offset,d=r.length;for(u<d&&(d=u),u-=d,r.length-=d;i[a++]=g[p++],--d;);0===r.length&&(r.mode=21);break;case 26:if(0===u)break e;i[a++]=r.length,u--,r.mode=21;break;case 27:if(r.wrap){for(;l<32;){if(0===o)break e;o--,c|=n[s++]<<l,l+=8}if(h-=u,e.total_out+=h,r.total+=h,h&&(e.adler=r.check=(r.flags?A:M)(r.check,i,h,a-h)),h=u,(r.flags?c:L(c))!==r.check){e.msg="incorrect data check",r.mode=30;break}l=c=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;l<32;){if(0===o)break e;o--,c+=n[s++]<<l,l+=8}if(c!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=30;break}l=c=0}r.mode=29;case 29:k=1;break e;case 30:k=-3;break e;case 31:return-4;case 32:default:return F}return e.next_out=a,e.avail_out=u,e.next_in=s,e.avail_in=o,r.hold=c,r.bits=l,(r.wsize||h!==e.avail_out&&r.mode<30&&(r.mode<27||4!==t))&&j(e,e.output,e.next_out,h-e.avail_out)?(r.mode=31,-4):(f-=e.avail_in,h-=e.avail_out,e.total_in+=f,e.total_out+=h,r.total+=h,r.wrap&&h&&(e.adler=r.check=(r.flags?A:M)(r.check,i,h,e.next_out-h)),e.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0==f&&0===h||4===t)&&k===U&&(k=-5),k)},n.inflateEnd=function(e){if(!e||!e.state)return F;var t=e.state;return t.window&&(t.window=null),e.state=null,U},n.inflateGetHeader=function(e,t){var r;return!e||!e.state||0==(2&(r=e.state).wrap)?F:((r.head=t).done=!1,U)},n.inflateSetDictionary=function(e,t){var r,n=t.length;return!e||!e.state||0!==(r=e.state).wrap&&11!==r.mode?F:11===r.mode&&M(1,t,n,0)!==r.check?-3:j(e,t,n,n)?(r.mode=31,-4):(r.havedict=1,U)},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./inffast":10,"./inftrees":12}],12:[function(e,t,r){"use strict";var W=e("../utils/common"),T=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],L=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],U=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],F=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,r,n,i,s,a,o){for(var u,c,l,f,h,d,p,g,_,v=o.bits,y=0,m=0,w=0,S=0,b=0,k=0,C=0,E=0,B=0,R=0,x=null,P=0,M=new W.Buf16(16),A=new W.Buf16(16),D=null,I=0,y=0;y<=15;y++)M[y]=0;for(m=0;m<n;m++)M[t[r+m]]++;for(b=v,S=15;1<=S&&0===M[S];S--);if(S<b&&(b=S),0===S)return i[s++]=20971520,i[s++]=20971520,o.bits=1,0;for(w=1;w<S&&0===M[w];w++);for(b<w&&(b=w),y=E=1;y<=15;y++)if(E<<=1,(E-=M[y])<0)return-1;if(0<E&&(0===e||1!==S))return-1;for(A[1]=0,y=1;y<15;y++)A[y+1]=A[y]+M[y];for(m=0;m<n;m++)0!==t[r+m]&&(a[A[t[r+m]]++]=m);if(d=0===e?(x=D=a,19):1===e?(x=T,P-=257,D=L,I-=257,256):(x=U,D=F,-1),y=w,h=s,C=m=R=0,l=-1,f=(B=1<<(k=b))-1,1===e&&852<B||2===e&&592<B)return 1;for(;;){for(p=y-C,_=a[m]<d?(g=0,a[m]):a[m]>d?(g=D[I+a[m]],x[P+a[m]]):(g=96,0),u=1<<y-C,w=c=1<<k;i[h+(R>>C)+(c-=u)]=p<<24|g<<16|_|0,0!==c;);for(u=1<<y-1;R&u;)u>>=1;if(0!==u?(R&=u-1,R+=u):R=0,m++,0==--M[y]){if(y===S)break;y=t[r+a[m]]}if(b<y&&(R&f)!==l){for(0===C&&(C=b),h+=w,E=1<<(k=y-C);k+C<S&&!((E-=M[k+C])<=0);)k++,E<<=1;if(B+=1<<k,1===e&&852<B||2===e&&592<B)return 1;i[l=R&f]=b<<24|k<<16|h-s|0}}return 0!==R&&(i[h+R]=y-C<<24|64<<16|0),o.bits=b,0}},{"../utils/common":3}],13:[function(e,t,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],14:[function(e,t,n){"use strict";var s=e("../utils/common");function i(e){for(var t=e.length;0<=--t;)e[t]=0}var _=15,a=16,u=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],c=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],l=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],f=new Array(576);i(f);var h=new Array(60);i(h);var d=new Array(512);i(d);var p=new Array(256);i(p);var g=new Array(29);i(g);var v,y,m,w=new Array(30);function I(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function r(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function U(e){return e<256?d[e]:d[256+(e>>>7)]}function T(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function F(e,t,r){e.bi_valid>a-r?(e.bi_buf|=t<<e.bi_valid&65535,T(e,e.bi_buf),e.bi_buf=t>>a-e.bi_valid,e.bi_valid+=r-a):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function L(e,t,r){F(e,r[2*t],r[2*t+1])}function H(e,t){for(var r=0;r|=1&e,e>>>=1,r<<=1,0<--t;);return r>>>1}function j(e,t,r){for(var n,i=new Array(_+1),s=0,a=1;a<=_;a++)i[a]=s=s+r[a-1]<<1;for(n=0;n<=t;n++){var o=e[2*n+1];0!==o&&(e[2*n]=H(i[o]++,o))}}function K(e){for(var t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function M(e){8<e.bi_valid?T(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function P(e,t,r,n){var i=2*t,s=2*r;return e[i]<e[s]||e[i]===e[s]&&n[t]<=n[r]}function Y(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&P(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!P(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function q(e,t,r){var n,i,s,a,o=0;if(0!==e.last_lit)for(;n=e.pending_buf[e.d_buf+2*o]<<8|e.pending_buf[e.d_buf+2*o+1],i=e.pending_buf[e.l_buf+o],o++,0==n?L(e,i,t):(L(e,(s=p[i])+256+1,t),0!==(a=u[s])&&F(e,i-=g[s],a),L(e,s=U(--n),r),0!==(a=c[s])&&F(e,n-=w[s],a)),o<e.last_lit;);L(e,256,t)}function G(e,g){var t,r,n,i=g.dyn_tree,s=g.stat_desc.static_tree,a=g.stat_desc.has_stree,o=g.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=573,t=0;t<o;t++)0!==i[2*t]?(e.heap[++e.heap_len]=u=t,e.depth[t]=0):i[2*t+1]=0;for(;e.heap_len<2;)i[2*(n=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[n]=0,e.opt_len--,a&&(e.static_len-=s[2*n+1]);for(g.max_code=u,t=e.heap_len>>1;1<=t;t--)Y(e,i,t);for(n=o;t=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Y(e,i,1),r=e.heap[1],e.heap[--e.heap_max]=t,e.heap[--e.heap_max]=r,i[2*n]=i[2*t]+i[2*r],e.depth[n]=(e.depth[t]>=e.depth[r]?e.depth[t]:e.depth[r])+1,i[2*t+1]=i[2*r+1]=n,e.heap[1]=n++,Y(e,i,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e){for(var t,r,n,i,s,a=g.dyn_tree,o=g.max_code,u=g.stat_desc.static_tree,c=g.stat_desc.has_stree,l=g.stat_desc.extra_bits,f=g.stat_desc.extra_base,h=g.stat_desc.max_length,d=0,p=0;p<=_;p++)e.bl_count[p]=0;for(a[2*e.heap[e.heap_max]+1]=0,t=e.heap_max+1;t<573;t++)h<(p=a[2*a[2*(r=e.heap[t])+1]+1]+1)&&(p=h,d++),a[2*r+1]=p,o<r||(e.bl_count[p]++,i=0,f<=r&&(i=l[r-f]),s=a[2*r],e.opt_len+=s*(p+i),c&&(e.static_len+=s*(u[2*r+1]+i)));if(0!==d){do{for(p=h-1;0===e.bl_count[p];)p--}while(e.bl_count[p]--,e.bl_count[p+1]+=2,e.bl_count[h]--,0<(d-=2));for(p=h;0!==p;p--)for(r=e.bl_count[p];0!==r;)o<(n=e.heap[--t])||(a[2*n+1]!==p&&(e.opt_len+=(p-a[2*n+1])*a[2*n],a[2*n+1]=p),r--)}}(e),j(i,u,e.bl_count)}function X(e,t,r){var n,i,s=-1,a=t[1],o=0,u=7,c=4;for(0===a&&(u=138,c=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=t[2*(n+1)+1],++o<u&&i===a||(o<c?e.bl_tree[2*i]+=o:0!==i?(i!==s&&e.bl_tree[2*i]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=i,c=(o=0)===a?(u=138,3):i===a?(u=6,3):(u=7,4))}function W(e,t,r){var n,i,s=-1,a=t[1],o=0,u=7,c=4;for(0===a&&(u=138,c=3),n=0;n<=r;n++)if(i=a,a=t[2*(n+1)+1],!(++o<u&&i===a)){if(o<c)for(;L(e,i,e.bl_tree),0!=--o;);else 0!==i?(i!==s&&(L(e,i,e.bl_tree),o--),L(e,16,e.bl_tree),F(e,o-3,2)):o<=10?(L(e,17,e.bl_tree),F(e,o-3,3)):(L(e,18,e.bl_tree),F(e,o-11,7));s=i,c=(o=0)===a?(u=138,3):i===a?(u=6,3):(u=7,4)}}i(w);var S=!1;function Q(e,t,r,n){F(e,0+(n?1:0),3),t=t,r=r,M(e=e),T(e,r),T(e,~r),s.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}n._tr_init=function(e){S||(function(){for(var e,t,r,n,i=new Array(_+1),s=r=0;s<28;s++)for(g[s]=r,e=0;e<1<<u[s];e++)p[r++]=s;for(p[r-1]=s,s=n=0;s<16;s++)for(w[s]=n,e=0;e<1<<c[s];e++)d[n++]=s;for(n>>=7;s<30;s++)for(w[s]=n<<7,e=0;e<1<<c[s]-7;e++)d[256+n++]=s;for(t=0;t<=_;t++)i[t]=0;for(e=0;e<=143;)f[2*e+1]=8,e++,i[8]++;for(;e<=255;)f[2*e+1]=9,e++,i[9]++;for(;e<=279;)f[2*e+1]=7,e++,i[7]++;for(;e<=287;)f[2*e+1]=8,e++,i[8]++;for(j(f,287,i),e=0;e<30;e++)h[2*e+1]=5,h[2*e]=H(e,5);v=new I(f,u,257,286,_),y=new I(h,c,0,30,_),m=new I(new Array(0),o,0,19,7)}(),S=!0),e.l_desc=new r(e.dyn_ltree,v),e.d_desc=new r(e.dyn_dtree,y),e.bl_desc=new r(e.bl_tree,m),e.bi_buf=0,e.bi_valid=0,K(e)},n._tr_stored_block=Q,n._tr_flush_block=function(e,t,r,n){var i,s,a=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){for(var t=4093624447,r=0;r<=31;r++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*r])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(r=32;r<256;r++)if(0!==e.dyn_ltree[2*r])return 1;return 0}(e)),G(e,e.l_desc),G(e,e.d_desc),a=function(e){var t;for(X(e,e.dyn_ltree,e.l_desc.max_code),X(e,e.dyn_dtree,e.d_desc.max_code),G(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*l[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=i&&(i=s)):i=s=r+5,r+4<=i&&-1!==t?Q(e,t,r,n):4===e.strategy||s===i?(F(e,2+(n?1:0),3),q(e,f,h)):(F(e,4+(n?1:0),3),function(e,t,r,n){var i;for(F(e,t-257,5),F(e,r-1,5),F(e,n-4,4),i=0;i<n;i++)F(e,e.bl_tree[2*l[i]+1],3);W(e,e.dyn_ltree,t-1),W(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),q(e,e.dyn_ltree,e.dyn_dtree)),K(e),n&&M(e)},n._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(p[r]+256+1)]++,e.dyn_dtree[2*U(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){F(e,2,3),L(e,256,f),16===(e=e).bi_valid?(T(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},{"../utils/common":3}],15:[function(e,t,r){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],"/":[function(e,t,r){"use strict";var n={};(0,e("./lib/utils/common").assign)(n,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=n},{"./lib/deflate":1,"./lib/inflate":2,"./lib/utils/common":3,"./lib/zlib/constants":6}]},{},[])("/")},"object"==_typeof(t)?e.exports=n():(r=[],void 0===(n="function"==typeof(n=n)?n.apply(t,r):n)||(e.exports=n))},452:function(e,t,r){var n;e.exports=(n=r(249),r(269),r(214),r(888),r(109),function(){var e=n,t=e.lib.BlockCipher,r=e.algo,c=[],l=[],f=[],h=[],d=[],p=[],g=[],_=[],v=[],y=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;for(var r=0,n=0,t=0;t<256;t++){var i=(i=n^n<<1^n<<2^n<<3^n<<4)>>>8^255&i^99;c[r]=i;var s=e[l[i]=r],a=e[s],o=e[a],u=257*e[i]^16843008*i;f[r]=u<<24|u>>>8,h[r]=u<<16|u>>>16,d[r]=u<<8|u>>>24,p[r]=u;u=16843009*o^65537*a^257*s^16843008*r;g[i]=u<<24|u>>>8,_[i]=u<<16|u>>>16,v[i]=u<<8|u>>>24,y[i]=u,r?(r=s^e[e[e[o^s]]],n^=e[e[n]]):r=n=1}}();var m=[0,1,2,4,8,16,32,64,128,27,54],r=r.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,r=e.sigBytes/4,n=4*(1+(this._nRounds=6+r)),i=this._keySchedule=[],s=0;s<n;s++)s<r?i[s]=t[s]:(u=i[s-1],s%r?6<r&&s%r==4&&(u=c[u>>>24]<<24|c[u>>>16&255]<<16|c[u>>>8&255]<<8|c[255&u]):(u=c[(u=u<<8|u>>>24)>>>24]<<24|c[u>>>16&255]<<16|c[u>>>8&255]<<8|c[255&u],u^=m[s/r|0]<<24),i[s]=i[s-r]^u);for(var a=this._invKeySchedule=[],o=0;o<n;o++){var u,s=n-o;u=o%4?i[s]:i[s-4],a[o]=o<4||s<=4?u:g[c[u>>>24]]^_[c[u>>>16&255]]^v[c[u>>>8&255]]^y[c[255&u]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,f,h,d,p,c)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,g,_,v,y,l);r=e[t+1];e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,n,i,s,a,o){for(var u=this._nRounds,c=e[t]^r[0],l=e[t+1]^r[1],f=e[t+2]^r[2],h=e[t+3]^r[3],d=4,p=1;p<u;p++)var g=n[c>>>24]^i[l>>>16&255]^s[f>>>8&255]^a[255&h]^r[d++],_=n[l>>>24]^i[f>>>16&255]^s[h>>>8&255]^a[255&c]^r[d++],v=n[f>>>24]^i[h>>>16&255]^s[c>>>8&255]^a[255&l]^r[d++],y=n[h>>>24]^i[c>>>16&255]^s[l>>>8&255]^a[255&f]^r[d++],c=g,l=_,f=v,h=y;g=(o[c>>>24]<<24|o[l>>>16&255]<<16|o[f>>>8&255]<<8|o[255&h])^r[d++],_=(o[l>>>24]<<24|o[f>>>16&255]<<16|o[h>>>8&255]<<8|o[255&c])^r[d++],v=(o[f>>>24]<<24|o[h>>>16&255]<<16|o[c>>>8&255]<<8|o[255&l])^r[d++],y=(o[h>>>24]<<24|o[c>>>16&255]<<16|o[l>>>8&255]<<8|o[255&f])^r[d++];e[t]=g,e[t+1]=_,e[t+2]=v,e[t+3]=y},keySize:8});e.AES=t._createHelper(r)}(),n.AES)},407:function(e,t,r){var i;e.exports=(i=r(249),r(269),r(214),r(888),r(109),function(){var e=i,t=e.lib.BlockCipher,r=e.algo;const u=16;var c=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]],n={pbox:[],sbox:[]};function F(e,t){var r=t>>24&255,n=t>>16&255,i=t>>8&255,t=255&t;let s=e.sbox[0][r]+e.sbox[1][n];return s^=e.sbox[2][i],s+=e.sbox[3][t],s}function BlowFish_Encrypt(t,e,r){let n=e,i=r,s;for(let e=0;e<u;++e)n^=t.pbox[e],i=F(t,n)^i,s=n,n=i,i=s;return s=n,n=i,i=s,i^=t.pbox[u],n^=t.pbox[u+1],{left:n,right:i}}r=r.Blowfish=t.extend({_doReset:function(){var e,t;this._keyPriorReset!==this._key&&(e=(t=this._keyPriorReset=this._key).words,t=t.sigBytes/4,function BlowFishInit(r,t,n){for(let t=0;t<4;t++){r.sbox[t]=[];for(let e=0;e<256;e++)r.sbox[t][e]=l[t][e]}let i=0;for(let e=0;e<u+2;e++)r.pbox[e]=c[e]^t[i],i++,i>=n&&(i=0);let s=0,a=0,o=0;for(let e=0;e<u+2;e+=2)o=BlowFish_Encrypt(r,s,a),s=o.left,a=o.right,r.pbox[e]=s,r.pbox[e+1]=a;for(let t=0;t<4;t++)for(let e=0;e<256;e+=2)o=BlowFish_Encrypt(r,s,a),s=o.left,a=o.right,r.sbox[t][e]=s,r.sbox[t][e+1]=a}(n,e,t))},encryptBlock:function(e,t){var r=BlowFish_Encrypt(n,e[t],e[t+1]);e[t]=r.left,e[t+1]=r.right},decryptBlock:function(e,t){var r=function BlowFish_Decrypt(t,e,r){let n=e,i=r,s;for(let e=u+1;1<e;--e)n^=t.pbox[e],i=F(t,n)^i,s=n,n=i,i=s;return s=n,n=i,i=s,i^=t.pbox[1],n^=t.pbox[0],{left:n,right:i}}(n,e[t],e[t+1]);e[t]=r.left,e[t+1]=r.right},blockSize:2,keySize:4,ivSize:2}),e.Blowfish=t._createHelper(r)}(),i.Blowfish)},109:function(e,t,r){var d;e.exports=(d=r(249),r(888),void(d.lib.Cipher||function(){var e=d,t=e.lib,r=t.Base,a=t.WordArray,n=t.BufferedBlockAlgorithm,i=e.enc,s=(i.Utf8,i.Base64),o=e.algo.EvpKDF,u=t.Cipher=n.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){n.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(n){return{encrypt:function(e,t,r){return selectCipherStrategy(t).encrypt(n,e,t,r)},decrypt:function(e,t,r){return selectCipherStrategy(t).decrypt(n,e,t,r)}}}});function selectCipherStrategy(e){return"string"==typeof e?h:f}t.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var c=e.mode={},i=t.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),i=c.CBC=((c=i.extend()).Encryptor=c.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize;xorBlock.call(this,e,t,n),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n)}}),c.Decryptor=c.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,i=e.slice(t,t+n);r.decryptBlock(e,t),xorBlock.call(this,e,t,n),this._prevBlock=i}}),c);function xorBlock(e,t,r){var n,i=this._iv;i?(n=i,this._iv=void 0):n=this._prevBlock;for(var s=0;s<r;s++)e[t+s]^=n[s]}var c=(e.pad={}).Pkcs7={pad:function(e,t){for(var t=4*t,r=t-e.sigBytes%t,n=r<<24|r<<16|r<<8|r,i=[],s=0;s<r;s+=4)i.push(n);t=a.create(i,r);e.concat(t)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},l=(t.BlockCipher=u.extend({cfg:u.cfg.extend({mode:i,padding:c}),reset:function(){var e;u.reset.call(this);var t=this.cfg,r=t.iv,t=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=t.createEncryptor:(e=t.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,r&&r.words):(this._mode=e.call(t,this,r&&r.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),t.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),c=(e.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,e=e.salt,t=e?a.create([1398893684,1701076831]).concat(e).concat(t):t;return t.toString(s)},parse:function(e){var t,r=s.parse(e),e=r.words;return 1398893684==e[0]&&1701076831==e[1]&&(t=a.create(e.slice(2,4)),e.splice(0,4),r.sigBytes-=16),l.create({ciphertext:r,salt:t})}},f=t.SerializableCipher=r.extend({cfg:r.extend({format:c}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var i=e.createEncryptor(r,n),t=i.finalize(t),i=i.cfg;return l.create({ciphertext:t,key:r,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(r,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),e=(e.kdf={}).OpenSSL={execute:function(e,t,r,n,i){n=n||a.random(8),e=(i?o.create({keySize:t+r,hasher:i}):o.create({keySize:t+r})).compute(e,n);r=a.create(e.words.slice(t),4*r);return e.sigBytes=4*t,l.create({key:e,iv:r,salt:n})}},h=t.PasswordBasedCipher=f.extend({cfg:f.cfg.extend({kdf:e}),encrypt:function(e,t,r,n){r=(n=this.cfg.extend(n)).kdf.execute(r,e.keySize,e.ivSize,n.salt,n.hasher);n.iv=r.iv;n=f.encrypt.call(this,e,t,r.key,n);return n.mixIn(r),n},decrypt:function(e,t,r,n){n=this.cfg.extend(n),t=this._parse(t,n.format);r=n.kdf.execute(r,e.keySize,e.ivSize,t.salt,n.hasher);return n.iv=r.iv,f.decrypt.call(this,e,t,r.key,n)}})}()))},249:function(e,t,d){e.exports=(e=function(c){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==d.g&&d.g.crypto&&(n=d.g.crypto),!n)try{n=d(480)}catch(e){}var r=Object.create||function(e){return F.prototype=e,e=new F,F.prototype=null,e};function F(){}var e={},t=e.lib={},i=t.Base={extend:function(e){var t=r(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=t.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(var s=0;s<i;s++){var a=r[s>>>2]>>>24-s%4*8&255;t[n+s>>>2]|=a<<24-(n+s)%4*8}else for(var o=0;o<i;o+=4)t[n+o>>>2]=r[o>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=c.ceil(t/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")}());return new l.init(t,e)}}),s=e.enc={},a=s.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var s=t[i>>>2]>>>24-i%4*8&255;n.push((s>>>4).toString(16)),n.push((15&s).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new l.init(r,t/2)}},o=s.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var s=t[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(s))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new l.init(r,t)}},u=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(o.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return o.parse(unescape(encodeURIComponent(e)))}},f=t.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t,r=this._data,n=r.words,i=r.sigBytes,s=this.blockSize,a=i/(4*s),o=(a=e?c.ceil(a):c.max((0|a)-this._minBufferSize,0))*s,i=c.min(4*o,i);if(o){for(var u=0;u<o;u+=s)this._doProcessBlock(n,u);t=n.splice(0,o),r.sigBytes-=i}return new l.init(t,i)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),h=(t.Hasher=f.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(r){return function(e,t){return new r.init(t).finalize(e)}},_createHmacHelper:function(r){return function(e,t){return new h.HMAC.init(r,t).finalize(e)}}}),e.algo={});return e}(Math),e)},269:function(e,t,r){var n;e.exports=(n=r(249),function(){var u=n.lib.WordArray;n.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp();for(var i=[],s=0;s<r;s+=3)for(var a=(t[s>>>2]>>>24-s%4*8&255)<<16|(t[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|t[s+2>>>2]>>>24-(s+2)%4*8&255,o=0;o<4&&s+.75*o<r;o++)i.push(n.charAt(a>>>6*(3-o)&63));var u=n.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(e){var t=e.length,r=this._map,n=this._reverseMap;if(!n){n=this._reverseMap=[];for(var i=0;i<r.length;i++)n[r.charCodeAt(i)]=i}var s=r.charAt(64);return!s||-1!==(s=e.indexOf(s))&&(t=s),function parseLoop(e,t,r){for(var n=[],i=0,s=0;s<t;s++){var a,o;s%4&&(a=r[e.charCodeAt(s-1)]<<s%4*2,o=r[e.charCodeAt(s)]>>>6-s%4*2,o=a|o,n[i>>>2]|=o<<24-i%4*8,i++)}return u.create(n,i)}(e,t,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n.enc.Base64)},786:function(e,t,r){var n;e.exports=(n=r(249),function(){var u=n.lib.WordArray;n.enc.Base64url={stringify:function(e,t){void 0===t&&(t=!0);var r=e.words,n=e.sigBytes,i=t?this._safe_map:this._map;e.clamp();for(var s=[],a=0;a<n;a+=3)for(var o=(r[a>>>2]>>>24-a%4*8&255)<<16|(r[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|r[a+2>>>2]>>>24-(a+2)%4*8&255,u=0;u<4&&a+.75*u<n;u++)s.push(i.charAt(o>>>6*(3-u)&63));var c=i.charAt(64);if(c)for(;s.length%4;)s.push(c);return s.join("")},parse:function(e,t){void 0===t&&(t=!0);var r=e.length,n=t?this._safe_map:this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var s=0;s<n.length;s++)i[n.charCodeAt(s)]=s}t=n.charAt(64);return!t||-1!==(t=e.indexOf(t))&&(r=t),function parseLoop(e,t,r){for(var n=[],i=0,s=0;s<t;s++){var a,o;s%4&&(a=r[e.charCodeAt(s-1)]<<s%4*2,o=r[e.charCodeAt(s)]>>>6-s%4*2,o=a|o,n[i>>>2]|=o<<24-i%4*8,i++)}return u.create(n,i)}(e,r,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),n.enc.Base64url)},298:function(e,t,r){var n;e.exports=(n=r(249),function(){var i=n.lib.WordArray,e=n.enc;function swapEndian(e){return e<<8&4278255360|e>>>8&16711935}e.Utf16=e.Utf16BE={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i+=2){var s=t[i>>>2]>>>16-i%4*8&65535;n.push(String.fromCharCode(s))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>1]|=e.charCodeAt(n)<<16-n%2*16;return i.create(r,2*t)}},e.Utf16LE={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i+=2){var s=swapEndian(t[i>>>2]>>>16-i%4*8&65535);n.push(String.fromCharCode(s))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>1]|=swapEndian(e.charCodeAt(n)<<16-n%2*16);return i.create(r,2*t)}}}(),n.enc.Utf16)},888:function(e,t,r){var s;e.exports=(s=r(249),r(783),r(824),function(){var e=s,t=(n=e.lib).Base,l=n.WordArray,r=e.algo,n=r.MD5,i=r.EvpKDF=t.extend({cfg:t.extend({keySize:4,hasher:n,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r,n=this.cfg,i=n.hasher.create(),s=l.create(),a=s.words,o=n.keySize,u=n.iterations;a.length<o;){r&&i.update(r),r=i.update(e).finalize(t),i.reset();for(var c=1;c<u;c++)r=i.finalize(r),i.reset();s.concat(r)}return s.sigBytes=4*o,s}});e.EvpKDF=function(e,t,r){return i.create(r).compute(e,t)}}(),s.EvpKDF)},209:function(e,t,r){var n;e.exports=(n=r(249),r(109),function(){var t=n.lib.CipherParams,r=n.enc.Hex;n.format.Hex={stringify:function(e){return e.ciphertext.toString(r)},parse:function(e){e=r.parse(e);return t.create({ciphertext:e})}}}(),n.format.Hex)},824:function(e,t,r){var n;e.exports=(n=r(249),void function(){var e=n.lib.Base,o=n.enc.Utf8;n.algo.HMAC=e.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));var r=e.blockSize,n=4*r;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var e=this._oKey=t.clone(),t=this._iKey=t.clone(),i=e.words,s=t.words,a=0;a<r;a++)i[a]^=1549556828,s[a]^=909522486;e.sigBytes=t.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,e=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(e))}})}())},354:function(e,t,r){e.exports=(e=r(249),r(938),r(433),r(298),r(269),r(786),r(214),r(783),r(153),r(792),r(34),r(460),r(327),r(706),r(824),r(112),r(888),r(109),r(568),r(242),r(968),r(660),r(148),r(615),r(807),r(77),r(475),r(991),r(209),r(452),r(253),r(857),r(454),r(974),r(407),e)},433:function(e,t,r){var n;e.exports=(n=r(249),function(){var e,i;"function"==typeof ArrayBuffer&&(e=n.lib.WordArray,i=e.init,(e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,r=[],n=0;n<t;n++)r[n>>>2]|=e[n]<<24-n%4*8;i.call(this,r,t)}else i.apply(this,arguments)}).prototype=e)}(),n.lib.WordArray)},214:function(e,t,r){var i;e.exports=(i=r(249),function(u){var e=i,t=(n=e.lib).WordArray,r=n.Hasher,n=e.algo,B=[];function FF(e,t,r,n,i,s,a){a=e+(t&r|~t&n)+i+a;return(a<<s|a>>>32-s)+t}function GG(e,t,r,n,i,s,a){a=e+(t&n|r&~n)+i+a;return(a<<s|a>>>32-s)+t}function HH(e,t,r,n,i,s,a){a=e+(t^r^n)+i+a;return(a<<s|a>>>32-s)+t}function II(e,t,r,n,i,s,a){a=e+(r^(t|~n))+i+a;return(a<<s|a>>>32-s)+t}!function(){for(var e=0;e<64;e++)B[e]=4294967296*u.abs(u.sin(e+1))|0}(),n=n.MD5=r.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var n=t+r,i=e[n];e[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var s=this._hash.words,a=e[t+0],o=e[t+1],u=e[t+2],c=e[t+3],l=e[t+4],f=e[t+5],h=e[t+6],d=e[t+7],p=e[t+8],g=e[t+9],_=e[t+10],v=e[t+11],y=e[t+12],m=e[t+13],w=e[t+14],S=e[t+15],b=FF(b=s[0],E=s[1],C=s[2],k=s[3],a,7,B[0]),k=FF(k,b,E,C,o,12,B[1]),C=FF(C,k,b,E,u,17,B[2]),E=FF(E,C,k,b,c,22,B[3]);b=FF(b,E,C,k,l,7,B[4]),k=FF(k,b,E,C,f,12,B[5]),C=FF(C,k,b,E,h,17,B[6]),E=FF(E,C,k,b,d,22,B[7]),b=FF(b,E,C,k,p,7,B[8]),k=FF(k,b,E,C,g,12,B[9]),C=FF(C,k,b,E,_,17,B[10]),E=FF(E,C,k,b,v,22,B[11]),b=FF(b,E,C,k,y,7,B[12]),k=FF(k,b,E,C,m,12,B[13]),C=FF(C,k,b,E,w,17,B[14]),b=GG(b,E=FF(E,C,k,b,S,22,B[15]),C,k,o,5,B[16]),k=GG(k,b,E,C,h,9,B[17]),C=GG(C,k,b,E,v,14,B[18]),E=GG(E,C,k,b,a,20,B[19]),b=GG(b,E,C,k,f,5,B[20]),k=GG(k,b,E,C,_,9,B[21]),C=GG(C,k,b,E,S,14,B[22]),E=GG(E,C,k,b,l,20,B[23]),b=GG(b,E,C,k,g,5,B[24]),k=GG(k,b,E,C,w,9,B[25]),C=GG(C,k,b,E,c,14,B[26]),E=GG(E,C,k,b,p,20,B[27]),b=GG(b,E,C,k,m,5,B[28]),k=GG(k,b,E,C,u,9,B[29]),C=GG(C,k,b,E,d,14,B[30]),b=HH(b,E=GG(E,C,k,b,y,20,B[31]),C,k,f,4,B[32]),k=HH(k,b,E,C,p,11,B[33]),C=HH(C,k,b,E,v,16,B[34]),E=HH(E,C,k,b,w,23,B[35]),b=HH(b,E,C,k,o,4,B[36]),k=HH(k,b,E,C,l,11,B[37]),C=HH(C,k,b,E,d,16,B[38]),E=HH(E,C,k,b,_,23,B[39]),b=HH(b,E,C,k,m,4,B[40]),k=HH(k,b,E,C,a,11,B[41]),C=HH(C,k,b,E,c,16,B[42]),E=HH(E,C,k,b,h,23,B[43]),b=HH(b,E,C,k,g,4,B[44]),k=HH(k,b,E,C,y,11,B[45]),C=HH(C,k,b,E,S,16,B[46]),b=II(b,E=HH(E,C,k,b,u,23,B[47]),C,k,a,6,B[48]),k=II(k,b,E,C,d,10,B[49]),C=II(C,k,b,E,w,15,B[50]),E=II(E,C,k,b,f,21,B[51]),b=II(b,E,C,k,y,6,B[52]),k=II(k,b,E,C,c,10,B[53]),C=II(C,k,b,E,_,15,B[54]),E=II(E,C,k,b,o,21,B[55]),b=II(b,E,C,k,p,6,B[56]),k=II(k,b,E,C,S,10,B[57]),C=II(C,k,b,E,h,15,B[58]),E=II(E,C,k,b,m,21,B[59]),b=II(b,E,C,k,l,6,B[60]),k=II(k,b,E,C,v,10,B[61]),C=II(C,k,b,E,u,15,B[62]),E=II(E,C,k,b,g,21,B[63]),s[0]=s[0]+b|0,s[1]=s[1]+E|0,s[2]=s[2]+C|0,s[3]=s[3]+k|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32;var i=u.floor(r/4294967296),r=r;t[15+(64+n>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t[14+(64+n>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(t.length+1),this._process();for(var t=this._hash,s=t.words,a=0;a<4;a++){var o=s[a];s[a]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}return t},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}}),e.MD5=r._createHelper(n),e.HmacMD5=r._createHmacHelper(n)}(Math),i.MD5)},568:function(e,t,r){var n;e.exports=(n=r(249),r(109),n.mode.CFB=function(){var e=n.lib.BlockCipherMode.extend();function generateKeystreamAndEncrypt(e,t,r,n){var i,s=this._iv;s?(i=s.slice(0),this._iv=void 0):i=this._prevBlock,n.encryptBlock(i,0);for(var a=0;a<r;a++)e[t+a]^=i[a]}return e.Encryptor=e.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize;generateKeystreamAndEncrypt.call(this,e,t,n,r),this._prevBlock=e.slice(t,t+n)}}),e.Decryptor=e.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,i=e.slice(t,t+n);generateKeystreamAndEncrypt.call(this,e,t,n,r),this._prevBlock=i}}),e}(),n.mode.CFB)},968:function(e,t,r){var n;e.exports=(n=r(249),r(109),n.mode.CTRGladman=function(){var e=n.lib.BlockCipherMode.extend();function incWord(e){var t,r,n;return 255==(e>>24&255)?(r=e>>8&255,n=255&e,255===(t=e>>16&255)?(t=0,255===r?(r=0,255===n?n=0:++n):++r):++t,e=0,e+=t<<16,e+=r<<8,e+=n):e+=1<<24,e}var t=e.Encryptor=e.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,i=this._iv,s=this._counter;i&&(s=this._counter=i.slice(0),this._iv=void 0),function incCounter(e){0===(e[0]=incWord(e[0]))&&(e[1]=incWord(e[1]))}(s);var a=s.slice(0);r.encryptBlock(a,0);for(var o=0;o<n;o++)e[t+o]^=a[o]}});return e.Decryptor=t,e}(),n.mode.CTRGladman)},242:function(e,t,r){var n;e.exports=(n=r(249),r(109),n.mode.CTR=function(){var e=n.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,i=this._iv,s=this._counter;i&&(s=this._counter=i.slice(0),this._iv=void 0);var a=s.slice(0);r.encryptBlock(a,0),s[n-1]=s[n-1]+1|0;for(var o=0;o<n;o++)e[t+o]^=a[o]}});return e.Decryptor=t,e}(),n.mode.CTR)},148:function(e,t,r){var n;e.exports=(n=r(249),r(109),n.mode.ECB=function(){var e=n.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),e.Decryptor=e.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),e}(),n.mode.ECB)},660:function(e,t,r){var n;e.exports=(n=r(249),r(109),n.mode.OFB=function(){var e=n.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,i=this._iv,s=this._keystream;i&&(s=this._keystream=i.slice(0),this._iv=void 0),r.encryptBlock(s,0);for(var a=0;a<n;a++)e[t+a]^=s[a]}});return e.Decryptor=t,e}(),n.mode.OFB)},615:function(e,t,r){e.exports=(e=r(249),r(109),e.pad.AnsiX923={pad:function(e,t){var r=e.sigBytes,t=4*t,t=t-r%t,r=r+t-1;e.clamp(),e.words[r>>>2]|=t<<24-r%4*8,e.sigBytes+=t},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Ansix923)},807:function(e,t,r){var n;e.exports=(n=r(249),r(109),n.pad.Iso10126={pad:function(e,t){t*=4,t-=e.sigBytes%t;e.concat(n.lib.WordArray.random(t-1)).concat(n.lib.WordArray.create([t<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.pad.Iso10126)},77:function(e,t,r){var n;e.exports=(n=r(249),r(109),n.pad.Iso97971={pad:function(e,t){e.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(e,t)},unpad:function(e){n.pad.ZeroPadding.unpad(e),e.sigBytes--}},n.pad.Iso97971)},991:function(e,t,r){e.exports=(e=r(249),r(109),e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding)},475:function(e,t,r){e.exports=(e=r(249),r(109),e.pad.ZeroPadding={pad:function(e,t){t*=4;e.clamp(),e.sigBytes+=t-(e.sigBytes%t||t)},unpad:function(e){for(var t=e.words,r=e.sigBytes-1,r=e.sigBytes-1;0<=r;r--)if(t[r>>>2]>>>24-r%4*8&255){e.sigBytes=r+1;break}}},e.pad.ZeroPadding)},112:function(e,t,r){var s;e.exports=(s=r(249),r(153),r(824),function(){var e=s,t=(n=e.lib).Base,v=n.WordArray,r=e.algo,n=r.SHA256,y=r.HMAC,i=r.PBKDF2=t.extend({cfg:t.extend({keySize:4,hasher:n,iterations:25e4}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,n=y.create(r.hasher,e),i=v.create(),s=v.create([1]),a=i.words,o=s.words,u=r.keySize,c=r.iterations;a.length<u;){var l=n.update(t).finalize(s);n.reset();for(var f=l.words,h=f.length,d=l,p=1;p<c;p++){d=n.finalize(d),n.reset();for(var g=d.words,_=0;_<h;_++)f[_]^=g[_]}i.concat(l),o[0]++}return i.sigBytes=4*u,i}});e.PBKDF2=function(e,t,r){return i.create(r).compute(e,t)}}(),s.PBKDF2)},974:function(e,t,r){var n;e.exports=(n=r(249),r(269),r(214),r(888),r(109),function(){var e=n,t=e.lib.StreamCipher,r=e.algo,i=[],a=[],o=[],r=r.RabbitLegacy=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],n=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]],i=this._b=0;i<4;i++)nextState.call(this);for(i=0;i<8;i++)n[i]^=r[i+4&7];if(t){var s=t.words,a=s[0],e=s[1],t=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),s=16711935&(e<<8|e>>>24)|4278255360&(e<<24|e>>>8),a=t>>>16|4294901760&s,e=s<<16|65535&t;n[0]^=t,n[1]^=a,n[2]^=s,n[3]^=e,n[4]^=t,n[5]^=a,n[6]^=s,n[7]^=e;for(i=0;i<4;i++)nextState.call(this)}},_doProcessBlock:function(e,t){var r=this._X;nextState.call(this),i[0]=r[0]^r[5]>>>16^r[3]<<16,i[1]=r[2]^r[7]>>>16^r[5]<<16,i[2]=r[4]^r[1]>>>16^r[7]<<16,i[3]=r[6]^r[3]>>>16^r[1]<<16;for(var n=0;n<4;n++)i[n]=16711935&(i[n]<<8|i[n]>>>24)|4278255360&(i[n]<<24|i[n]>>>8),e[t+n]^=i[n]},blockSize:4,ivSize:2});function nextState(){for(var e=this._X,t=this._C,r=0;r<8;r++)a[r]=t[r];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0;for(r=0;r<8;r++){var n=e[r]+t[r],i=65535&n,s=n>>>16,s=((i*i>>>17)+i*s>>>15)+s*s,n=((4294901760&n)*n|0)+((65535&n)*n|0);o[r]=s^n}e[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,e[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,e[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,e[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,e[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,e[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,e[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,e[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}e.RabbitLegacy=t._createHelper(r)}(),n.RabbitLegacy)},454:function(e,t,r){var n;e.exports=(n=r(249),r(269),r(214),r(888),r(109),function(){var e=n,t=e.lib.StreamCipher,r=e.algo,i=[],a=[],o=[],r=r.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,r=0;r<4;r++)e[r]=16711935&(e[r]<<8|e[r]>>>24)|4278255360&(e[r]<<24|e[r]>>>8);for(var n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]],r=this._b=0;r<4;r++)nextState.call(this);for(r=0;r<8;r++)i[r]^=n[r+4&7];if(t){var s=t.words,a=s[0],o=s[1],t=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),s=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),a=t>>>16|4294901760&s,o=s<<16|65535&t;i[0]^=t,i[1]^=a,i[2]^=s,i[3]^=o,i[4]^=t,i[5]^=a,i[6]^=s,i[7]^=o;for(r=0;r<4;r++)nextState.call(this)}},_doProcessBlock:function(e,t){var r=this._X;nextState.call(this),i[0]=r[0]^r[5]>>>16^r[3]<<16,i[1]=r[2]^r[7]>>>16^r[5]<<16,i[2]=r[4]^r[1]>>>16^r[7]<<16,i[3]=r[6]^r[3]>>>16^r[1]<<16;for(var n=0;n<4;n++)i[n]=16711935&(i[n]<<8|i[n]>>>24)|4278255360&(i[n]<<24|i[n]>>>8),e[t+n]^=i[n]},blockSize:4,ivSize:2});function nextState(){for(var e=this._X,t=this._C,r=0;r<8;r++)a[r]=t[r];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0;for(r=0;r<8;r++){var n=e[r]+t[r],i=65535&n,s=n>>>16,s=((i*i>>>17)+i*s>>>15)+s*s,n=((4294901760&n)*n|0)+((65535&n)*n|0);o[r]=s^n}e[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,e[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,e[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,e[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,e[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,e[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,e[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,e[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}e.Rabbit=t._createHelper(r)}(),n.Rabbit)},857:function(e,t,r){var i;e.exports=(i=r(249),r(269),r(214),r(888),r(109),function(){var e=i,t=e.lib.StreamCipher,r=e.algo,n=r.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,r=e.sigBytes,n=this._S=[],i=0;i<256;i++)n[i]=i;for(var i=0,s=0;i<256;i++){var a=i%r,a=t[a>>>2]>>>24-a%4*8&255,s=(s+n[i]+a)%256,a=n[i];n[i]=n[s],n[s]=a}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=generateKeystreamWord.call(this)},keySize:8,ivSize:0});function generateKeystreamWord(){for(var e=this._S,t=this._i,r=this._j,n=0,i=0;i<4;i++){r=(r+e[t=(t+1)%256])%256;var s=e[t];e[t]=e[r],e[r]=s,n|=e[(e[t]+e[r])%256]<<24-8*i}return this._i=t,this._j=r,n}e.RC4=t._createHelper(n),r=r.RC4Drop=n.extend({cfg:n.cfg.extend({drop:192}),_doReset:function(){n._doReset.call(this);for(var e=this.cfg.drop;0<e;e--)generateKeystreamWord.call(this)}}),e.RC4Drop=t._createHelper(r)}(),i.RC4)},706:function(e,t,r){var i;e.exports=(i=r(249),function(){var e=i,t=(n=e.lib).WordArray,r=n.Hasher,n=e.algo,k=t.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),C=t.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),E=t.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),B=t.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),R=t.create([0,1518500249,1859775393,2400959708,2840853838]),x=t.create([1352829926,1548603684,1836072691,2053994217,0]),n=n.RIPEMD160=r.extend({_doReset:function(){this._hash=t.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var n=t+r,i=e[n];e[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}for(var s,a,o,u,c,l,f=this._hash.words,h=R.words,d=x.words,p=k.words,g=C.words,_=E.words,v=B.words,y=s=f[0],m=a=f[1],w=o=f[2],S=u=f[3],b=c=f[4],r=0;r<80;r+=1)l=s+e[t+p[r]]|0,l+=r<16?(a^o^u)+h[0]:r<32?f2(a,o,u)+h[1]:r<48?((a|~o)^u)+h[2]:r<64?f4(a,o,u)+h[3]:(a^(o|~u))+h[4],l=(l=rotl(l|=0,_[r]))+c|0,s=c,c=u,u=rotl(o,10),o=a,a=l,l=y+e[t+g[r]]|0,l+=r<16?(m^(w|~S))+d[0]:r<32?f4(m,w,S)+d[1]:r<48?((m|~w)^S)+d[2]:r<64?f2(m,w,S)+d[3]:(m^w^S)+d[4],l=(l=rotl(l|=0,v[r]))+b|0,y=b,b=S,S=rotl(w,10),w=m,m=l;l=f[1]+o+S|0,f[1]=f[2]+u+b|0,f[2]=f[3]+c+y|0,f[3]=f[4]+s+m|0,f[4]=f[0]+a+w|0,f[0]=l},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32,t[14+(64+n>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(t.length+1),this._process();for(var t=this._hash,i=t.words,s=0;s<5;s++){var a=i[s];i[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}return t},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});function f2(e,t,r){return e&t|~e&r}function f4(e,t,r){return e&r|t&~r}function rotl(e,t){return e<<t|e>>>32-t}e.RIPEMD160=r._createHelper(n),e.HmacRIPEMD160=r._createHmacHelper(n)}(Math),i.RIPEMD160)},783:function(e,t,r){var i;e.exports=(i=r(249),function(){var e=i,t=(n=e.lib).WordArray,r=n.Hasher,n=e.algo,l=[],n=n.SHA1=r.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],s=r[2],a=r[3],o=r[4],u=0;u<80;u++){u<16?l[u]=0|e[t+u]:(c=l[u-3]^l[u-8]^l[u-14]^l[u-16],l[u]=c<<1|c>>>31);var c=(n<<5|n>>>27)+o+l[u];c+=u<20?1518500249+(i&s|~i&a):u<40?1859775393+(i^s^a):u<60?(i&s|i&a|s&a)-1894007588:(i^s^a)-899497514,o=a,a=s,s=i<<30|i>>>2,i=n,n=c}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+s|0,r[3]=r[3]+a|0,r[4]=r[4]+o|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(64+n>>>9<<4)]=Math.floor(r/4294967296),t[15+(64+n>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=r._createHelper(n),e.HmacSHA1=r._createHmacHelper(n)}(),i.SHA1)},792:function(e,t,r){var i;e.exports=(i=r(249),r(153),function(){var e=i,t=e.lib.WordArray,r=(n=e.algo).SHA256,n=n.SHA224=r.extend({_doReset:function(){this._hash=new t.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=4,e}});e.SHA224=r._createHelper(n),e.HmacSHA224=r._createHmacHelper(n)}(),i.SHA224)},153:function(e,t,r){var a;e.exports=(a=r(249),function(i){var e=a,t=(n=e.lib).WordArray,r=n.Hasher,n=e.algo,s=[],g=[];!function(){function getFractionalBits(e){return 4294967296*(e-(0|e))|0}for(var e=2,t=0;t<64;)!function isPrime(e){for(var t=i.sqrt(e),r=2;r<=t;r++)if(!(e%r))return;return 1}(e)||(t<8&&(s[t]=getFractionalBits(i.pow(e,.5))),g[t]=getFractionalBits(i.pow(e,1/3)),t++),e++}();var _=[],n=n.SHA256=r.extend({_doReset:function(){this._hash=new t.init(s.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],s=r[2],a=r[3],o=r[4],u=r[5],c=r[6],l=r[7],f=0;f<64;f++){f<16?_[f]=0|e[t+f]:(d=((p=_[f-15])<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,p=((h=_[f-2])<<15|h>>>17)^(h<<13|h>>>19)^h>>>10,_[f]=d+_[f-7]+p+_[f-16]);var h=n&i^n&s^i&s,d=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),p=l+((o<<26|o>>>6)^(o<<21|o>>>11)^(o<<7|o>>>25))+(o&u^~o&c)+g[f]+_[f],l=c,c=u,u=o,o=a+p|0,a=s,s=i,i=n,n=p+(d+h)|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+s|0,r[3]=r[3]+a|0,r[4]=r[4]+o|0,r[5]=r[5]+u|0,r[6]=r[6]+c|0,r[7]=r[7]+l|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(64+n>>>9<<4)]=i.floor(r/4294967296),t[15+(64+n>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA256=r._createHelper(n),e.HmacSHA256=r._createHmacHelper(n)}(Math),a.SHA256)},327:function(e,t,r){var i;e.exports=(i=r(249),r(938),function(l){var e=i,f=(t=e.lib).WordArray,n=t.Hasher,h=e.x64.Word,t=e.algo,B=[],R=[],x=[];!function(){for(var e=1,t=0,r=0;r<24;r++){B[e+5*t]=(r+1)*(r+2)/2%64;var n=(2*e+3*t)%5;e=t%5,t=n}for(e=0;e<5;e++)for(t=0;t<5;t++)R[e+5*t]=t+(2*e+3*t)%5*5;for(var i=1,s=0;s<24;s++){for(var a,o=0,u=0,c=0;c<7;c++)1&i&&((a=(1<<c)-1)<32?u^=1<<a:o^=1<<a-32),128&i?i=i<<1^113:i<<=1;x[s]=h.create(o,u)}}();var P=[];!function(){for(var e=0;e<25;e++)P[e]=h.create()}(),t=t.SHA3=n.extend({cfg:n.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new h.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var r=this._state,n=this.blockSize/2,i=0;i<n;i++){var s=16711935&((s=e[t+2*i])<<8|s>>>24)|4278255360&(s<<24|s>>>8),a=16711935&((a=e[t+2*i+1])<<8|a>>>24)|4278255360&(a<<24|a>>>8);(b=r[i]).high^=a,b.low^=s}for(var o=0;o<24;o++){for(var u=0;u<5;u++){for(var c=0,l=0,f=0;f<5;f++)c^=(b=r[u+5*f]).high,l^=b.low;var h=P[u];h.high=c,h.low=l}for(u=0;u<5;u++)for(var d=P[(u+4)%5],p=P[(u+1)%5],g=p.high,p=p.low,c=d.high^(g<<1|p>>>31),l=d.low^(p<<1|g>>>31),f=0;f<5;f++)(b=r[u+5*f]).high^=c,b.low^=l;for(var _=1;_<25;_++){var v=(b=r[_]).high,y=b.low,m=B[_];l=m<32?(c=v<<m|y>>>32-m,y<<m|v>>>32-m):(c=y<<m-32|v>>>64-m,v<<m-32|y>>>64-m);m=P[R[_]];m.high=c,m.low=l}var w=P[0],S=r[0];w.high=S.high,w.low=S.low;for(u=0;u<5;u++)for(f=0;f<5;f++){var b=r[_=u+5*f],k=P[_],C=P[(u+1)%5+5*f],E=P[(u+2)%5+5*f];b.high=k.high^~C.high&E.high,b.low=k.low^~C.low&E.low}b=r[0],S=x[o];b.high^=S.high,b.low^=S.low}},_doFinalize:function(){var e=this._data,t=e.words,r=(this._nDataBytes,8*e.sigBytes),n=32*this.blockSize;t[r>>>5]|=1<<24-r%32,t[(l.ceil((1+r)/n)*n>>>5)-1]|=128,e.sigBytes=4*t.length,this._process();for(var i=this._state,t=this.cfg.outputLength/8,s=t/8,a=[],o=0;o<s;o++){var u=i[o],c=16711935&((c=u.high)<<8|c>>>24)|4278255360&(c<<24|c>>>8),u=16711935&((u=u.low)<<8|u>>>24)|4278255360&(u<<24|u>>>8);a.push(u),a.push(c)}return new f.init(a,t)},clone:function(){for(var e=n.clone.call(this),t=e._state=this._state.slice(0),r=0;r<25;r++)t[r]=t[r].clone();return e}}),e.SHA3=n._createHelper(t),e.HmacSHA3=n._createHmacHelper(t)}(Math),i.SHA3)},460:function(e,t,r){var s;e.exports=(s=r(249),r(938),r(34),function(){var e=s,t=(i=e.x64).Word,r=i.WordArray,n=(i=e.algo).SHA512,i=i.SHA384=n.extend({_doReset:function(){this._hash=new r.init([new t.init(3418070365,3238371032),new t.init(1654270250,914150663),new t.init(2438529370,812702999),new t.init(355462360,4144912697),new t.init(1731405415,4290775857),new t.init(2394180231,1750603025),new t.init(3675008525,1694076839),new t.init(1203062813,3204075428)])},_doFinalize:function(){var e=n._doFinalize.call(this);return e.sigBytes-=16,e}});e.SHA384=n._createHelper(i),e.HmacSHA384=n._createHmacHelper(i)}(),s.SHA384)},34:function(e,t,r){var s;e.exports=(s=r(249),r(938),function(){var e=s,t=e.lib.Hasher,r=(i=e.x64).Word,n=i.WordArray,i=e.algo;function X64Word_create(){return r.create.apply(r,arguments)}var te=[X64Word_create(1116352408,3609767458),X64Word_create(1899447441,602891725),X64Word_create(3049323471,3964484399),X64Word_create(3921009573,2173295548),X64Word_create(961987163,4081628472),X64Word_create(1508970993,3053834265),X64Word_create(2453635748,2937671579),X64Word_create(2870763221,3664609560),X64Word_create(3624381080,2734883394),X64Word_create(310598401,1164996542),X64Word_create(607225278,1323610764),X64Word_create(1426881987,3590304994),X64Word_create(1925078388,4068182383),X64Word_create(2162078206,991336113),X64Word_create(2614888103,633803317),X64Word_create(3248222580,3479774868),X64Word_create(3835390401,2666613458),X64Word_create(4022224774,944711139),X64Word_create(264347078,2341262773),X64Word_create(604807628,2007800933),X64Word_create(770255983,1495990901),X64Word_create(1249150122,1856431235),X64Word_create(1555081692,3175218132),X64Word_create(1996064986,2198950837),X64Word_create(2554220882,3999719339),X64Word_create(2821834349,766784016),X64Word_create(2952996808,2566594879),X64Word_create(3210313671,3203337956),X64Word_create(3336571891,1034457026),X64Word_create(3584528711,2466948901),X64Word_create(113926993,3758326383),X64Word_create(338241895,168717936),X64Word_create(666307205,1188179964),X64Word_create(773529912,1546045734),X64Word_create(1294757372,1522805485),X64Word_create(1396182291,2643833823),X64Word_create(1695183700,2343527390),X64Word_create(1986661051,1014477480),X64Word_create(2177026350,1206759142),X64Word_create(2456956037,344077627),X64Word_create(2730485921,1290863460),X64Word_create(2820302411,3158454273),X64Word_create(3259730800,3505952657),X64Word_create(3345764771,106217008),X64Word_create(3516065817,3606008344),X64Word_create(3600352804,1432725776),X64Word_create(4094571909,1467031594),X64Word_create(275423344,851169720),X64Word_create(430227734,3100823752),X64Word_create(506948616,1363258195),X64Word_create(659060556,3750685593),X64Word_create(883997877,3785050280),X64Word_create(958139571,3318307427),X64Word_create(1322822218,3812723403),X64Word_create(1537002063,2003034995),X64Word_create(1747873779,3602036899),X64Word_create(1955562222,1575990012),X64Word_create(2024104815,1125592928),X64Word_create(2227730452,2716904306),X64Word_create(2361852424,442776044),X64Word_create(2428436474,593698344),X64Word_create(2756734187,3733110249),X64Word_create(3204031479,2999351573),X64Word_create(3329325298,3815920427),X64Word_create(3391569614,3928383900),X64Word_create(3515267271,566280711),X64Word_create(3940187606,3454069534),X64Word_create(4118630271,4000239992),X64Word_create(116418474,1914138554),X64Word_create(174292421,2731055270),X64Word_create(289380356,3203993006),X64Word_create(460393269,320620315),X64Word_create(685471733,587496836),X64Word_create(852142971,1086792851),X64Word_create(1017036298,365543100),X64Word_create(1126000580,2618297676),X64Word_create(1288033470,3409855158),X64Word_create(1501505948,4234509866),X64Word_create(1607167915,987167468),X64Word_create(1816402316,1246189591)],re=[];!function(){for(var e=0;e<80;e++)re[e]=X64Word_create()}(),i=i.SHA512=t.extend({_doReset:function(){this._hash=new n.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],s=r[2],a=r[3],o=r[4],u=r[5],c=r[6],l=r[7],f=n.high,h=n.low,d=i.high,p=i.low,g=s.high,_=s.low,v=a.high,y=a.low,m=o.high,w=o.low,S=u.high,b=u.low,k=c.high,C=c.low,E=l.high,r=l.low,B=f,R=h,x=d,P=p,M=g,A=_,D=v,I=y,W=m,T=w,L=S,U=b,F=k,O=C,H=E,N=r,z=0;z<80;z++){var q,j,X=re[z];z<16?(j=X.high=0|e[t+2*z],q=X.low=0|e[t+2*z+1]):(K=(($=(J=re[z-15]).high)>>>1|(Z=J.low)<<31)^($>>>8|Z<<24)^$>>>7,Q=(Z>>>1|$<<31)^(Z>>>8|$<<24)^(Z>>>7|$<<25),V=((Y=(ee=re[z-2]).high)>>>19|(G=ee.low)<<13)^(Y<<3|G>>>29)^Y>>>6,J=(G>>>19|Y<<13)^(G<<3|Y>>>29)^(G>>>6|Y<<26),j=(j=(j=K+(Z=re[z-7]).high+((q=Q+Z.low)>>>0<Q>>>0?1:0))+V+((q+=J)>>>0<J>>>0?1:0))+($=re[z-16]).high+((q+=ee=$.low)>>>0<ee>>>0?1:0),X.high=j,X.low=q);var G=W&L^~W&F,Y=T&U^~T&O,K=B&x^B&M^x&M,Z=R&P^R&A^P&A,Q=(B>>>28|R<<4)^(B<<30|R>>>2)^(B<<25|R>>>7),V=(R>>>28|B<<4)^(R<<30|B>>>2)^(R<<25|B>>>7),J=(W>>>14|T<<18)^(W>>>18|T<<14)^(W<<23|T>>>9),$=(T>>>14|W<<18)^(T>>>18|W<<14)^(T<<23|W>>>9),ee=te[z],X=ee.high,ee=ee.low,$=N+$,J=H+J+($>>>0<N>>>0?1:0),Z=V+Z,H=F,N=O,F=L,O=U,L=W,U=T,W=D+(J=(J=(J=J+G+(($=$+Y)>>>0<Y>>>0?1:0))+X+(($=$+ee)>>>0<ee>>>0?1:0))+j+(($=$+q)>>>0<q>>>0?1:0))+((T=I+$|0)>>>0<I>>>0?1:0)|0,D=M,I=A,M=x,A=P,x=B,P=R,B=J+(Q+K+(Z>>>0<V>>>0?1:0))+((R=$+Z|0)>>>0<$>>>0?1:0)|0}h=n.low=h+R,n.high=f+B+(h>>>0<R>>>0?1:0),p=i.low=p+P,i.high=d+x+(p>>>0<P>>>0?1:0),_=s.low=_+A,s.high=g+M+(_>>>0<A>>>0?1:0),y=a.low=y+I,a.high=v+D+(y>>>0<I>>>0?1:0),w=o.low=w+T,o.high=m+W+(w>>>0<T>>>0?1:0),b=u.low=b+U,u.high=S+L+(b>>>0<U>>>0?1:0),C=c.low=C+O,c.high=k+F+(C>>>0<O>>>0?1:0),r=l.low=r+N,l.high=E+H+(r>>>0<N>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[30+(128+n>>>10<<5)]=Math.floor(r/4294967296),t[31+(128+n>>>10<<5)]=r,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32}),e.SHA512=t._createHelper(i),e.HmacSHA512=t._createHmacHelper(i)}(),s.SHA512)},253:function(e,t,r){var s;e.exports=(s=r(249),r(269),r(214),r(888),r(109),function(){var e=s,n=(r=e.lib).WordArray,t=r.BlockCipher,r=e.algo,c=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],f=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],h=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],i=r.DES=t.extend({_doReset:function(){for(var e=this._key.words,t=[],r=0;r<56;r++){var n=c[r]-1;t[r]=e[n>>>5]>>>31-n%32&1}for(var i=this._subKeys=[],s=0;s<16;s++){for(var a=i[s]=[],o=f[s],r=0;r<24;r++)a[r/6|0]|=t[(l[r]-1+o)%28]<<31-r%6,a[4+(r/6|0)]|=t[28+(l[r+24]-1+o)%28]<<31-r%6;a[0]=a[0]<<1|a[0]>>>31;for(r=1;r<7;r++)a[r]=a[r]>>>4*(r-1)+3;a[7]=a[7]<<5|a[7]>>>27}for(var u=this._invSubKeys=[],r=0;r<16;r++)u[r]=i[15-r]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,r){this._lBlock=e[t],this._rBlock=e[t+1],exchangeLR.call(this,4,252645135),exchangeLR.call(this,16,65535),exchangeRL.call(this,2,858993459),exchangeRL.call(this,8,16711935),exchangeLR.call(this,1,1431655765);for(var n=0;n<16;n++){for(var i=r[n],s=this._lBlock,a=this._rBlock,o=0,u=0;u<8;u++)o|=h[u][((a^i[u])&d[u])>>>0];this._lBlock=a,this._rBlock=s^o}var c=this._lBlock;this._lBlock=this._rBlock,this._rBlock=c,exchangeLR.call(this,1,1431655765),exchangeRL.call(this,8,16711935),exchangeRL.call(this,2,858993459),exchangeLR.call(this,16,65535),exchangeLR.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function exchangeLR(e,t){t=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=t,this._lBlock^=t<<e}function exchangeRL(e,t){t=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=t,this._rBlock^=t<<e}e.DES=t._createHelper(i),r=r.TripleDES=t.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),r=e.length<4?e.slice(0,2):e.slice(2,4),e=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=i.createEncryptor(n.create(t)),this._des2=i.createEncryptor(n.create(r)),this._des3=i.createEncryptor(n.create(e))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2}),e.TripleDES=t._createHelper(r)}(),s.TripleDES)},938:function(e,t,r){var n;e.exports=(n=r(249),function(){var e=n.lib,i=e.Base,s=e.WordArray;(e=n.x64={}).Word=i.extend({init:function(e,t){this.high=e,this.low=t}}),e.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,r=[],n=0;n<t;n++){var i=e[n];r.push(i.high),r.push(i.low)}return s.create(r,this.sigBytes)},clone:function(){for(var e=i.clone.call(this),t=e.words=this.words.slice(0),r=t.length,n=0;n<r;n++)t[n]=t[n].clone();return e}})}(),n)},480:function(){}},n={};function __webpack_require__(e){var t=n[e];if(void 0!==t)return t.exports;t=n[e]={exports:{}};return r[e].call(t.exports,t,t.exports,__webpack_require__),t.exports}__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=function(e,t){for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var e=function(){function CDMap(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CDMap),this._pairs=[],this.size=0}return function _createClass(e,t,r){t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(CDMap,[{key:"has",value:function has(e){return-1<this._indexOf(e)}},{key:"get",value:function get(e){e=this._indexOf(e);if(-1<e)return this._pairs[e][1]}},{key:"set",value:function set(e,t){var r=this._indexOf(e);-1<r?this._pairs[r][1]=t:(this._pairs.push([e,t]),this.size++)}},{key:"delete",value:function _delete(e){e=this._indexOf(e);return-1<e&&(this._pairs.splice(e,1),this.size--,!0)}},{key:"forEach",value:function forEach(e){for(var t=0;t<this._pairs.length;t++)e(this._pairs[t][1],this._pairs[t][0])}},{key:"clear",value:function clear(){this._pairs=[]}},{key:"_indexOf",value:function _indexOf(e){for(var t=0;t<this._pairs.length;t++)if(this._pairs[t][0]===e)return t;return-1}}]),CDMap}(),t=function create(){return new(self.Map||e)};function CDSet_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function B6(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=new(self.Set||n),r=0;r<e.length;r++)t.add(e[r]);return t}var n=function(){function CDSet(){!function CDSet_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CDSet),this._set=[],this.size=0}return function CDSet_createClass(e,t,r){t&&CDSet_defineProperties(e.prototype,t),r&&CDSet_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(CDSet,[{key:"add",value:function add(e){return this._set.push(e),this.size++,this}},{key:"has",value:function has(e){return-1<this._set.indexOf(e)}},{key:"delete",value:function _delete(e){for(var t=0;t<this._set.length;t++)if(this._set[t]===e)return this._set.splice(t,1),this.size--,!0;return!1}},{key:"forEach",value:function forEach(e){for(var t=0;t<this._set.length;t++)e(this._set[t])}},{key:"clear",value:function clear(){this._set=[]}}]),CDSet}();function WorkerCommunicator_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function WorkerCommunicator(){!function WorkerCommunicator_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WorkerCommunicator),this._msgListeners=t()}return function WorkerCommunicator_createClass(e,t,r){t&&WorkerCommunicator_defineProperties(e.prototype,t),r&&WorkerCommunicator_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(WorkerCommunicator,[{key:"setMessagingPort",value:function setMessagingPort(e){var i=this;(this._messagePort=e).setonmessage(function(e){var t=e.data,r=[],n=i._msgListeners.get(t.msgType);n&&n.forEach(function(e){e.callback(t.data),e.isOneTime&&r.push(e)}),r.forEach(function(e){n.delete(e)})})}},{key:"sendAsync",value:function sendAsync(e,t,r,n,i){n&&r&&this.addMessageListener(r,n,i),this._messagePort.postMessage({msgType:e,data:t})}},{key:"addMessageListener",value:function addMessageListener(e,t,r){var n=null;this._msgListeners.has(e)?n=this._msgListeners.get(e):(n=B6(),this._msgListeners.set(e,n)),n.add({callback:t,isOneTime:r})}}]),WorkerCommunicator}(),o={resetSessionApiThreshold:"resetSessionApiThreshold",dataWupDispatchRateSettings:"dataWupDispatchRateSettings",logWupDispatchRateSettings:"logWupDispatchRateSettings",forceDynamicDataWupDispatchSettings:"forceDynamicDataWupDispatchSettings",wupStatisticsLogIntervalMs:"wupStatisticsLogIntervalMs",serverCommunicationSettings:"serverCommunicationSettings",wupResponseTimeout:"wupResponseTimeout",wupMessageRequestTimeout:"wupMessageRequestTimeout",logMessageRequestTimeout:"logMessageRequestTimeout",collectKeyRegionValue:"collectKeyRegionValue",crossDomainsList:"crossDomainsList",crossDomainsTimeout:"crossDomainsTimeout",isMutationObserver:"isMutationObserver",isEnabled:"isEnabled",slaveChannelHandshakeTimeout:"slaveChannelHandshakeTimeout",slaveAliveMessageInterval:"slaveAliveMessageInterval",collectCustomElementAttribute:"collectCustomElementAttribute",customElementAttribute:"customElementAttribute",enableFramesProcessing:"enableFramesProcessing",enableSameSiteNoneAndSecureCookies:"enableSameSiteNoneAndSecureCookies",wupServerURL:"wupServerURL",logAddress:"logAddress",shouldMaskClickEventValueField:"shouldMaskClickEventValueField",isCaptureKeyEvents:"isCaptureKeyEvents",locationEventsTimeoutMsec:"locationEventsTimeoutMsec",heartBeatMessageInterval:"heartBeatMessageInterval",isMotionAroundTouchEnabled:"isMotionAroundTouchEnabled",motionPaddingAroundTouchMSec:"motionPaddingAroundTouchMSec",isMotionOnSessionStart:"isMotionOnSessionStart",motionPaddingOnSessionStartMSec:"motionPaddingOnSessionStartMSec",isVMDetection:"isVMDetection",isScrollCollect:"isScrollCollect",isContextPropsFeature:"isContextPropsFeature",isCrossDomain:"isCrossdomain",gyroEventsThreshold:"gyroEventsThreshold",gyroEventsSamplePeriod:"gyroEventsSamplePeriod",dataQPassWorkerInterval:"dataQPassWorkerInterval",accelerometerEventsSamplePeriod:"accelerometerEventsSamplePeriod",orientationEventsThreshold:"orientationEventsThreshold",orientationEventsSamplePeriod:"orientationEventsSamplePeriod",isAudioDetection:"isAudioDetection",stateChangeEnabled:"stateChangeEnabled",logLevel:"logLevel",enableCustomElementsProcessing:"enableCustomElementsProcessing",keyEventsMaskSpecialChars:"keyEventsMaskSpecialChars",collectSelectElementBlurAndFocusEvents:"collectSelectElementBlurAndFocusEvents",allowedUnmaskedValuesList:"allowedUnmaskedValuesList",enableUnmaskedValues:"enableUnmaskedValues",wupMessageNumToRetry:"wupMessageNumToRetry",wupMessageRetryInterval:"wupMessageRetryInterval",wupIncrementalGrowthBetweenFailures:"wupIncrementalGrowthBetweenFailures",wupMaxIntervalBetweenFailures:"wupMaxIntervalBetweenFailures",logMessageNumToRetry:"logMessageNumToRetry",logMessageRetryInterval:"logMessageRetryInterval",logIncrementalGrowthBetweenFailures:"logIncrementalGrowthBetweenFailures",logMaxIntervalBetweenFailures:"logMaxIntervalBetweenFailures",cdsNumExpirationTime:"cdsNumExpirationTime",enableCoordinatesMasking:"enableCoordinatesMasking",maskElementsAttributes:"maskElementsAttributes",enableAcknowledgeMessageEvents:"enableAcknowledgeMessageEvents",timeTillClearingElementsBufferQueueTimeout:"timeTillClearingElementsBufferQueueTimeout",acknowledgeDataDispatchingRate:"acknowledgeDataDispatchingRate",isChannelSupportsAckMessageLogic:"isChannelSupportsAckMessageLogic",parentElementSelector:"parentElementSelector",childElementWithCustomAttribute:"childElementWithCustomAttribute",elementDataAttribute:"elementDataAttribute",customButtons:"customButtons",enableAutoElementId:"enableAutoElementId",autoElementIdLimit:"autoElementIdLimit",agentType:"agentType",collectionMode:"collectionMode",enableWupMessagesHashing:"enableWupMessagesHashing",enableStartupCustomerSessionId:"enableStartupCustomerSessionId"},r="NewSessionStartedEvent",s="ConfigurationLoadedEvent",a="ServerStateUpdatedEvent",u="HeartBeatStatusEvent",c="ServerRestoredMuidEvent",l="ServerNewAgentIdEvent",f={DEBUG:10,INFO:20,WARN:30,ERROR:40,CRITICAL:50,OFF:80};function ConfigurationRepository_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var h={defaultDynamicWupDispatchRateConfiguration:{type:"dynamic"},defaultIncrementalWupDispatchRateConfiguration:{type:"incremental",initialRateValueMs:500,incrementStepMs:500,incrementStopMs:5e3,incrementStartWupSendCount:20}},d=function(){function ConfigurationRepository(){!function ConfigurationRepository_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ConfigurationRepository),this._requireParseFields=t(),this._requireParseFields.set(o.dataWupDispatchRateSettings,o.dataWupDispatchRateSettings),this._requireParseFields.set(o.logWupDispatchRateSettings,o.logWupDispatchRateSettings),this._requireParseFields.set(o.crossDomainsList,o.crossDomainsList),this._requireParseFields.set(o.allowedUnmaskedValuesList,o.allowedUnmaskedValuesList),this._requireParseFields.set(o.serverCommunicationSettings,o.serverCommunicationSettings),this._configurationList={},this.configDefault={logLevel:f.INFO,isCrossdomain:!1,crossDomainsList:[],crossDomainsTimeout:5e3,orientationEventsSamplePeriod:300,orientationEventsThreshold:1,stateChangeEnabled:!1,accelerometerEventsSamplePeriod:0,dataQPassWorkerInterval:500,gyroEventsSamplePeriod:0,gyroEventsThreshold:.3,isContextPropsFeature:!0,isEnabled:!0,isResetEveryLoad:!1,isScrollCollect:!0,isVMDetection:!0,isAudioDetection:!1,wupStatisticsLogIntervalMs:3e4,heartBeatMessageInterval:5e3,resetSessionApiThreshold:2e4,wupMessageRequestTimeout:5e3,logMessageRequestTimeout:5e3,slaveChannelHandshakeTimeout:6e4,slaveAliveMessageInterval:100,forceDynamicDataWupDispatchSettings:!0,dataWupDispatchRateSettings:h.defaultDynamicWupDispatchRateConfiguration,logWupDispatchRateSettings:{type:"constant",initialRateValueMs:2500},serverCommunicationSettings:{queueLoadThreshold:100},collectKeyRegionValue:!1,isMutationObserver:!0,collectCustomElementAttribute:!0,shouldMaskClickEventValueField:!0,isCaptureKeyEvents:!1,locationEventsTimeoutMsec:1e4,isMotionAroundTouchEnabled:!0,motionPaddingAroundTouchMSec:3e3,isMotionOnSessionStart:!0,motionPaddingOnSessionStartMSec:2e4,keyEventsMaskSpecialChars:!1,collectSelectElementBlurAndFocusEvents:!1,enableUnmaskedValues:!1,allowedUnmaskedValuesList:[],wupMessageNumToRetry:5,wupMessageRetryInterval:1e3,wupIncrementalGrowthBetweenFailures:3500,wupMaxIntervalBetweenFailures:16e3,logMessageNumToRetry:5,logMessageRetryInterval:1e3,logIncrementalGrowthBetweenFailures:3500,logMaxIntervalBetweenFailures:16e3,cdsNumExpirationTime:60,enableCoordinatesMasking:!1,acknowledgeDataDispatchingRate:3e3},this.loadConfigurations(this.configDefault)}return function ConfigurationRepository_createClass(e,t,r){t&&ConfigurationRepository_defineProperties(e.prototype,t),r&&ConfigurationRepository_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(ConfigurationRepository,[{key:"isConfigurationUpdatedFromServer",value:function isConfigurationUpdatedFromServer(){return!this._isDefaultConfiguration}},{key:"loadConfigurations",value:function loadConfigurations(n){var i=this;n&&(this._isDefaultConfiguration=n===this.configDefault,Object.keys(n).forEach(function(e){var t,r=n[e];!i._requireParseFields.has(e)||(t=i._tryParseConfigurationValue(r))&&(r=t),i._configurationList[e]=r}))}},{key:"get",value:function get(e){return this._configurationList[e]}},{key:"set",value:function set(e,t){this._configurationList[e]=t}},{key:"getAll",value:function getAll(){return this._configurationList}},{key:"_tryParseConfigurationValue",value:function _tryParseConfigurationValue(e){if("string"!=typeof e)return null;try{return JSON.parse(e)}catch(e){}return null}}]),ConfigurationRepository}();function CDEvent_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var p=function(){function CDEvent(){!function CDEvent_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CDEvent),this._listeners=[]}return function CDEvent_createClass(e,t,r){t&&CDEvent_defineProperties(e.prototype,t),r&&CDEvent_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(CDEvent,[{key:"subscribe",value:function subscribe(e){this._listeners.push(e)}},{key:"publish",value:function publish(e){for(var t=0,r=this._listeners.length;t<r;t++)this._listeners[t](e)}},{key:"unsubscribe",value:function unsubscribe(e){for(var t=0,r=this._listeners.length;t<r;t++)if(e===this._listeners[t]){this._listeners.splice(t,1);break}}}]),CDEvent}();function Logger_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Logger_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Logger_createClass(e,t,r){return t&&Logger_defineProperties(e.prototype,t),r&&Logger_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var g=function(){function Log(){Logger_classCallCheck(this,Log)}return Logger_createClass(Log,null,[{key:"setLogger",value:function setLogger(e){this._logger=e}},{key:"isDebug",value:function isDebug(){if(this._logger)return this._logger.isDebug()}},{key:"error",value:function error(e,t){this._logger&&this._logger.error(e,t||null)}},{key:"warn",value:function warn(e,t){this._logger&&this._logger.warn(e,t||null)}},{key:"trace",value:function trace(e){this._logger&&this._logger.trace(e)}},{key:"debug",value:function debug(e){this._logger&&this._logger.debug(e)}},{key:"info",value:function info(e){this._logger&&this._logger.info(e)}}]),Log}(),_=function(){function Logger(e,t){Logger_classCallCheck(this,Logger),this._logBridge=e,this._logLevel=t||f.INFO}return Logger_createClass(Logger,[{key:"trace",value:function trace(e){this._sendToLogBridge(e,f.DEBUG)}},{key:"debug",value:function debug(e){this._sendToLogBridge(e,f.DEBUG)}},{key:"info",value:function info(e){this._sendToLogBridge(e,f.INFO)}},{key:"warn",value:function warn(e,t){this._sendToLogBridge(e,f.WARN,t)}},{key:"error",value:function error(e,t){this._sendToLogBridge(e,f.ERROR,t)}},{key:"isDebug",value:function isDebug(){return this._logLevel===f.DEBUG}},{key:"updateLogConfig",value:function updateLogConfig(e){this._logLevel=e.get(o.logLevel)||this._logLevel,this._logBridge.setLogLevel(this._logLevel),this._logBridge.clearLogEntriesByLogLevel(this._logLevel)}},{key:"_sendToLogBridge",value:function _sendToLogBridge(e,t,r){t>=this._logLevel&&(r&&r.stack&&(e+=" ;stack: ".concat(r.stack)),this._logBridge.log(e,t))}}]),Logger}();function WupServerSessionState_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var v=function(){function WupServerSessionState(){!function WupServerSessionState_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WupServerSessionState),this.onServerStateUpdated=new p,this.reset()}return function WupServerSessionState_createClass(e,t,r){t&&WupServerSessionState_defineProperties(e.prototype,t),r&&WupServerSessionState_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(WupServerSessionState,[{key:"getSts",value:function getSts(){return this._sts}},{key:"getStd",value:function getStd(){return this._std}},{key:"getSid",value:function getSid(){return this._sid}},{key:"getCsid",value:function getCsid(){return this._csid}},{key:"getPsid",value:function getPsid(){return this._psid}},{key:"getMuid",value:function getMuid(){return this._muid}},{key:"getContextName",value:function getContextName(){return this._contextName}},{key:"getRequestId",value:function getRequestId(){return this._requestId}},{key:"getWupDispatchRate",value:function getWupDispatchRate(){return this._wupDispatchRate}},{key:"getBrand",value:function getBrand(){return this._brand}},{key:"setSts",value:function setSts(e){this._sts=e}},{key:"setStd",value:function setStd(e){this._std=e}},{key:"setSid",value:function setSid(e){this._sid=e}},{key:"setCsid",value:function setCsid(e){this._csid=e}},{key:"setPsid",value:function setPsid(e){this._psid=e}},{key:"setMuid",value:function setMuid(e){this._muid=e||null}},{key:"setOtt",value:function setOtt(e){this._ott=e}},{key:"getOtt",value:function getOtt(){return this._ott}},{key:"setContextName",value:function setContextName(e){this._contextName=e}},{key:"setRequestId",value:function setRequestId(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return this._requestId=e,t&&this._publish(),this._requestId}},{key:"setWupDispatchRate",value:function setWupDispatchRate(e){e?this._wupDispatchRate=e:g.warn("Wup dispatch rate of ".concat(e," is invalid. Ignoring update"))}},{key:"setBrand",value:function setBrand(e){this._brand=e}},{key:"setAgentType",value:function setAgentType(e){this._agent_type=e}},{key:"getAgentType",value:function getAgentType(){return this._agent_type}},{key:"setAgentId",value:function setAgentId(e){this._agent_id=e}},{key:"getAgentId",value:function getAgentId(){return this._agent_id}},{key:"markConfigurationRequested",value:function markConfigurationRequested(){this._hasConfiguration?g.warn("We already have configuration. Ignoring the attempt to mark a pending configuration request."):this._hasPendingConfigurationRequest=!0}},{key:"markConfigurationReceived",value:function markConfigurationReceived(){this._hasConfiguration?g.warn("Marking that we received configuration although we already received configuration from the server. We shouldn\'t have received it again."):this._hasPendingConfigurationRequest||g.warn("Marking that we received configurations although we didn\'t have a pending request for configurations."),this._hasPendingConfigurationRequest=!1,this._hasConfiguration=!0}},{key:"getHasConfiguration",value:function getHasConfiguration(){return this._hasConfiguration}},{key:"getHasPendingConfigurationRequest",value:function getHasPendingConfigurationRequest(){return this._hasPendingConfigurationRequest}},{key:"incrementRequestId",value:function incrementRequestId(){return this._requestId++,this._publish(),this._requestId}},{key:"resetRequestId",value:function resetRequestId(){this._requestId=0}},{key:"reset",value:function reset(){this._ott=null,this._sts=null,this._std=null,this._sid=null,this._csid=null,this._muid=null,this._contextName=null,this._requestId=0,this._wupDispatchRate=5e3,this._hasConfiguration=!1,this._hasPendingConfigurationRequest=!1,this._brand=null,this._agent_type=null,this._agent_id=null}},{key:"_publish",value:function _publish(){this.onServerStateUpdated.publish({requestId:this._requestId,sid:this._sid,sts:this._sts,std:this._std,ott:this._ott})}}]),WupServerSessionState}();function LogRequestBodyBuilder_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var y=function(){function LogRequestBodyBuilder(){!function LogRequestBodyBuilder_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,LogRequestBodyBuilder)}return function LogRequestBodyBuilder_createClass(e,t,r){t&&LogRequestBodyBuilder_defineProperties(e.prototype,t),r&&LogRequestBodyBuilder_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(LogRequestBodyBuilder,[{key:"build",value:function build(e){return e.getInternalMessage()}}]),LogRequestBodyBuilder}();function Queue_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var m=function(){function Queue(){!function Queue_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Queue),this._buffer=[]}return function Queue_createClass(e,t,r){t&&Queue_defineProperties(e.prototype,t),r&&Queue_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(Queue,[{key:"hasItems",value:function hasItems(){return 0<this.length()}},{key:"length",value:function length(){return this._buffer.length}},{key:"enqueue",value:function enqueue(e){this._buffer.push(e)}},{key:"enqueueToHead",value:function enqueueToHead(e){this._buffer.unshift(e)}},{key:"dequeue",value:function dequeue(){return this._buffer.shift()}},{key:"getItem",value:function getItem(e){return this._buffer[e]}}]),Queue}();function DOMUtils_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var w=function(){function DOMUtils(){!function DOMUtils_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DOMUtils)}return function DOMUtils_createClass(e,t,r){t&&DOMUtils_defineProperties(e.prototype,t),r&&DOMUtils_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(DOMUtils,null,[{key:"addEventListener",value:function addEventListener(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]&&arguments[3],i=!(4<arguments.length&&void 0!==arguments[4])||arguments[4],s=5<arguments.length&&void 0!==arguments[5]&&arguments[5];this.isPassiveSupported?e.addEventListener(t,r,{capture:n,passive:i,once:s}):e.addEventListener?e.addEventListener(t,r,n):e.attachEvent("on"+t,r)}},{key:"removeEventListener",value:function removeEventListener(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]&&arguments[3];e.removeEventListener?e.removeEventListener(t,r,n):e.detachEvent("on"+t,r)}},{key:"outerHTML",value:function outerHTML(e){return e.outerHTML||(new XMLSerializer).serializeToString(e)}},{key:"onDocumentBody",value:function onDocumentBody(e,t){e.document.body?t():window.addEventListener?window.addEventListener("DOMContentLoaded",t,!0):window.attachEvent("onload",t)}},{key:"onPageLoad",value:function onPageLoad(e,t){DOMUtils.addEventListener(e,"load",t,!0),(e.contentWindow&&"complete"===e.contentWindow.document.readyState||e.document&&"complete"===e.document.readyState)&&t()}},{key:"waitUntilDocumentIsReady",value:function waitUntilDocumentIsReady(r){var n=this;return new Promise(function(e,t){try{n.onWindowDocumentReady(r,function(){e()})}catch(e){t(e)}})}},{key:"onWindowDocumentReady",value:function onWindowDocumentReady(e,t){var r,n=window.addEventListener?"DOMContentLoaded":"load";"complete"===e.document.readyState||"interactive"===e.document.readyState?t():(r=function onLoadedWindowEvent(){DOMUtils.removeEventListener(e,n,r,!0),t()},DOMUtils.addEventListener(e,n,r,!0))}},{key:"isWindowDocumentReady",value:function isWindowDocumentReady(e){return e&&"complete"===e.document.readyState}},{key:"canAccessIFrame",value:function canAccessIFrame(e){var t=null;try{t=(e.contentDocument||e.contentWindow.document).body.innerHTML}catch(e){}return null!==t}},{key:"matches",value:function matches(e,t){return(e.matches||e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector||function(e){var t=this.document||this.ownerDocument;if(!t)return!1;for(var r=t.querySelectorAll(e),n=r.length;0<=--n;)if((r.item?r.item(n):r[n])===this)break;return-1<n}).call(e,t)}},{key:"isWebWorkerFetchSupported",value:function isWebWorkerFetchSupported(){var e="Request"in self,t="fetch"in self;if(!e)return!1;e="keepalive"in Request.prototype;return t&&e}},{key:"isSubtleCryptoSupported",value:function isSubtleCryptoSupported(){return"SubtleCrypto"in self}}]),DOMUtils}();!function _defineProperty(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(w,"isPassiveSupported",function isPassiveSupported(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function get(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return e}());var S=__webpack_require__(354),b=__webpack_require__.n(S);function HashService_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var k=function(){function HashService(){!function HashService_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HashService)}return function HashService_createClass(e,t,r){t&&HashService_defineProperties(e.prototype,t),r&&HashService_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(HashService,null,[{key:"hashSha256",value:function hashSha256(e,t){if(!w.isSubtleCryptoSupported())return g.info("HashService: SubtleCrypto is not supported using fallback hashing"),void t(null,b().SHA256(e).toString(b().enc.Hex));e=(new TextEncoder).encode(e);crypto.subtle.digest("SHA-256",e).then(function(e){e=Array.from(new Uint8Array(e)).map(function(e){return e.toString(16).padStart(2,"0")}).join("");t(null,e)}).catch(function(e){t(e)})}}]),HashService}();function ServerCommunicator_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var C=function(){function ServerCommunicator(e,t,r,n){var i=4<arguments.length&&void 0!==arguments[4]&&arguments[4],s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:"";!function ServerCommunicator_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ServerCommunicator),this._requestBodyBuilder=e,this.updateSettings(t),this._workerUtils=r,this._acceptNoResponse=i,this._messageDescriptor=s,this.retryMessage=n,this._dataQueue=new m,this._awaitingServerResponse=!1,this._currentSentItem=null,this._sendRetryTimeoutId=null,this._shouldRetryToSendMessage=!1,this._messageIdentifier=0,this._enableRequestBodyHashing=!1}return function ServerCommunicator_createClass(e,t,r){t&&ServerCommunicator_defineProperties(e.prototype,t),r&&ServerCommunicator_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(ServerCommunicator,[{key:"setServerUrl",value:function setServerUrl(e){this.wupUrl=e}},{key:"getServerUrl",value:function getServerUrl(){return this.wupUrl}},{key:"updateSettings",value:function updateSettings(e){this._queueLoadThershold=e.queueLoadThreshold}},{key:"getRetryMessage",value:function getRetryMessage(){return this.retryMessage}},{key:"updateEnableWupMessagesHashing",value:function updateEnableWupMessagesHashing(e){this._enableRequestBodyHashing=e}},{key:"sendMessage",value:function sendMessage(e,t,r,n,i,s,a){function ida(e){o._onMessageSendSuccess(e,i)}function jda(e,t,r){o._onMessageSendFailure(e,t,r,s,a)}var o=this;this._enqueueMessage(e,t,r,n,ida,jda)}},{key:"flush",value:function flush(){this._flushData()}},{key:"isReadyToSendData",value:function isReadyToSendData(){return!!this.wupUrl}},{key:"_onMessageSendSuccess",value:function _onMessageSendSuccess(e,t){this._awaitingServerResponse=!1,this._currentSentItem=null,this._shouldRetryToSendMessage=!1,this.retryMessage.restartMessageSettings(),t(e),this._processNextQueueItem()}},{key:"_onMessageSendFailure",value:function _onMessageSendFailure(e,t,r,n,i){if(!this._currentSentItem)return g.error("An unexpected error has occurred while handling a ".concat(this._messageDescriptor," message send failure. Could not find sent item value. Moving to next queued item")),void this._processNextQueueItem();g.warn("Failed sending ".concat(this._messageDescriptor," message #").concat(this._currentSentItem.identifier,". ").concat(this._buildFailureLog(e,t,r))),this._awaitingServerResponse=!1;r=0===this._currentSentItem.maxNumberOfSendAttempts;this.retryMessage.shouldReMessage(r)?(this._shouldRetryToSendMessage=!0,g.info("Trying to send ".concat(this._messageDescriptor," message #").concat(this._currentSentItem.identifier," again. Number of send failures is ").concat(this.retryMessage.getNumberOfSendFailures())),this._prepareMessageForSendRetry(),n&&n(this.retryMessage.getNumberOfSendFailures())):(this._shouldRetryToSendMessage=!1,this.retryMessage.restartMessageSettings(),g.warn("Discarding ".concat(this._messageDescriptor," message #").concat(this._currentSentItem.identifier," after ").concat(this.retryMessage.getNumberOfSendFailures()," failed send attempts.")),n&&n(this.retryMessage.getNumberOfSendFailures()),this._currentSentItem=null,i&&i(e),this._processNextQueueItem())}},{key:"_enqueueMessage",value:function _enqueueMessage(e,t,r,n,i,s){this._dataQueue.enqueue({identifier:this._messageIdentifier++,messageToSend:e,onSuccess:i,onError:s,timeout:t,maxNumberOfSendAttempts:r}),this._shouldRetryToSendMessage||(this._clearRetryTimeout(),n&&this._flushData(),this._awaitingServerResponse||this._processNextQueueItem(n))}},{key:"_processNextQueueItem",value:function _processNextQueueItem(){var r,n,i=this,s=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];!this._dataQueue.hasItems()&&e||(r=null,e?(r=this._dataQueue.dequeue(),this._currentSentItem=r):r=this._currentSentItem,n=this._requestBodyBuilder.build(r.messageToSend,s),this._enableRequestBodyHashing?k.hashSha256(n,function(e,t){e?g.error(e):i._sendProcessedQueueItem(n,r,s,t)}):this._sendProcessedQueueItem(n,r,s))}},{key:"_sendProcessedQueueItem",value:function _sendProcessedQueueItem(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;w.isWebWorkerFetchSupported()&&r?(r=new Headers,n&&r.append("X-h",n),r={method:"POST",headers:r,body:e,keepalive:!0},this._sendWithFetch(r)):this._sendWithXMLHttpRequest(e,t,n),this._checkQueueLength()}},{key:"_sendWithFetch",value:function _sendWithFetch(e){this._currentSentItem=null,self.fetch(this.wupUrl,e),g.info("Flush data was sent by fetch")}},{key:"_sendWithXMLHttpRequest",value:function _sendWithXMLHttpRequest(e,t,r){this._awaitingServerResponse=!0,this._workerUtils.getPostUrl(this.wupUrl,"POST",e,t.onSuccess,t.onError,this._acceptNoResponse,t.timeout,r)}},{key:"_checkQueueLength",value:function _checkQueueLength(){this._dataQueue.length()>this._queueLoadThershold&&g.warn("Data queue has ".concat(this._dataQueue.length()," items in queue. Might indicate slow\\\\unstable communication issues."))}},{key:"_flushData",value:function _flushData(){for(;this._dataQueue.hasItems();)this._processNextQueueItem(!0)}},{key:"_prepareMessageForSendRetry",value:function _prepareMessageForSendRetry(){var e=this;this._clearRetryTimeout(),this.retryMessage.updateRetryInterval();var t=this.retryMessage.getNextInterval();this._sendRetryTimeoutId=setTimeout(function(){e._processNextQueueItem(!1,!1)},t)}},{key:"_clearRetryTimeout",value:function _clearRetryTimeout(){this._sendRetryTimeoutId&&clearTimeout(this._sendRetryTimeoutId)}},{key:"_buildFailureLog",value:function _buildFailureLog(e,t,r){var n="";return e&&(n+="Response Text: ".concat(e,".")),t&&(n+="Status: ".concat(t,".")),r&&(n+="Status Text: ".concat(r,".")),n}}]),ServerCommunicator}();function LogMessage_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var E=function(){function LogMessage(){!function LogMessage_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,LogMessage)}return function LogMessage_createClass(e,t,r){t&&LogMessage_defineProperties(e.prototype,t),r&&LogMessage_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(LogMessage,[{key:"setData",value:function setData(e){this._data=e}},{key:"getInternalMessage",value:function getInternalMessage(){return this._data}}]),LogMessage}();function LogMessageBuilder_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var B=function(){function LogMessageBuilder(e){!function LogMessageBuilder_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,LogMessageBuilder),this._dataPacker=e}return function LogMessageBuilder_createClass(e,t,r){t&&LogMessageBuilder_defineProperties(e.prototype,t),r&&LogMessageBuilder_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(LogMessageBuilder,[{key:"build",value:function build(e){var t=new E;return t.setData(this._dataPacker.pack(e)),t}}]),LogMessageBuilder}(),R=self.btoa?self.btoa.bind(self):function(e){for(var t,r,n=String(e),i="",s=0,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.charAt(0|s)||(a="=",s%1);i+=a.charAt(63&t>>8-s%1*8)){if(255<(r=n.charCodeAt(s+=.75)))throw new Error("\'btoa\' failed: The string to be encoded contains characters outside of the Latin1 range.");t=t<<8|r}return i};function DataPacker_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var x=__webpack_require__(563),P=__webpack_require__(12),M=function(){function DataPacker(){!function DataPacker_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DataPacker),this._compressData=function(e){e=x.encode(e),e=P.deflateRaw(e,{to:"string"});return R(e)}}return function DataPacker_createClass(e,t,r){t&&DataPacker_defineProperties(e.prototype,t),r&&DataPacker_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(DataPacker,[{key:"pack",value:function pack(e){return this._getCompressedData(e)}},{key:"_getCompressedData",value:function _getCompressedData(e){return this._compressData(e)}}]),DataPacker}(),A=5,D=1,I=1e3,W=1e3,T=100,L=1e4,U=3500,F=0,O=1e4,H=16e3,N=100,z=3e5;function ReMessageSettings_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var q=function(){function ReMessageSettings(e,t,r,n){!function ReMessageSettings_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ReMessageSettings),this.messageNumToRetry=e,this.messageRetryInterval=t,this.incrementalGrowthBetweenFailures=r,this.maxIntervalBetweenFailures=n,this.init()}return function ReMessageSettings_createClass(e,t,r){t&&ReMessageSettings_defineProperties(e.prototype,t),r&&ReMessageSettings_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(ReMessageSettings,[{key:"init",value:function init(){this._validateReMessageSettings()}},{key:"getMessageNumToRetry",value:function getMessageNumToRetry(){return this.messageNumToRetry}},{key:"getMessageRetryInterval",value:function getMessageRetryInterval(){return this.messageRetryInterval}},{key:"getMaxIntervalBetweenFailures",value:function getMaxIntervalBetweenFailures(){return this.maxIntervalBetweenFailures}},{key:"getIncrementalGrowthBetweenFailures",value:function getIncrementalGrowthBetweenFailures(){return this.incrementalGrowthBetweenFailures}},{key:"_validateReMessageSettings",value:function _validateReMessageSettings(){var e,t="The provided configuration is invalid, it must be  ";isNaN(this.messageNumToRetry)?(g.warn("".concat(t," a number. setting to default: ").concat(A)),this.messageNumToRetry=A):(e=parseInt(this.messageNumToRetry),this.messageNumToRetry=e),(this.messageNumToRetry<D||this.messageNumToRetry>I)&&(g.warn("messageNumToRetry - ".concat(t," in the following range: \\n            ").concat(D," - ").concat(I," setting to default: ").concat(A)),this.messageNumToRetry=A),(this.messageRetryInterval<T||this.messageRetryInterval>L)&&(g.warn("messageRetryInterval - ".concat(t," in the following range: \\n            [").concat(T," - ").concat(L,"], \\n            setting to default: ").concat(W)),this.messageRetryInterval=W),(this.incrementalGrowthBetweenFailures<F||this.incrementalGrowthBetweenFailures>O)&&(g.warn("incrementalGrowthBetweenFailures - ".concat(t," in the following range: \\n            [").concat(F," - ").concat(O,"],\\n                setting to default: ").concat(U)),this.incrementalGrowthBetweenFailures=U),(this.maxIntervalBetweenFailures<N||this.maxIntervalBetweenFailures>z)&&(g.warn("maxIntervalBetweenFailures - ".concat(t," in the following range: \\n            [").concat(N," - ").concat(z,"]\\n                setting to default: ").concat(H)),this.maxIntervalBetweenFailures=H),this.maxIntervalBetweenFailures<this.messageRetryInterval&&(g.warn(" maxIntervalBetweenFailures - ".concat(t," greater than minimum interval: \\n            [").concat(N,"], setting to defaults:\\n                ").concat(H)),this.maxIntervalBetweenFailures=H,this.messageRetryInterval=W)}}]),ReMessageSettings}();function ConfigurationWrapperLogMessage_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var j=function(){function ConfigurationWrapperLogMessage(e){!function ConfigurationWrapperLogMessage_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ConfigurationWrapperLogMessage),this.logMessageNumToRetry=e.get(o.logMessageNumToRetry),this.logMessageRetryInterval=e.get(o.logMessageRetryInterval),this.logIncrementalGrowthBetweenFailures=e.get(o.logIncrementalGrowthBetweenFailures),this.logMaxIntervalBetweenFailures=e.get(o.logMaxIntervalBetweenFailures)}return function ConfigurationWrapperLogMessage_createClass(e,t,r){t&&ConfigurationWrapperLogMessage_defineProperties(e.prototype,t),r&&ConfigurationWrapperLogMessage_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(ConfigurationWrapperLogMessage,[{key:"createReMessageSettings",value:function createReMessageSettings(){return new q(this.logMessageNumToRetry,this.logMessageRetryInterval,this.logIncrementalGrowthBetweenFailures,this.logMaxIntervalBetweenFailures)}}]),ConfigurationWrapperLogMessage}();function LogServerClient_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var X=function(){function LogServerClient(e,t,r){!function LogServerClient_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,LogServerClient),this._serverCommunicator=e,this._logMessageBuilder=t,this._configurationRepository=r,this._MESSAGE_SEND_RETRIES=5,this._requestTimeout=this._configurationRepository.get(o.logMessageRequestTimeout)}return function LogServerClient_createClass(e,t,r){t&&LogServerClient_defineProperties(e.prototype,t),r&&LogServerClient_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(LogServerClient,[{key:"setServerUrl",value:function setServerUrl(e){this._serverCommunicator.setServerUrl(e)}},{key:"sendData",value:function sendData(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],e=this._logMessageBuilder.build(e);this._serverCommunicator.sendMessage(e,this._requestTimeout,this._serverCommunicator.getRetryMessage().getMessageNumToRetry(),t,this._onSendDataSuccess.bind(this),this._onSendDataFailure.bind(this)),t&&this._serverCommunicator.flush()}},{key:"isReady",value:function isReady(){return this._serverCommunicator.isReadyToSendData()}},{key:"setRequestTimeout",value:function setRequestTimeout(e){this._requestTimeout=e}},{key:"setConfigurationLogMessage",value:function setConfigurationLogMessage(){this._configurationWraperLogMessage=new j(this._configurationRepository),this._reLogMessageSettings=this._configurationWraperLogMessage.createReMessageSettings(),this._serverCommunicator.getRetryMessage().updateSettings(this._reLogMessageSettings)}},{key:"_onSendDataSuccess",value:function _onSendDataSuccess(){}},{key:"_onSendDataFailure",value:function _onSendDataFailure(e){g.warn("Failed sending log message. Error: ".concat(e,"."))}}]),LogServerClient}();function WupStatisticsService_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var G=function(){function WupStatisticsService(e){!function WupStatisticsService_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WupStatisticsService),this._statisticsLogIntervalMs=e,this.resetCounters(),this._setPeriodicStatisticsLog()}return function WupStatisticsService_createClass(e,t,r){t&&WupStatisticsService_defineProperties(e.prototype,t),r&&WupStatisticsService_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(WupStatisticsService,[{key:"getSentWupsCount",value:function getSentWupsCount(){return this._sentWupsCount}},{key:"incrementSentWupCount",value:function incrementSentWupCount(){this._sentWupsCount++,this._sentWupsInCurrentIntervalCount++}},{key:"updateSettings",value:function updateSettings(e){this._statisticsLogIntervalMs=e,this._setPeriodicStatisticsLog()}},{key:"resetCounters",value:function resetCounters(){this._sentWupsCount=0,this._sentWupsInCurrentIntervalCount=0}},{key:"stop",value:function stop(){this._stopPeriodicStatisticsLog()}},{key:"_writeStatisticsLog",value:function _writeStatisticsLog(){0!==this._sentWupsInCurrentIntervalCount&&(g.info("Sent ".concat(this._sentWupsInCurrentIntervalCount," wup in the last ").concat(this._statisticsLogIntervalMs," ms. Sent a total of ").concat(this._sentWupsCount," in the session")),this._sentWupsInCurrentIntervalCount=0)}},{key:"_stopPeriodicStatisticsLog",value:function _stopPeriodicStatisticsLog(){this._periodicLogIntervalId&&clearInterval(this._periodicLogIntervalId)}},{key:"_setPeriodicStatisticsLog",value:function _setPeriodicStatisticsLog(){this._stopPeriodicStatisticsLog(),this._periodicLogIntervalId=setInterval(this._writeStatisticsLog.bind(this),this._statisticsLogIntervalMs)}}]),WupStatisticsService}(),Y="incremental",K="constant",Z="dynamic";function WupDispatchConstantRateCalculator_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Q=function(){function WupDispatchConstantRateCalculator(e){!function WupDispatchConstantRateCalculator_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WupDispatchConstantRateCalculator),this.updateSettings(e)}return function WupDispatchConstantRateCalculator_createClass(e,t,r){t&&WupDispatchConstantRateCalculator_defineProperties(e.prototype,t),r&&WupDispatchConstantRateCalculator_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(WupDispatchConstantRateCalculator,[{key:"getRate",value:function getRate(){return this._currentRate}},{key:"updateSettings",value:function updateSettings(e){if(e.type!==K)throw new Error("Invalid settings provided to constant calculator");this._currentRate=e.initialRateValueMs}}]),WupDispatchConstantRateCalculator}();function WupDispatchIncrementalRateCalculator_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var V=function(){function WupDispatchIncrementalRateCalculator(e,t){!function WupDispatchIncrementalRateCalculator_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WupDispatchIncrementalRateCalculator),this._wupStatisticsService=t,this.updateSettings(e)}return function WupDispatchIncrementalRateCalculator_createClass(e,t,r){t&&WupDispatchIncrementalRateCalculator_defineProperties(e.prototype,t),r&&WupDispatchIncrementalRateCalculator_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(WupDispatchIncrementalRateCalculator,[{key:"getRate",value:function getRate(){if(this._wupStatisticsService.getSentWupsCount()<this._incrementStartWupSendCount)return this._currentRate;var e=this._currentRate+this._incrementStepMs;return e<=this._incrementStopMs&&(this._currentRate=e),this._currentRate}},{key:"updateSettings",value:function updateSettings(e){if(e.type!==Y)throw new Error("Invalid settings provided to incremental calculator");this._currentRate=e.initialRateValueMs,this._incrementStepMs=e.incrementStepMs,this._incrementStopMs=e.incrementStopMs,this._incrementStartWupSendCount=e.incrementStartWupSendCount}}]),WupDispatchIncrementalRateCalculator}();function WupDispatchDynamicRateCalculator_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var J=function(){function WupDispatchDynamicRateCalculator(e){!function WupDispatchDynamicRateCalculator_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WupDispatchDynamicRateCalculator),this._wupServerSessionState=e}return function WupDispatchDynamicRateCalculator_createClass(e,t,r){t&&WupDispatchDynamicRateCalculator_defineProperties(e.prototype,t),r&&WupDispatchDynamicRateCalculator_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(WupDispatchDynamicRateCalculator,[{key:"getRate",value:function getRate(){return this._wupServerSessionState.getWupDispatchRate()}},{key:"updateSettings",value:function updateSettings(){}}]),WupDispatchDynamicRateCalculator}();function WupDispatchRateCalculatorFactory_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var $=function(){function WupDispatchRateCalculatorFactory(e,t){!function WupDispatchRateCalculatorFactory_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WupDispatchRateCalculatorFactory),this._wupStatisticsService=e,this._wupServerSessionState=t}return function WupDispatchRateCalculatorFactory_createClass(e,t,r){t&&WupDispatchRateCalculatorFactory_defineProperties(e.prototype,t),r&&WupDispatchRateCalculatorFactory_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(WupDispatchRateCalculatorFactory,[{key:"create",value:function create(e){if(e.type===K)return new Q(e);if(e.type===Y)return new V(e,this._wupStatisticsService);if(e.type===Z)return new J(this._wupServerSessionState);throw new Error("Unsupported dispatch rate type ".concat(e.type))}}]),WupDispatchRateCalculatorFactory}();function DataDispatcher_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ee=function(){function DataDispatcher(e,t,r,n){!function DataDispatcher_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DataDispatcher),this._serverClient=e,this._aggregator=t,this._wupDispatchRateCalculatorFactory=r,this._wupDispatchRateSettings=n,this._wupDispatchRateCalculator=this._wupDispatchRateCalculatorFactory.create(this._wupDispatchRateSettings),this._sendToServerInterval=this._wupDispatchRateCalculator.getRate(),this._setDispatchInterval(this._sendToServerInterval)}return function DataDispatcher_createClass(e,t,r){t&&DataDispatcher_defineProperties(e.prototype,t),r&&DataDispatcher_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(DataDispatcher,[{key:"add",value:function add(e){this._aggregator.add(e)}},{key:"sendIfRequired",value:function sendIfRequired(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];0!==this._sendToServerInterval&&!e||this._sendToServer(e)}},{key:"updateByConfig",value:function updateByConfig(e){e&&(e.type!==this._wupDispatchRateSettings.type?this._wupDispatchRateCalculator=this._wupDispatchRateCalculatorFactory.create(e):this._wupDispatchRateCalculator.updateSettings(e),this._sendToServerInterval=this._wupDispatchRateCalculator.getRate(),this._setDispatchInterval(this._sendToServerInterval),this._wupDispatchRateSettings=e)}},{key:"scheduleNextDispatching",value:function scheduleNextDispatching(){var e=this._wupDispatchRateCalculator.getRate();e!==this._sendToServerInterval&&(this._sendToServerInterval=e,this._setDispatchInterval(this._sendToServerInterval))}},{key:"_sendToServer",value:function _sendToServer(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];g.debug("Sending a message to the server"),this._serverClient.isReady()?this._aggregator.isEmpty()||(this._serverClient.sendData(this._aggregator.take(),e),this.scheduleNextDispatching()):g.info("".concat(this._serverClient.constructor.name," is not ready. Message will not be sent to server"))}},{key:"_setDispatchInterval",value:function _setDispatchInterval(e){this._sendIntervalId&&(clearInterval(this._sendIntervalId),this._sendIntervalId=null),0!==e&&(this._sendIntervalId=setInterval(this._sendToServer.bind(this),e))}}]),DataDispatcher}();function LogAggregator_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var te=function(){function LogAggregator(){!function LogAggregator_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,LogAggregator),this.reset()}return function LogAggregator_createClass(e,t,r){t&&LogAggregator_defineProperties(e.prototype,t),r&&LogAggregator_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(LogAggregator,[{key:"setLogLevel",value:function setLogLevel(e){this._logLevel=e}},{key:"add",value:function add(e){e=e.data;if(!e)throw new Error("Unable to add log message. Missing data field");(!e.level||e.level>=this._logLevel)&&this._Q.push(e)}},{key:"take",value:function take(){var e=this._Q;return this.reset(),e}},{key:"reset",value:function reset(){this._Q=[],this.setLogLevel(void 0===this._logLevel?f.INFO:this._logLevel)}},{key:"isEmpty",value:function isEmpty(){return 0===this._Q.length}},{key:"filterOutByLogLevel",value:function filterOutByLogLevel(n){this._Q=this._Q.filter(function(e,t,r){return e.level>=n})}}]),LogAggregator}();function MessageProcessor_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var re=function(){function MessageProcessor(e){!function MessageProcessor_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MessageProcessor),this._dataDispatcher=e}return function MessageProcessor_createClass(e,t,r){t&&MessageProcessor_defineProperties(e.prototype,t),r&&MessageProcessor_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(MessageProcessor,[{key:"process",value:function process(e){if(!e)throw new Error("Invalid message received for processing.");var t=!1;if(Array.isArray(e))for(var r=0,n=e.length;r<n;r++)t=this._processSingleMessage(e[r])||t;else t=this._processSingleMessage(e)||t;this._dataDispatcher.sendIfRequired(t)}},{key:"_processSingleMessage",value:function _processSingleMessage(e){if(this._isEmptyFlushMessage(e))return!0;var t=!1;if(e.shouldFlush&&(t=!0),this._isDataValid(e))return this._dataDispatcher.add(e),t;t="Received a message with invalid structure. Missing eventName or Data fields";throw g.error(t),new Error(t)}},{key:"_isEmptyFlushMessage",value:function _isEmptyFlushMessage(e){return"flushData"===e.eventName}},{key:"_isDataValid",value:function _isDataValid(e){return e.eventName&&e.data}}]),MessageProcessor}(),ne="js";function WupMessage_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ie=function(){function WupMessage(){!function WupMessage_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WupMessage),this._messageStruct={ds:ne}}return function WupMessage_createClass(e,t,r){t&&WupMessage_defineProperties(e.prototype,t),r&&WupMessage_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(WupMessage,[{key:"getDataSource",value:function getDataSource(){return this._messageStruct.ds}},{key:"getSid",value:function getSid(){return this._messageStruct.cdsnum}},{key:"setSid",value:function setSid(e){this._messageStruct.cdsnum=e}},{key:"getCsid",value:function getCsid(){return this._messageStruct.csid}},{key:"setCsid",value:function setCsid(e){this._messageStruct.csid=e}},{key:"getPsid",value:function getPsid(){return this._messageStruct.psid}},{key:"setPsid",value:function setPsid(e){this._messageStruct.psid=e}},{key:"getMuid",value:function getMuid(){return this._messageStruct.muid}},{key:"setMuid",value:function setMuid(e){this._messageStruct.muid=e}},{key:"getContextName",value:function getContextName(){return this._messageStruct.context_name}},{key:"setContextName",value:function setContextName(e){this._messageStruct.context_name=e}},{key:"getRequestId",value:function getRequestId(){return this._messageStruct.requestId}},{key:"setRequestId",value:function setRequestId(e){this._messageStruct.requestId=e}},{key:"getSts",value:function getSts(){return this._messageStruct.sts}},{key:"setSts",value:function setSts(e){this._messageStruct.sts=e}},{key:"getStd",value:function getStd(){return this._messageStruct.std}},{key:"setStd",value:function setStd(e){this._messageStruct.std=e}},{key:"setFlush",value:function setFlush(e){this._messageStruct.f=e}},{key:"getConfigurationName",value:function getConfigurationName(){return this._messageStruct.c}},{key:"setConfigurationName",value:function setConfigurationName(e){this._messageStruct.c=e}},{key:"getData",value:function getData(){return this._messageStruct.d}},{key:"setData",value:function setData(e){this._messageStruct.d=e}},{key:"getInternalMessage",value:function getInternalMessage(){return this._messageStruct}},{key:"setOtt",value:function setOtt(e){this._messageStruct.ott=e}},{key:"getOtt",value:function getOtt(){return this._messageStruct.ott}},{key:"setAgentType",value:function setAgentType(e){this._messageStruct.agent_type=e}},{key:"getAgentType",value:function getAgentType(){return this._messageStruct.agent_type}},{key:"setAgentId",value:function setAgentId(e){this._messageStruct.agent_id=e}},{key:"getAgentId",value:function getAgentId(){return this._messageStruct.agent_id}}]),WupMessage}();function WupMessageBuilder_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var se=function(){function WupMessageBuilder(e,t){!function WupMessageBuilder_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WupMessageBuilder),this._wupServerSessionState=e,this._dataPacker=t}return function WupMessageBuilder_createClass(e,t,r){t&&WupMessageBuilder_defineProperties(e.prototype,t),r&&WupMessageBuilder_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(WupMessageBuilder,[{key:"build",value:function build(e,t){var r=new ie;this._updateDataWithBrand(t),r.setSid(this._wupServerSessionState.getSid()),r.setCsid(this._wupServerSessionState.getCsid()),r.setPsid(this._wupServerSessionState.getPsid()),r.setMuid(this._wupServerSessionState.getMuid()),r.setContextName(this._wupServerSessionState.getContextName()),r.setRequestId(this._wupServerSessionState.getRequestId()),r.setAgentType(this._wupServerSessionState.getAgentType()),r.setAgentId(this._wupServerSessionState.getAgentId()),this._wupServerSessionState.getSts()&&this._wupServerSessionState.getStd()&&(r.setSts(this._wupServerSessionState.getSts()),r.setStd(this._wupServerSessionState.getStd()));var n=this._wupServerSessionState.getOtt();return n&&r.setOtt(n),e===ne?r.setConfigurationName(e):r.setData([this._dataPacker.pack(t)]),r}},{key:"_updateDataWithBrand",value:function _updateDataWithBrand(e){var t=this._wupServerSessionState.getBrand();t&&(e.static_fields||(e.static_fields=[]),e.static_fields.push(["brand",t]))}}]),WupMessageBuilder}();function WupRequestBodyBuilder_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ae=function(){function WupRequestBodyBuilder(e){!function WupRequestBodyBuilder_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WupRequestBodyBuilder),this._wupServerSessionState=e}return function WupRequestBodyBuilder_createClass(e,t,r){t&&WupRequestBodyBuilder_defineProperties(e.prototype,t),r&&WupRequestBodyBuilder_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(WupRequestBodyBuilder,[{key:"build",value:function build(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return e.setSid(this._wupServerSessionState.getSid()),e.setSts(this._wupServerSessionState.getSts()),e.setStd(this._wupServerSessionState.getStd()),e.setOtt(this._wupServerSessionState.getOtt()),t&&e.setFlush(ne),JSON.stringify(e.getInternalMessage())}}]),WupRequestBodyBuilder}(),oe={TouchEvent:"touchEvent",KeyEvent:"keyEvent",ConfigurationLoadedEvent:"ConfigurationLoadedEvent",NewSessionStartedEvent:"NewSessionStartedEvent",WupDispatchRateUpdatedEvent:"WupDispatchRateUpdatedEvent",ApiContextChangeEvent:"ApiContextChangeEvent",ApiResetSessionEvent:"ApiResetSessionEvent",ApiCustomerMetadataEvent:"ApiCustomerMetadataEvent",ApiChangeStateEvent:"ApiChangeStateEvent",ApiSetCsidEvent:"ApiSetCsidEvent",ApiSetPsidEvent:"ApiSetPsidEvent",ApiSetCustomerBrand:"ApiSetCustomerBrand",ServerStateUpdatedEvent:"ServerStateUpdatedEvent",ServerRestoredMuidEvent:"ServerRestoredMuidEvent",ServerNewAgentIdEvent:"ServerNewAgentIdEvent",StateChangedEvent:"StateChangedEvent",MutationSingleEvent:"MutationSingleEvent",MutationAddedNodes:"MutationAddedNodes",MutationRemovedNodes:"MutationRemovedNodes",StandardInputEvent:"StandardInputEvent",StandardInputFocusEvent:"StandardInputFocusEvent",StandardInputBlurEvent:"StandardInputBlurEvent",StandardOnClickEvent:"StandardOnClickEvent",StandardOnSelectEvent:"StandardOnSelectEvent",ElementFocusEvent:"ElementFocusEvent",ElementBlurEvent:"ElementBlurEvent",StandardOnFormSubmitEvent:"StandardOnFormSubmitEvent",SyntheticInputMaskEvent:"SyntheticInputMaskEvent",CutEvent:"CutEvent",CopyEvent:"CopyEvent",PasteEvent:"PasteEvent",DeviceOrientationEvent:"DeviceOrientationEvent",BeforeInstallPromptEvent:"BeforeInstallPromptEvent",FocusEvent:"FocusEvent",BlurEvent:"BlurEvent",ResizeEvent:"ResizeEvent",DOMContentLoadedEvent:"DOMContentLoadedEvent",VisibilityChangeEvent:"VisibilityChangeEvent",ScrollEvent:"ScrollEvent",WindowMessageEvent:"WindowMessageEvent",WorkerSystemStatusEvent:"WorkerSystemStatusEvent",CustomElementDetectedEvent:"CustomElementDetectedEvent",CustomElementAddedEvent:"CustomElementAddedEvent",CustomElementRemovedEvent:"CustomElementRemovedEvent",CustomElementInaccessible:"CustomElementInaccessible",CustomElementSubmitted:"CustomElementSubmitted",BrowserContextAdded:"BrowserContextAdded",RunDefaultFeatures:"RunDefaultFeatures",StopDefaultFeatures:"StopDefaultFeatures",CustomInputElement:"CustomInputElement"};function WupResponseProcessor_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ue=function(){function WupResponseProcessor(e,t,r){!function WupResponseProcessor_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WupResponseProcessor),this._wupServerSessionState=e,this._messageBus=t,this._configurationRepository=r}return function WupResponseProcessor_createClass(e,t,r){t&&WupResponseProcessor_defineProperties(e.prototype,t),r&&WupResponseProcessor_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(WupResponseProcessor,[{key:"process",value:function process(e,t){var r=!1;t&&(this._wupServerSessionState.markConfigurationReceived(),this._configurationRepository.loadConfigurations(e),r=!0),e.sts&&this._wupServerSessionState.setSts(e.sts),e.std&&this._wupServerSessionState.setStd(e.std),e.ott&&this._wupServerSessionState.setOtt(e.ott),e.reset_session&&e.new_sid&&this._wupServerSessionState.setSid(e.new_sid),e.rmd&&(this._wupServerSessionState.setMuid(e.rmd),this._messageBus.publish(oe.ServerRestoredMuidEvent,e.rmd)),e.agent_id&&(this._wupServerSessionState.setAgentId(e.agent_id),this._messageBus.publish(oe.ServerNewAgentIdEvent,e.agent_id)),this._messageBus.publish(oe.ServerStateUpdatedEvent,{requestId:this._wupServerSessionState.getRequestId(),sid:this._wupServerSessionState.getSid(),sts:this._wupServerSessionState.getSts(),std:this._wupServerSessionState.getStd(),ott:this._wupServerSessionState.getOtt()}),r&&this._messageBus.publish(oe.ConfigurationLoadedEvent,this._configurationRepository),e.reset_session&&(e.new_sid?this._messageBus.publish(oe.NewSessionStartedEvent,e.new_sid):g.warn("Received a reset session flag from the server without a new sid. Ignoring reset.")),e.nextWupInterval?e.nextWupInterval!==this._wupServerSessionState.getWupDispatchRate()&&(this._wupServerSessionState.setWupDispatchRate(e.nextWupInterval),this._messageBus.publish(oe.WupDispatchRateUpdatedEvent,this._wupServerSessionState.getWupDispatchRate())):g.warn("Received an invalid nextWupInterval value of ".concat(e.nextWupInterval,". Ignoring value."))}}]),WupResponseProcessor}(),ce="701",le="702",fe="703",he="704";function HeartBeatEvent_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function HeartBeatEvent_createClass(e,t,r){return t&&HeartBeatEvent_defineProperties(e.prototype,t),r&&HeartBeatEvent_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var de="oK",pe="Error",ge=HeartBeatEvent_createClass(function HeartBeatEvent(e,t){!function HeartBeatEvent_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HeartBeatEvent),this.category=e,this.status=t});function ConfigurationWrapperWupMessage_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var _e=function(){function ConfigurationWrapperWupMessage(e){!function ConfigurationWrapperWupMessage_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ConfigurationWrapperWupMessage),this.wupMessageNumToRetry=e.get(o.wupMessageNumToRetry),this.wupMessageRetryInterval=e.get(o.wupMessageRetryInterval),this.wupIncrementalGrowthBetweenFailures=e.get(o.wupIncrementalGrowthBetweenFailures),this.wupMaxIntervalBetweenFailures=e.get(o.wupMaxIntervalBetweenFailures)}return function ConfigurationWrapperWupMessage_createClass(e,t,r){t&&ConfigurationWrapperWupMessage_defineProperties(e.prototype,t),r&&ConfigurationWrapperWupMessage_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(ConfigurationWrapperWupMessage,[{key:"createReMessageSettings",value:function createReMessageSettings(){return new q(this.wupMessageNumToRetry,this.wupMessageRetryInterval,this.wupIncrementalGrowthBetweenFailures,this.wupMaxIntervalBetweenFailures)}}]),ConfigurationWrapperWupMessage}(),ve={PRIMARY:"primary",SECONDARY:"secondary"};function WupServerClient_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.freeze(ve);var ye=function(){function WupServerClient(e,t,r,n,i,s,a){!function WupServerClient_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WupServerClient),this._serverCommunicator=e,this._wupMessageBuilder=t,this._wupServerSessionState=r,this._wupStatisticsService=n,this._wupResponseProcessor=i,this._configurationRepository=s,this._msgBus=a,this._INFINITE_MESSAGE_SEND_RETRIES=0,this._retryMessage=this._serverCommunicator.getRetryMessage(),this._MESSAGE_SEND_RETRIES=this._configurationRepository.get(o.wupMessageNumToRetry),this._requestTimeout=this._configurationRepository.get(o.wupMessageRequestTimeout)}return function WupServerClient_createClass(e,t,r){t&&WupServerClient_defineProperties(e.prototype,t),r&&WupServerClient_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(WupServerClient,[{key:"startNewSession",value:function startNewSession(e,t,r,n,i){this._validateCommonSessionRelatedParameters(r,i),this._wupServerSessionState.setRequestId(0),this._wupServerSessionState.setBrand(null),this._sendSessionMessage(null,e,t,r,n,i,null,this._wupServerSessionState.getRequestId())}},{key:"_sendSessionMessage",value:function _sendSessionMessage(e,t,r,n,i,s,a,o){var u=this;this._initSession(e,t,r,n,i,s,a,o);var a=this._createStaticFieldsPart(),c=!this._wupServerSessionState.getHasConfiguration()&&!this._wupServerSessionState.getHasPendingConfigurationRequest();c&&this._wupServerSessionState.markConfigurationRequested();o=this._wupMessageBuilder.build(c?ne:"0",a),a=function onSendSuccess(e){u._onSendDataSuccess(e,c)};this._serverCommunicator.sendMessage(o,this._requestTimeout,c?this._INFINITE_MESSAGE_SEND_RETRIES:this._MESSAGE_SEND_RETRIES,!1,a,this._onSendDataRetryFailure.bind(this),this._onSendDataFailure.bind(this))}},{key:"resumeSession",value:function resumeSession(e,t,r,n,i,s,a){this._validateResumeSessionRelatedParameters(e,n,s);var o=a&&a.requestId?this._wupServerSessionState.setRequestId(a.requestId+1):this._wupServerSessionState.setRequestId(0);this._sendSessionMessage(e,t,r,n,i,s,a,o)}},{key:"sendData",value:function sendData(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=this._wupServerSessionState.getOtt(),n=this._serverCommunicator.getServerUrl().toLowerCase().includes("api/v4"),i=this._serverCommunicator.getServerUrl().toLowerCase().includes("client/v3"),s=this._wupServerSessionState.getSts()&&this._wupServerSessionState.getStd();r&&n||s&&i?this._sendMessage(e,t):(n=n?"ott":"sts or std",g.error("Unable to send data. ".concat(n," is undefined")))}},{key:"setRequestTimeout",value:function setRequestTimeout(e){this._requestTimeout=e}},{key:"setConfigurationWupMessage",value:function setConfigurationWupMessage(){this._configurationWrapperWupMessage=new _e(this._configurationRepository),this._reWupMessageSettings=this._configurationWrapperWupMessage.createReMessageSettings(),this._retryMessage.updateSettings(this._reWupMessageSettings)}},{key:"_initSession",value:function _initSession(e,t,r,n,i,s,a,o){g.debug("Initializing session. wupUrl:".concat(s,", sid:").concat(e)),this._serverCommunicator.setServerUrl(s),this._wupServerSessionState.setSid(e),this._wupServerSessionState.setCsid(t),this._wupServerSessionState.setPsid(r),this._wupServerSessionState.setMuid(n),this._wupServerSessionState.setContextName(i||""),this._wupServerSessionState.setRequestId(o,!1),a?(this._wupServerSessionState.setSts(a.sts),this._wupServerSessionState.setStd(a.std),this._wupServerSessionState.setOtt(a.ott)):(g.info("Resetting server state of server communicator. Deleting sts and std"),this._wupServerSessionState.setSts(null),this._wupServerSessionState.setStd(null),this._wupServerSessionState.setOtt(null),this._wupStatisticsService.resetCounters())}},{key:"updateCsid",value:function updateCsid(e){var t=this._wupServerSessionState.incrementRequestId()||0;this._wupServerSessionState.setCsid(e);e={static_fields:[]};e.static_fields.push(["requestId",t],["contextId",this._wupServerSessionState.getContextName()],["sessionId",this._wupServerSessionState.getSid()],["customerSessionId",this._wupServerSessionState.getCsid()],["partnerSessionId",this._wupServerSessionState.getPsid()],["muid",this._wupServerSessionState.getMuid()]),this._sendMessage(e)}},{key:"updatePsid",value:function updatePsid(e){var t=this._wupServerSessionState.incrementRequestId()||0;this._wupServerSessionState.setPsid(e);e={static_fields:[]};e.static_fields.push(["requestId",t],["contextId",this._wupServerSessionState.getContextName()],["sessionId",this._wupServerSessionState.getSid()],["customerSessionId",this._wupServerSessionState.getCsid()],["partnerSessionId",this._wupServerSessionState.getPsid()],["muid",this._wupServerSessionState.getMuid()]),this._sendMessage(e)}},{key:"updateBrand",value:function updateBrand(e){this._wupServerSessionState.setBrand(e)}},{key:"isReady",value:function isReady(){var e=this._serverCommunicator.isReadyToSendData();if(this._serverCommunicator.getServerUrl().toLowerCase().includes("api/v4"))return!(!e||!this._wupServerSessionState.getOtt());var t=this._wupServerSessionState.getStd()&&this._wupServerSessionState.getSts();return!(!e||!t)}},{key:"_validateResumeSessionRelatedParameters",value:function _validateResumeSessionRelatedParameters(e,t,r){if(!e)throw new Error("Invalid sid parameter ".concat(e,". Unable to start new session"));this._validateCommonSessionRelatedParameters(t,r)}},{key:"_validateCommonSessionRelatedParameters",value:function _validateCommonSessionRelatedParameters(e,t){if(!e&&this._wupServerSessionState.getAgentType()!==ve.SECONDARY)throw new Error("Invalid muid parameter ".concat(e,". Unable to start new session"));if(!t)throw new Error("Invalid serverAddress parameter ".concat(t,". Unable to start new session"))}},{key:"_createStaticFieldsPart",value:function _createStaticFieldsPart(){var e={static_fields:[]};return e.static_fields.push(["requestId",this._wupServerSessionState.getRequestId()],["contextId",this._wupServerSessionState.getContextName()],["sessionId",this._wupServerSessionState.getSid()],["customerSessionId",this._wupServerSessionState.getCsid()],["partnerSessionId",this._wupServerSessionState.getPsid()],["muid",this._wupServerSessionState.getMuid()]),e}},{key:"_sendMessage",value:function _sendMessage(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],e=this._wupMessageBuilder.build("0",e);this._serverCommunicator.sendMessage(e,this._requestTimeout,this._MESSAGE_SEND_RETRIES,t,this._onSendDataSuccess.bind(this),this._onSendDataRetryFailure.bind(this),this._onSendDataFailure.bind(this))}},{key:"_onSendDataSuccess",value:function _onSendDataSuccess(e,t){t=t||!1,this._publishWorkerSystemStatus(he,de),this._publishWorkerSystemStatus(he,de),this._handleSuccessResponse(e,t),this._wupStatisticsService.incrementSentWupCount()}},{key:"_onSendDataRetryFailure",value:function _onSendDataRetryFailure(e){e===this._MESSAGE_SEND_RETRIES&&this._publishWorkerSystemStatus(he,pe)}},{key:"_onSendDataFailure",value:function _onSendDataFailure(){}},{key:"_handleSuccessResponse",value:function _handleSuccessResponse(e,t){var r=t?le:fe;try{var n=JSON.parse(e);this._wupResponseProcessor.process(n,t),this._publishWorkerSystemStatus(r,de)}catch(e){this._publishWorkerSystemStatus(r,pe);var i="Failed to parse message from server: ".concat(e.message);g.error(i,e)}}},{key:"_publishWorkerSystemStatus",value:function _publishWorkerSystemStatus(e,t){this._msgBus.publish(oe.WorkerSystemStatusEvent,new ge(e,t))}}]),WupServerClient}();function DataAggregator_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var me=function(){function DataAggregator(e){!function DataAggregator_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DataAggregator),this._wupServerSessionState=e,this.reset()}return function DataAggregator_createClass(e,t,r){t&&DataAggregator_defineProperties(e.prototype,t),r&&DataAggregator_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(DataAggregator,[{key:"add",value:function add(e){var t=e.eventName,e=e.data;if(!t)throw new Error("Unable to add data message. Missing eventName field");if(!e)throw new Error("Unable to add data message. Missing data field");this._isEmpty=!1,this._dataObj[t]=this._dataObj[t]||[],this._dataObj[t].push(e)}},{key:"take",value:function take(){this._isEmpty||this._dataObj.static_fields.push(["requestId",this._wupServerSessionState.incrementRequestId()]);var e=this._dataObj;return this.reset(),e}},{key:"reset",value:function reset(){this._isEmpty=!0,this._dataObj=this.getFreshDataObj()}},{key:"isEmpty",value:function isEmpty(){return this._isEmpty}},{key:"getFreshDataObj",value:function getFreshDataObj(){return{static_fields:[],key_events:[],mouse_events:[]}}}]),DataAggregator}();function WorkerConfigurationLoadedEventHandler_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var we=function(){function WorkerConfigurationLoadedEventHandler(e,t,r,n,i,s,a,o,u){!function WorkerConfigurationLoadedEventHandler_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WorkerConfigurationLoadedEventHandler),this._messageBus=e,this._wupStatisticsService=t,this._dataDispatcher=r,this._logDataDispatcher=n,this._serverCommunicator=i,this._wupServerClient=s,this._logServerClient=a,this._logger=o,this._mainCommunicator=u,this._messageBus.subscribe(oe.ConfigurationLoadedEvent,this._handle.bind(this))}return function WorkerConfigurationLoadedEventHandler_createClass(e,t,r){t&&WorkerConfigurationLoadedEventHandler_defineProperties(e.prototype,t),r&&WorkerConfigurationLoadedEventHandler_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(WorkerConfigurationLoadedEventHandler,[{key:"_handle",value:function _handle(e){this._wupStatisticsService.updateSettings(e.get(o.wupStatisticsLogIntervalMs));var t=e.get(o.forceDynamicDataWupDispatchSettings)?h.defaultDynamicWupDispatchRateConfiguration:e.get(o.dataWupDispatchRateSettings);this._dataDispatcher.updateByConfig(t),this._logDataDispatcher.updateByConfig(e.get(o.logWupDispatchRateSettings)),this._serverCommunicator.updateSettings(e.get(o.serverCommunicationSettings)),this._logger.updateLogConfig(e),this._wupServerClient.setRequestTimeout(e.get(o.wupMessageRequestTimeout)||e.get(o.wupResponseTimeout)),this._logServerClient.setRequestTimeout(e.get(o.logMessageRequestTimeout)),this._wupServerClient.setConfigurationWupMessage(),this._logServerClient.setConfigurationLogMessage(),this._mainCommunicator.sendAsync(s,e.getAll())}}]),WorkerConfigurationLoadedEventHandler}();function WorkerNewSessionStartedEventHandler_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Se=function(){function WorkerNewSessionStartedEventHandler(e,t,r){!function WorkerNewSessionStartedEventHandler_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WorkerNewSessionStartedEventHandler),this._messageBus=e,this._logger=t,this._mainCommunicator=r,this._messageBus.subscribe(oe.NewSessionStartedEvent,this._handle.bind(this))}return function WorkerNewSessionStartedEventHandler_createClass(e,t,r){t&&WorkerNewSessionStartedEventHandler_defineProperties(e.prototype,t),r&&WorkerNewSessionStartedEventHandler_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(WorkerNewSessionStartedEventHandler,[{key:"_handle",value:function _handle(e){this._logger.info("Worker received a new session id ".concat(e," from server.")),this._mainCommunicator.sendAsync(r,e)}}]),WorkerNewSessionStartedEventHandler}();function WorkerServerStateUpdatedEventHandler_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var be=function(){function WorkerServerStateUpdatedEventHandler(e,t,r){!function WorkerServerStateUpdatedEventHandler_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WorkerServerStateUpdatedEventHandler),this._messageBus=e,this._logger=t,this._mainCommunicator=r,this._messageBus.subscribe(oe.ServerStateUpdatedEvent,this._handle.bind(this))}return function WorkerServerStateUpdatedEventHandler_createClass(e,t,r){t&&WorkerServerStateUpdatedEventHandler_defineProperties(e.prototype,t),r&&WorkerServerStateUpdatedEventHandler_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(WorkerServerStateUpdatedEventHandler,[{key:"_handle",value:function _handle(e){this._logger.debug("Worker received an updated server state."),this._mainCommunicator.sendAsync(a,e)}}]),WorkerServerStateUpdatedEventHandler}();function WorkerWupDispatchRateUpdatedEventHandler_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ke=function(){function WorkerWupDispatchRateUpdatedEventHandler(e,t,r){!function WorkerWupDispatchRateUpdatedEventHandler_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WorkerWupDispatchRateUpdatedEventHandler),this._messageBus=e,this._dataDispatcher=t,this._logger=r,this._messageBus.subscribe(oe.WupDispatchRateUpdatedEvent,this._handle.bind(this))}return function WorkerWupDispatchRateUpdatedEventHandler_createClass(e,t,r){t&&WorkerWupDispatchRateUpdatedEventHandler_defineProperties(e.prototype,t),r&&WorkerWupDispatchRateUpdatedEventHandler_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(WorkerWupDispatchRateUpdatedEventHandler,[{key:"_handle",value:function _handle(e){this._logger.info("Worker received a wup dispatch rate ".concat(e," from server.")),this._dataDispatcher.scheduleNextDispatching()}}]),WorkerWupDispatchRateUpdatedEventHandler}(),Ce={requestConfigurationsCommand:"requestConfigurationsCommand",startNewSessionCommand:"startNewSessionCommand",resumeSessionCommand:"resumeSessionCommand",changeContextCommand:"changeContextCommand",updateCsidCommand:"updateCsidCommand",updatePsidCommand:"updatePsidCommand",updateLogUrlCommand:"updateLogUrl",sendDataCommand:"sendDataCommand",sendLogCommand:"sendLogCommand",updateBrandCommand:"updateBrandCommand",stateUpdateFromStorage:"stateUpdateFromStorage",setAgentTypeCommand:"setAgentTypeCommand",updateAgentIdCommand:"updateAgentIdCommand",enableWupMessagesHashingCommand:"enableWupMessagesHashingCommand"};function WorkerService_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ee=function(){function WorkerService(e,t,r,n,i,s,a,o){!function WorkerService_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WorkerService),this._mainCommunicator=e,this._wupServerClient=t,this._logServerClient=r,this._configurationRepository=n,this._messageProcessor=i,this._logMessageProcessor=s,this._wupServerSessionState=a,this._dataServerCommunicator=o}return function WorkerService_createClass(e,t,r){t&&WorkerService_defineProperties(e.prototype,t),r&&WorkerService_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(WorkerService,[{key:"start",value:function start(){g.debug("Starting Worker Service"),this._mainCommunicator.addMessageListener(Ce.startNewSessionCommand,this._onStartNewSessionCommand.bind(this)),this._mainCommunicator.addMessageListener(Ce.resumeSessionCommand,this._onResumeSessionCommand.bind(this)),this._mainCommunicator.addMessageListener(Ce.changeContextCommand,this._onChangeContextCommand.bind(this)),this._mainCommunicator.addMessageListener(Ce.updateCsidCommand,this._onUpdateCsidCommand.bind(this)),this._mainCommunicator.addMessageListener(Ce.updatePsidCommand,this._onUpdatePsidCommand.bind(this)),this._mainCommunicator.addMessageListener(Ce.updateLogUrlCommand,this._onUpdateLogUrlCommand.bind(this)),this._mainCommunicator.addMessageListener(Ce.sendDataCommand,this._onSendDataCommand.bind(this)),this._mainCommunicator.addMessageListener(Ce.sendLogCommand,this._onSendLogCommand.bind(this)),this._mainCommunicator.addMessageListener(Ce.updateBrandCommand,this._onUpdateBrandCommand.bind(this)),this._mainCommunicator.addMessageListener(Ce.setAgentTypeCommand,this._setSessionAgentType.bind(this)),this._mainCommunicator.addMessageListener(Ce.updateAgentIdCommand,this._onUpdateAgentId.bind(this)),this._mainCommunicator.addMessageListener(Ce.enableWupMessagesHashingCommand,this._setWupMessagesHashing.bind(this))}},{key:"_onStartNewSessionCommand",value:function _onStartNewSessionCommand(e){this._wupServerClient.startNewSession(e.csid,e.psid,e.muid,e.contextName,e.serverAddress)}},{key:"_onResumeSessionCommand",value:function _onResumeSessionCommand(e){this._wupServerClient.resumeSession(e.cdsnum,e.csid,e.psid,e.muid,e.contextName,e.serverAddress,e.serverState)}},{key:"_onChangeContextCommand",value:function _onChangeContextCommand(e){g.debug("Worker received a ChangeContextCommand from main."),this._wupServerSessionState.setContextName(e.contextName)}},{key:"_onUpdateCsidCommand",value:function _onUpdateCsidCommand(e){g.debug("Worker received an UpdateCsidCommand from main. CSID: ".concat(e.csid,".")),this._wupServerClient.updateCsid(e.csid)}},{key:"_onUpdatePsidCommand",value:function _onUpdatePsidCommand(e){g.debug("Worker received an UpdatePsidCommand from main. PSID: ".concat(e.psid,".")),this._wupServerClient.updatePsid(e.psid)}},{key:"_onUpdateLogUrlCommand",value:function _onUpdateLogUrlCommand(e){this._logServerClient.setServerUrl(e.logAddress)}},{key:"_onSendDataCommand",value:function _onSendDataCommand(e){this._messageProcessor.process(e)}},{key:"_onSendLogCommand",value:function _onSendLogCommand(e){this._logMessageProcessor.process(e)}},{key:"_onUpdateBrandCommand",value:function _onUpdateBrandCommand(e){this._wupServerClient.updateBrand(e.brand)}},{key:"_setSessionAgentType",value:function _setSessionAgentType(e){this._wupServerSessionState.setAgentType(e.agentType)}},{key:"_onUpdateAgentId",value:function _onUpdateAgentId(e){this._wupServerSessionState.setAgentId(e.agentId)}},{key:"_setWupMessagesHashing",value:function _setWupMessagesHashing(e){this._dataServerCommunicator.updateEnableWupMessagesHashing(e.enableWupMessagesHashing)}}]),WorkerService}();function HttpRequestFactory_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Be=function(){function HttpRequestFactory(){!function HttpRequestFactory_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HttpRequestFactory)}return function HttpRequestFactory_createClass(e,t,r){t&&HttpRequestFactory_defineProperties(e.prototype,t),r&&HttpRequestFactory_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(HttpRequestFactory,null,[{key:"create",value:function create(){if(self.XMLHttpRequest&&Object.prototype.hasOwnProperty.call(XMLHttpRequest.prototype,"withCredentials"))return new XMLHttpRequest;if(self.XDomainRequest)return new XDomainRequest;if(!self.XMLHttpRequest)throw new Error("There is no supported http request object");return new XMLHttpRequest}}]),HttpRequestFactory}();function WorkerUtils_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Re=function(){function WorkerUtils(){!function WorkerUtils_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WorkerUtils)}return function WorkerUtils_createClass(e,t,r){t&&WorkerUtils_defineProperties(e.prototype,t),r&&WorkerUtils_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(WorkerUtils,null,[{key:"isUndefinedNull",value:function isUndefinedNull(e){return null==e||void 0===e}},{key:"getPostUrl",value:function getPostUrl(t,e,r,n,i,s,a,o){var u=Be.create();try{u instanceof self.XMLHttpRequest?(u.open(e,t,!0),u.timeout=a||12e3,o&&u.setRequestHeader("X-h",o),u.onload=function(){200===u.status||204===u.status&&s?n&&n(u.responseText):i&&i(u.responseText,u.status,u.statusText)},u.onerror=function(){i&&i(u.responseText,u.status,u.statusText)},u.ontimeout=function(){i&&i("timeout")},u.onabort=function(){i&&i("abort")},u.send(r)):(u.onload=function(){n&&u.responseText&&n(u.responseText)},u.onerror=function(){i&&i(u.responseText,u.status,u.statusText)},u.onprogress=function(){},u.ontimeout=function(){i&&i("timeout")},u.open(e,t,!0),o&&u.setRequestHeader("X-h",o),u.timeout=a||12e3,setTimeout(function(){u.send(r)},0))}catch(e){throw console.log("ERROR ERROR ERROR. URL: ".concat(t,". ").concat(e,".")),e}}}]),WorkerUtils}();function WorkerSystemStatusEventHandler_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var xe=function(){function WorkerSystemStatusEventHandler(e,t,r){!function WorkerSystemStatusEventHandler_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WorkerSystemStatusEventHandler),this._mainCommunicator=e,this._messageBus=t,this._logger=r,this.errors={},this._messageBus.subscribe(oe.WorkerSystemStatusEvent,this._handle.bind(this))}return function WorkerSystemStatusEventHandler_createClass(e,t,r){t&&WorkerSystemStatusEventHandler_defineProperties(e.prototype,t),r&&WorkerSystemStatusEventHandler_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(WorkerSystemStatusEventHandler,[{key:"_handle",value:function _handle(e){this._logger.debug("Sending new HeartBeatStatusEvent - ".concat(e.category,", ").concat(e.status)),this._mainCommunicator.sendAsync(u,e)}}]),WorkerSystemStatusEventHandler}();function LogBridge_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Pe=function(){function LogBridge(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";!function LogBridge_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,LogBridge),this.sn=0,this.url=t,this.logAggregator=e,this.msgPrefix=r}return function LogBridge_createClass(e,t,r){t&&LogBridge_defineProperties(e.prototype,t),r&&LogBridge_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(LogBridge,[{key:"log",value:function log(e,t){this.logAggregator.add({eventName:"log",data:{msg:this.msgPrefix+e,url:this.url,level:t,sn:this.sn++}})}},{key:"setLogLevel",value:function setLogLevel(e){this.logAggregator instanceof te&&this.logAggregator.setLogLevel(e)}},{key:"clearLogEntriesByLogLevel",value:function clearLogEntriesByLogLevel(e){this.logAggregator.filterOutByLogLevel(e)}}]),LogBridge}();function RetryMessage_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Me=function(){function RetryMessage(e){!function RetryMessage_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,RetryMessage),this.currentMessageNumberOfSendFailures=0,this.reMessageSettings=e,this.currentInterval=this.getMessageRetryInterval()}return function RetryMessage_createClass(e,t,r){t&&RetryMessage_defineProperties(e.prototype,t),r&&RetryMessage_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(RetryMessage,[{key:"restartMessageSettings",value:function restartMessageSettings(){this.currentMessageNumberOfSendFailures=0,this.currentInterval=this.getMessageRetryInterval()}},{key:"updateSettings",value:function updateSettings(e){this.reMessageSettings=e}},{key:"updateAllSettings",value:function updateAllSettings(e){e.init(),this.reMessageSettings=e}},{key:"getNumberOfSendFailures",value:function getNumberOfSendFailures(){return this.currentMessageNumberOfSendFailures}},{key:"getNextInterval",value:function getNextInterval(){return this.currentInterval}},{key:"getMessageNumToRetry",value:function getMessageNumToRetry(){return this.reMessageSettings.getMessageNumToRetry()}},{key:"getMessageRetryInterval",value:function getMessageRetryInterval(){return this.reMessageSettings.getMessageRetryInterval()}},{key:"getMaxIntervalBetweenFailures",value:function getMaxIntervalBetweenFailures(){return this.reMessageSettings.getMaxIntervalBetweenFailures()}},{key:"getIncrementalGrowthBetweenFailures",value:function getIncrementalGrowthBetweenFailures(){return this.reMessageSettings.getIncrementalGrowthBetweenFailures()}},{key:"_incrementNumberOfSendFailures",value:function _incrementNumberOfSendFailures(){this.currentMessageNumberOfSendFailures++}},{key:"shouldReMessage",value:function shouldReMessage(e){return e||this.getNumberOfSendFailures()<this.getMessageNumToRetry()}},{key:"updateRetryInterval",value:function updateRetryInterval(){var e=this.currentInterval+this.currentMessageNumberOfSendFailures*this.getIncrementalGrowthBetweenFailures();e>this.getMaxIntervalBetweenFailures()?this.currentInterval=this.getMaxIntervalBetweenFailures():this.currentInterval=e,this._incrementNumberOfSendFailures()}}]),RetryMessage}();function WorkerServerRestoredMuidEventHandler_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ae=function(){function WorkerServerRestoredMuidEventHandler(e,t){!function WorkerServerRestoredMuidEventHandler_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WorkerServerRestoredMuidEventHandler),this._messageBus=e,this._mainCommunicator=t,this._messageBus.subscribe(oe.ServerRestoredMuidEvent,this._handler.bind(this),!0)}return function WorkerServerRestoredMuidEventHandler_createClass(e,t,r){t&&WorkerServerRestoredMuidEventHandler_defineProperties(e.prototype,t),r&&WorkerServerRestoredMuidEventHandler_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(WorkerServerRestoredMuidEventHandler,[{key:"_handler",value:function _handler(e){this._mainCommunicator.sendAsync(c,e)}}]),WorkerServerRestoredMuidEventHandler}();function WorkerStateUpdateFromStorage_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var De=function(){function WorkerStateUpdateFromStorage(e,t){!function WorkerStateUpdateFromStorage_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WorkerStateUpdateFromStorage),this._mainCommunicator=e,this._wupServerSessionState=t,this._mainCommunicator.addMessageListener(Ce.stateUpdateFromStorage,this._handle.bind(this))}return function WorkerStateUpdateFromStorage_createClass(e,t,r){t&&WorkerStateUpdateFromStorage_defineProperties(e.prototype,t),r&&WorkerStateUpdateFromStorage_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(WorkerStateUpdateFromStorage,[{key:"_handle",value:function _handle(e){null!=e&&e.requestId&&(null!=e&&e.ott||null!=e&&e.sts)&&(this._wupServerSessionState.setRequestId(e.requestId,!1),this._wupServerSessionState.setOtt(e.ott),this._wupServerSessionState.setSts(e.sts),this._wupServerSessionState.setStd(e.std))}}]),WorkerStateUpdateFromStorage}();function WorkerServerNewAgentId_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ie=function(){function WorkerServerNewAgentId(e,t){!function WorkerServerNewAgentId_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WorkerServerNewAgentId),this._messageBus=e,this._mainCommunicator=t,this._messageBus.subscribe(oe.ServerNewAgentIdEvent,this._handle.bind(this))}return function WorkerServerNewAgentId_createClass(e,t,r){t&&WorkerServerNewAgentId_defineProperties(e.prototype,t),r&&WorkerServerNewAgentId_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(WorkerServerNewAgentId,[{key:"_handle",value:function _handle(e){this._mainCommunicator.sendAsync(l,e)}}]),WorkerServerNewAgentId}();function WorkerSysLoader_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var We=function(){function WorkerSysLoader(e,t){!function WorkerSysLoader_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WorkerSysLoader),this._mainCommunicator=e,this._msgBus=t,this._eventHandlers=[]}return function WorkerSysLoader_createClass(e,t,r){t&&WorkerSysLoader_defineProperties(e.prototype,t),r&&WorkerSysLoader_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(WorkerSysLoader,[{key:"loadSystem",value:function loadSystem(){var t=this;this._configurationRepository=new d,this._wupServerSessionState=new v,this._logRequestBodyBuilder=new y,this._configurationWrapperLogMessage=new j(this._configurationRepository),this._logReMessageSettings=this._configurationWrapperLogMessage.createReMessageSettings(),this._logRetryMessage=new Me(this._logReMessageSettings),this._logServerCommunicator=new C(this._logRequestBodyBuilder,this._configurationRepository.get(o.serverCommunicationSettings),Re,this._logRetryMessage,!0,"log"),this._logMessageBuilder=new B(new M),this._logServerClient=new X(this._logServerCommunicator,this._logMessageBuilder,this._configurationRepository),this._wupStatisticsService=new G(this._configurationRepository.get(o.wupStatisticsLogIntervalMs)),this._wupDispatchRateCalculatorFactory=new $(this._wupStatisticsService,this._wupServerSessionState);var e=new te;this._logDataDispatcher=new ee(this._logServerClient,e,this._wupDispatchRateCalculatorFactory,this._configurationRepository.get(o.logWupDispatchRateSettings));var r=new Pe(e,"worker");this._logMessageProcessor=new re(this._logDataDispatcher);e=new _(r);g.setLogger(e),this._wupMessageBuilder=new se(this._wupServerSessionState,new M),this._wupRequestBodyBuilder=new ae(this._wupServerSessionState),this._configurationWrapperWupMessage=new _e(this._configurationRepository),this._wupReMessageSettings=this._configurationWrapperWupMessage.createReMessageSettings(),this._wupRetryMessage=new Me(this._wupReMessageSettings),this._dataServerCommunicator=new C(this._wupRequestBodyBuilder,this._configurationRepository.get(o.serverCommunicationSettings),Re,this._wupRetryMessage,!1,"wup"),this._wupResponseProcessor=new ue(this._wupServerSessionState,this._msgBus,this._configurationRepository),this._wupServerClient=new ye(this._dataServerCommunicator,this._wupMessageBuilder,this._wupServerSessionState,this._wupStatisticsService,this._wupResponseProcessor,this._configurationRepository,this._msgBus);r=this._configurationRepository.get(o.forceDynamicDataWupDispatchSettings)?h.defaultDynamicWupDispatchRateConfiguration:this._configurationRepository.get(o.dataWupDispatchRateSettings);this._dataDispatcher=new ee(this._wupServerClient,new me(this._wupServerSessionState),this._wupDispatchRateCalculatorFactory,r),this._messageProcessor=new re(this._dataDispatcher),this._eventHandlers.push(new we(this._msgBus,this._wupStatisticsService,this._dataDispatcher,this._logDataDispatcher,this._dataServerCommunicator,this._wupServerClient,this._logServerClient,e,this._mainCommunicator)),this._eventHandlers.push(new Se(this._msgBus,e,this._mainCommunicator)),this._eventHandlers.push(new be(this._msgBus,e,this._mainCommunicator)),this._eventHandlers.push(new ke(this._msgBus,this._dataDispatcher,e)),this._eventHandlers.push(new xe(this._mainCommunicator,this._msgBus,e)),this._eventHandlers.push(new Ae(this._msgBus,this._mainCommunicator)),this._eventHandlers.push(new De(this._mainCommunicator,this._wupServerSessionState)),this._eventHandlers.push(new Ie(this._msgBus,this._mainCommunicator)),this._wupServerSessionState.onServerStateUpdated.subscribe(function(e){t._mainCommunicator.sendAsync(a,e)}),this._workerService=new Ee(this._mainCommunicator,this._wupServerClient,this._logServerClient,this._configurationRepository,this._messageProcessor,this._logMessageProcessor,this._wupServerSessionState,this._dataServerCommunicator),this._workerService.start(),g.info("Loaded worker")}}]),WorkerSysLoader}();function MessageBus_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Te=function(){function MessageBus(){!function MessageBus_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MessageBus),this.subscribers=t()}return function MessageBus_createClass(e,t,r){t&&MessageBus_defineProperties(e.prototype,t),r&&MessageBus_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(MessageBus,[{key:"subscribe",value:function subscribe(e,t){var r,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=!1;this.subscribers.has(e)?(r=this.subscribers.get(e))&&r.forEach(function(e){t===e.handler&&(i=!0)}):(r=B6(),this.subscribers.set(e,r)),i||r.add({handler:t,isOneTime:n})}},{key:"unsubscribe",value:function unsubscribe(e,t){var r;e&&this.subscribers.has(e)&&((r=this.subscribers.get(e))&&r.forEach(function(e){t===e.handler&&r.delete(e)}),0===r.size&&this.subscribers.delete(e))}},{key:"publish",value:function publish(e,t){if(!e)throw new Error("invalid argument messageType must be defined");this._notifySubscribers(e,t)}},{key:"_notifySubscribers",value:function _notifySubscribers(e,t){var r=this.subscribers.get(e);r&&r.forEach(function(e){e.handler(t),e.isOneTime&&r.delete(e)})}}]),MessageBus}();function CDPort_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Le=function(){function CDPort(e){!function CDPort_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CDPort),this._portNativeWorker=e}return function CDPort_createClass(e,t,r){t&&CDPort_defineProperties(e.prototype,t),r&&CDPort_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(CDPort,[{key:"postMessage",value:function postMessage(){this._portNativeWorker.postMessage.apply(this._portNativeWorker,arguments)}},{key:"close",value:function close(){this._portNativeWorker.terminate()}},{key:"setonmessage",value:function setonmessage(e){this._portNativeWorker.onmessage=e}}]),CDPort}();function WorkerStartPoint_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ue=function(){function WorkerStartPoint(){!function WorkerStartPoint_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WorkerStartPoint)}return function WorkerStartPoint_createClass(e,t,r){t&&WorkerStartPoint_defineProperties(e.prototype,t),r&&WorkerStartPoint_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(WorkerStartPoint,[{key:"start",value:function start(){var e=new i,t=new Te,r=new We(e,t);this._loadWorkerSystem(e,t,r,new Le(self))}},{key:"_loadWorkerSystem",value:function _loadWorkerSystem(e,t,r,n){try{e.setMessagingPort(n),r.loadSystem(),t.publish(oe.WorkerSystemStatusEvent,new ge(ce,de))}catch(e){t.publish(oe.WorkerSystemStatusEvent,new ge(ce,pe))}}}]),WorkerStartPoint}();function Application_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(new(function(){function Application(){!function Application_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Application),function apply(e){"undefined"==typeof TextEncoder&&(e.TextEncoder=function TextEncoder(){},TextEncoder.prototype.encode=function(e){for(var t=[],r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t.push(n):n<2048?t.push(192|n>>6,128|63&n):n<55296||57344<=n?t.push(224|n>>12,128|n>>6&63,128|63&n):(r++,n=65536+((1023&n)<<10|1023&e.charCodeAt(r)),t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return new Uint8Array(t)})}(self)}return function Application_createClass(e,t,r){t&&Application_defineProperties(e.prototype,t),r&&Application_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(Application,[{key:"start",value:function start(){(new Ue).start()}}]),Application}())).start()}()}();',
                        null
                    );
                };
            },
            855: function (e) {
                'use strict';
                var o = window.URL || window.webkitURL;
                e.exports = function (t, r) {
                    try {
                        try {
                            var n;
                            try {
                                (n = new (window.BlobBuilder ||
                                    window.WebKitBlobBuilder ||
                                    window.MozBlobBuilder ||
                                    window.MSBlobBuilder)()).append(t),
                                    (n = n.getBlob());
                            } catch (e) {
                                n = new Blob([t]);
                            }
                            return new Worker(o.createObjectURL(n));
                        } catch (e) {
                            return new Worker('data:application/javascript,' + encodeURIComponent(t));
                        }
                    } catch (e) {
                        if (!r) throw Error('Inline worker is not supported');
                        return new Worker(r);
                    }
                };
            },
        },
        n = {};
    function __webpack_require__(e) {
        var t = n[e];
        if (void 0 !== t) return t.exports;
        t = n[e] = { exports: {} };
        return r[e](t, t.exports, __webpack_require__), t.exports;
    }
    (__webpack_require__.amdO = {}),
        (__webpack_require__.n = function (e) {
            var t =
                e && e.__esModule
                    ? function () {
                          return e.default;
                      }
                    : function () {
                          return e;
                      };
            return __webpack_require__.d(t, { a: t }), t;
        }),
        (__webpack_require__.d = function (e, t) {
            for (var r in t)
                __webpack_require__.o(t, r) &&
                    !__webpack_require__.o(e, r) &&
                    Object.defineProperty(e, r, { enumerable: !0, get: t[r] });
        }),
        (__webpack_require__.o = function (e, t) {
            return Object.prototype.hasOwnProperty.call(e, t);
        }),
        (__webpack_require__.r = function (e) {
            'undefined' != typeof Symbol &&
                Symbol.toStringTag &&
                Object.defineProperty(e, Symbol.toStringTag, { value: 'Module' }),
                Object.defineProperty(e, '__esModule', { value: !0 });
        });
    var e = {};
    !(function () {
        'use strict';
        __webpack_require__.r(e), new (__webpack_require__(627).default.Application)().start();
    })(),
        (cdwpb = e);
})();
